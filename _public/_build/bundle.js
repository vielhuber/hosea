(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Auth = _interopRequireDefault(require("./Auth"));
var _Attachments = _interopRequireDefault(require("./Attachments"));
var _Footer = _interopRequireDefault(require("./Footer"));
var _Filter = _interopRequireDefault(require("./Filter"));
var _Html = _interopRequireDefault(require("./Html"));
var _Keyboard = _interopRequireDefault(require("./Keyboard"));
var _Scheduler = _interopRequireDefault(require("./Scheduler"));
var _Quickbox = _interopRequireDefault(require("./Quickbox"));
var _Sort = _interopRequireDefault(require("./Sort"));
var _Store = _interopRequireDefault(require("./Store"));
var _Textarea = _interopRequireDefault(require("./Textarea"));
var _Tickets = _interopRequireDefault(require("./Tickets"));
var _User = _interopRequireDefault(require("./User"));
var _Weather = _interopRequireDefault(require("./Weather"));
var App = /*#__PURE__*/function () {
  function App() {
    (0, _classCallCheck2["default"])(this, App);
  }
  (0, _createClass2["default"])(App, null, [{
    key: "init",
    value: function () {
      var _init = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _Store["default"].initStore();
              _context.next = 3;
              return _Auth["default"].login();
            case 3:
              _context.next = 5;
              return _User["default"].fetchUser();
            case 5:
              _Html["default"].buildHtml();
              _context.next = 8;
              return _Tickets["default"].fetchAndRenderTickets();
            case 8:
              _context.next = 10;
              return _Weather["default"].fetchWeather();
            case 10:
              _Tickets["default"].fetchAndRenderTicketsInterval();
              _Keyboard["default"].initKeyboardNavigation();
              _Scheduler["default"].initScheduler();
              _Quickbox["default"].initQuickbox();
              _Quickbox["default"].bindQuickbox();
              // currently disabled, because we use both columns independently
              //Tickets.bindAutoTime();
              _Tickets["default"].bindChangeTracking();
              _Tickets["default"].bindValidation();
              _Attachments["default"].bindUpload();
              _Attachments["default"].bindDownload();
              _Attachments["default"].bindDeleteAttachment();
              _Tickets["default"].bindDelete();
              _Tickets["default"].bindSave();
              _Footer["default"].bindSave();
              _Footer["default"].bindCreate();
              _Footer["default"].bindLogout();
              _Footer["default"].linkApiKey();
              _Footer["default"].initStatus();
              _Keyboard["default"].bindRefresh();
              _Tickets["default"].bindCreate();
              _Scheduler["default"].bindScheduler();
              _Sort["default"].initSort();
              _Filter["default"].initFilter();
              _Scheduler["default"].updateColors();
              _Tickets["default"].updateSum();
              _Textarea["default"].textareaAutoHeight();
            case 35:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }]);
  return App;
}();
exports["default"] = App;

},{"./Attachments":2,"./Auth":3,"./Filter":5,"./Footer":6,"./Html":8,"./Keyboard":9,"./Quickbox":11,"./Scheduler":12,"./Sort":13,"./Store":14,"./Textarea":15,"./Tickets":16,"./User":17,"./Weather":18,"@babel/runtime/helpers/asyncToGenerator":23,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/regenerator":39}],2:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Helper = _interopRequireDefault(require("./Helper"));
var _Html = _interopRequireDefault(require("./Html"));
var _Lock = _interopRequireDefault(require("./Lock"));
var _Store = _interopRequireDefault(require("./Store"));
var _Tickets = _interopRequireDefault(require("./Tickets"));
var _Footer = _interopRequireDefault(require("./Footer"));
var _Dates = _interopRequireDefault(require("./Dates"));
var Attachments = /*#__PURE__*/function () {
  function Attachments() {
    (0, _classCallCheck2["default"])(this, Attachments);
  }
  (0, _createClass2["default"])(Attachments, null, [{
    key: "bindDownload",
    value: function bindDownload() {
      document.querySelector('.tickets').addEventListener('click', function (e) {
        if (e.target.closest('.tickets__attachment-download')) {
          Attachments.startDownload(e.target.closest('.tickets__attachment').getAttribute('data-id'));
          e.preventDefault();
        }
      });
    }
  }, {
    key: "startDownload",
    value: function startDownload(attachment_id) {
      _Store["default"].data.busy = true;
      _Store["default"].data.api.fetch('_api/attachments/' + attachment_id, {
        method: 'GET',
        cache: 'no-cache',
        headers: {
          'content-type': 'application/json'
        }
      }).then(function (res) {
        return res.json();
      })["catch"](function (err) {
        console.error(err);
      }).then(function (response) {
        _Store["default"].data.busy = false;
        var base64 = response.data.data,
          filename = response.data.name,
          url = hlp.base64tourl(base64);
        var a = document.createElement('a');
        a.setAttribute('style', 'display:none');
        a.setAttribute('download', filename);
        a.setAttribute('href', url);
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
        a.remove();
      });
    }
  }, {
    key: "bindUpload",
    value: function bindUpload() {
      document.querySelector('.tickets').addEventListener('change', function (e) {
        if (e.target.closest('.tickets__entry input[type="file"]')) {
          Attachments.startUploadsAndBuildHtml(e.target.closest('.tickets__entry').getAttribute('data-id'), e.target.files);
        }
      });
    }
  }, {
    key: "startUploadsAndBuildHtml",
    value: function startUploadsAndBuildHtml(ticket_id, files) {
      Attachments.startUploads(ticket_id, files).then(function (attachments) {
        var el = document.querySelector('.tickets .tickets__entry[data-id="' + ticket_id + '"] input[type="file"]');
        el.value = '';
        attachments.forEach(function (attachments__value) {
          el.closest('.tickets__entry').querySelector('.tickets__attachments').insertAdjacentHTML('beforeend', _Html["default"].createHtmlDownloadLine(attachments__value));
        });
      })["catch"](function (error) {
        console.error(error);
      });
    }
  }, {
    key: "startUploads",
    value: function () {
      var _startUploads = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(ticket_id, files) {
        var attachments, _i, _Array$from, files__value, attachment;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              attachments = [];
              _i = 0, _Array$from = Array.from(files);
            case 2:
              if (!(_i < _Array$from.length)) {
                _context.next = 13;
                break;
              }
              files__value = _Array$from[_i];
              _Lock["default"].lockTicket(ticket_id);
              _context.next = 7;
              return Attachments.startUpload(ticket_id, files__value);
            case 7:
              attachment = _context.sent;
              _Lock["default"].unlockTicket(ticket_id, true);
              if (attachment !== null) {
                attachments.push(attachment);
              }
            case 10:
              _i++;
              _context.next = 2;
              break;
            case 13:
              _context.next = 15;
              return _Tickets["default"].updateLocalTicket(ticket_id);
            case 15:
              return _context.abrupt("return", attachments);
            case 16:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function startUploads(_x, _x2) {
        return _startUploads.apply(this, arguments);
      }
      return startUploads;
    }()
  }, {
    key: "startUpload",
    value: function startUpload(ticket_id, file) {
      return new Promise(function (resolve, reject) {
        if (file.size / 1024 / 1024 > 5) {
          _Footer["default"].updateStatus('size gt 5 mb!', 'error');
          resolve(null);
          return;
        }
        _Helper["default"].fileToBase64(file).then(function (base64) {
          _Store["default"].data.busy = true;
          _Store["default"].data.api.fetch('_api/attachments', {
            method: 'POST',
            body: JSON.stringify({
              name: file.name,
              data: base64,
              ticket_id: ticket_id
            }),
            cache: 'no-cache',
            headers: {
              'content-type': 'application/json'
            }
          }).then(function (res) {
            return res.json();
          })["catch"](function (err) {
            console.error(err);
          }).then(function (response) {
            _Store["default"].data.busy = false;
            var updated_at = _Dates["default"].time().toString();
            _Tickets["default"].setTicketData(ticket_id, 'updated_at', updated_at);
            _Store["default"].data.busy = true;
            _Store["default"].data.api.fetch('_api/tickets/' + ticket_id, {
              method: 'PUT',
              body: JSON.stringify({
                updated_at: updated_at
              }),
              cache: 'no-cache',
              headers: {
                'content-type': 'application/json'
              }
            }).then(function (res) {
              return res.json();
            })["catch"](function (err) {
              console.error(err);
            }).then(function (response) {
              _Store["default"].data.busy = false;
            });
            resolve(response.data);
          });
        });
      });
    }
  }, {
    key: "bindDeleteAttachment",
    value: function bindDeleteAttachment() {
      document.querySelector('.tickets').addEventListener('click', function (e) {
        if (e.target.closest('.tickets__attachment-delete')) {
          var ticket_id = e.target.closest('.tickets__entry').getAttribute('data-id');
          if (_Lock["default"].ticketIsLocked(ticket_id)) {
            e.preventDefault();
          }
          var attachment_id = e.target.closest('.tickets__attachment').getAttribute('data-id');
          _Store["default"].data.busy = true;
          _Store["default"].data.api.fetch('_api/attachments/' + attachment_id, {
            method: 'DELETE',
            cache: 'no-cache',
            headers: {
              'content-type': 'application/json'
            }
          }).then(function (res) {
            return res.json();
          })["catch"](function (err) {
            console.error(err);
          }).then(function (response) {
            _Store["default"].data.busy = false;
            var updated_at = _Dates["default"].time().toString();
            _Tickets["default"].setTicketData(ticket_id, 'updated_at', updated_at);
            _Store["default"].data.busy = true;
            _Store["default"].data.api.fetch('_api/tickets/' + ticket_id, {
              method: 'PUT',
              body: JSON.stringify({
                updated_at: updated_at
              }),
              cache: 'no-cache',
              headers: {
                'content-type': 'application/json'
              }
            }).then(function (res) {
              return res.json();
            })["catch"](function (err) {
              console.error(err);
            }).then(function (response) {
              _Store["default"].data.busy = false;
            });
            e.target.closest('.tickets__attachment').remove();
          });
          e.preventDefault();
        }
      });
    }
  }]);
  return Attachments;
}();
exports["default"] = Attachments;

},{"./Dates":4,"./Footer":6,"./Helper":7,"./Html":8,"./Lock":10,"./Store":14,"./Tickets":16,"@babel/runtime/helpers/asyncToGenerator":23,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/regenerator":39}],3:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var _jwtbutler = _interopRequireDefault(require("jwtbutler"));
var Auth = /*#__PURE__*/function () {
  function Auth() {
    (0, _classCallCheck2["default"])(this, Auth);
  }
  (0, _createClass2["default"])(Auth, null, [{
    key: "login",
    value: function login() {
      _Store["default"].data.api = new _jwtbutler["default"]({
        auth_server: '_auth'
      });
      return _Store["default"].data.api.login();
    }
  }, {
    key: "logout",
    value: function logout() {
      return _Store["default"].data.api.logout();
    }
  }]);
  return Auth;
}();
exports["default"] = Auth;

},{"./Store":14,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"jwtbutler":42}],4:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var Dates = /*#__PURE__*/function () {
  function Dates() {
    (0, _classCallCheck2["default"])(this, Dates);
  }
  (0, _createClass2["default"])(Dates, null, [{
    key: "getCurrentDate",
    value: function getCurrentDate() {
      return new Date();
    }
  }, {
    key: "getActiveDate",
    value: function getActiveDate() {
      return _Store["default"].data.session.activeDay;
    }
  }, {
    key: "getDayOfActiveWeek",
    value: function getDayOfActiveWeek(shift) {
      return Dates.getDayOfWeek(shift, _Store["default"].data.session.activeDay);
    }
  }, {
    key: "getDayOfCurrentWeek",
    value: function getDayOfCurrentWeek(shift) {
      return Dates.getDayOfWeek(shift, this.getCurrentDate());
    }
  }, {
    key: "getDayOfWeek",
    value: function getDayOfWeek(shift, date) {
      var d = new Date(date),
        day = d.getDay(),
        diff = d.getDate() - day + (day == 0 ? -6 : 1) + (shift - 1);
      return new Date(d.setDate(diff));
    }
  }, {
    key: "parseDateString",
    value: function parseDateString(string, view) {
      var _this = this;
      if (!['tickets', 'scheduler', 'today', 'all'].includes(view)) {
        return false;
      }
      if (string == '') {
        return [];
      }
      var ret = [],
        error = false,
        d;
      string.split('\n').forEach(function (string__value) {
        // 01.01.18
        // 01.01.18 09:00-10:00
        if (new RegExp('^[0-9][0-9].[0-9][0-9].[1-2][0-9]( [0-9][0-9]:[0-9][0-9]-[0-9][0-9]:[0-9][0-9])?$').test(string__value)) {
          d = new Date('20' + string__value.substring(6, 8) + '-' + string__value.substring(3, 5) + '-' + string__value.substring(0, 2));
          if (isNaN(d)) {
            error = true;
            return;
          }
          if (view === 'tickets' && Dates.dateIsActiveDay(d) || view === 'scheduler' && Dates.dateIsInActiveWeek(d) || view === 'today' && Dates.dateIsToday(d) || view === 'all') {
            var begin = string__value.length > 8 ? parseInt(string__value.substring(9, 11)) + parseInt(string__value.substring(12, 14)) / 60 : null,
              end = string__value.length > 8 ? parseInt(string__value.substring(15, 17)) + parseInt(string__value.substring(18, 20)) / 60 : null;
            if (end === 0) {
              end = 24;
            }
            d.setHours(Math.floor(begin === null ? 0 : begin));
            d.setMinutes((begin === null ? 0 : begin) % 1 * 60);
            d.setSeconds(0);
            d.setMilliseconds(0);
            ret.push({
              date: d,
              day: (d.getDay() + 6) % 7 + 1,
              begin: begin,
              end: end,
              time: end - begin,
              minutes_left: _this.dateDiffInMinutes(d, new Date())
            });
          }
        }

        // MO [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // MO 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // MO#1 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // MO#12 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // MO~1 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // MO~12 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // MO%2 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        else if (new RegExp('^(MO|DI|MI|DO|FR|SA|SO)((#|~|%)[1-9][0-9]?)?( [0-9][0-9]:[0-9][0-9]-[0-9][0-9]:[0-9][0-9])?( (-|>|<)[0-9][0-9].[0-9][0-9].[1-2][0-9])*$').test(string__value)) {
          if (view === 'today') {
            d = Dates.getDayOfCurrentWeek(Dates.getDayFromString(string__value.substring(0, 2)));
          } else {
            d = Dates.getDayOfActiveWeek(Dates.getDayFromString(string__value.substring(0, 2)));
          }
          if (isNaN(d)) {
            error = true;
            return;
          }
          if (view !== 'all' && Dates.dateIsExcluded(d, string__value)) {
            return;
          }
          if (view !== 'all' && string__value.substring(2, 3) === '#') {
            var num = parseInt(string__value.substring(3, 5).trim()),
              nthWeekdayOfMonth = _this.nthWeekdayOfMonth(d);
            if (num % 4 !== nthWeekdayOfMonth) {
              return;
            }
            if ((d.getMonth() + 1) % (Math.floor((num - 1) / 4) + 1) !== 0) {
              return;
            }
          }
          if (view !== 'all' && string__value.substring(2, 3) === '~') {
            var _num = parseInt(string__value.substring(3, 5).trim()),
              weekNumber = _this.weekNumber(d);
            if (_num != weekNumber) {
              return;
            }
          }
          if (view !== 'all' && string__value.substring(2, 3) === '%') {
            var _num2 = parseInt(string__value.substring(3, 5).trim()),
              _weekNumber = _this.weekNumber(d),
              match = string__value.match(/>([0-9][0-9]\.[0-9][0-9]\.[0-9][0-9])/i);
            if (match) {
              _weekNumber -= _this.weekNumber(new Date(Dates.germanToEnglishString(match[1])));
            }
            if (_weekNumber % _num2 !== 0) {
              return;
            }
          }
          if (view === 'tickets' && Dates.dateIsActiveDay(d) || view === 'scheduler' && Dates.dateIsInActiveWeek(d) || view === 'today' && Dates.dateIsToday(d) || view === 'all') {
            var _begin = null,
              _end = null;
            if (string__value.split(':').length === 3) {
              var shift = string__value.indexOf(':') - 2;
              _begin = parseInt(string__value.substring(shift, shift + 2)) + parseInt(string__value.substring(shift + 3, shift + 5)) / 60;
              _end = parseInt(string__value.substring(shift + 6, shift + 8)) + parseInt(string__value.substring(shift + 9, shift + 11)) / 60;
            }
            if (_end === 0) {
              _end = 24;
            }
            d.setHours(Math.floor(_begin));
            d.setMinutes(_begin % 1 * 60);
            d.setSeconds(0);
            d.setMilliseconds(0);
            ret.push({
              date: d,
              day: (d.getDay() + 6) % 7 + 1,
              begin: _begin,
              end: _end,
              time: _end - _begin,
              minutes_left: _this.dateDiffInMinutes(d, new Date())
            });
          }
        }

        // 01.01. [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        // 01.01. 09:00-10:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]
        else if (new RegExp('^[0-9][0-9].[0-9][0-9].( [0-9][0-9]:[0-9][0-9]-[0-9][0-9]:[0-9][0-9])?( (-|>|<)[0-9][0-9].[0-9][0-9].[1-2][0-9])*$').test(string__value)) {
          var year = null;
          if (view === 'today') {
            year = Dates.getCurrentDate().getFullYear();
          } else {
            year = Dates.getActiveDate().getFullYear();
          }
          // exception on year change
          if (Dates.weekNumber(Dates.getActiveDate()) === 1 && Dates.getActiveDate().getMonth() + 1 != string__value.substring(3, 5)) {
            year--;
          }
          d = new Date(year + '-' + string__value.substring(3, 5) + '-' + string__value.substring(0, 2));
          if (isNaN(d)) {
            error = true;
            return;
          }
          if (view !== 'all' && Dates.dateIsExcluded(d, string__value)) {
            return;
          }
          if (view === 'tickets' && Dates.dateIsActiveDay(d) || view === 'scheduler' && Dates.dateIsInActiveWeek(d) || view === 'today' && Dates.dateIsToday(d) || view === 'all') {
            var _begin2 = null,
              _end2 = null;
            if (string__value.split(':').length === 3) {
              var _shift = string__value.indexOf(':') - 2;
              _begin2 = parseInt(string__value.substring(_shift, _shift + 2)) + parseInt(string__value.substring(_shift + 3, _shift + 5)) / 60;
              _end2 = parseInt(string__value.substring(_shift + 6, _shift + 8)) + parseInt(string__value.substring(_shift + 9, _shift + 11)) / 60;
            }
            if (_end2 === 0) {
              _end2 = 24;
            }
            d.setHours(Math.floor(_begin2));
            d.setMinutes(_begin2 % 1 * 60);
            d.setSeconds(0);
            d.setMilliseconds(0);
            ret.push({
              date: d,
              day: (d.getDay() + 6) % 7 + 1,
              begin: _begin2,
              end: _end2,
              time: _end2 - _begin2,
              minutes_left: _this.dateDiffInMinutes(d, new Date())
            });
          }
        } else {
          error = true;
          return;
        }
      });
      if (error === true) {
        return false;
      }
      return ret;
    }
  }, {
    key: "germanToEnglishString",
    value: function germanToEnglishString(str) {
      return '20' + str.substring(6, 8) + '-' + str.substring(3, 5) + '-' + str.substring(0, 2);
    }
  }, {
    key: "germanDateTimeToEnglishString",
    value: function germanDateTimeToEnglishString(str) {
      return '20' + str.substring(6, 8) + '-' + str.substring(3, 5) + '-' + str.substring(0, 2) + str.substring(9);
    }
  }, {
    key: "dateFormat",
    value: function dateFormat(d, format) {
      if (format === 'D d.m.') {
        return ['SO', 'MO', 'DI', 'MI', 'DO', 'FR', 'SA'][d.getDay()] + ' ' + ('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.';
      }
      if (format === 'd. F Y') {
        return ('0' + d.getDate()).slice(-2) + '. ' + ['Januar', 'Februar', 'MÃ¤rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'][d.getMonth()] + ' ' + d.getFullYear();
      }
      if (format === 'Y-m-d') {
        return d.getFullYear() + '-' + ('0' + (d.getMonth() + 1)).slice(-2) + '-' + ('0' + d.getDate()).slice(-2);
      }
      if (format === 'd.m.Y') {
        return ('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.' + d.getFullYear();
      }
      if (format === 'd.m.y') {
        return ('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.' + d.getFullYear().toString().substring(2, 4);
      }
      if (format === 'd.m.') {
        return ('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.';
      }
      if (format === 'D H:i') {
        return ['SO', 'MO', 'DI', 'MI', 'DO', 'FR', 'SA'][d.getDay()] + ' ' + ('0' + d.getHours()).slice(-2) + ':' + ('0' + d.getMinutes()).slice(-2);
      }
      if (format === 'H:i') {
        return ('0' + d.getHours()).slice(-2) + ':' + ('0' + d.getMinutes()).slice(-2);
      }
      return ('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.' + d.getFullYear() + ' ' + ('0' + d.getHours()).slice(-2) + ':' + ('0' + d.getMinutes()).slice(-2) + ':' + ('0' + d.getSeconds()).slice(-2);
    }
  }, {
    key: "timeFormat",
    value: function timeFormat(_float) {
      var hours = Math.floor(_float),
        minutes = _float % 1 * 60;
      return ('0' + hours).slice(-2) + ':' + ('0' + minutes).slice(-2);
    }
  }, {
    key: "dateIsInActiveWeek",
    value: function dateIsInActiveWeek(d) {
      if (d === null || d === '') {
        return false;
      }
      d = new Date(d);
      return Dates.sameDay(Dates.getDayOfWeek(1, d), Dates.getDayOfActiveWeek(1));
    }
  }, {
    key: "dateIsActiveDay",
    value: function dateIsActiveDay(d) {
      if (d === null || d === '') {
        return false;
      }
      d = new Date(d);
      return Dates.sameDay(d, Dates.getActiveDate());
    }
  }, {
    key: "dateIsInFuture",
    value: function dateIsInFuture(d) {
      if (d === null || d === '') {
        return false;
      }
      var d1 = new Date(d),
        d2 = new Date();
      d1.setHours(0);
      d1.setMinutes(0);
      d1.setSeconds(0);
      d1.setMilliseconds(0);
      d2.setHours(0);
      d2.setMinutes(0);
      d2.setSeconds(0);
      d2.setMilliseconds(0);
      return d1 > d2;
    }
  }, {
    key: "dateIsToday",
    value: function dateIsToday(d) {
      if (d === null || d === '') {
        return false;
      }
      var d1 = new Date(d),
        d2 = new Date();
      return d1.getDate() === d2.getDate() && d1.getMonth() === d2.getMonth() && d1.getFullYear() === d2.getFullYear();
    }
  }, {
    key: "dateIsInPast",
    value: function dateIsInPast(d) {
      if (d === null || d === '') {
        return false;
      }
      var d1 = new Date(d),
        d2 = new Date();
      d1.setHours(0);
      d1.setMinutes(0);
      d1.setSeconds(0);
      d1.setMilliseconds(0);
      d2.setHours(0);
      d2.setMinutes(0);
      d2.setSeconds(0);
      d2.setMilliseconds(0);
      return d1 < d2;
    }
  }, {
    key: "sameDay",
    value: function sameDay(d1, d2) {
      if (d1 === null || d1 === '') {
        return false;
      }
      d1 = new Date(d1);
      d2 = new Date(d2);
      return d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate();
    }
  }, {
    key: "compareDates",
    value: function compareDates(d1, d2) {
      if (d1.getFullYear() < d2.getFullYear()) {
        return -1;
      }
      if (d1.getFullYear() > d2.getFullYear()) {
        return 1;
      }
      if (d1.getMonth() < d2.getMonth()) {
        return -1;
      }
      if (d1.getMonth() > d2.getMonth()) {
        return 1;
      }
      if (d1.getDate() < d2.getDate()) {
        return -1;
      }
      if (d1.getDate() > d2.getDate()) {
        return 1;
      }
      return 0;
    }
  }, {
    key: "dateDiffInMinutes",
    value: function dateDiffInMinutes(d1, d2) {
      return Math.round((d1 - d2) / (1000 * 60));
    }
  }, {
    key: "weekNumber",
    value: function weekNumber(d) {
      d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
      var dayNum = d.getUTCDay() || 7;
      d.setUTCDate(d.getUTCDate() + 4 - dayNum);
      var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
      return Math.ceil(((d - yearStart) / 86400000 + 1) / 7);
    }
  }, {
    key: "isDate",
    value: function isDate(string) {
      return new Date(string) !== 'Invalid Date' && !isNaN(new Date(string));
    }
  }, {
    key: "getDayFromString",
    value: function getDayFromString(string) {
      return {
        MO: 1,
        DI: 2,
        MI: 3,
        DO: 4,
        FR: 5,
        SA: 6,
        SO: 7
      }[string];
    }
  }, {
    key: "getStringFromDay",
    value: function getStringFromDay(day) {
      return {
        1: MO,
        2: DI,
        3: MI,
        4: DO,
        5: FR,
        6: SA,
        7: SO
      }[day];
    }
  }, {
    key: "dateIsExcluded",
    value: function dateIsExcluded(d, str) {
      var ret = false;
      str.split(' ').forEach(function (value) {
        var excludedDate = new Date(Dates.germanToEnglishString(value.substring(1)));
        if (value.indexOf('-') === 0) {
          if (Dates.sameDay(excludedDate, d)) {
            ret = true;
          }
        }
        if (value.indexOf('>') === 0) {
          if (Dates.compareDates(excludedDate, d) !== -1) {
            ret = true;
          }
        }
        if (value.indexOf('<') === 0) {
          if (Dates.compareDates(excludedDate, d) !== 1) {
            ret = true;
          }
        }
      });
      return ret;
    }
  }, {
    key: "extractTimeFromDate",
    value: function extractTimeFromDate(d) {
      var match = d.match(new RegExp('[0-9][0-9]:[0-9][0-9]-[0-9][0-9]:[0-9][0-9]'));
      if (match !== null) {
        return match[0];
      }
      return '';
    }
  }, {
    key: "dayOfYear",
    value: function dayOfYear(date) {
      return (Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()) - Date.UTC(date.getFullYear(), 0, 0)) / 24 / 60 / 60 / 1000;
    }
  }, {
    key: "nthWeekdayOfMonth",
    value: function nthWeekdayOfMonth(date) {
      var c = date.getDate();
      return Math.floor((c - 1) / 7) + 1;
    }
  }, {
    key: "includeNewLowerBoundInDate",
    value: function includeNewLowerBoundInDate(date, lowerBound) {
      date = date.split('\n');
      date.forEach(function (date__value, date__key) {
        var match = date__value.match(new RegExp('>[0-9][0-9].[0-9][0-9].[1-2][0-9]', 'g')),
          isObsolete = false;
        if (match !== null) {
          match.forEach(function (match__value) {
            var curBound = new Date(Dates.germanToEnglishString(match__value.substring(1)));
            if (Dates.compareDates(lowerBound, curBound) === 1) {
              date__value = date__value.split(match__value).join('');
            } else {
              isObsolete = true;
            }
          });
        }
        date__value = date__value.replace(/ +(?= )/g, ''); // remove double whitespaces
        date__value = date__value.trim();
        if (isObsolete === false) {
          date__value = date__value + ' >' + Dates.dateFormat(Dates.getActiveDate(), 'd.m.y');
        }
        date[date__key] = date__value;
      });
      date = date.join('\n');
      return date;
    }
  }, {
    key: "time",
    value: function time() {
      return Math.floor(new Date().getTime() / 1000);
    }
  }]);
  return Dates;
}();
/* debug */
exports["default"] = Dates;
window.Dates = Dates;

},{"./Store":14,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27}],5:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Dates = _interopRequireDefault(require("./Dates"));
var _Tickets = _interopRequireDefault(require("./Tickets"));
var _Sort = _interopRequireDefault(require("./Sort"));
var _Store = _interopRequireDefault(require("./Store"));
var _Scheduler = _interopRequireDefault(require("./Scheduler"));
var _Textarea = _interopRequireDefault(require("./Textarea"));
var Filter = /*#__PURE__*/function () {
  function Filter() {
    (0, _classCallCheck2["default"])(this, Filter);
  }
  (0, _createClass2["default"])(Filter, null, [{
    key: "initFilter",
    value: function initFilter() {
      Filter.initUpdateFilter(false);
    }
  }, {
    key: "updateFilter",
    value: function updateFilter() {
      Filter.initUpdateFilter(true);
    }
  }, {
    key: "initUpdateFilter",
    value: function initUpdateFilter(update) {
      var selected = {};
      if (update === true) {
        document.querySelector('.metabar__filter').querySelectorAll('.metabar__select--filter').forEach(function (el) {
          selected[el.getAttribute('name')] = el.value;
        });
        document.querySelector('.metabar__filter').remove();
      }
      document.querySelector('.metabar').insertAdjacentHTML('beforeend', '<div class="metabar__filter"></div>');
      ['status', 'priority', 'date', 'project'].forEach(function (columns__value) {
        document.querySelector('.metabar__filter').insertAdjacentHTML('beforeend', "\n                <select class=\"metabar__select metabar__select--filter\" name=\"".concat(columns__value, "\">\n                    <option value=\"*\">").concat(columns__value, "</option>\n                </select>\n            "));
        if (columns__value === 'date') {
          document.querySelector('.metabar__select--filter[name="date"]').insertAdjacentHTML('beforeend', '<option value=""></option>');
          var firstDay = new Date('2018-01-01 00:00:00');
          var curDay = new Date();
          curDay.setHours(0);
          curDay.setMinutes(0);
          curDay.setSeconds(0);
          var lastDay = new Date(parseInt(new Date().getFullYear()) + 1 + '-12-31 00:00:00');
          while (firstDay < lastDay) {
            document.querySelector('.metabar__select--filter[name="date"]').insertAdjacentHTML('beforeend', '<option' + (_Dates["default"].sameDay(firstDay, curDay) ? ' selected="selected"' : '') + ' value="' + _Dates["default"].dateFormat(firstDay, 'Y-m-d') + '">' + _Dates["default"].dateFormat(firstDay, 'd.m.y') + '</option>');
            firstDay.setDate(firstDay.getDate() + 1);
          }
        } else {
          var options = [];
          var skip_old_dates = [],
            skip_year_end = parseInt(new Date().getFullYear().toString().slice(-2)) - 1;
          for (var skip_year = 17; skip_year <= skip_year_end; skip_year++) {
            skip_old_dates.push('.' + skip_year);
          }
          _Store["default"].data.tickets.forEach(function (tickets__value) {
            // skip old projects
            if (columns__value === 'project') {
              if (skip_old_dates.includes(tickets__value.date.substring(5, 8))) {
                return;
              }
            }
            var options_value = tickets__value[columns__value];
            if (!options.includes(options_value)) {
              options.push(options_value);
            }
          });
          // combined filter
          if (columns__value === 'status') {
            if (options.filter(function (options__value) {
              return !['done', 'recurring'].includes(options__value);
            }).length > 0) {
              options.push('!done&!recurring');
            }
            if (options.filter(function (options__value) {
              return ['done', 'scheduled', 'working'].includes(options__value);
            }).length > 0) {
              options.push('done|scheduled|working');
            }
            if (options.filter(function (options__value) {
              return ['scheduled', 'working'].includes(options__value);
            }).length > 0) {
              options.push('scheduled|working');
            }
            if (options.filter(function (options__value) {
              return ['fixed', 'working'].includes(options__value);
            }).length > 0) {
              options.push('fixed|working');
            }
          }
          options.sort(function (a, b) {
            if (a === null) {
              a = '';
            }
            if (b === null) {
              b = '';
            }
            if (a.indexOf('|') > -1) {
              a = 'zz' + a;
            }
            if (b.indexOf('|') > -1) {
              b = 'zz' + b;
            }
            return a.toLowerCase().localeCompare(b.toLowerCase());
          });
          options.forEach(function (options__value) {
            document.querySelector('.metabar__select--filter[name="' + columns__value + '"]').insertAdjacentHTML('beforeend', '<option value="' + options__value + '">' + options__value + '</option>');
          });
        }
      });
      if (update === true) {
        Object.entries(selected).forEach(function (_ref) {
          var _ref2 = (0, _slicedToArray2["default"])(_ref, 2),
            selected__key = _ref2[0],
            selected__value = _ref2[1];
          document.querySelector('.metabar__filter [name="' + selected__key + '"]').value = selected__value;
        });
      } else {
        Filter.doFilter();
        document.querySelector('.metabar').addEventListener('change', function (e) {
          if (e.target.closest('.metabar__select--filter')) {
            var date = e.target.closest('.metabar__select--filter[name="date"]');
            if (date && date.value !== '*' && date.value !== '') {
              _Store["default"].data.session.activeDay = new Date(date.value);
              _Scheduler["default"].initScheduler();
            }
            Filter.doFilter();
          }
        });
      }
    }
  }, {
    key: "doFilter",
    value: function doFilter() {
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        var visible = true;
        document.querySelector('.metabar__filter').querySelectorAll('select').forEach(function (el) {
          var val_search = el.value,
            val_target = tickets__value[el.getAttribute('name')],
            visible_this = false;

          // date
          if (el.getAttribute('name') === 'date' && val_search !== '*' && val_search !== '') {
            var parsed_values = _Dates["default"].parseDateString(val_target, 'tickets');
            if (parsed_values !== false && parsed_values.length > 0) {
              visible_this = true;
            }
          }

          // all others
          else if (val_search === '*' || val_target === val_search || val_search.indexOf('|') > -1 && val_search.split('|').includes(val_target)) {
            visible_this = true;
          }

          /* special behaviour: hide billed in overview */
          if (el.getAttribute('name') == 'status' && val_search === '*' && val_target === 'billed' && document.querySelector('.metabar__select--filter[name="date"]').value === '*') {
            visible_this = false;
          }
          if (visible_this === false) {
            visible = false;
          }
        });
        if (visible === false && tickets__value.visible === true) {
          tickets__value.visible = false;
          document.querySelector('.tickets .tickets__entry[data-id="' + tickets__value.id + '"]').classList.remove('tickets__entry--visible');
        } else if (visible === true && tickets__value.visible === false) {
          tickets__value.visible = true;
          document.querySelector('.tickets .tickets__entry[data-id="' + tickets__value.id + '"]').classList.add('tickets__entry--visible');
        }
      });
      _Sort["default"].doSort();
      _Scheduler["default"].updateColors();
      _Tickets["default"].updateSum();
      _Textarea["default"].textareaSetVisibleHeights();
    }
  }]);
  return Filter;
}();
exports["default"] = Filter;

},{"./Dates":4,"./Scheduler":12,"./Sort":13,"./Store":14,"./Textarea":15,"./Tickets":16,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/slicedToArray":33}],6:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _Tickets = _interopRequireDefault(require("./Tickets"));
var _Auth = _interopRequireDefault(require("./Auth"));
var Footer = /*#__PURE__*/function () {
  function Footer() {
    (0, _classCallCheck2["default"])(this, Footer);
  }
  (0, _createClass2["default"])(Footer, null, [{
    key: "initStatus",
    value: function initStatus() {
      if (document.querySelector('.footer__status') === null) {
        return;
      }
      if (Footer.blockStatusUpdate === false) {
        var d = ('0' + new Date().getDate()).slice(-2) + '.' + ('0' + (new Date().getMonth() + 1)).slice(-2) + '.' + new Date().getFullYear().toString().substring(2, 4) + ' ' + ('0' + new Date().getHours()).slice(-2) + ':' + ('0' + new Date().getMinutes()).slice(-2) + ':' + ('0' + new Date().getSeconds()).slice(-2);
        document.querySelector('.footer__status').textContent = d;
      }
      setTimeout(Footer.initStatus, 1000);
    }
  }, {
    key: "updateStatus",
    value: function updateStatus(status, type) {
      document.querySelector('.footer__status').textContent = status;
      document.querySelector('.footer__status').classList.remove('footer__status--success');
      document.querySelector('.footer__status').classList.remove('footer__status--warning');
      document.querySelector('.footer__status').classList.remove('footer__status--error');
      document.querySelector('.footer__status').classList.add('footer__status--' + type);
      Footer.blockStatusUpdate = true;
      setTimeout(function () {
        Footer.blockStatusUpdate = false;
      }, Footer.showTime - 1000);
      setTimeout(function () {
        document.querySelector('.footer__status').classList.remove('footer__status--' + type);
      }, Footer.showTime);
    }
  }, {
    key: "bindSave",
    value: function bindSave() {
      document.querySelector('.footer').addEventListener('click', function (e) {
        if (e.target.closest('.footer__save')) {
          Footer.updateStatus('saving...', 'warning');
          _Tickets["default"].saveTickets().then(function () {
            Footer.updateStatus('saved!', 'success');
          })["catch"](function (error) {
            Footer.updateStatus(error, 'error');
          });
          e.preventDefault();
        }
      });
    }
  }, {
    key: "bindCreate",
    value: function bindCreate() {
      document.querySelector('.footer').addEventListener('click', function (e) {
        if (e.target.closest('.footer__create')) {
          _Tickets["default"].prepareCreateTicket();
          e.preventDefault();
        }
      });
    }
  }, {
    key: "bindLogout",
    value: function bindLogout() {
      document.querySelector('.footer').addEventListener('click', function (e) {
        if (e.target.closest('.footer__logout')) {
          _Auth["default"].logout().then(function () {
            // we simply overcome the issue of deleting event listeners on document by simply refreshing the app
            location.reload();
          })["catch"](function (error) {
            console.error(error);
          });
          e.preventDefault();
        }
      });
    }
  }, {
    key: "linkApiKey",
    value: function linkApiKey() {
      document.querySelector('.footer__cron').setAttribute('href', '_api/cron/' + Store.data.user.api_key);
      document.querySelector('.footer__ical').setAttribute('href', '_api/ical/' + Store.data.user.api_key);
    }
  }]);
  return Footer;
}();
exports["default"] = Footer;
(0, _defineProperty2["default"])(Footer, "blockStatusUpdate", false);
(0, _defineProperty2["default"])(Footer, "showTime", 3500);

},{"./Auth":3,"./Tickets":16,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/defineProperty":26,"@babel/runtime/helpers/interopRequireDefault":27}],7:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var Helper = /*#__PURE__*/function () {
  function Helper() {
    (0, _classCallCheck2["default"])(this, Helper);
  }
  (0, _createClass2["default"])(Helper, null, [{
    key: "prevAll",
    value: function prevAll(el) {
      var selector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var prev = true;
      return [].filter.call(el.parentNode.children, function (htmlElement) {
        if (htmlElement === el) {
          prev = false;
          return false;
        }
        if (selector !== null && !htmlElement.classList.contains(selector.replace('.', ''))) {
          return false;
        }
        return prev;
      }).reverse();
    }
  }, {
    key: "nextAll",
    value: function nextAll(el) {
      var selector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var next = false;
      return [].filter.call(el.parentNode.children, function (htmlElement) {
        if (htmlElement === el) {
          next = true;
          return false;
        }
        if (selector !== null && !htmlElement.classList.contains(selector.replace('.', ''))) {
          return false;
        }
        return next;
      });
    }
  }, {
    key: "isObject",
    value: function isObject(obj) {
      return obj !== null && (0, _typeof2["default"])(obj) === 'object';
    }
  }, {
    key: "isInteger",
    value: function isInteger(value) {
      return !isNaN(value) && parseInt(Number(value)) == value && !isNaN(parseInt(value, 10));
    }
  }, {
    key: "fileToBase64",
    value: function fileToBase64(file) {
      return new Promise(function (resolve, reject) {
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function () {
          return resolve(reader.result.split(',')[1]);
        };
        reader.onerror = function (error) {
          return reject(error);
        };
      });
    }
  }, {
    key: "debounce",
    value: function debounce(func, wait, immediate) {
      var timeout;
      return function () {
        var context = this,
          args = arguments;
        var later = function later() {
          timeout = null;
          if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
      };
    }
  }]);
  return Helper;
}();
exports["default"] = Helper;

},{"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/typeof":37}],8:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var Html = /*#__PURE__*/function () {
  function Html() {
    (0, _classCallCheck2["default"])(this, Html);
  }
  (0, _createClass2["default"])(Html, null, [{
    key: "buildHtml",
    value: function buildHtml() {
      document.querySelector('#app').insertAdjacentHTML('beforeend', "\n            <div class=\"animation\"></div>\n            <div class=\"tickets\"></div>\n            <div class=\"scheduler\"></div>\n            <div class=\"quickbox\"></div>\n            <div class=\"footer\"></div>\n        ");
      document.querySelector('.animation').insertAdjacentHTML('beforeend', "\n            <div class=\"animation__wrap\">\n                <div class=\"animation__top\"></div>\n                <div class=\"animation__bottom\"></div>\n            </div>\n            ");
      document.querySelector('.footer').insertAdjacentHTML('beforeend', "\n            <a href=\"#\" class=\"footer__save\">_save</a>\n            <a href=\"#\" class=\"footer__create\">_create</a>\n            <span class=\"footer__status\"></span>\n            <a href=\"#\" class=\"footer__cron\" target=\"_blank\">_cron</a>\n            <a href=\"#\" class=\"footer__ical\" target=\"_blank\">_ical</a>\n            <a href=\"#\" class=\"footer__logout\">_logout</a>\n            ");
      document.querySelector('.tickets').insertAdjacentHTML('beforeend', "\n            <div class=\"metabar\"></div>\n            <div class=\"tickets__table-container\">\n                <table class=\"tickets__table\">\n                    <thead class=\"tickets__table-head\">\n                        <tr class=\"tickets__table-row\"></tr>\n                    </thead>\n                    <tbody class=\"tickets__table-body\">\n                    </tbody>\n                    <tfoot class=\"tickets__table-foot\">\n                        <tr class=\"tickets__table-row\"></tr>\n                    </tfoot>\n                </table>\n            </div>\n        ");
      _Store["default"].data.cols.forEach(function (cols__value) {
        document.querySelector('.tickets__table-head tr').insertAdjacentHTML('beforeend', '<td class="tickets__table-cell">' + cols__value + '</td>');
        if (cols__value === 'status') {
          document.querySelector('.tickets__table-head tr td:last-child').insertAdjacentHTML('beforeend', "\n                    <span title=\"scheduled\nidle\nallday\nroaming\nfixed\ndone\nbilled\nrecurring\nworking\" class=\"tickets__table-tooltip\">(?)</span>\n                ");
        }
        if (cols__value === 'priority') {
          document.querySelector('.tickets__table-head tr td:last-child').insertAdjacentHTML('beforeend', "\n                    <span title=\"[A-D]\" class=\"tickets__table-tooltip\">(?)</span>\n                ");
        }
        if (cols__value === 'time') {
          document.querySelector('.tickets__table-head tr td:last-child').insertAdjacentHTML('beforeend', "\n                    <span title=\"[0-24]\" class=\"tickets__table-tooltip\">(?)</span>\n                ");
        }
        if (cols__value === 'date') {
          document.querySelector('.tickets__table-head tr td:last-child').insertAdjacentHTML('beforeend', "\n                    <span title=\"01.01.18\n01.01.18 09:00-10:00\nMO [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\nMO 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\nMO#1 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\nMO#12 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\nMO~1 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\nMO~12 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\nMO%2 10:00-11:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\n01.01. [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\n01.01. 09:00-10:00 [-05.10.18 -12.10.18 >01.01.18 <01.01.19]\n\nDD#N: (N%4)th weekday in every ((N-1)/4)th month\nDD~N: weekday in calendar week N\nDD%N: weekday in calendar week %N=0 (if >X specified, N -= calendar week of X)\" class=\"tickets__table-tooltip\">(?)</span>\n                ");
        }
        document.querySelector('.tickets__table-foot tr').insertAdjacentHTML('beforeend', '<td class="tickets__table-cell">' + (cols__value == 'time' ? '<span class="tickets__sum"></span>' : '') + '</td>');
      });
      document.querySelector('.tickets__table-head tr').insertAdjacentHTML('beforeend', "\n                    <td class=\"tickets__table-cell\">attachments</td>\n                    <td class=\"tickets__table-cell\">delete</td>\n                ");
      document.querySelector('.tickets__table-foot tr').insertAdjacentHTML('beforeend', "\n                <td class=\"tickets__table-cell\"></td>\n                <td class=\"tickets__table-cell\"></td>\n            ");
    }
  }, {
    key: "createHtmlLine",
    value: function createHtmlLine(ticket, visible) {
      var html = '';
      html += '<tr class="tickets__table-row tickets__entry' + (visible === true ? ' tickets__entry--visible' : '') + '" data-id="' + ticket.id + '">';
      _Store["default"].data.cols.forEach(function (cols__value) {
        html += '<td class="tickets__table-cell">';
        html += '<textarea class="tickets__textarea tickets__textarea--' + cols__value + '" autocorrect="off" autocapitalize="off" spellcheck="false" ' + (['date', 'description'].includes(cols__value) ? ' class="autosize"' : '') + ' name="' + cols__value + '">' + (ticket[cols__value] || '') + '</textarea>';
        html += '</td>';
      });
      html += "\n            <td class=\"tickets__table-cell\">\n                <ul class=\"tickets__attachments\">";
      if (ticket.attachments !== undefined && ticket.attachments.length > 0) {
        ticket.attachments.forEach(function (attachments__value, attachments__key) {
          html += Html.createHtmlDownloadLine(attachments__value);
        });
      }
      html += "\n                </ul>\n\n                <label class=\"tickets__upload\" title=\"_upload\">\n                    <input class=\"tickets__upload-input\" type=\"file\" name=\"attachments\" multiple=\"multiple\" />\n                </label>\n   \n            </td>\n            <td class=\"tickets__table-cell\">\n                <a href=\"#\" class=\"tickets__entry__delete\">x</a>\n            </td>\n        </tr>\n        ";
      return html;
    }
  }, {
    key: "createHtmlDownloadLine",
    value: function createHtmlDownloadLine(attachment) {
      return "\n            <li class=\"tickets__attachment\" data-id=\"".concat(attachment.id, "\">\n                <a class=\"tickets__attachment-download\" href=\"#\" title=\"").concat(attachment.name, "\"></a>\n                <a class=\"tickets__attachment-delete\" href=\"#\" title=\"_delete\"></a>\n            </li>\n        ");
    }
  }]);
  return Html;
}();
exports["default"] = Html;

},{"./Store":14,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27}],9:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Filter = _interopRequireDefault(require("./Filter"));
var _Helper = _interopRequireDefault(require("./Helper"));
var Keyboard = /*#__PURE__*/function () {
  function Keyboard() {
    (0, _classCallCheck2["default"])(this, Keyboard);
  }
  (0, _createClass2["default"])(Keyboard, null, [{
    key: "initKeyboardNavigation",
    value: function initKeyboardNavigation() {
      // one more keyboard event is needed (so that jumps are not too early)
      // therefore we save the previous cursor pointer here
      var selectionEndBefore = 1;
      document.querySelector('.tickets').addEventListener('keyup', function (e) {
        if (!e.target || e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
          return;
        }
        var left = e.target.closest('td').previousElementSibling,
          right = e.target.closest('td').nextElementSibling,
          top = _Helper["default"].prevAll(e.target.closest('tr'), '.tickets__entry--visible')[0],
          down = _Helper["default"].nextAll(e.target.closest('tr'), '.tickets__entry--visible')[0],
          index = _Helper["default"].prevAll(e.target.closest('td')).length + 1;

        // arrow right (switch)
        if (e.keyCode === 39 && right !== null && e.target.selectionEnd >= e.target.value.length && selectionEndBefore >= e.target.value.length) {
          right.querySelector('input, textarea').select();
          selectionEndBefore = 1;
          e.preventDefault();
        }
        // arrow left (switch)
        else if (e.keyCode === 37 && left !== null && e.target.selectionEnd <= 0 && selectionEndBefore <= 0) {
          left.querySelector('input, textarea').select();
          selectionEndBefore = 1;
          e.preventDefault();
        }
        // arrow top (switch)
        else if (e.keyCode === 38 && top !== undefined && e.target.selectionEnd <= 0 && selectionEndBefore <= 0) {
          top.querySelector('td:nth-child(' + index + ')').querySelector('input, textarea').select();
          selectionEndBefore = 1;
          e.preventDefault();
        }
        // arrow down (switch)
        else if (e.keyCode === 40 && down !== undefined && e.target.selectionEnd >= e.target.value.length && selectionEndBefore >= e.target.value.length) {
          down.querySelector('td:nth-child(' + index + ')').querySelector('input, textarea').select();
          selectionEndBefore = 1;
          e.preventDefault();
        } else {
          selectionEndBefore = e.target.selectionEnd;
        }
      });
    }
  }, {
    key: "bindRefresh",
    value: function bindRefresh() {
      // f5
      document.addEventListener('keydown', function (event) {
        if (event.keyCode === 116) {
          _Filter["default"].doFilter();
          event.preventDefault();
        }
      });
    }
  }]);
  return Keyboard;
}();
exports["default"] = Keyboard;

},{"./Filter":5,"./Helper":7,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27}],10:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var Lock = /*#__PURE__*/function () {
  function Lock() {
    (0, _classCallCheck2["default"])(this, Lock);
  }
  (0, _createClass2["default"])(Lock, null, [{
    key: "lockTicket",
    value: function lockTicket(ticket_id) {
      document.querySelector('.tickets__entry[data-id="' + ticket_id + '"]').classList.add('tickets__entry--locked');
      document.querySelector('.tickets__entry[data-id="' + ticket_id + '"]').querySelectorAll('input, textarea').forEach(function (el) {
        // renable this if https://stackoverflow.com/questions/52546266/textarea-white-space-nowrap-in-combination-with-readonly is solved
        //el.setAttribute('disabled', 'disabled');
        //el.setAttribute('readonly', 'readonly');
      });
    }
  }, {
    key: "unlockTicket",
    value: function unlockTicket(ticket_id) {
      var leave_changed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (leave_changed === false) {
        document.querySelector('.tickets__entry[data-id="' + ticket_id + '"]').classList.remove('tickets__entry--changed');
      }
      document.querySelector('.tickets__entry[data-id="' + ticket_id + '"]').classList.remove('tickets__entry--locked');
      document.querySelector('.tickets__entry[data-id="' + ticket_id + '"]').querySelectorAll('input, textarea').forEach(function (el) {
        el.removeAttribute('disabled');
        el.removeAttribute('readonly');
      });
    }
  }, {
    key: "ticketIsLocked",
    value: function ticketIsLocked(ticket_id) {
      if (document.querySelector('.tickets__entry[data-id="' + ticket_id + '"] .tickets__entry--locked') !== null) {
        return true;
      }
      return false;
    }
  }]);
  return Lock;
}();
exports["default"] = Lock;

},{"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27}],11:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _Tickets = _interopRequireDefault(require("./Tickets"));
var _Store = _interopRequireDefault(require("./Store"));
var _Dates = _interopRequireDefault(require("./Dates"));
var _Scheduler = _interopRequireDefault(require("./Scheduler"));
var _Filter = _interopRequireDefault(require("./Filter"));
var _Footer = _interopRequireDefault(require("./Footer"));
var _hlp = _interopRequireDefault(require("hlp"));
var _pulltorefreshjs = _interopRequireDefault(require("pulltorefreshjs"));
var Quickbox = /*#__PURE__*/function () {
  function Quickbox() {
    (0, _classCallCheck2["default"])(this, Quickbox);
    (0, _defineProperty2["default"])(this, "lastScrollPos", 0);
  }
  (0, _createClass2["default"])(Quickbox, null, [{
    key: "initQuickbox",
    value: function initQuickbox() {
      Quickbox.buildHtml();
      Quickbox.initMails();
      Quickbox.initToday();
      Quickbox.initNew();
    }
  }, {
    key: "bindQuickbox",
    value: function bindQuickbox() {
      Quickbox.bindMails();
      Quickbox.allowUnselectRadio();
      Quickbox.bindToday();
      Quickbox.bindNav();
      Quickbox.bindNew();
    }
  }, {
    key: "buildHtml",
    value: function buildHtml() {
      document.querySelector('.quickbox').innerHTML = "\n            <div class=\"quickbox__content\">\n                <div class=\"quickbox__mails\"></div>\n                <div class=\"quickbox__today\"></div>\n                <div class=\"quickbox__new\"></div>\n            </div>\n            <div class=\"quickbox__nav\">\n                <a href=\"#mails\" class=\"quickbox__navitem\">_mails<span class=\"quickbox__navitem-count\"></span></a>\n                <a href=\"#today\" class=\"quickbox__navitem\">_today<span class=\"quickbox__navitem-count\"></span></a>\n                <a href=\"#new\" class=\"quickbox__navitem\">_new</a>\n            </div>\n        ";
    }
  }, {
    key: "initMails",
    value: function initMails() {
      Quickbox.fetchMails(true);
      if (_hlp["default"].isDesktop()) {
        setInterval(function () {
          if (_Store["default"].data.busy === true) {
            return;
          }
          Quickbox.fetchMails(false);
          _Footer["default"].updateStatus('successfully synced mails.', 'success');
        }, 70 * 1000); // must be non divisible by 60 (otherwise it blocks others)
      }
    }
  }, {
    key: "fetchMails",
    value: function fetchMails() {
      var firstInit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      if (document.querySelector('.quickbox__mails').classList.contains('quickbox__mails--loading')) {
        return;
      }
      if (firstInit === true || !_hlp["default"].isDesktop()) {
        document.querySelector('.quickbox__mails').classList.add('quickbox__mails--loading');
        document.querySelector('.quickbox__mails').classList.remove('quickbox__mails--finished');
      }
      _Store["default"].data.busy = true;
      _Store["default"].data.api.fetch('_api/mails', {
        method: 'GET',
        cache: 'no-cache',
        headers: {
          'content-type': 'application/json'
        }
      }).then(function (res) {
        return res.json();
      })["catch"](function () {}).then(function (response) {
        _Store["default"].data.busy = false;
        _Store["default"].data.mails = [];
        response.data.forEach(function (mails__value) {
          _Store["default"].data.mails.push(mails__value);
        });
        Quickbox.renderMails();
        Quickbox.updateMailCount();
      });
    }
  }, {
    key: "updateMailCount",
    value: function updateMailCount() {
      document.querySelector('.quickbox__navitem-count').innerText = _Store["default"].data.mails.length;
    }
  }, {
    key: "renderMails",
    value: function renderMails() {
      // add new
      _Store["default"].data.mails.forEach(function (mails__value) {
        if (document.querySelector('.quickbox__mail[data-id="' + mails__value.id + '"]') === null) {
          var content = mails__value.content;
          document.querySelector('.quickbox__mails').insertAdjacentHTML('beforeend', "\n                    <div class=\"quickbox__mail quickbox__mail--unread\" data-id=\"".concat(mails__value.id, "\">\n                        <a href=\"#\" class=\"quickbox__mail-toggle\">\n                            <div class=\"quickbox__mail-meta quickbox__mail-meta--from\">\n                                ").concat(mails__value.from_name !== undefined && mails__value.from_name !== null && mails__value.from_name !== false && mails__value.from_name !== '' ? mails__value.from_name + ' (' + mails__value.from_email + ')' : mails__value.from_email, "\n                            </div>\n                            <div class=\"quickbox__mail-meta quickbox__mail-meta--date\">\n                                ").concat(_Dates["default"].dateFormat(new Date(mails__value.date), 'D H:i'), "\n                            </div>\n                            <div class=\"quickbox__mail-meta quickbox__mail-meta--subject\">\n                                ").concat(mails__value.subject, "\n                            </div>\n                        </a>\n                        <iframe src=\"about:blank\" class=\"quickbox__mail-content\">\n                            ").concat(content, "\n                        </iframe>\n                        <div class=\"quickbox__mail-actions\">\n                            <form class=\"quickbox__mail-form\">\n                                <input type=\"hidden\" name=\"id\" value=\"").concat(mails__value.id, "\" />\n                                <input type=\"hidden\" name=\"mailbox\" value=\"").concat(mails__value.mailbox, "\" />\n                                <ul class=\"quickbox__mail-inputrows\">\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/3\"><label class=\"quickbox__mail-label\"><input class=\"quickbox__mail-input quickbox__mail-input--radio\" type=\"radio\" name=\"action_ticket_time\" value=\"tonight\" uncheckable data-checked checked /><span class=\"quickbox__mail-label-text\">tonight</span></label></li>\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/3\"><label class=\"quickbox__mail-label\"><input class=\"quickbox__mail-input quickbox__mail-input--radio\" type=\"radio\" name=\"action_ticket_time\" value=\"weekend\" uncheckable /><span class=\"quickbox__mail-label-text\">weekend</span></label></li>\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/3\"><label class=\"quickbox__mail-label\"><input class=\"quickbox__mail-input quickbox__mail-input--radio\" type=\"radio\" name=\"action_ticket_time\" value=\"next\" uncheckable /><span class=\"quickbox__mail-label-text\">next</span></label></li>\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/").concat(mails__value.editors.length + 2, "\"><label class=\"quickbox__mail-label\"><input type=\"checkbox\" class=\"quickbox__mail-input quickbox__mail-input--checkbox\" name=\"action_send[]\" value=\"sender\" /><span class=\"quickbox__mail-label-text\">sender</span></label></li>\n                                ").concat(mails__value.editors.map(function (editors__value) {
            return "\n                                            <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/".concat(mails__value.editors.length + 2, "\"><label class=\"quickbox__mail-label\"><input type=\"checkbox\" class=\"quickbox__mail-input quickbox__mail-input--checkbox\" name=\"action_send[]\" value=\"").concat(editors__value, "\" /><span class=\"quickbox__mail-label-text\">").concat(editors__value, "</span></label></li>\n                                        ");
          }).join(''), "\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/").concat(mails__value.editors.length + 2, "\">\n                                        <input\n                                            class=\"quickbox__mail-input quickbox__mail-input--text\"\n                                            autocomplete=\"off\"\n                                            value=\"\"\n                                            maxlength=\"255\"\n                                            type=\"text\"\n                                            placeholder=\"mailtext\"\n                                            name=\"action_send_text\"\n                                        />\n                                    </li>\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/2\">\n                                        <input class=\"quickbox__mail-submit quickbox__mail-submit--discard\" type=\"submit\" name=\"discard\" value=\"_discard\" />\n                                    </li>\n                                    <li class=\"quickbox__mail-inputrow quickbox__mail-inputrow--1/2\">\n                                        <input class=\"quickbox__mail-submit quickbox__mail-submit--create\" type=\"submit\" name=\"create\" value=\"_create\" />\n                                    </li>\n                                </ul>\n        \t                </form>\n                        </div>\n                    </div>\n                "));
          var iframe = document.querySelector('.quickbox__mail[data-id="' + mails__value.id + '"] .quickbox__mail-content');
          iframe.onload = function () {
            var style = document.createElement('style');
            style.textContent = "\n                        body {\n                            font-family: Verdana, Geneva, sans-serif;\n                            zoom:0.75;\n                            background-color:#fff;\n                            color:#000;\n                        }\n                        body::-webkit-scrollbar {\n                            width: 16px;\n                        }\n                        body::-webkit-scrollbar-track {\n                            background-color: #000000;\n                        }\n                        body::-webkit-scrollbar-thumb {\n                            background-color: #ffffff;\n                            box-shadow: -1px 0 0 0 #ffffff;\n                        }\n                    ";
            iframe.contentDocument.head.appendChild(style);
            if (iframe.contentDocument.querySelector('a') !== null) {
              iframe.contentDocument.querySelectorAll('a').forEach(function (el) {
                el.setAttribute('target', '_blank');
              });
            }
          };
          iframe.setAttribute('srcdoc', content);
        }
      });

      // remove existing
      if (document.querySelector('.quickbox__mail') !== null) {
        document.querySelectorAll('.quickbox__mail').forEach(function (el) {
          if (_Store["default"].data.mails.filter(function (mails__value) {
            return mails__value.id === el.getAttribute('data-id');
          }).length === 0) {
            el.remove();
          }
        });
      }
      if (document.querySelector('.quickbox__mails--loading') !== null) {
        document.querySelector('.quickbox__mails--loading').classList.remove('quickbox__mails--loading');
      }
      if (document.querySelector('.quickbox__mail') === null) {
        document.querySelector('.quickbox__mails').classList.add('quickbox__mails--finished');
      } else {
        document.querySelector('.quickbox__mails').classList.remove('quickbox__mails--finished');
      }
    }
  }, {
    key: "bindMails",
    value: function bindMails() {
      var _this = this;
      document.addEventListener('click', function (e) {
        var el = e.target.closest('.quickbox__mail-toggle');
        if (el) {
          if (el.closest('.quickbox__mail').classList.contains('quickbox__mail--expanded')) {
            el.closest('.quickbox__mails').style.overflowY = 'auto';
            el.closest('.quickbox__mail').classList.remove('quickbox__mail--expanded');
            el.closest('.quickbox__mails').scrollTop = _this.lastScrollPos;
          } else {
            if (el.closest('.quickbox__mail').classList.contains('quickbox__mail--unread')) {
              el.closest('.quickbox__mail').classList.remove('quickbox__mail--unread');
            }
            _this.lastScrollPos = el.closest('.quickbox__mails').scrollTop;
            el.closest('.quickbox__mails').scrollTop = 0;
            el.closest('.quickbox__mails').style.overflowY = 'hidden';
            el.closest('.quickbox__mail').classList.add('quickbox__mail--expanded');
          }
          e.preventDefault();
        }
      });
      document.addEventListener('click', function (e) {
        var el = e.target.closest('.quickbox__mail-submit');
        if (el) {
          var form = el.closest('.quickbox__mail-form'),
            id = form.closest('.quickbox__mail').getAttribute('data-id'),
            mail = _Store["default"].data.mails.filter(function (mails__value) {
              return mails__value.id === id;
            })[0],
            action = el.classList.contains('quickbox__mail-submit--create') ? 'create' : 'discard';
          form.closest('.quickbox__mail').classList.add('quickbox__mail--move-' + (action === 'discard' ? 'left' : 'right'));
          document.querySelector('.quickbox__mails').style.overflowY = 'auto';
          document.querySelector('.quickbox__mails').scrollTop = _this.lastScrollPos;
          if (action === 'create' && form.querySelector('[name="action_ticket_time"]:checked') !== null) {
            var date = form.querySelector('[name="action_ticket_time"]:checked').value;
            _Tickets["default"].createAndAppendTicket({
              date: date,
              description: mail.subject,
              priority: 'A',
              project: 'mail',
              status: 'scheduled',
              time: '0,50',
              visible: true,
              attachments: [_hlp["default"].base64tofile(mail.eml, null, _hlp["default"].slugify(mail.subject + ' ' + mail.date) + '.eml')]
            }, null, 1, false, true);
          }
          _Store["default"].data.busy = true;
          _Store["default"].data.api.fetch('_api/mails', {
            method: 'PUT',
            body: new URLSearchParams(new FormData(form)),
            cache: 'no-cache',
            headers: {
              'content-type': 'application/json'
            }
          }).then(function (res) {
            return res.json();
          })["catch"](function () {}).then(function (response) {
            _Store["default"].data.busy = false;
          });
          e.preventDefault();
          setTimeout(function () {
            _Store["default"].data.mails = _Store["default"].data.mails.filter(function (mails__value) {
              return mails__value.id != form.closest('.quickbox__mail').getAttribute('data-id');
            });
            Quickbox.renderMails();
            Quickbox.updateMailCount();
          }, 500);
        }
      });
      if (!_hlp["default"].isDesktop()) {
        _pulltorefreshjs["default"].init({
          mainElement: '.quickbox__mails',
          triggerElement: '.quickbox__mails',
          classPrefix: 'quickbox__pull-to-refresh--',
          distThreshold: 80,
          distMax: 140,
          distIgnore: 10,
          instructionsPullToRefresh: '_swipe down to refresh',
          instructionsReleaseToRefresh: '_release to refresh',
          instructionsRefreshing: '_refreshing',
          shouldPullToRefresh: function shouldPullToRefresh() {
            return !this.mainElement.scrollTop && document.querySelector('.quickbox__mails--loading') === null && document.querySelector('.quickbox__mail--expanded') === null;
          },
          onRefresh: function onRefresh() {
            if (document.querySelector('.quickbox__mail--expanded') !== null) {
              return;
            }
            Quickbox.fetchMails(false);
          }
        });
      }
    }
  }, {
    key: "allowUnselectRadio",
    value: function allowUnselectRadio() {
      document.addEventListener('click', function (e) {
        var el = e.target.closest('input[type="radio"][uncheckable]');
        if (el) {
          if (el.hasAttribute('data-checked')) {
            el.removeAttribute('data-checked');
            el.checked = false;
          } else {
            el.checked = true;
            if (document.querySelector('input[type="radio"][uncheckable][data-checked]') !== null) {
              document.querySelectorAll('input[type="radio"][uncheckable][data-checked]').forEach(function (el) {
                el.removeAttribute('data-checked');
              });
            }
            el.setAttribute('data-checked', '');
          }
        }
      });
    }
  }, {
    key: "bindNav",
    value: function bindNav() {
      var _this2 = this;
      if (document.querySelector('.quickbox__content') !== null) {
        this.bindNavToggle('mails');
      }
      document.addEventListener('click', function (e) {
        var el = e.target.closest('.quickbox__navitem');
        if (el) {
          if (!el.classList.contains('quickbox__navitem--active')) {
            _this2.bindNavToggle(el.getAttribute('href').replace('#', ''));
          }
          e.preventDefault();
        }
      });
    }
  }, {
    key: "bindNavToggle",
    value: function bindNavToggle(view) {
      if (document.querySelector('.quickbox__content').classList.contains('quickbox__content--disabled')) {
        return;
      }
      document.querySelector('.quickbox__content').classList.add('quickbox__content--disabled');
      /* in chrome we want ctrl+f to not find hidden elements (so we must apply display:none) */
      /* the following lines ensure to do exactly that */
      document.querySelectorAll('.quickbox__content > *').forEach(function (el2) {
        el2.style.display = 'block';
      });
      requestAnimationFrame(function () {
        setTimeout(function () {
          document.querySelectorAll('.quickbox__content > *:not(.quickbox__' + view + ')').forEach(function (el2) {
            el2.style.display = 'none';
          });
          document.querySelector('.quickbox__content').classList.remove('quickbox__content--disabled');
        }, 250);
        document.querySelector('.quickbox__content').setAttribute('data-view', view);
        if (document.querySelector('.quickbox__navitem--active') !== null) {
          document.querySelectorAll('.quickbox__navitem--active').forEach(function (navitem__value) {
            navitem__value.classList.remove('quickbox__navitem--active');
          });
        }
        document.querySelector('.quickbox__navitem[href="#' + view + '"]').classList.add('quickbox__navitem--active');
      });
    }
  }, {
    key: "initToday",
    value: function initToday() {
      document.querySelector('.quickbox__today').innerHTML = "\n            <div class=\"quickbox__today-nav\">\n                <a class=\"quickbox__today-navitem quickbox__today-navitem--prev-day\" href=\"#\">&lt;</a>\n                <a class=\"quickbox__today-navitem quickbox__today-navitem--cur-day\" href=\"#\">".concat(_Dates["default"].dateFormat(_Dates["default"].getActiveDate(), 'd.m.y'), "</a>\n                <a class=\"quickbox__today-navitem quickbox__today-navitem--next-day\" href=\"#\">&gt;</a>\n            </div>\n            <ul class=\"quickbox__today-tickets\"></ul>\n        ");
      var tickets = _hlp["default"].deepCopy(_Store["default"].data.tickets),
        count = 0;
      tickets.sort(function (a, b) {
        var sort_list = ['fixed'
          /*
          'scheduled',
          'fixed',
          'idle',
          'allday',
          'roaming',
          'recurring',
          'done',
          'billed',
          */],
          a_pos = Infinity,
          b_pos = Infinity;
        sort_list.forEach(function (sort_list__value, sort_list__key) {
          if (sort_list__value === a.status) {
            a_pos = sort_list__key;
          }
          if (sort_list__value === b.status) {
            b_pos = sort_list__key;
          }
        });
        if (a_pos < b_pos) {
          return -1;
        }
        if (a_pos > b_pos) {
          return 1;
        }
        for (var _i = 0, _arr = [a.status == 'recurring' && b.status == 'recurring' ? [a.date, b.date] : [_Dates["default"].germanDateTimeToEnglishString(a.date), _Dates["default"].germanDateTimeToEnglishString(b.date)], [a.priority, b.priority], [a.project, b.project],
          //[a.description, b.description],
          [a.id, b.id]]; _i < _arr.length; _i++) {
          var _arr$_i = (0, _slicedToArray2["default"])(_arr[_i], 2),
            val_a = _arr$_i[0],
            val_b = _arr$_i[1];
          if (val_a < val_b) {
            return -1;
          }
          if (val_a > val_b) {
            return 1;
          }
        }
        return 0;
      });
      tickets.forEach(function (tickets__value) {
        if (['done', 'billed'].includes(tickets__value.status)) {
          return;
        }
        var parsed_values = _Dates["default"].parseDateString(tickets__value.date, 'tickets');
        if (parsed_values !== false && parsed_values.length > 0) {
          parsed_values.forEach(function (parsed_values__value) {
            document.querySelector('.quickbox__today-tickets').insertAdjacentHTML('beforeend', "\n                            <li class=\"quickbox__today-ticket\" style=\"\n                                    ".concat(['fixed'].includes(tickets__value.status) ? 'border-color' : 'border-left-color', ": ").concat(_Scheduler["default"].getStoreProperty('border', tickets__value.status, tickets__value.project, 'transparent'), "; ").concat(['fixed'].includes(tickets__value.status) ? 'border-width: 5rem;' : '', "\">\n                                <div class=\"quickbox__today-ticket-project\">").concat(tickets__value.project, "<small class=\"quickbox__today-ticket-project-status\">[").concat(tickets__value.status, "]</small></div>\n                                <div class=\"quickbox__today-ticket-date\">\n                                    ").concat(tickets__value.status === 'fixed' ? (parsed_values__value.minutes_left < 8 * 60 ? '<span class="quickbox__today-ticket-date-countdown">' : '') + (parsed_values__value.minutes_left < 0 ? 'âââ' : parsed_values__value.minutes_left < 8 * 60 ? 'â' + parsed_values__value.minutes_left + 'minâ' : '') + (parsed_values__value.minutes_left < 8 * 60 ? '</span>' : '') : '', "\n                                    ").concat(tickets__value.date.indexOf(' ') > -1 ? tickets__value.date.split(' ')[1] : tickets__value.date, "\n                                </div>\n                                <div class=\"quickbox__today-ticket-description\">").concat(_hlp["default"].nl2br(tickets__value.description), "</div>\n                            </li>\n                        "));
          });
          count++;
        }
      });
      document.querySelector('.quickbox__navitem[href="#today"] .quickbox__navitem-count').innerText = count;
    }
  }, {
    key: "bindToday",
    value: function bindToday() {
      document.addEventListener('click', function (e) {
        var el = e.target.closest('.quickbox__today-nav');
        if (el) {
          if (e.target.closest('.quickbox__today-navitem--prev-day')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() - 1);
          }
          if (e.target.closest('.quickbox__today-navitem--cur-day')) {
            _Store["default"].data.session.activeDay = new Date();
          }
          if (e.target.closest('.quickbox__today-navitem--next-day')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() + 1);
          }
          Quickbox.initToday();
          _Scheduler["default"].initScheduler();
          _Filter["default"].doFilter();
          e.preventDefault();
        }
      });
      if (!_hlp["default"].isDesktop()) {
        _pulltorefreshjs["default"].init({
          mainElement: '.quickbox__today',
          triggerElement: '.quickbox__today',
          classPrefix: 'quickbox__pull-to-refresh--',
          distThreshold: 80,
          distMax: 140,
          distIgnore: 10,
          instructionsPullToRefresh: '_swipe down to refresh',
          instructionsReleaseToRefresh: '_release to refresh',
          instructionsRefreshing: '_refreshing',
          shouldPullToRefresh: function shouldPullToRefresh() {
            return this.mainElement.querySelector('.quickbox__today-tickets') !== null && !this.mainElement.querySelector('.quickbox__today-tickets').scrollTop;
          },
          onRefresh: function onRefresh() {
            _Tickets["default"].fetchAndRenderTicketsAndUpdateApp();
          }
        });
      }
    }
  }, {
    key: "initNew",
    value: function initNew() {
      document.querySelector('.quickbox__new').innerHTML = "\n            <form class=\"quickbox__new-form\">\n                <ul class=\"quickbox__new-inputrows\">\n                    <li class=\"quickbox__new-inputrow quickbox__new-inputrow--1/4\"><label class=\"quickbox__new-label\"><input class=\"quickbox__new-input quickbox__new-input--radio\" type=\"radio\" name=\"date\" value=\"tonight\" checked /><span class=\"quickbox__new-label-text\">tonight</span></label></li>\n                    <li class=\"quickbox__new-inputrow quickbox__new-inputrow--1/4\"><label class=\"quickbox__new-label\"><input class=\"quickbox__new-input quickbox__new-input--radio\" type=\"radio\" name=\"date\" value=\"weekend\" /><span class=\"quickbox__new-label-text\">weekend</span></label></li>\n                    <li class=\"quickbox__new-inputrow quickbox__new-inputrow--1/4\"><label class=\"quickbox__new-label\"><input class=\"quickbox__new-input quickbox__new-input--radio\" type=\"radio\" name=\"date\" value=\"next\" /><span class=\"quickbox__new-label-text\">next</span></label></li>\n                    <li class=\"quickbox__new-inputrow quickbox__new-inputrow--1/4\"><input class=\"quickbox__new-input quickbox__new-input--text\" type=\"text\" name=\"date\" placeholder=\"date\" value=\"\" /></li>\n                    <li class=\"quickbox__new-inputrow\"><input class=\"quickbox__new-input quickbox__new-input--text\" type=\"text\" required=\"required\" name=\"project\" placeholder=\"project\" value=\"private\" /></li>\n                    <li class=\"quickbox__new-inputrow quickbox__new-inputrow--rheight\">\n                        <textarea\n                            class=\"quickbox__new-input quickbox__new-input--textarea\"\n                            autocorrect=\"off\"\n                            autocapitalize=\"off\"\n                            spellcheck=\"false\"\n                            required=\"required\"\n                            name=\"description\"\n                            placeholder=\"description\"></textarea>\n                    </li>\n                    <li class=\"quickbox__new-inputrow\"><input class=\"quickbox__new-submit\" type=\"submit\" value=\"_create\" /></li>\n                </ul>\n            </form>\n        ";
    }
  }, {
    key: "bindNew",
    value: function bindNew() {
      document.querySelector('.quickbox__new-form [name="date"][type="text"]').addEventListener('keyup', function (e) {
        if (e.target.value != '' && document.querySelector('.quickbox__new-form [name="date"][type="radio"]:checked') !== null) {
          document.querySelector('.quickbox__new-form [name="date"][type="radio"]:checked').checked = false;
        }
      });
      document.querySelectorAll('.quickbox__new-form [name="date"][type="radio"]').forEach(function (el) {
        el.addEventListener('change', function (e) {
          if (e.target.checked === true) {
            document.querySelector('.quickbox__new-form [name="date"][type="text"]').value = '';
          }
        });
      });
      document.querySelector('.quickbox__new-form').addEventListener('submit', function (e) {
        _Tickets["default"].createAndAppendTicket({
          date: document.querySelector('.quickbox__new-form [type="radio"][name="date"]:checked') !== null ? document.querySelector('.quickbox__new-form [type="radio"][name="date"]:checked').value : document.querySelector('.quickbox__new-form [type="text"][name="date"]').value,
          description: document.querySelector('.quickbox__new-form [name="description"]').value,
          priority: 'A',
          project: document.querySelector('.quickbox__new-form [name="project"]').value,
          status: 'scheduled',
          time: '0,50',
          visible: true
        }, null, 1, false, true);
        document.querySelector('.quickbox__new-form').reset();
        document.querySelector('.quickbox__navitem[href="#today"]').click();
        e.preventDefault();
      });
    }
  }]);
  return Quickbox;
}();
exports["default"] = Quickbox;

},{"./Dates":4,"./Filter":5,"./Footer":6,"./Scheduler":12,"./Store":14,"./Tickets":16,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/defineProperty":26,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/slicedToArray":33,"hlp":40,"pulltorefreshjs":198}],12:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var _Dates = _interopRequireDefault(require("./Dates"));
var _Filter = _interopRequireDefault(require("./Filter"));
var _hlp = _interopRequireDefault(require("hlp"));
var _Quickbox = _interopRequireDefault(require("./Quickbox"));
var _Weather = _interopRequireDefault(require("./Weather"));
var Scheduler = /*#__PURE__*/function () {
  function Scheduler() {
    (0, _classCallCheck2["default"])(this, Scheduler);
  }
  (0, _createClass2["default"])(Scheduler, null, [{
    key: "initScheduler",
    value: function initScheduler() {
      document.querySelector('.scheduler').innerHTML = "\n            <div class=\"scheduler__navigation\">\n                <span class=\"scheduler__navigation-week\"></span>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--next-month\" title=\"_next_month\">&gt;&gt;&gt;</a>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--next-week\" title=\"_next_week\">&gt;&gt;</a>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--next-day\" title=\"_next_day\">&gt;</a>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--today\" title=\"_next_today\">_</a>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--prev-day\" title=\"_prev_day\">&lt;</a>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--prev-week\" title=\"_prev_week\">&lt;&lt;</a>\n                <a href=\"#\" class=\"scheduler__navigation-button scheduler__navigation-button--prev-month\" title=\"_prev_month\">&lt;&lt;&lt;</a>\n            </div>\n\n            <table class=\"scheduler__table\">\n                <thead class=\"scheduler__table-head\">\n                    <tr class=\"scheduler__row\">\n                        <td class=\"scheduler__cell\"></td>   \n                        ".concat(Array(7).join(0).split(0).map(function (item, i) {
        return "\n                            <td class=\"\n                                scheduler__cell\n                                ".concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getCurrentDate()) ? ' scheduler__cell--curday' : '', "\n                                ").concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getActiveDate()) ? ' scheduler__cell--activeday' : '', "\n                            \">\n                                ").concat(_Dates["default"].dateFormat(_Dates["default"].getDayOfActiveWeek(i + 1), 'D d.m.'), "\n                            </td>\n                        ");
      }).join(''), "\n                    </tr>\n                    <tr class=\"scheduler__row\">\n                        <td class=\"scheduler__cell\"></td>\n                        ").concat(Array(7).join(0).split(0).map(function (item, i) {
        return "\n                                    <td class=\"\n                                        scheduler__cell\n                                        ".concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getCurrentDate()) ? ' scheduler__cell--curday' : '', "\n                                        ").concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getActiveDate()) ? ' scheduler__cell--activeday' : '', "\n                                    \">\n                                        ").concat(_Weather["default"].outputWeather(_Dates["default"].getDayOfActiveWeek(i + 1)), "\n                                    </td>\n                                ");
      }).join(''), "\n                    </tr>\n                </thead>\n                <tbody class=\"scheduler__table-body\">\n                    <tr class=\"scheduler__row\">\n                        <td class=\"scheduler__cell\"></td>   \n                        ").concat(Array(7).join(0).split(0).map(function (item, i) {
        return "\n                            <td class=\"\n                                scheduler__cell\n                                ".concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getCurrentDate()) ? ' scheduler__cell--curday' : '', "\n                                ").concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getActiveDate()) ? ' scheduler__cell--activeday' : '', "\n                            \"></td>\n                        ");
      }).join(''), "\n                    </tr>\n                    ").concat(Array(15).join(0).split(0).map(function (item, j) {
        j = j + 9;
        return "\n                            <tr class=\"scheduler__row\">\n                                <td class=\"scheduler__cell\">".concat(('0' + j).slice(-2), "&ndash;").concat(('0' + (j + 1)).slice(-2), "</td>\n                                ").concat(Array(7).join(0).split(0).map(function (item, i) {
          return "\n                                    <td class=\"\n                                        scheduler__cell\n                                        ".concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getCurrentDate()) ? ' scheduler__cell--curday' : '', "\n                                        ").concat(_Dates["default"].sameDay(_Dates["default"].getDayOfActiveWeek(i + 1), _Dates["default"].getActiveDate()) ? ' scheduler__cell--activeday' : '', "\n                                        ").concat(i < 5 && (j >= 9 && j < 13 || j >= 14 && j < 18) ? ' scheduler__cell--main' : '', "\n                                    \">\n                                    </td>\n                                ");
        }).join(''), "\n                            </tr>\n                        ");
      }).join(''), "\n                </tbody>\n            </table>\n\n            <div class=\"scheduler__appointments\">\n            </div>\n        ");
      var generatedDates = Scheduler.generateDates();
      var weeklySum = 0;
      generatedDates.forEach(function (date__value) {
        document.querySelector('.scheduler__appointments').insertAdjacentHTML('beforeend', "\n                    <div class=\"scheduler__appointment\" title=\"".concat(date__value.title, "\" style=\"\n                        left:").concat(date__value.posLeft, "%;\n                        top:").concat(date__value.posTop, "%;\n                        bottom:").concat(date__value.posBottom, "%;\n                        background:").concat(date__value.background, ";\n                        opacity:").concat(date__value.opacity, ";\n                        width:").concat(date__value.width, ";\n                    \">\n                        ").concat(date__value.name, "\n                    </div>\n                "));
        if (date__value.time != '' && date__value.project !== 'Olga') {
          weeklySum += date__value.time;
        }
      });
      weeklySum = (Math.round(weeklySum * 100) / 100).toString().replace('.', ',');
      document.querySelector('.scheduler__navigation-week').innerHTML = "\n            ".concat(_Dates["default"].dateFormat(_Dates["default"].getDayOfActiveWeek(1), 'd.m.'), " &ndash; ").concat(_Dates["default"].dateFormat(_Dates["default"].getDayOfActiveWeek(7), 'd.m.Y'), " /// _kw ").concat(_Dates["default"].weekNumber(_Dates["default"].getDayOfActiveWeek(1)), " /// ").concat(weeklySum, " hours\n        ");
    }
  }, {
    key: "bindScheduler",
    value: function bindScheduler() {
      document.querySelector('.scheduler').addEventListener('click', function (e) {
        if (e.target.closest('.scheduler__navigation-button')) {
          if (e.target.closest('.scheduler__navigation-button--today')) {
            _Store["default"].data.session.activeDay = new Date();
          }
          if (e.target.closest('.scheduler__navigation-button--prev-day')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() - 1);
          }
          if (e.target.closest('.scheduler__navigation-button--next-day')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() + 1);
          }
          if (e.target.closest('.scheduler__navigation-button--prev-week')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() - 7);
          }
          if (e.target.closest('.scheduler__navigation-button--next-week')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() + 7);
          }
          if (e.target.closest('.scheduler__navigation-button--prev-month')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() - 28);
          }
          if (e.target.closest('.scheduler__navigation-button--next-month')) {
            _Store["default"].data.session.activeDay.setDate(_Store["default"].data.session.activeDay.getDate() + 28);
          }
          document.querySelector('.metabar__select--filter[name="date"]').value = _Dates["default"].dateFormat(_Store["default"].data.session.activeDay, 'Y-m-d');
          Scheduler.initScheduler();
          _Quickbox["default"].initToday();
          _Filter["default"].doFilter();
          e.preventDefault();
        }
      });
    }
  }, {
    key: "generateDates",
    value: function generateDates() {
      var generatedDates = [];
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        var name = tickets__value.project,
          title = _hlp["default"].htmlEncode(tickets__value.project + '\n' + (tickets__value.description || '').split('\n').map(function (i) {
            return _hlp["default"].truncate_string(i, 100);
          }).join('\n')),
          project = tickets__value.project,
          parsed_values = _Dates["default"].parseDateString(tickets__value.date, 'scheduler');
        var background = Scheduler.getStoreProperty('background', tickets__value.status, tickets__value.project, null) || Scheduler.getStoreProperty('border', tickets__value.status, tickets__value.project, '#9E9E9E');
        if (parsed_values !== false && parsed_values.length > 0) {
          parsed_values.forEach(function (parsed_values__value) {
            generatedDates.push({
              day: parsed_values__value.day,
              begin: parsed_values__value.begin,
              end: parsed_values__value.end,
              name: name,
              title: title,
              project: project,
              time: parsed_values__value.time,
              background: background,
              opacity: Scheduler.getStoreProperty('opacity', tickets__value.status, tickets__value.project, 1)
            });
          });
        }
      });

      /* visual compression of all day events */
      var generatedDatesUndefinedMax = [],
        generatedDatesUndefinedCur = [];
      generatedDates.forEach(function (generatedDates__value) {
        if (generatedDates__value.begin === null) {
          if (!(generatedDates__value.day in generatedDatesUndefinedMax)) {
            generatedDatesUndefinedMax[generatedDates__value.day] = 0;
          }
          if (!(generatedDates__value.day in generatedDatesUndefinedCur)) {
            generatedDatesUndefinedCur[generatedDates__value.day] = 0;
          }
          generatedDatesUndefinedMax[generatedDates__value.day]++;
        }
      });

      /* visual compression of conflicting events */
      var conflicts = {};
      generatedDates.forEach(function (gv1, gk1) {
        if (gv1.begin === null || gv1.end === null) {
          return;
        }
        generatedDates.forEach(function (gv2, gk2) {
          if (gk1 === gk2) {
            return;
          }
          if (gv2.day !== gv1.day) {
            return;
          }
          if (gv2.begin === null || gv2.end === null) {
            return;
          }
          if (gv2.begin < gv1.begin) {
            return;
          }
          if ('conflict' in gv2 && 'conflict' in gv1 && gv2.conflict === gv1.conflict) {
            return;
          }
          if (gv2.begin < gv1.end) {
            if ('conflict' in gv1) {
              var conflictId = gv1.conflict;
              gv2.conflict = conflictId;
              if (!(conflictId in conflicts)) {
                conflicts[conflictId] = {
                  count: 0,
                  painted: 0
                };
              }
              conflicts[conflictId].count += 1;
            } else if ('conflict' in gv2) {
              var _conflictId = gv2.conflict;
              gv1.conflict = _conflictId;
              if (!(_conflictId in conflicts)) {
                conflicts[_conflictId] = {
                  count: 0,
                  painted: 0
                };
              }
              conflicts[_conflictId].count += 1;
            } else {
              var _conflictId2 = _hlp["default"].pushId();
              gv1.conflict = _conflictId2;
              gv2.conflict = _conflictId2;
              if (!(_conflictId2 in conflicts)) {
                conflicts[_conflictId2] = {
                  count: 0,
                  painted: 0
                };
              }
              conflicts[_conflictId2].count += 2;
            }
          }
        });
      });

      /* finalize */
      generatedDates.forEach(function (date__value) {
        var posTop, posBottom;
        if (date__value.begin === null) {
          posTop = generatedDatesUndefinedCur[date__value.day] / generatedDatesUndefinedMax[date__value.day] * 6.25;
          posBottom = 100 - (generatedDatesUndefinedCur[date__value.day] + 1) / generatedDatesUndefinedMax[date__value.day] * 6.25;
          generatedDatesUndefinedCur[date__value.day]++;
        } else {
          posTop = 6.25 * (date__value.begin - 8);
          posBottom = 100 - 6.25 * (date__value.end - 8);
        }
        var width, posLeft;
        if (!('conflict' in date__value)) {
          width = 'calc(12.5% - 4rem)';
          posLeft = 12.5 * date__value.day;
        } else {
          width = 'calc(' + 12.5 / conflicts[date__value.conflict].count + '% - 4rem)';
          posLeft = 12.5 * date__value.day + 12.5 / conflicts[date__value.conflict].count * conflicts[date__value.conflict].painted;
          conflicts[date__value.conflict].painted++;
        }
        date__value.posLeft = posLeft;
        date__value.posTop = posTop;
        date__value.posBottom = posBottom;
        date__value.width = width;
      });
      return generatedDates;
    }
  }, {
    key: "determineNextFreeSlot",
    value: function determineNextFreeSlot(str) {
      var d = _Dates["default"].parseDateString(str, 'scheduler')[0],
        dates = [];
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        var parsed_values = _Dates["default"].parseDateString(tickets__value.date, 'scheduler');
        if (parsed_values !== false && parsed_values.length > 0) {
          parsed_values.forEach(function (parsed_values__value) {
            dates.push({
              date: parsed_values__value.date,
              begin: parsed_values__value.begin,
              end: parsed_values__value.end
            });
          });
        }
      });
      var conflict = true;
      while (conflict === true) {
        conflict = false;
        dates.forEach(function (dates__value) {
          if (dates__value.begin === null || dates__value.end === null || d.begin === null || d.end === null) {
            return;
          }
          if (_Dates["default"].compareDates(d.date, dates__value.date) !== 0) {
            return;
          }
          if (d.end <= dates__value.begin || dates__value.end <= d.begin) {
            return;
          }
          d.begin += 0.5;
          d.end += 0.5;
          if (d.begin >= 21) {
            d.date.setDate(d.date.getDate() + 1);
            d.date.setHours(9);
            d.begin = 9;
            d.end = 9.5;
          }
          conflict = true;
        });
      }
      return _Dates["default"].dateFormat(d.date, 'd.m.y') + ' ' + _Dates["default"].timeFormat(d.begin) + '-' + _Dates["default"].timeFormat(d.end);
    }
  }, {
    key: "getStoreProperty",
    value: function getStoreProperty(property, status) {
      var project = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var defValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      if (project !== null && project !== '' && _Store["default"].data.colors.project.hasOwnProperty(project) && (0, _typeof2["default"])(_Store["default"].data.colors.project[project]) === 'object' && property in _Store["default"].data.colors.project[project]) {
        return _Store["default"].data.colors.project[project][property];
      }
      if (status !== null && status !== '' && _Store["default"].data.colors.status.hasOwnProperty(status) && (0, _typeof2["default"])(_Store["default"].data.colors.status[status]) === 'object' && property in _Store["default"].data.colors.status[status]) {
        return _Store["default"].data.colors.status[status][property];
      }
      return defValue;
    }
  }, {
    key: "updateColors",
    value: function updateColors() {
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        if (tickets__value.visible === true) {
          var borderColor = Scheduler.getStoreProperty('border', tickets__value.status, tickets__value.project, '#9E9E9E'),
            backgroundColor = Scheduler.getStoreProperty('background', tickets__value.status, tickets__value.project, null),
            opacity = Scheduler.getStoreProperty('opacity', tickets__value.status, tickets__value.project, 1),
            el = document.querySelector('.tickets .tickets__entry[data-id="' + tickets__value.id + '"]');
          if (borderColor) {
            el.style.borderLeftColor = borderColor;
          } else {
            el.style.borderLeftColor = 'transparent';
          }
          if (backgroundColor) {
            el.style.background = backgroundColor;
          } else {
            el.style.background = 'none';
          }
          if (opacity) {
            el.style.opacity = opacity;
          } else {
            el.style.opacity = 1;
          }
        }
      });
    }
  }]);
  return Scheduler;
}();
exports["default"] = Scheduler;

},{"./Dates":4,"./Filter":5,"./Quickbox":11,"./Store":14,"./Weather":18,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/typeof":37,"hlp":40}],13:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var Sort = /*#__PURE__*/function () {
  function Sort() {
    (0, _classCallCheck2["default"])(this, Sort);
  }
  (0, _createClass2["default"])(Sort, null, [{
    key: "initSort",
    value: function initSort() {
      document.querySelector('.metabar').insertAdjacentHTML('beforeend', '<div class="metabar__sort"></div>');
      [1, 2].forEach(function (step) {
        document.querySelector('.metabar__sort').insertAdjacentHTML('beforeend', '<select class="metabar__select metabar__select--sort" name="sort_' + step + '"><option value="">sort #' + step + '</option></select>');
        _Store["default"].data.cols.forEach(function (columns__value) {
          document.querySelector('.metabar__select--sort[name="sort_' + step + '"]').insertAdjacentHTML('beforeend', '<option value="' + columns__value + '">' + columns__value + '</option>');
        });
      });
      document.querySelector('.metabar').addEventListener('change', function (e) {
        if (e.target.closest('.metabar__select--sort')) {
          Sort.doSort();
        }
      });
    }
  }, {
    key: "doSort",
    value: function doSort() {
      var sort_1 = document.querySelector('.metabar__select--sort[name="sort_1"]').value,
        sort_2 = document.querySelector('.metabar__select--sort[name="sort_2"]').value,
        sorted = (0, _toConsumableArray2["default"])(document.querySelector('.tickets .tickets__table-body').querySelectorAll('.tickets__entry--visible')).sort(function (a, b) {
          var val_a, val_b;
          if (sort_1 != '') {
            val_a = a.querySelector('[name="' + sort_1 + '"]').value.toLowerCase();
            val_b = b.querySelector('[name="' + sort_1 + '"]').value.toLowerCase();
            if (sort_1 === 'date') {
              val_a = Dates.germanDateTimeToEnglishString(val_a);
              val_b = Dates.germanDateTimeToEnglishString(val_b);
            }
            if (val_a < val_b) {
              return -1;
            }
            if (val_a > val_b) {
              return 1;
            }
          }
          if (sort_1 == '') {
            val_a = a.querySelector('[name="status"]').value;
            val_b = b.querySelector('[name="status"]').value;
            if (val_a != val_b) {
              for (var _i = 0, _arr = ['allday', 'billed', 'done', 'working', 'fixed', 'scheduled', 'idle', 'recurring', 'roaming']; _i < _arr.length; _i++) {
                var status__value = _arr[_i];
                if (val_a === status__value) {
                  return -1;
                }
                if (val_b === status__value) {
                  return 1;
                }
              }
            }
          }
          if (sort_2 != '') {
            val_a = a.querySelector('[name="' + sort_2 + '"]').value.toLowerCase();
            val_b = b.querySelector('[name="' + sort_2 + '"]').value.toLowerCase();
            if (val_a < val_b) {
              return -1;
            }
            if (val_a > val_b) {
              return 1;
            }
          }
          for (var _i2 = 0, _arr2 = [a.querySelector('[name="status"]').value == 'recurring' && b.querySelector('[name="status"]').value == 'recurring' ? [a.querySelector('[name="date"]').value, b.querySelector('[name="date"]').value] : [Dates.germanDateTimeToEnglishString(a.querySelector('[name="date"]').value), Dates.germanDateTimeToEnglishString(b.querySelector('[name="date"]').value)], [a.querySelector('[name="priority"]').value, b.querySelector('[name="priority"]').value], [a.querySelector('[name="project"]').value, b.querySelector('[name="project"]').value], [a.querySelector('[name="description"]').value, b.querySelector('[name="description"]').value], [a.getAttribute('data-id'), b.getAttribute('data-id')]]; _i2 < _arr2.length; _i2++) {
            var _arr2$_i = (0, _slicedToArray2["default"])(_arr2[_i2], 2),
              _val_a = _arr2$_i[0],
              _val_b = _arr2$_i[1];
            if (_val_a < _val_b) {
              return -1;
            }
            if (_val_a > _val_b) {
              return 1;
            }
          }
          return 0;
        });
      for (var i = 0; i < sorted.length; i++) {
        // save scroll positions
        sorted[i].querySelectorAll('textarea').forEach(function (el) {
          el.scrollTopBackup = el.scrollTop;
        });
        sorted[i].parentNode.appendChild(sorted[i]);
        // restore scroll positions
        sorted[i].querySelectorAll('textarea').forEach(function (el) {
          el.scrollTop = el.scrollTopBackup;
        });
      }
    }
  }]);
  return Sort;
}();
exports["default"] = Sort;

},{"./Store":14,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/slicedToArray":33,"@babel/runtime/helpers/toConsumableArray":34}],14:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var Store = /*#__PURE__*/function () {
  function Store() {
    (0, _classCallCheck2["default"])(this, Store);
  }
  (0, _createClass2["default"])(Store, null, [{
    key: "initStore",
    value: function initStore() {
      Store.data = {
        busy: false,
        api: null,
        user: null,
        tickets: null,
        mails: null,
        weather: null,
        cols: ['status', 'priority', 'date', 'time', 'project', 'description'],
        colors: {
          status: {
            idle: {
              border: '#4527a0'
            },
            allday: {
              border: '#868686',
              opacity: 0.75
            },
            roaming: {
              border: '#ba68c8'
            },
            fixed: {
              border: '#2196F3'
            },
            done: {
              border: '#FFB300'
            },
            billed: {
              border: '#4CAF50'
            },
            recurring: {
              border: '#E91E63'
            },
            working: {
              border: '#F44336'
            },
            scheduled: {
              border: '#9E9E9E'
            }
          },
          project: {
            Geburtstag: {
              border: '#ba68c8',
              background: 'linear-gradient(178deg, #cb60b3 0%, #c146a1 50%, #a80077 51%, #db36a4 100%)'
            },
            Olga: {
              opacity: 0.75
            },
            mail: {
              opacity: 0.75
            }
          }
        },
        session: {
          activeDay: new Date()
        }
      };
    }
  }]);
  return Store;
}();
exports["default"] = Store;
(0, _defineProperty2["default"])(Store, "data", {});
window.Store = Store;

},{"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/defineProperty":26,"@babel/runtime/helpers/interopRequireDefault":27}],15:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Helper = _interopRequireDefault(require("./Helper"));
var Textarea = /*#__PURE__*/function () {
  function Textarea() {
    (0, _classCallCheck2["default"])(this, Textarea);
  }
  (0, _createClass2["default"])(Textarea, null, [{
    key: "textareaAutoHeight",
    value: function textareaAutoHeight() {
      var debounce = _Helper["default"].debounce(function (e) {
        Textarea.textareaSetHeight(e.target);
      }, 100);
      document.querySelector('.tickets .tickets__table-body').addEventListener('input', function (e) {
        if (e.target && e.target.tagName === 'TEXTAREA' && e.target.classList.contains('tickets__textarea--description')) {
          /* immediately change height if enter is pressed */
          if (e.inputType === 'insertLineBreak') {
            Textarea.textareaSetHeight(e.target);
          } else {
            /* otherwise debounce */
            debounce(e);
          }
        }
      });
    }
  }, {
    key: "textareaSetVisibleHeights",
    value: function textareaSetVisibleHeights() {
      document.querySelector('.tickets .tickets__table-body').querySelectorAll('.tickets__entry--visible .tickets__textarea--description').forEach(function (el, index) {
        Textarea.textareaSetHeight(el);
      });
    }
  }, {
    key: "textareaSetHeight",
    value: function textareaSetHeight(el) {
      var min = 3,
        max = 7,
        cur = (el.value.match(/\n/g) || []).length + 1;
      if (cur < min) {
        cur = min;
      } else if (cur > max) {
        cur = max;
      }
      var height = 15 * cur + 'rem';
      el.style.height = height;
      /* also set other textarea heights */
      var parent = el.parentNode;
      (0, _toConsumableArray2["default"])(parent.parentNode.children).filter(function (child) {
        return child !== parent;
      }).forEach(function (i) {
        if (i.querySelector('textarea') !== null) {
          i.querySelector('textarea').style.height = height;
        }
      });
    }
  }]);
  return Textarea;
}();
exports["default"] = Textarea;

},{"./Helper":7,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/toConsumableArray":34}],16:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Dates = _interopRequireDefault(require("./Dates"));
var _Filter = _interopRequireDefault(require("./Filter"));
var _Helper = _interopRequireDefault(require("./Helper"));
var _Html = _interopRequireDefault(require("./Html"));
var _Lock = _interopRequireDefault(require("./Lock"));
var _Scheduler = _interopRequireDefault(require("./Scheduler"));
var _Quickbox = _interopRequireDefault(require("./Quickbox"));
var _Store = _interopRequireDefault(require("./Store"));
var _Textarea = _interopRequireDefault(require("./Textarea"));
var _Footer = _interopRequireDefault(require("./Footer"));
var _Attachments = _interopRequireDefault(require("./Attachments"));
var _hlp = _interopRequireDefault(require("hlp"));
var Tickets = /*#__PURE__*/function () {
  function Tickets() {
    (0, _classCallCheck2["default"])(this, Tickets);
  }
  (0, _createClass2["default"])(Tickets, null, [{
    key: "updateLocalTicket",
    value: function updateLocalTicket(ticket_id) {
      return new Promise(function (resolve, reject) {
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/tickets/' + ticket_id, {
          method: 'GET',
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          reject(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          Tickets.setTicketData(ticket_id, response.data);
          resolve();
        });
      });
    }
  }, {
    key: "setTicketData",
    value: function setTicketData(ticket_id, property) {
      var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        if (tickets__value.id == ticket_id) {
          if (_Helper["default"].isObject(property)) {
            Object.entries(property).forEach(function (_ref) {
              var _ref2 = (0, _slicedToArray2["default"])(_ref, 2),
                property__key = _ref2[0],
                property__value = _ref2[1];
              tickets__value[property__key] = property__value;
            });
          } else {
            tickets__value[property] = value;
          }
        }
      });
    }
  }, {
    key: "fetchAndRenderTicketsInterval",
    value: function fetchAndRenderTicketsInterval() {
      if (_hlp["default"].isDesktop()) {
        setInterval(function () {
          if (_Store["default"].data.busy === true) {
            return;
          }
          if (document.querySelector(':focus') !== null) {
            return;
          }
          Tickets.fetchAndRenderTicketsAndUpdateApp();
          _Footer["default"].updateStatus('successfully synced tasks.', 'success');
        }, 1 * 60 * 1000);
      }
    }
  }, {
    key: "fetchAndRenderTicketsAndUpdateApp",
    value: function () {
      var _fetchAndRenderTicketsAndUpdateApp = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return Tickets.fetchAndRenderTickets();
            case 2:
              _Scheduler["default"].initScheduler();
              _Scheduler["default"].updateColors();
              _Quickbox["default"].initToday();
              Tickets.updateSum();
              _Filter["default"].updateFilter();
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function fetchAndRenderTicketsAndUpdateApp() {
        return _fetchAndRenderTicketsAndUpdateApp.apply(this, arguments);
      }
      return fetchAndRenderTicketsAndUpdateApp;
    }()
  }, {
    key: "fetchAndRenderTickets",
    value: function fetchAndRenderTickets() {
      return new Promise(function (resolve, reject) {
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/tickets', {
          method: 'GET',
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          reject(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          if (_Store["default"].data.tickets === null) {
            _Store["default"].data.tickets = [];
          }

          // remove
          _Store["default"].data.tickets = _Store["default"].data.tickets.filter(function (tickets__value) {
            var exists = response.data.filter(function (el) {
              return el.id == tickets__value.id;
            }).length > 0;
            if (exists === false) {
              document.querySelector('.tickets__entry[data-id="' + tickets__value.id + '"]').remove();
              //console.log('removing ticket ' + tickets__value.id);
            }

            return exists;
          });

          // edit
          response.data.forEach(function (tickets__value) {
            _Store["default"].data.tickets.forEach(function (store__value, store__key) {
              if (store__value.id == tickets__value.id && store__value.updated_at != tickets__value.updated_at) {
                tickets__value.visible = false;
                _Store["default"].data.tickets[store__key] = tickets__value;
                document.querySelector('.tickets__entry[data-id="' + tickets__value.id + '"]').outerHTML = _Html["default"].createHtmlLine(tickets__value, false);
                //console.log('editing ticket ' + tickets__value.id);
              }
            });
          });

          // add
          response.data.forEach(function (tickets__value) {
            if (_Store["default"].data.tickets.filter(function (el) {
              return el.id == tickets__value.id;
            }).length === 0) {
              tickets__value.visible = false;
              _Store["default"].data.tickets.push(tickets__value);
              document.querySelector('.tickets__table-body').insertAdjacentHTML('beforeend', _Html["default"].createHtmlLine(tickets__value, false));
              //console.log('adding ticket ' + tickets__value.id);
            }
          });

          resolve();
        });
      });
    }
  }, {
    key: "getTicketData",
    value: function getTicketData(ticket_id) {
      var data = null;
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        if (tickets__value.id == ticket_id) {
          data = tickets__value;
        }
      });
      return _hlp["default"].deepCopy(data);
    }
  }, {
    key: "deleteTicket",
    value: function deleteTicket(ticket_id) {
      return new Promise(function (resolve, reject) {
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/tickets/' + ticket_id, {
          method: 'DELETE',
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          console.error(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          _Store["default"].data.tickets.forEach(function (tickets__value, tickets__key) {
            if (tickets__value.id == ticket_id) {
              _Store["default"].data.tickets.splice(tickets__key, 1);
            }
          });
          resolve();
        });
      });
    }
  }, {
    key: "saveTickets",
    value: function saveTickets() {
      return new Promise(function (resolve, reject) {
        if (document.querySelector('.tickets .tickets__table-body').querySelector('.tickets__textarea:invalid') !== null) {
          reject('not saved - invalid fields!');
          return;
        }
        var changed = [];
        document.querySelector('.tickets .tickets__table-body').querySelectorAll('.tickets__entry--changed').forEach(function (el) {
          var data = {};
          _Store["default"].data.cols.forEach(function (cols__value) {
            data[cols__value] = el.querySelector('[name="' + cols__value + '"]').value;
          });
          data['updated_at'] = _Dates["default"].time().toString();
          Tickets.setTicketData(el.getAttribute('data-id'), data);
          _Lock["default"].lockTicket(el.getAttribute('data-id'));
          changed.push(Tickets.getTicketData(el.getAttribute('data-id')));
        });
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/tickets', {
          method: 'PUT',
          body: JSON.stringify({
            tickets: changed
          }),
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          console.error(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          response.data.ids.forEach(function (value) {
            _Lock["default"].unlockTicket(value);
          });
          _Scheduler["default"].initScheduler();
          _Scheduler["default"].updateColors();
          _Quickbox["default"].initToday();
          Tickets.updateSum();
          _Filter["default"].updateFilter();
          resolve();
        });
      });
    }
  }, {
    key: "createTicket",
    value: function createTicket() {
      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return new Promise(function (resolve, reject) {
        var ticket = {};
        _Store["default"].data.cols.forEach(function (cols__value) {
          ticket[cols__value] = cols__value in data ? data[cols__value] : '';
        });
        ticket['updated_at'] = _Dates["default"].time().toString();
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/tickets', {
          method: 'POST',
          body: JSON.stringify(ticket),
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          reject(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          ticket.id = response.data.id;
          ticket.visible = true;
          _Store["default"].data.tickets.push(ticket);
          resolve(ticket);
        });
      });
    }
  }, {
    key: "bindSave",
    value: function bindSave() {
      // ctrl+s
      document.addEventListener('keydown', function (event) {
        var focus = document.activeElement;
        if (event.ctrlKey || event.metaKey) {
          if (String.fromCharCode(event.which).toLowerCase() === 's') {
            _Footer["default"].updateStatus('saving...', 'warning');
            Tickets.saveTickets().then(function () {
              _Footer["default"].updateStatus('saved!', 'success');
              if (focus !== null) {
                focus.focus();
              }
            })["catch"](function (error) {
              _Footer["default"].updateStatus(error, 'error');
            });
            event.preventDefault();
          }
        }
      });
    }
  }, {
    key: "bindCreate",
    value: function bindCreate() {
      // ctrl+d
      document.addEventListener('keydown', function (event) {
        if (event.ctrlKey || event.metaKey) {
          if (String.fromCharCode(event.which).toLowerCase() === 'd') {
            Tickets.prepareCreateTicket();
            event.preventDefault();
          }
        }
      });
    }
  }, {
    key: "prepareCreateTicket",
    value: function prepareCreateTicket() {
      var visibleAll = document.querySelector('.tickets .tickets__table-body').querySelectorAll('.tickets__entry--visible'),
        current = null,
        currentCol = 1,
        duplicateData = {};
      if (visibleAll.length > 0) {
        if (document.activeElement.closest('.tickets__entry') !== null) {
          current = document.activeElement.closest('.tickets__entry');
          currentCol = _Helper["default"].prevAll(document.activeElement.closest('td')).length + 1;
        } else {
          current = visibleAll[visibleAll.length - 1];
          currentCol = 1;
        }
        duplicateData = Tickets.getTicketData(current.getAttribute('data-id'));
        delete duplicateData['attachments'];
      }
      /* if source is a recurring ticket, do some magic */
      if (current !== null && duplicateData.status === 'recurring' && confirm('should the copy be a scheduled ticket and the recurring ticket automatically be postponed?')) {
        var newDates = [];
        duplicateData.date.split('\n').forEach(function (duplicateData__value) {
          // only add relevant
          var parsed = _Dates["default"].parseDateString(duplicateData__value, 'tickets');
          if (parsed.length === 0) {
            return;
          }
          var newDate = _Dates["default"].dateFormat(_Dates["default"].getActiveDate(), 'd.m.y'),
            extractedTime = _Dates["default"].extractTimeFromDate(duplicateData__value);
          if (extractedTime) {
            newDate += ' ' + extractedTime;
          }
          newDates.push(newDate);
        });
        current.querySelector('.tickets__textarea--date').value = _Dates["default"].includeNewLowerBoundInDate(duplicateData.date, _Dates["default"].getActiveDate());
        current.querySelector('.tickets__textarea--date').dispatchEvent(new Event('input', {
          bubbles: true
        }));
        duplicateData.date = newDates.join('\n');
        duplicateData.status = 'scheduled';
      }
      Tickets.createAndAppendTicket(duplicateData, current, currentCol, true, false);
    }
  }, {
    key: "createAndAppendTicket",
    value: function createAndAppendTicket(data) {
      var current = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var currentCol = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      var withSelect = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var doFilter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
      if (['tonight', 'weekend', 'next'].includes(data.date)) {
        var d = new Date();
        /*
        if (d.getHours() >= 21) {
            d.setDate(d.getDate() + 1);
            d.setHours(9);
        }
        */
        if (data.date === 'weekend') {
          while (d.getDay() % 6 !== 0) {
            d.setDate(d.getDate() + 1);
          }
        }
        if (data.date === 'next') {
          data.date = _Scheduler["default"].determineNextFreeSlot(('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.' + d.getFullYear().toString().substr(-2) + ' ' + _Dates["default"].timeFormat(d.getHours() + 1) + '-' + _Dates["default"].timeFormat(d.getHours() + 1.5));
        } else {
          data.date = ('0' + d.getDate()).slice(-2) + '.' + ('0' + (d.getMonth() + 1)).slice(-2) + '.' + d.getFullYear().toString().substr(-2) + ' 21:00-21:30';
        }
      }
      Tickets.createTicket(data).then(function (ticket) {
        var next;
        if (current !== null) {
          current.insertAdjacentHTML('afterend', _Html["default"].createHtmlLine(ticket, true));
          next = current.nextElementSibling;
        } else {
          document.querySelector('.tickets .tickets__table-body').insertAdjacentHTML('beforeend', _Html["default"].createHtmlLine(ticket, true));
          next = document.querySelector('.tickets .tickets__table-body').querySelector('.tickets__entry--visible[data-id="' + ticket.id + '"]');
        }
        if (withSelect === true) {
          var input = next.querySelector('td:nth-child(' + currentCol + ')').querySelector('input, textarea');
          input.select();
          input.dispatchEvent(new Event('input', {
            bubbles: true
          }));
        }
        _Scheduler["default"].initScheduler();
        _Scheduler["default"].updateColors();
        _Quickbox["default"].initToday();
        Tickets.updateSum();
        _Filter["default"].updateFilter();
        _Textarea["default"].textareaSetVisibleHeights();
        if (doFilter === true) {
          _Filter["default"].doFilter();
        }
        if ('attachments' in data && data.attachments.length > 0) {
          _Attachments["default"].startUploadsAndBuildHtml(ticket.id, data.attachments);
        }
      })["catch"](function (error) {
        console.error(error);
      });
    }
  }, {
    key: "bindChangeTracking",
    value: function bindChangeTracking() {
      document.querySelector('.tickets').addEventListener('input', function (e) {
        if (e.target.closest('.tickets__entry input, .tickets__entry textarea')) {
          if (e.target.hasAttribute('type') && e.target.getAttribute('type') === 'file') {
            return;
          }
          e.target.closest('.tickets__entry').classList.add('tickets__entry--changed');
        }
      });
    }
  }, {
    key: "bindValidation",
    value: function bindValidation() {
      document.querySelector('.tickets').addEventListener('input', function (e) {
        if (e.target.value !== '') {
          if (e.target.closest('.tickets__textarea--date')) {
            if (_Dates["default"].parseDateString(e.target.value, 'tickets') === false) {
              e.target.setCustomValidity('wrong format');
            } else {
              e.target.setCustomValidity('');
            }
          }
          if (e.target.closest('.tickets__textarea--time')) {
            if (!new RegExp('^[0-9]$|^[0-9],[0-9]$|^[0-9],[0-9][0-9]$').test(e.target.value) || e.target.value < 0 || e.target.value > 24) {
              e.target.setCustomValidity('wrong format');
            } else {
              e.target.setCustomValidity('');
            }
          }
          if (e.target.closest('.tickets__textarea--project')) {
            if (new RegExp('[^a-zA-Z0-9Ã¤ÃÃ¶ÃÃ¼ÃÃ .-]').test(e.target.value)) {
              e.target.setCustomValidity('wrong format');
            } else {
              e.target.setCustomValidity('');
            }
          }
          if (e.target.closest('.tickets__textarea--priority')) {
            if (!['A', 'B', 'C', 'D'].includes(e.target.value)) {
              e.target.setCustomValidity('wrong format');
            } else {
              e.target.setCustomValidity('');
            }
          }
          if (e.target.closest('.tickets__textarea--status')) {
            if (!['scheduled', 'idle', 'allday', 'roaming', 'fixed', 'done', 'billed', 'recurring', 'working'].includes(e.target.value)) {
              e.target.setCustomValidity('wrong format');
            } else {
              e.target.setCustomValidity('');
            }
          }
        } else {
          e.target.setCustomValidity('');
        }
      });
    }
  }, {
    key: "bindAutoTime",
    value: function bindAutoTime() {
      document.querySelector('.tickets').addEventListener('input', function (e) {
        if (e.target.closest('.tickets__entry [name="date"]')) {
          if (e.target.value != '') {
            var parsed_values = _Dates["default"].parseDateString(e.target.value, 'all');
            if (parsed_values !== false) {
              var time = 0;
              parsed_values.forEach(function (parses_values__value) {
                if (parses_values__value.begin !== undefined && parses_values__value.end !== undefined) {
                  time += Math.abs(parses_values__value.end - parses_values__value.begin);
                }
              });
              if (!Number.isInteger(time)) {
                time = time.toFixed(2);
              }
              time = time.toString().replace('.', ',');
              e.target.closest('.tickets__entry').querySelector('.tickets__textarea--time').value = time;
              e.target.closest('.tickets__entry').querySelector('.tickets__textarea--time').setCustomValidity('');
            }
          }
        }
      });
    }
  }, {
    key: "bindDelete",
    value: function bindDelete() {
      document.querySelector('.tickets').addEventListener('click', function (e) {
        if (e.target.closest('.tickets__entry__delete')) {
          var ticket_id = e.target.closest('.tickets__entry').getAttribute('data-id');
          if (_Lock["default"].ticketIsLocked(ticket_id)) {
            e.preventDefault();
          }
          var result = confirm('Sind Sie sicher?');
          if (result) {
            Tickets.deleteTicket(ticket_id).then(function (result) {
              e.target.closest('.tickets__entry').remove();
              _Scheduler["default"].initScheduler();
              _Quickbox["default"].initToday();
              Tickets.updateSum();
              _Filter["default"].updateFilter();
            })["catch"](function (error) {});
            e.preventDefault();
          }
          e.preventDefault();
        }
      });
    }
  }, {
    key: "updateSum",
    value: function updateSum() {
      var sum = 0;
      _Store["default"].data.tickets.forEach(function (tickets__value) {
        if (tickets__value.visible !== false && tickets__value.time !== null && tickets__value.time != '' && !['allday', 'billed'].includes(tickets__value.status)) {
          sum += parseFloat(tickets__value.time.replace(',', '.'));
        }
      });
      sum = Math.round(sum * 100) / 100;
      sum = sum.toString().replace('.', ',');
      document.querySelector('.tickets__table-foot').querySelector('.tickets__sum').textContent = sum;
    }
  }]);
  return Tickets;
}();
exports["default"] = Tickets;

},{"./Attachments":2,"./Dates":4,"./Filter":5,"./Footer":6,"./Helper":7,"./Html":8,"./Lock":10,"./Quickbox":11,"./Scheduler":12,"./Store":14,"./Textarea":15,"@babel/runtime/helpers/asyncToGenerator":23,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"@babel/runtime/helpers/slicedToArray":33,"@babel/runtime/regenerator":39,"hlp":40}],17:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var User = /*#__PURE__*/function () {
  function User() {
    (0, _classCallCheck2["default"])(this, User);
  }
  (0, _createClass2["default"])(User, null, [{
    key: "fetchUser",
    value: function fetchUser() {
      return new Promise(function (resolve, reject) {
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/users', {
          method: 'GET',
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          reject(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          _Store["default"].data.user = response.data;
          resolve();
        });
      });
    }
  }]);
  return User;
}();
exports["default"] = User;

},{"./Store":14,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27}],18:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _Store = _interopRequireDefault(require("./Store"));
var _Dates = _interopRequireDefault(require("./Dates"));
var Weather = /*#__PURE__*/function () {
  function Weather() {
    (0, _classCallCheck2["default"])(this, Weather);
  }
  (0, _createClass2["default"])(Weather, null, [{
    key: "fetchWeather",
    value: function fetchWeather() {
      return new Promise(function (resolve, reject) {
        _Store["default"].data.busy = true;
        _Store["default"].data.api.fetch('_api/weather', {
          method: 'GET',
          cache: 'no-cache',
          headers: {
            'content-type': 'application/json'
          }
        }).then(function (res) {
          return res.json();
        })["catch"](function (err) {
          reject(err);
        }).then(function (response) {
          _Store["default"].data.busy = false;
          _Store["default"].data.weather = response.data;
          resolve();
        });
      });
    }
  }, {
    key: "outputWeather",
    value: function outputWeather(date) {
      if (!(_Dates["default"].dateFormat(date, 'Y-m-d') in _Store["default"].data.weather)) {
        return '';
      }
      var html = '',
        data = _Store["default"].data.weather[_Dates["default"].dateFormat(date, 'Y-m-d')];
      html += 'ð¡ï¸' + data.temp + 'Â°Câ' + data.rain + 'mm';
      return html;
    }
  }]);
  return Weather;
}();
exports["default"] = Weather;

},{"./Dates":4,"./Store":14,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27}],19:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _App = _interopRequireDefault(require("./App"));
document.addEventListener('DOMContentLoaded', function () {
  _App["default"].init();
});

},{"./App":1,"@babel/runtime/helpers/interopRequireDefault":27}],20:[function(require,module,exports){
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];
  return arr2;
}
module.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],21:[function(require,module,exports){
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}
module.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],22:[function(require,module,exports){
var arrayLikeToArray = require("./arrayLikeToArray.js");
function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return arrayLikeToArray(arr);
}
module.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./arrayLikeToArray.js":20}],23:[function(require,module,exports){
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator(fn) {
  return function () {
    var self = this,
      args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(undefined);
    });
  };
}
module.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],24:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
module.exports = _classCallCheck, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],25:[function(require,module,exports){
var toPropertyKey = require("./toPropertyKey.js");
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
module.exports = _createClass, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./toPropertyKey.js":36}],26:[function(require,module,exports){
var toPropertyKey = require("./toPropertyKey.js");
function _defineProperty(obj, key, value) {
  key = toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
module.exports = _defineProperty, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./toPropertyKey.js":36}],27:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}
module.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],28:[function(require,module,exports){
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
module.exports = _iterableToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],29:[function(require,module,exports){
function _iterableToArrayLimit(r, l) {
  var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
  if (null != t) {
    var e,
      n,
      i,
      u,
      a = [],
      f = !0,
      o = !1;
    try {
      if (i = (t = t.call(r)).next, 0 === l) {
        if (Object(t) !== t) return;
        f = !1;
      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);
    } catch (r) {
      o = !0, n = r;
    } finally {
      try {
        if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return;
      } finally {
        if (o) throw n;
      }
    }
    return a;
  }
}
module.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],30:[function(require,module,exports){
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
module.exports = _nonIterableRest, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],31:[function(require,module,exports){
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
module.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],32:[function(require,module,exports){
var _typeof = require("./typeof.js")["default"];
function _regeneratorRuntime() {
  "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {
    return e;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports;
  var t,
    e = {},
    r = Object.prototype,
    n = r.hasOwnProperty,
    o = Object.defineProperty || function (t, e, r) {
      t[e] = r.value;
    },
    i = "function" == typeof Symbol ? Symbol : {},
    a = i.iterator || "@@iterator",
    c = i.asyncIterator || "@@asyncIterator",
    u = i.toStringTag || "@@toStringTag";
  function define(t, e, r) {
    return Object.defineProperty(t, e, {
      value: r,
      enumerable: !0,
      configurable: !0,
      writable: !0
    }), t[e];
  }
  try {
    define({}, "");
  } catch (t) {
    define = function define(t, e, r) {
      return t[e] = r;
    };
  }
  function wrap(t, e, r, n) {
    var i = e && e.prototype instanceof Generator ? e : Generator,
      a = Object.create(i.prototype),
      c = new Context(n || []);
    return o(a, "_invoke", {
      value: makeInvokeMethod(t, r, c)
    }), a;
  }
  function tryCatch(t, e, r) {
    try {
      return {
        type: "normal",
        arg: t.call(e, r)
      };
    } catch (t) {
      return {
        type: "throw",
        arg: t
      };
    }
  }
  e.wrap = wrap;
  var h = "suspendedStart",
    l = "suspendedYield",
    f = "executing",
    s = "completed",
    y = {};
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}
  var p = {};
  define(p, a, function () {
    return this;
  });
  var d = Object.getPrototypeOf,
    v = d && d(d(values([])));
  v && v !== r && n.call(v, a) && (p = v);
  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);
  function defineIteratorMethods(t) {
    ["next", "throw", "return"].forEach(function (e) {
      define(t, e, function (t) {
        return this._invoke(e, t);
      });
    });
  }
  function AsyncIterator(t, e) {
    function invoke(r, o, i, a) {
      var c = tryCatch(t[r], t, o);
      if ("throw" !== c.type) {
        var u = c.arg,
          h = u.value;
        return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) {
          invoke("next", t, i, a);
        }, function (t) {
          invoke("throw", t, i, a);
        }) : e.resolve(h).then(function (t) {
          u.value = t, i(u);
        }, function (t) {
          return invoke("throw", t, i, a);
        });
      }
      a(c.arg);
    }
    var r;
    o(this, "_invoke", {
      value: function value(t, n) {
        function callInvokeWithMethodAndArg() {
          return new e(function (e, r) {
            invoke(t, n, e, r);
          });
        }
        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
      }
    });
  }
  function makeInvokeMethod(e, r, n) {
    var o = h;
    return function (i, a) {
      if (o === f) throw new Error("Generator is already running");
      if (o === s) {
        if ("throw" === i) throw a;
        return {
          value: t,
          done: !0
        };
      }
      for (n.method = i, n.arg = a;;) {
        var c = n.delegate;
        if (c) {
          var u = maybeInvokeDelegate(c, n);
          if (u) {
            if (u === y) continue;
            return u;
          }
        }
        if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) {
          if (o === h) throw o = s, n.arg;
          n.dispatchException(n.arg);
        } else "return" === n.method && n.abrupt("return", n.arg);
        o = f;
        var p = tryCatch(e, r, n);
        if ("normal" === p.type) {
          if (o = n.done ? s : l, p.arg === y) continue;
          return {
            value: p.arg,
            done: n.done
          };
        }
        "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg);
      }
    };
  }
  function maybeInvokeDelegate(e, r) {
    var n = r.method,
      o = e.iterator[n];
    if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y;
    var i = tryCatch(o, e.iterator, r.arg);
    if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y;
    var a = i.arg;
    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y);
  }
  function pushTryEntry(t) {
    var e = {
      tryLoc: t[0]
    };
    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);
  }
  function resetTryEntry(t) {
    var e = t.completion || {};
    e.type = "normal", delete e.arg, t.completion = e;
  }
  function Context(t) {
    this.tryEntries = [{
      tryLoc: "root"
    }], t.forEach(pushTryEntry, this), this.reset(!0);
  }
  function values(e) {
    if (e || "" === e) {
      var r = e[a];
      if (r) return r.call(e);
      if ("function" == typeof e.next) return e;
      if (!isNaN(e.length)) {
        var o = -1,
          i = function next() {
            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;
            return next.value = t, next.done = !0, next;
          };
        return i.next = i;
      }
    }
    throw new TypeError(_typeof(e) + " is not iterable");
  }
  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", {
    value: GeneratorFunctionPrototype,
    configurable: !0
  }), o(GeneratorFunctionPrototype, "constructor", {
    value: GeneratorFunction,
    configurable: !0
  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) {
    var e = "function" == typeof t && t.constructor;
    return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name));
  }, e.mark = function (t) {
    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t;
  }, e.awrap = function (t) {
    return {
      __await: t
    };
  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {
    return this;
  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {
    void 0 === i && (i = Promise);
    var a = new AsyncIterator(wrap(t, r, n, o), i);
    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {
      return t.done ? t.value : a.next();
    });
  }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () {
    return this;
  }), define(g, "toString", function () {
    return "[object Generator]";
  }), e.keys = function (t) {
    var e = Object(t),
      r = [];
    for (var n in e) r.push(n);
    return r.reverse(), function next() {
      for (; r.length;) {
        var t = r.pop();
        if (t in e) return next.value = t, next.done = !1, next;
      }
      return next.done = !0, next;
    };
  }, e.values = values, Context.prototype = {
    constructor: Context,
    reset: function reset(e) {
      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);
    },
    stop: function stop() {
      this.done = !0;
      var t = this.tryEntries[0].completion;
      if ("throw" === t.type) throw t.arg;
      return this.rval;
    },
    dispatchException: function dispatchException(e) {
      if (this.done) throw e;
      var r = this;
      function handle(n, o) {
        return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o;
      }
      for (var o = this.tryEntries.length - 1; o >= 0; --o) {
        var i = this.tryEntries[o],
          a = i.completion;
        if ("root" === i.tryLoc) return handle("end");
        if (i.tryLoc <= this.prev) {
          var c = n.call(i, "catchLoc"),
            u = n.call(i, "finallyLoc");
          if (c && u) {
            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
          } else if (c) {
            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
          } else {
            if (!u) throw new Error("try statement without catch or finally");
            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
          }
        }
      }
    },
    abrupt: function abrupt(t, e) {
      for (var r = this.tryEntries.length - 1; r >= 0; --r) {
        var o = this.tryEntries[r];
        if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
          var i = o;
          break;
        }
      }
      i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);
      var a = i ? i.completion : {};
      return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a);
    },
    complete: function complete(t, e) {
      if ("throw" === t.type) throw t.arg;
      return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y;
    },
    finish: function finish(t) {
      for (var e = this.tryEntries.length - 1; e >= 0; --e) {
        var r = this.tryEntries[e];
        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;
      }
    },
    "catch": function _catch(t) {
      for (var e = this.tryEntries.length - 1; e >= 0; --e) {
        var r = this.tryEntries[e];
        if (r.tryLoc === t) {
          var n = r.completion;
          if ("throw" === n.type) {
            var o = n.arg;
            resetTryEntry(r);
          }
          return o;
        }
      }
      throw new Error("illegal catch attempt");
    },
    delegateYield: function delegateYield(e, r, n) {
      return this.delegate = {
        iterator: values(e),
        resultName: r,
        nextLoc: n
      }, "next" === this.method && (this.arg = t), y;
    }
  }, e;
}
module.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./typeof.js":37}],33:[function(require,module,exports){
var arrayWithHoles = require("./arrayWithHoles.js");
var iterableToArrayLimit = require("./iterableToArrayLimit.js");
var unsupportedIterableToArray = require("./unsupportedIterableToArray.js");
var nonIterableRest = require("./nonIterableRest.js");
function _slicedToArray(arr, i) {
  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();
}
module.exports = _slicedToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./arrayWithHoles.js":21,"./iterableToArrayLimit.js":29,"./nonIterableRest.js":30,"./unsupportedIterableToArray.js":38}],34:[function(require,module,exports){
var arrayWithoutHoles = require("./arrayWithoutHoles.js");
var iterableToArray = require("./iterableToArray.js");
var unsupportedIterableToArray = require("./unsupportedIterableToArray.js");
var nonIterableSpread = require("./nonIterableSpread.js");
function _toConsumableArray(arr) {
  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();
}
module.exports = _toConsumableArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./arrayWithoutHoles.js":22,"./iterableToArray.js":28,"./nonIterableSpread.js":31,"./unsupportedIterableToArray.js":38}],35:[function(require,module,exports){
var _typeof = require("./typeof.js")["default"];
function _toPrimitive(input, hint) {
  if (_typeof(input) !== "object" || input === null) return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== undefined) {
    var res = prim.call(input, hint || "default");
    if (_typeof(res) !== "object") return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
module.exports = _toPrimitive, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./typeof.js":37}],36:[function(require,module,exports){
var _typeof = require("./typeof.js")["default"];
var toPrimitive = require("./toPrimitive.js");
function _toPropertyKey(arg) {
  var key = toPrimitive(arg, "string");
  return _typeof(key) === "symbol" ? key : String(key);
}
module.exports = _toPropertyKey, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./toPrimitive.js":35,"./typeof.js":37}],37:[function(require,module,exports){
function _typeof(o) {
  "@babel/helpers - typeof";

  return (module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports), _typeof(o);
}
module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],38:[function(require,module,exports){
var arrayLikeToArray = require("./arrayLikeToArray.js");
function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);
}
module.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{"./arrayLikeToArray.js":20}],39:[function(require,module,exports){
// TODO(Babel 8): Remove this file.

var runtime = require("../helpers/regeneratorRuntime")();
module.exports = runtime;

// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=
try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  if (typeof globalThis === "object") {
    globalThis.regeneratorRuntime = runtime;
  } else {
    Function("r", "regeneratorRuntime = r")(runtime);
  }
}

},{"../helpers/regeneratorRuntime":32}],40:[function(require,module,exports){
(function (global){(function (){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
class hlp {
  static x(input) {
    if (typeof input === 'function') {
      try {
        input = input();
        return this.x(input);
      } catch (e) {
        return false;
      }
    }
    if (input === null || input === false || typeof input === 'string' && input.trim() == '' || typeof input === 'object' && Object.keys(input).length === 0 && input.constructor === Object || typeof input === 'undefined' || Array.isArray(input) && input.length === 0 || Array.isArray(input) && input.length === 1 && input[0] === '') {
      return false;
    }
    return true;
  }
  static nx(input) {
    return !this.x(input);
  }
  static true(input) {
    if (typeof input === 'function') {
      try {
        input = input();
        return this.true(input);
      } catch (e) {
        return false;
      }
    }
    if (input === undefined) {
      return false;
    }
    if (input === null) {
      return false;
    }
    if (input === false) {
      return false;
    }
    if (Array.isArray(input) && input.length === 0) {
      return false;
    }
    if (Array.isArray(input) && hlp.first(input) === '') {
      return false;
    }
    if (typeof input === 'object' && Object.keys(input).length === 0 && input.constructor === Object) {
      return false;
    }
    if (input === 0) {
      return false;
    }
    if (input === '0') {
      return false;
    }
    if (input === '') {
      return false;
    }
    if (input === ' ') {
      return false;
    }
    if (input === 'null') {
      return false;
    }
    if (input === 'false') {
      return false;
    }
    return true;
  }
  static false(input) {
    if (typeof input === 'function') {
      try {
        input = input();
        return this.false(input);
      } catch (e) {
        return false;
      }
    }
    if (input === undefined) {
      return false;
    }
    if (input === null) {
      return false;
    }
    if (input === false) {
      return true;
    }
    if (Array.isArray(input) && input.length === 0) {
      return false;
    }
    if (Array.isArray(input) && hlp.first(input) === '') {
      return false;
    }
    if (typeof input === 'object' && Object.keys(input).length === 0 && input.constructor === Object) {
      return false;
    }
    if (input === 0) {
      return true;
    }
    if (input === '0') {
      return true;
    }
    if (input === '') {
      return false;
    }
    if (input === ' ') {
      return false;
    }
    if (input === 'null') {
      return false;
    }
    if (input === 'false') {
      return true;
    }
    return false;
  }
  static v() {
    if (this.nx(arguments)) {
      return '';
    }
    for (let i = 0; i < arguments.length; i++) {
      if (this.x(arguments[i])) {
        return arguments[i];
      }
    }
    return '';
  }
  static loop(input, fun) {
    if (this.nx(input)) {
      return null;
    }
    if (Array.isArray(input)) {
      input.forEach((input__value, input__key) => {
        fun(input__value, input__key);
      });
    } else if (typeof input === 'object') {
      Object.entries(input).forEach(_ref => {
        let [input__key, input__value] = _ref;
        fun(input__value, input__key);
      });
    }
  }
  static map(obj, fn, ctx) {
    return Object.keys(obj).reduce((a, b) => {
      a[b] = fn.call(ctx || null, b, obj[b]);
      return a;
    }, {});
  }
  static first(input) {
    if (Array.isArray(input)) {
      var ret = null;
      input.forEach((input__value, input__key) => {
        if (ret === null) {
          ret = input__value;
        }
      });
      return ret;
    }
    if (typeof input === 'object') {
      var ret = null;
      Object.entries(input).forEach(_ref2 => {
        let [input__key, input__value] = _ref2;
        if (ret === null) {
          ret = input__value;
        }
      });
      return ret;
    }
    return null;
  }
  static last(input) {
    if (Array.isArray(input)) {
      let ret = null;
      input.forEach((input__value, input__key) => {
        ret = input__value;
      });
      return ret;
    }
    if (typeof input === 'object') {
      let ret = null;
      Object.entries(input).forEach(_ref3 => {
        let [input__key, input__value] = _ref3;
        ret = input__value;
      });
      return ret;
    }
    return null;
  }
  static rand(input) {
    if (Array.isArray(input)) {
      return input[Math.floor(Math.random() * input.length)];
    }
    if (typeof input === 'object') {
      var input = Object.values(input);
      return input[Math.floor(Math.random() * input.length)];
    }
    return null;
  }
  static random_string() {
    let length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;
    let chars = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    if (chars === null) {
      chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    }
    let chars_length = chars.length,
      random_string = '';
    for (let i = 0; i < length; i++) {
      random_string += chars[~~(Math.random() * (chars_length - 1 - 0 + 1)) + 0];
    }
    return random_string;
  }
  static round() {
    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
    let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
    return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);
  }
  static isInteger(value) {
    return !isNaN(value) && parseInt(Number(value)) == value && !isNaN(parseInt(value, 10));
  }
  static random_int() {
    let min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
    let max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 99999;
    if (!this.isInteger(min) || !this.isInteger(max)) {
      return false;
    }
    if (min > max) {
      [min, max] = [max, min];
    }
    return ~~(Math.random() * (max - min + 1)) + min;
  }
  static capitalize() {
    let string = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    if (string === null) {
      return string;
    }
    if (string === '') {
      return string;
    }
    return string.charAt(0).toUpperCase() + string.slice(1);
  }
  static cookieExists(cookie_name) {
    if (document.cookie !== undefined && this.cookieGet(cookie_name) !== null) {
      return true;
    }
    return false;
  }
  static cookieGet(cookie_name) {
    var cookie_match = document.cookie.match(new RegExp(cookie_name + '=([^;]+)'));
    if (cookie_match) {
      return decodeURIComponent(cookie_match[1]);
    }
    return null;
  }
  static cookieSet(cookie_name, cookie_value, days) {
    let full_domain = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
    let samesite = '';
    if (window.location.protocol.indexOf('https') > -1) {
      samesite = '; SameSite=None; Secure';
    }
    document.cookie = cookie_name + '=' + encodeURIComponent(cookie_value) + '; ' + 'expires=' + new Date(new Date().getTime() + days * 24 * 60 * 60 * 1000).toUTCString() + '; path=/' + samesite + '; domain=' + (full_domain === true ? this.urlHostTopLevel() : '');
  }
  static cookieDelete(cookie_name) {
    let full_domain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    let samesite = '';
    if (window.location.protocol.indexOf('https') > -1) {
      samesite = '; SameSite=None; Secure';
    }
    document.cookie = cookie_name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/' + samesite + '; domain=' + (full_domain === true ? this.urlHostTopLevel() : '');
  }
  static localStorageSet(key, value) {
    let ttl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
    ttl = ttl * (24 * 60 * 60 * 1000);
    let now = new Date(),
      item = {
        value: value,
        expiry: now.getTime() + ttl
      };
    localStorage.setItem(key, JSON.stringify(item));
  }
  static localStorageGet(key) {
    let itemStr = localStorage.getItem(key);
    if (!itemStr) {
      return null;
    }
    let item = JSON.parse(itemStr),
      now = new Date();
    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key);
      return null;
    }
    return item.value;
  }
  static localStorageDelete(key) {
    localStorage.removeItem(key);
  }
  static localStorageExists(key) {
    return this.localStorageGet(key) !== null;
  }
  static getParam(variable) {
    let url = window.location.search;
    if (this.nx(url)) {
      return null;
    }
    let query = url.substring(1),
      vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] == variable && this.x(pair[1])) {
        return pair[1];
      }
    }
    return null;
  }
  static getDevice() {
    if (this.isPhone()) {
      return 'phone';
    }
    if (this.isTablet()) {
      return 'tablet';
    }
    return 'desktop';
  }
  static isPhone() {
    // based on detectmobilebrowsers.com
    let a = navigator.userAgent || navigator.vendor || window.opera;
    return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4));
  }
  static isTablet() {
    // based on detectmobilebrowsers.com
    let a = navigator.userAgent || navigator.vendor || window.opera;
    return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4));
  }
  static isDesktop() {
    return !this.isPhone() && !this.isTablet();
  }
  static isMobile() {
    // viewport width based OR phone based
    if (window.innerWidth < 750 || this.isPhone()) {
      return true;
    }
    return false;
  }
  static isTouch() {
    return 'ontouchstart' in window || navigator.maxTouchPoints || false;
  }
  static isMac() {
    return hlp.getOs() === 'mac';
  }
  static isLinux() {
    return hlp.getOs() === 'linux';
  }
  static isWindows() {
    return hlp.getOs() === 'windows';
  }
  static getOs() {
    let userAgent = window.navigator.userAgent,
      platform = window.navigator.platform,
      macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
      windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
      iosPlatforms = ['iPhone', 'iPad', 'iPod'],
      os = 'unknown';
    if (macosPlatforms.indexOf(platform) !== -1) {
      os = 'mac';
    } else if (iosPlatforms.indexOf(platform) !== -1) {
      os = 'mac';
    } else if (windowsPlatforms.indexOf(platform) !== -1) {
      os = 'windows';
    } else if (/Android/.test(userAgent)) {
      os = 'linux';
    } else if (/Linux/.test(platform)) {
      os = 'linux';
    }
    return os;
  }
  static getBrowser() {
    let browser_name = '',
      isIE = /*@cc_on!@*/false || !!document.documentMode,
      isEdge = !isIE && !!window.StyleMedia;
    if (navigator.userAgent.indexOf('Opera') != -1 || navigator.userAgent.indexOf('OPR') != -1) {
      browser_name = 'opera';
    } else if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {
      browser_name = 'chrome';
    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {
      browser_name = 'safari';
    } else if (navigator.userAgent.indexOf('Firefox') != -1) {
      browser_name = 'firefox';
    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {
      //IF IE > 10
      browser_name = 'ie';
    } else if (isEdge) {
      browser_name = 'edge';
    } else {
      browser_name = 'unknown';
    }
    return browser_name;
  }
  static isObject(a) {
    return !!a && a.constructor === Object;
  }
  static isArray(a) {
    return !!a && a.constructor === Array;
  }
  static isString(string) {
    return typeof string === 'string' || string instanceof String;
  }
  static isDate(string) {
    if (this.nx(string)) {
      return false;
    }
    // if string is of object date
    if (Object.prototype.toString.call(string) === '[object Date]') {
      return true;
    }
    // if this is not a string
    if (!this.isString(string)) {
      return false;
    }
    // strong check
    if (string.split('-').length !== 3) {
      return false;
    }
    let day = parseInt(string.split('-')[2]),
      month = parseInt(string.split('-')[1]),
      year = parseInt(string.split('-')[0]),
      date = new Date();
    date.setFullYear(year, month - 1, day);
    if (date.getFullYear() == year && date.getMonth() + 1 == month && date.getDate() == day) {
      return true;
    }
    return false;
  }
  static formatDate(format) {
    let date = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    if (date === false || date === true || date === null || date === '') {
      date = new Date();
    } else if (typeof date !== 'object') {
      date = new Date(date.replace(/-/g, '/'));
    }
    let string = '',
      mo = date.getMonth(),
      m1 = mo + 1,
      dow = date.getDay(),
      d = date.getDate(),
      y = date.getFullYear(),
      h = date.getHours(),
      mi = date.getMinutes(),
      s = date.getSeconds();
    for (let i = 0, len = format.length; i < len; i++) {
      switch (format[i]) {
        case 'j':
          string += d;
          break;
        case 'd':
          string += d < 10 ? '0' + d : d;
          break;
        case 'l':
          let days = Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
          string += days[dow];
          break;
        case 'w':
          string += dow;
          break;
        case 'D':
          days = Array('Sun', 'Mon', 'Tue', 'Wed', 'Thr', 'Fri', 'Sat');
          string += days[dow];
          break;
        case 'm':
          string += m1 < 10 ? '0' + m1 : m1;
          break;
        case 'n':
          string += m1;
          break;
        case 'F':
          let months = Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December');
          string += months[mo];
          break;
        case 'M':
          months = Array('Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');
          string += months[mo];
          break;
        case 'Y':
          string += y;
          break;
        case 'y':
          string += y.toString().slice(-2);
          break;
        case 'H':
          string += h < 10 ? '0' + h : h;
          break;
        case 'g':
          let hour = h === 0 ? 12 : h;
          string += hour > 12 ? hour - 12 : hour;
          break;
        case 'h':
          hour = h === 0 ? 12 : h;
          hour = hour > 12 ? hour - 12 : hour;
          string += hour < 10 ? '0' + hour : hour;
          break;
        case 'a':
          string += h < 12 ? 'am' : 'pm';
          break;
        case 'i':
          string += mi < 10 ? '0' + mi : mi;
          break;
        case 's':
          string += s < 10 ? '0' + s : s;
          break;
        case 'c':
          string += date.toISOString();
          break;
        default:
          string += format[i];
      }
    }
    return string;
  }
  static deepCopy(obj) {
    let hash = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new WeakMap();
    if (Object(obj) !== obj) return obj; // primitives
    if (hash.has(obj)) return hash.get(obj); // cyclic reference
    const result = obj instanceof Date ? new Date(obj) : obj instanceof RegExp ? new RegExp(obj.source, obj.flags) : obj.constructor ? new obj.constructor() : Object.create(null);
    hash.set(obj, result);
    if (obj instanceof Map) Array.from(obj, _ref4 => {
      let [key, val] = _ref4;
      return result.set(key, hlp.deepCopy(val, hash));
    });
    return Object.assign(result, ...Object.keys(obj).map(key => ({
      [key]: hlp.deepCopy(obj[key], hash)
    })));
  }
  static jsonStringToObject(string) {
    if (this.nx(string) || !this.isString(string)) {
      return null;
    }
    try {
      return JSON.parse(string);
    } catch (error) {
      return null;
    }
  }
  static isJsonString(string) {
    if (this.nx(string) || !this.isString(string)) {
      return false;
    }
    try {
      let json = JSON.parse(string);
      return true;
    } catch (error) {
      return false;
    }
  }
  static jsonObjectToString(object) {
    try {
      return JSON.stringify(object);
    } catch (error) {
      return null;
    }
  }
  static uuid() {
    function s4() {
      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
    }
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
  }
  static guid() {
    return this.uuid();
  }
  static replaceAll(string, search, replace) {
    return string.split(search).join(replace);
  }
  static replaceLast(string, search, replace) {
    let n = string.lastIndexOf(search);
    string = string.slice(0, n) + string.slice(n).replace(search, replace);
    return string;
  }
  static replaceFirst(string, search, replace) {
    return string.replace(search, replace);
  }
  static findAllPositions(searchStr, str) {
    let searchStrLen = searchStr.length,
      startIndex = 0,
      index,
      indices = [];
    if (searchStrLen == 0) {
      return [];
    }
    while ((index = str.indexOf(searchStr, startIndex)) > -1) {
      indices.push(index);
      startIndex = index + searchStrLen;
    }
    return indices;
  }
  static findAllPositionsCaseInsensitive(searchStr, str) {
    let searchStrLen = searchStr.length,
      startIndex = 0,
      index,
      indices = [];
    if (searchStrLen == 0) {
      return [];
    }
    while ((index = this.indexOfCaseInsensitive(searchStr, str, startIndex)) > -1) {
      indices.push(index);
      startIndex = index + searchStrLen;
    }
    return indices;
  }
  static countAllOccurences(value, str) {
    let regExp = new RegExp(value, 'g');
    return (str.match(regExp) || []).length;
  }
  static countAllOccurencesCaseInsensitive(value, str) {
    let regExp = new RegExp(value, 'gi');
    return (str.match(regExp) || []).length;
  }
  static indexOfCaseInsensitive(searchStr, str, offset) {
    return str.toLowerCase().indexOf(searchStr.toLowerCase(), offset);
  }
  static highlight(string, query) {
    let strip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    let strip_length = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 500;
    if (this.nx(string) || this.nx(query)) {
      return string;
    }
    if (strip === true) {
      let dots = '...';
      // get all query begin positions in spot
      let positions = this.findAllPositionsCaseInsensitive(query, string);
      // strip away parts
      let words = string.split(' ');
      let i = 0;
      words.forEach((words__value, words__key) => {
        let strip_now = true;
        positions.forEach(positions__value => {
          if (i >= positions__value - strip_length && i <= positions__value + query.length + strip_length - 1) {
            strip_now = false;
          }
        });
        if (strip_now === true) {
          words[words__key] = dots;
        }
        i += words__value.length + 1;
      });
      string = words.join(' ');
      while (string.indexOf(dots + ' ' + dots) > -1) {
        string = this.replaceAll(string, dots + ' ' + dots, dots);
      }
      string = string.trim();
    }
    // again: get all query begin positions in spot
    let positions = this.findAllPositionsCaseInsensitive(query, string);
    // wrap span element around them
    let wrap_begin = '<strong class="highlight">';
    let wrap_end = '</strong>';
    for (let x = 0; x < positions.length; x++) {
      string = string.substring(0, positions[x]) + wrap_begin + string.substring(positions[x], positions[x] + query.length) + wrap_end + string.substring(positions[x] + query.length);
      // shift other positions
      for (let y = x + 1; y < positions.length; y++) {
        positions[y] = positions[y] + wrap_begin.length + wrap_end.length;
      }
    }
    return string;
  }
  static get(url) {
    let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    return this.call('GET', url, args);
  }
  static post(url) {
    let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    return this.call('POST', url, args);
  }
  static call(method, url) {
    let args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    if (args === null) {
      args = {};
    }
    if (!('data' in args)) {
      args.data = {};
    }
    if (!('headers' in args)) {
      args.headers = null;
    }
    if (!('throttle' in args)) {
      args.throttle = 0;
    }
    if (!('allow_errors' in args)) {
      args.allow_errors = true;
    }
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        if (url.indexOf('http') !== 0) {
          url = hlp.baseUrl() + '/' + url;
        }
        let xhr = new XMLHttpRequest();
        xhr.open(method, url, true);
        if (method === 'POST') {
          if ('data' in args && args.data !== null && typeof args.data === 'object' && !(args.data instanceof FormData)) {
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            args.data = JSON.stringify(args.data);
          }
          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        }
        if (this.x(args.headers)) {
          Object.entries(args.headers).forEach(_ref5 => {
            let [headers__key, headers__value] = _ref5;
            xhr.setRequestHeader(headers__key, headers__value);
          });
        }
        xhr.onload = () => {
          if (xhr.readyState != 4 || args.allow_errors !== true && xhr.status != 200 && xhr.status != 304) {
            if (this.isJsonString(xhr.responseText)) {
              reject(this.jsonStringToObject(xhr.responseText));
            } else {
              reject(xhr.responseText);
            }
          }
          if (this.isJsonString(xhr.responseText)) {
            resolve(this.jsonStringToObject(xhr.responseText));
          } else {
            resolve(xhr.responseText);
          }
        };
        xhr.onerror = () => {
          reject([xhr.readyState, xhr.status, xhr.statusText]);
        };
        if (method === 'GET') {
          xhr.send(null);
        }
        if (method === 'POST') {
          xhr.send(args.data);
        }
      }, args.throttle);
    });
  }
  static onResizeHorizontal(fun) {
    let windowWidth = window.innerWidth,
      windowWidthNew,
      timeout;
    window.addEventListener('resize', () => {
      windowWidthNew = window.innerWidth;
      if (windowWidthNew != windowWidth) {
        windowWidth = windowWidthNew;
        if (timeout) {
          clearTimeout(timeout);
        }
        timeout = window.setTimeout(() => {
          fun();
        }, 50);
      }
    });
    fun();
  }
  static onResizeVertical(fun) {
    var windowHeight = window.innerHeight,
      windowHeightNew,
      timeout;
    window.addEventListener('resize', () => {
      windowHeightNew = window.innerHeight;
      if (windowHeightNew != windowHeight) {
        windowHeight = windowHeightNew;
        if (timeout) {
          clearTimeout(timeout);
        }
        timeout = window.setTimeout(() => {
          fun();
        }, 50);
      }
    });
    fun();
  }
  static removeEmpty(array) {
    if (this.nx(array) || !Array.isArray(array)) {
      return array;
    }
    array = array.filter(array__value => {
      return this.x(array__value);
    });
    return array;
  }
  static uniqueArray(array) {
    let seen = {},
      ret_arr = [];
    for (let i = 0; i < array.length; i++) {
      if (!(array[i] in seen)) {
        ret_arr.push(array[i]);
        seen[array[i]] = true;
      }
    }
    return ret_arr;
  }
  static powerset(array) {
    if (!Array.isArray(array)) {
      return array;
    }
    return array.reduce((subsets, value) => subsets.concat(subsets.map(set => [...set, value])), [[]]);
  }
  static charToInt(val) {
    val = val.toUpperCase();
    let base = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
      i,
      j,
      result = 0;
    for (i = 0, j = val.length - 1; i < val.length; i += 1, j -= 1) {
      result += Math.pow(base.length, j) * (base.indexOf(val[i]) + 1);
    }
    return result;
  }
  static intToChar(num) {
    for (var ret = '', a = 1, b = 26; (num -= a) >= 0; a = b, b *= 26) {
      ret = String.fromCharCode(parseInt(num % b / a) + 65) + ret;
    }
    return ret;
  }
  static slugify(text) {
    return text.toString().toLowerCase().trim().split('Ã¤').join('ae').split('Ã¶').join('oe').split('Ã¼').join('ue').split('Ã').join('ss').replace(/[^\w\s-]/g, '') // remove non-word [a-z0-9_], non-whitespace, non-hyphen characters
    .replace(/[\s_-]+/g, '-') // swap any length of whitespace, underscore, hyphen characters with a single -
    .replace(/^-+|-+$/g, ''); // remove leading, trailing -
  }

  static incChar(char) {
    let shift = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    return this.intToChar(this.charToInt(char) + shift);
  }
  static decChar(char) {
    let shift = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    return this.intToChar(this.charToInt(char) - shift);
  }
  static range(start, end) {
    let range = [],
      typeofStart = typeof start,
      typeofEnd = typeof end,
      step = 1;
    if (typeofStart == 'undefined' || typeofEnd == 'undefined' || typeofStart != typeofEnd) {
      return null;
    }
    if (end < start) {
      step = -step;
    }
    if (typeofStart == 'number') {
      while (step > 0 ? end >= start : end <= start) {
        range.push(start);
        start += step;
      }
    } else if (typeofStart == 'string') {
      if (start.length != 1 || end.length != 1) {
        return null;
      }
      start = start.charCodeAt(0);
      end = end.charCodeAt(0);
      while (step > 0 ? end >= start : end <= start) {
        range.push(String.fromCharCode(start));
        start += step;
      }
    } else {
      return null;
    }
    return range;
  }
  static dateToWeek() {
    let d = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    if (d === null) {
      d = new Date();
    }
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1)),
      weekNo = Math.ceil(((d - yearStart) / 86400000 + 1) / 7);
    return weekNo;
  }
  static weekToDate(week, year) {
    if (year == null) {
      year = new Date().getFullYear();
    }
    let date = new Date();
    date.setYear(year);
    date.setDate(1);
    date.setMonth(0);
    date.setHours(0);
    date.setMinutes(0);
    date.setSeconds(0);
    date.setMilliseconds(0);
    let FIRST_DAY_OF_WEEK = 1;
    let WEEK_LENGTH = 7;
    let day = date.getDay();
    day = day === 0 ? 7 : day;
    let dayOffset = -day + FIRST_DAY_OF_WEEK;
    if (WEEK_LENGTH - day + 1 < 4) {
      dayOffset += WEEK_LENGTH;
    }
    date = new Date(date.getTime() + dayOffset * 24 * 60 * 60 * 1000);
    let weekTime = 1000 * 60 * 60 * 24 * 7 * (week - 1);
    let targetTime = date.getTime() + weekTime;
    date.setTime(targetTime);
    date.setHours(0);
    date.setMinutes(0);
    date.setSeconds(0);
    date.setMilliseconds(0);
    return date;
  }
  static addDays(date, days) {
    var result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
  }
  static objectsAreEqual(x, y) {
    var _this = this;
    if (x === null || x === undefined || y === null || y === undefined) {
      return x === y;
    }
    if (x.constructor !== y.constructor) {
      return false;
    }
    if (x instanceof Function) {
      return x === y;
    }
    if (x instanceof RegExp) {
      return x === y;
    }
    if (x === y || x.valueOf() === y.valueOf()) {
      return true;
    }
    if (Array.isArray(x) && x.length !== y.length) {
      return false;
    }
    if (x instanceof Date) {
      return false;
    }
    if (!(x instanceof Object)) {
      return false;
    }
    if (!(y instanceof Object)) {
      return false;
    }
    var p = Object.keys(x);
    return Object.keys(y).every(function (i) {
      return p.indexOf(i) !== -1;
    }) && p.every(function (i) {
      return _this.objectsAreEqual(x[i], y[i]);
    });
  }
  static containsObject(obj, list) {
    var x;
    for (x in list) {
      if (list.hasOwnProperty(x) && this.objectsAreEqual(list[x], obj)) {
        return true;
      }
    }
    return false;
  }
  static fadeOut(el) {
    let speed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;
    if (speed <= 25) {
      speed = 25;
    }
    return new Promise(resolve => {
      el.style.opacity = 1;
      (function fade() {
        if ((el.style.opacity -= 25 / speed) < 0) {
          el.style.display = 'none';
          resolve();
        } else {
          requestAnimationFrame(fade);
        }
      })();
    });
  }
  static fadeIn(el) {
    let speed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;
    if (speed <= 25) {
      speed = 25;
    }
    return new Promise(resolve => {
      el.style.opacity = 0;
      el.style.display = 'block';
      (function fade() {
        var val = parseFloat(el.style.opacity);
        if (!((val += 25 / speed) > 1)) {
          el.style.opacity = val;
          requestAnimationFrame(fade);
        } else {
          resolve();
        }
      })();
    });
  }
  static scrollTop() {
    let doc = document.documentElement;
    return (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
  }
  static scrollLeft() {
    let doc = document.documentElement;
    return (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
  }
  static closestScrollable(node) {
    let isElement = node instanceof HTMLElement,
      overflowY = isElement && window.getComputedStyle(node).overflowY,
      isScrollable = overflowY && !(overflowY.includes('hidden') || overflowY.includes('visible'));
    if (!node) {
      return null;
    } else if (isScrollable && node.scrollHeight >= node.clientHeight) {
      return node;
    }
    return this.closestScrollable(node.parentNode) || document.scrollingElement || document.body;
  }
  static offsetTop(el) {
    return el.getBoundingClientRect().top + window.pageYOffset - document.documentElement.clientTop;
  }
  static offsetLeft(el) {
    return el.getBoundingClientRect().left + window.pageXOffset - document.documentElement.clientLeft;
  }
  static offsetRight(el) {
    return el.getBoundingClientRect().left + window.pageXOffset - document.documentElement.clientLeft + el.offsetWidth;
  }
  static offsetBottom(el) {
    return el.getBoundingClientRect().top + window.pageYOffset - document.documentElement.clientTop + el.offsetHeight;
  }
  static offsetTopWithMargin(el) {
    return this.offsetTop(el) - parseInt(getComputedStyle(el).marginTop);
  }
  static offsetLeftWithMargin(el) {
    return this.offsetLeft(el) - parseInt(getComputedStyle(el).marginLeft);
  }
  static offsetRightWithMargin(el) {
    return this.offsetRight(el) + parseInt(getComputedStyle(el).marginRight);
  }
  static offsetBottomWithMargin(el) {
    return this.offsetBottom(el) + parseInt(getComputedStyle(el).marginBottom);
  }
  static documentHeight() {
    return Math.max(document.body.offsetHeight, document.body.scrollHeight, document.documentElement.clientHeight, document.documentElement.offsetHeight, document.documentElement.scrollHeight);
  }
  static documentWidth() {
    return document.documentElement.clientWidth || document.body.clientWidth;
  }
  static windowWidth() {
    return window.innerWidth;
  }
  static windowHeight() {
    return window.innerHeight;
  }
  static windowWidthWithoutScrollbar() {
    return document.documentElement.clientWidth || document.body.clientWidth;
  }
  static windowHeightWithoutScrollbar() {
    return document.documentElement.clientHeight || document.body.clientHeight;
  }
  static outerWidthWithMargin(el) {
    return el.offsetWidth + parseInt(getComputedStyle(el).marginLeft) + parseInt(getComputedStyle(el).marginRight);
  }
  static outerHeightWithMargin(el) {
    return el.offsetHeight + parseInt(getComputedStyle(el).marginTop) + parseInt(getComputedStyle(el).marginBottom);
  }
  static scrollTo(to) {
    let duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;
    let element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    let offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
    let only_up = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
    return new Promise(resolve => {
      if (element === null) {
        element = document.scrollingElement || document.documentElement;
      }
      if (!hlp.isNumeric(to)) {
        if (element === (document.scrollingElement || documentElement)) {
          to = this.offsetTopWithMargin(to);
        } else {
          to = to.getBoundingClientRect().top - parseInt(getComputedStyle(to).marginTop) - (element.getBoundingClientRect().top - element.scrollTop - parseInt(getComputedStyle(element).marginTop));
        }
      }
      let offset_calc = 0;
      if (!Array.isArray(offset)) {
        offset = [offset];
      }
      offset.forEach(offset__value => {
        if (hlp.isNumeric(offset__value)) {
          offset_calc += offset__value;
        } else {
          if (offset__value !== null) {
            if (window.getComputedStyle(offset__value).position === 'fixed') {
              offset_calc += -1 * offset__value.offsetHeight;
            }
          }
        }
      });
      to += offset_calc;
      const start = element.scrollTop,
        change = to - start,
        startDate = +new Date(),
        // t = current time
        // b = start value
        // c = change in value
        // d = duration
        easeInOutQuad = function (t, b, c, d) {
          t /= d / 2;
          if (t < 1) return c / 2 * t * t + b;
          t--;
          return -c / 2 * (t * (t - 2) - 1) + b;
        },
        easeInOutCirc = function (t, b, c, d) {
          t /= d / 2;
          if (t < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
          t -= 2;
          return c / 2 * (Math.sqrt(1 - t * t) + 1) + b;
        },
        animateScroll = function () {
          const currentDate = +new Date();
          const currentTime = currentDate - startDate;
          element.scrollTop = parseInt(easeInOutCirc(currentTime, start, change, duration));
          if (currentTime < duration) {
            requestAnimationFrame(animateScroll);
          } else {
            element.scrollTop = to;
            resolve();
          }
        };
      if (only_up === true && change > 0) {
        resolve();
        return;
      }
      animateScroll();
    });
  }
  static loadJs(urls) {
    if (!hlp.isArray(urls)) {
      urls = [urls];
    }
    let promises = [];
    hlp.loop(urls, (urls__value, urls__key) => {
      promises.push(new Promise((resolve, reject) => {
        let script = document.createElement('script');
        script.src = urls__value;
        script.onload = () => {
          resolve();
        };
        document.head.appendChild(script);
      }));
    });
    return Promise.all(promises);
  }
  static async loadJsSequentially(urls) {
    if (!hlp.isArray(urls)) {
      urls = [urls];
    }
    for (let urls__value of urls) {
      await hlp.loadJs(urls__value);
    }
    return;
  }
  static triggerAfterAllImagesLoaded(selectorContainer, selectorImage, fn) {
    window.addEventListener('load', e => {
      if (document.querySelector(selectorContainer + ' ' + selectorImage) !== null) {
        document.querySelectorAll(selectorContainer + ' ' + selectorImage).forEach(el => {
          this.triggerAfterAllImagesLoadedBindLoadEvent(el, selectorContainer, selectorImage, fn);
        });
      }
    });
    document.addEventListener('DOMContentLoaded', () => {
      if (document.querySelector(selectorContainer) !== null) {
        new MutationObserver(mutations => {
          mutations.forEach(mutation => {
            if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
              mutation.addedNodes.forEach(el => {
                this.triggerAfterAllImagesLoadedHandleEl(el, selectorContainer, selectorImage, fn);
              });
            } else if (mutation.type === 'attributes' && mutation.attributeName === 'src' && mutation.target.classList.contains(selectorImage.replace('.', '')) && mutation.oldValue !== mutation.target.getAttribute('src')) {
              this.triggerAfterAllImagesLoadedHandleEl(mutation.target, selectorContainer, selectorImage, fn);
            }
          });
        }).observe(document.querySelector(selectorContainer), {
          attributes: true,
          childList: true,
          characterData: false,
          subtree: true,
          attributeOldValue: true,
          characterDataOldValue: false
        });
      }
    });
  }
  static triggerAfterAllImagesLoadedHandleEl(el, selectorContainer, selectorImage, fn) {
    if (el.nodeType === Node.ELEMENT_NODE) {
      el.classList.remove('loaded-img');
      el.closest(selectorContainer).classList.remove('loaded-all');
      // only bind if not yet binded
      if (!el.classList.contains('binded-trigger')) {
        el.classList.add('binded-trigger');
        el.addEventListener('load', () => {
          this.triggerAfterAllImagesLoadedBindLoadEvent(el, selectorContainer, selectorImage, fn);
        });
      }
    }
  }
  static triggerAfterAllImagesLoadedBindLoadEvent(el, selectorContainer, selectorImage, fn) {
    el.classList.add('loaded-img');
    if (el.closest(selectorContainer).querySelectorAll('.loaded-img').length === el.closest(selectorContainer).querySelectorAll(selectorImage).length) {
      el.closest(selectorContainer).classList.add('loaded-all');
      fn();
    }
  }
  static isVisible(el) {
    return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);
  }
  static isVisibleInViewport(el) {
    if (!this.isVisible(el)) {
      return false;
    }
    let rect = el.getBoundingClientRect();
    return !(rect.bottom < 0 || rect.right < 0 || rect.left > window.innerWidth || rect.top > window.innerHeight);
  }
  static textareaAutoHeight() {
    let selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'textarea';
    this.textareaSetHeights(selector);
    this.onResizeHorizontal(() => {
      this.textareaSetHeights(selector);
    });
    [].forEach.call(document.querySelectorAll(selector), el => {
      el.addEventListener('keyup', e => {
        this.textareaSetHeight(e.target);
      });
    });
  }
  static textareaSetHeights() {
    let selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'textarea';
    [].forEach.call(document.querySelectorAll(selector), el => {
      if (this.isVisible(el)) {
        this.textareaSetHeight(el);
      }
    });
  }
  static textareaSetHeight(el) {
    el.style.height = '5px';
    el.style.height = el.scrollHeight + 'px';
  }
  static real100vh() {
    let selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    let percent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
    if (selector === null) {
      // apply trick from https://css-tricks.com/the-trick-to-viewport-units-on-mobile/
      let fn = () => {
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
      };
      fn();
      window.addEventListener('resize', () => {
        fn();
      });
    } else {
      let fn = () => {
        console.log(selector);
        if (document.querySelector(selector) !== null) {
          document.querySelectorAll(selector).forEach(selector__value => {
            selector__value.style.height = window.innerHeight * (percent / 100) + 'px';
          });
        }
      };
      fn();
      window.addEventListener('resize', () => {
        fn();
      });
    }
  }
  static iOsRemoveHover() {
    if (hlp.getBrowser() === 'safari' && hlp.getDevice() !== 'desktop') {
      hlp.on('touchend', 'a', (e, el) => {
        el.click();
      });
    }
  }
  static isNumeric(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
  }
  static animate(el, from, to, easing, duration) {
    return new Promise(resolve => {
      // on durations smaller than 50, the end event does not trigger!
      if (duration <= 50) {
        duration = 50;
      }
      let properties = [];
      from.split(';').forEach(from__value => {
        properties.push(from__value.split(':')[0].trim());
      });
      let transition = [];
      properties.forEach(properties__value => {
        transition.push(properties__value + ' ' + Math.round(duration / 1000 * 10) / 10 + 's ' + easing);
      });
      transition = 'transition: ' + transition.join(', ') + ' !important;';
      let els = null;
      if (NodeList.prototype.isPrototypeOf(el)) {
        els = Array.from(el);
      } else if (el === null) {
        console.log('cannot animate element from ' + from + ' to ' + to + ' because it does not exist');
        resolve();
      } else {
        els = [el];
      }
      let toFinish = els.length;
      els.forEach((els__value, els__key) => {
        // add random class
        let random_class = hlp.random_string(10, 'abcdefghijklmnopqrstuvwxyz');
        els__value.classList.add(random_class);
        window.requestAnimationFrame(() => {
          // set from style inline (don't fully remove previous style)
          let new_style = [];
          let prev_style = els__value.getAttribute('style');
          if (prev_style !== null) {
            prev_style.split(';').forEach(prev_style__value => {
              if (!properties.includes(prev_style__value.split(':')[0].trim())) {
                new_style.push(prev_style__value);
              }
            });
          }
          new_style = new_style.join(';') + from + ';';
          els__value.setAttribute('style', new_style);
          window.requestAnimationFrame(() => {
            // add transition property
            let style = document.createElement('style');
            style.innerHTML = '.' + random_class + ' { ' + transition + ' }';
            document.head.appendChild(style);
            window.requestAnimationFrame(() => {
              // set last style inline
              els__value.setAttribute('style', els__value.getAttribute('style').replace(from + ';', '') + to + ';');
              if (this.isVisible(els__value)) {
                let fired = false;
                hlp.addEventListenerOnce(els__value, 'transitionend', event => {
                  fired = true;

                  // transitionend fires also, when animating child elements
                  // the following line ensures, that those events do not bubble up
                  // in that case, we return false and ensure, the event listener is still alive
                  if (event.target !== event.currentTarget) {
                    return false;
                  }

                  // remove previous styles property
                  document.head.removeChild(style);

                  // remove random class
                  els__value.classList.remove(random_class);

                  // resolve promise when last is finished
                  toFinish--;
                  if (toFinish <= 0) {
                    window.requestAnimationFrame(() => {
                      resolve();
                    });
                  }
                });

                // safeguard
                // in some edge cases, transitionend does not fire
                setTimeout(() => {
                  if (fired === false) {
                    document.head.removeChild(style);
                    els__value.classList.remove(random_class);
                    toFinish--;
                    if (toFinish <= 0) {
                      resolve();
                    }
                  }
                }, duration * 1.5);
              } else {
                document.head.removeChild(style);
                els__value.classList.remove(random_class);
                toFinish--;
                if (toFinish <= 0) {
                  resolve();
                }
              }
            });
          });
        });
      });
    });
  }
  static addEventListenerOnce(target, type, listener, addOptions, removeOptions) {
    target.addEventListener(type, function fn(event) {
      let result = listener.apply(this, arguments, addOptions);
      if (result !== false) {
        target.removeEventListener(type, fn, removeOptions);
      }
    });
  }
  static htmlDecode(value) {
    let tmp = document.createElement('textarea');
    tmp.innerHTML = value;
    return tmp.value;
  }
  static htmlEncode(value) {
    return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#x27;').replace(/`/g, '&#96;');
  }
  static nl2br(str) {
    if (typeof str === 'undefined' || str === null) {
      return '';
    }
    let breakTag = '<br/>',
      replaceStr = '$1' + breakTag;
    return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, replaceStr);
  }
  static br2nl(str) {
    if (typeof str === 'undefined' || str === null) {
      return '';
    }
    let replaceStr = '\n';
    return str.replace(/<\s*\/?br\s*[\/]?>/gi, replaceStr);
  }
  static closest(el, selector) {
    if (!document.documentElement.contains(el)) {
      return null;
    }
    do {
      if (this.matches(el, selector)) {
        return el;
      }
      el = el.parentElement || el.parentNode;
    } while (el !== null && el.nodeType === 1);
    return null;
  }
  static matches(el, selector) {
    let node = el,
      nodes = (node.parentNode || node.document).querySelectorAll(selector),
      i = -1;
    while (nodes[++i] && nodes[i] != node);
    return !!nodes[i];
  }
  static wrap(el, html) {
    if (el === null) {
      return;
    }
    let wrapper = new DOMParser().parseFromString(html, 'text/html').body.childNodes[0];
    el.parentNode.insertBefore(wrapper, el.nextSibling);
    wrapper.appendChild(el);
  }
  static wrapTextNodes(el, tag) {
    if (el === null) {
      return;
    }
    Array.from(el.childNodes).filter(node => node.nodeType === 3 && node.textContent.trim().length > 1).forEach(node => {
      const wrapper = document.createElement(tag);
      node.after(wrapper);
      wrapper.appendChild(node);
    });
  }
  static html2dom(html) {
    let template = document.createElement('template');
    html = html.trim();
    template.innerHTML = html;
    if (template.content === undefined) {
      return this.html2domLegacy(html);
    }
    return template.content.firstChild;
  }
  static html2domLegacy(html) {
    /* source: https://gist.github.com/Munawwar/6e6362dbdf77c7865a99 */
    var rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
      rtagName = /<([\w:]+)/,
      rhtml = /<|&#?\w+;/,
      wrapMap = {
        option: [1, "<select multiple='multiple'>", '</select>'],
        thead: [1, '<table>', '</table>'],
        col: [2, '<table><colgroup>', '</colgroup></table>'],
        tr: [2, '<table><tbody>', '</tbody></table>'],
        td: [3, '<table><tbody><tr>', '</tr></tbody></table>'],
        _default: [0, '', '']
      },
      context = document;
    var tmp,
      tag,
      wrap,
      j,
      fragment = context.createDocumentFragment();
    if (!rhtml.test(html)) {
      fragment.appendChild(context.createTextNode(html));
    } else {
      tmp = fragment.appendChild(context.createElement('div'));
      tag = (rtagName.exec(html) || ['', ''])[1].toLowerCase();
      wrap = wrapMap[tag] || wrapMap._default;
      tmp.innerHTML = wrap[1] + html.replace(rxhtmlTag, '<$1></$2>') + wrap[2];
      j = wrap[0];
      while (j--) {
        tmp = tmp.lastChild;
      }
      fragment.removeChild(fragment.firstChild);
      while (tmp.firstChild) {
        fragment.appendChild(tmp.firstChild);
      }
    }
    return fragment.querySelector('*');
  }
  static prev(elem, filter) {
    let prev = elem.previousElementSibling;
    if (prev === null) {
      return null;
    }
    if (filter === undefined || this.matches(prev, filter)) {
      return prev;
    }
    return null;
  }
  static next(elem, filter) {
    let next = elem.nextElementSibling;
    if (next === null) {
      return null;
    }
    if (filter === undefined || this.matches(next, filter)) {
      return next;
    }
    return null;
  }
  static prevAll(elem, filter) {
    let sibs = [];
    while (elem = elem.previousElementSibling) {
      if (filter === undefined || this.matches(elem, filter)) {
        sibs.push(elem);
      }
    }
    return sibs;
  }
  static nextAll(elem, filter) {
    let sibs = [];
    while (elem = elem.nextElementSibling) {
      if (filter === undefined || this.matches(elem, filter)) {
        sibs.push(elem);
      }
    }
    return sibs;
  }
  static prevUntil(elem, filter) {
    let sibs = [];
    while (elem = elem.previousElementSibling) {
      if (!this.matches(elem, filter)) {
        sibs.push(elem);
      } else {
        break;
      }
    }
    return sibs;
  }
  static nextUntil(elem, filter) {
    let sibs = [];
    while (elem = elem.nextElementSibling) {
      if (!this.matches(elem, filter)) {
        sibs.push(elem);
      } else {
        break;
      }
    }
    return sibs;
  }
  static siblings(elem, filter) {
    let sibs = [];
    let self = elem;
    elem = elem.parentNode.firstChild;
    while (elem = elem.nextElementSibling) {
      if (filter === undefined || this.matches(elem, filter)) {
        if (self !== elem) {
          sibs.push(elem);
        }
      }
    }
    return sibs;
  }
  static parents(elem, selector) {
    let elements = [];
    let ishaveselector = selector !== undefined;
    while ((elem = elem.parentElement) !== null) {
      if (elem.nodeType !== Node.ELEMENT_NODE) {
        continue;
      }
      if (!ishaveselector || this.matches(elem, selector)) {
        elements.push(elem);
      }
    }
    return elements;
  }
  static css(el) {
    let sheets = document.styleSheets,
      o = {};
    for (let sheets__key in sheets) {
      try {
        let rules = sheets[sheets__key].rules || sheets[sheets__key].cssRules;
        for (let rules__key in rules) {
          if (this.matches(el, rules[rules__key].selectorText)) {
            o = Object.assign(o, this.css2json(rules[rules__key].style), this.css2json(el.getAttribute('style')));
          }
        }
      } catch (e) {}
    }
    return o;
  }
  static css2json(css) {
    let obj = {};
    if (!css) {
      return obj;
    }
    if (css instanceof CSSStyleDeclaration) {
      for (let css__key in css) {
        if (css[css__key].toLowerCase && css[css[css__key]] !== undefined) {
          obj[css[css__key].toLowerCase()] = css[css[css__key]];
        }
      }
    } else if (typeof css == 'string') {
      css = css.split(';');
      for (let css__key in css) {
        if (css[css__key].indexOf(':') > -1) {
          let val = css[css__key].split(':');
          obj[val[0].toLowerCase().trim()] = val[1].trim();
        }
      }
    }
    return obj;
  }
  static compareDates(d1, d2) {
    // safari has problems in parsing "2019-01-01 00:00:00"
    if (typeof d1 === 'string') {
      d1 = d1.split(' ').join('T');
    }
    if (typeof d2 === 'string') {
      d2 = d2.split(' ').join('T');
    }
    d1 = new Date(d1);
    d2 = new Date(d2);
    d1.setHours(0);
    d1.setMinutes(0);
    d1.setSeconds(0);
    d1.setMilliseconds(0);
    d2.setHours(0);
    d2.setMinutes(0);
    d2.setSeconds(0);
    d2.setMilliseconds(0);
    if (d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate()) {
      return 0;
    }
    if (d1 < d2) {
      return -1;
    }
    return 1;
  }
  static spaceship(val1, val2) {
    if (val1 === null || val2 === null || typeof val1 != typeof val2) {
      return null;
    }
    if (typeof val1 === 'string') {
      return val1.localeCompare(val2);
    } else {
      if (val1 > val2) {
        return 1;
      } else if (val1 < val2) {
        return -1;
      }
      return 0;
    }
  }
  static focus(selector) {
    hlp.unfocus();
    let el = null;
    if (typeof selector === 'string' || selector instanceof String) {
      el = document.querySelector(selector);
    } else {
      el = selector;
    }
    if (el !== null) {
      let mask = document.createElement('div');
      mask.classList.add('hlp-focus-mask');
      mask.style.position = 'fixed';
      mask.style.top = 0;
      mask.style.bottom = 0;
      mask.style.left = 0;
      mask.style.right = 0;
      mask.style.backgroundColor = 'rgba(0,0,0,0.8)';
      mask.style.zIndex = 2147483646;
      el.before(mask);
      el.setAttribute('data-focussed', 1);
      el.setAttribute('data-focussed-orig-z-index', el.style.zIndex);
      el.setAttribute('data-focussed-orig-position', el.style.position);
      el.setAttribute('data-focussed-orig-background-color', el.style.backgroundColor);
      el.setAttribute('data-focussed-orig-box-shadow', el.style.boxShadow);
      el.style.zIndex = 2147483647;
      el.style.position = 'relative';
      el.style.backgroundColor = '#ffffff';
      el.style.boxShadow = '0px 0px 0px 20px #fff';
    }
  }
  static unfocus() {
    if (document.querySelector('.hlp-focus-mask') !== null) {
      document.querySelectorAll('.hlp-focus-mask').forEach(el => {
        hlp.remove(el);
      });
    }
    if (document.querySelector('[data-focussed]') !== null) {
      document.querySelectorAll('[data-focussed]').forEach(el => {
        el.style.zIndex = el.getAttribute('data-focussed-orig-z-index');
        el.style.position = el.getAttribute('data-focussed-orig-position');
        el.style.backgroundColor = el.getAttribute('data-focussed-orig-background-color');
        el.style.boxShadow = el.getAttribute('data-focussed-orig-box-shadow');
        el.removeAttribute('data-focussed');
        el.removeAttribute('data-focussed-orig-z-index');
        el.removeAttribute('data-focussed-orig-position');
        el.removeAttribute('data-focussed-orig-background-color');
        el.removeAttribute('data-focussed-orig-box-shadow');
      });
    }
  }
  static remove(el) {
    if (el !== null) {
      el.parentNode.removeChild(el);
    }
  }
  static on(event, selector, scope) {
    let callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
    if (callback === null) {
      callback = scope;
      scope = document;
    } else {
      scope = document.querySelector(scope);
    }
    scope.addEventListener(event, e => {
      var el = hlp.closest(e.target, selector);
      if (el) {
        callback(e, el);
      }
    }, false);
  }
  static url() {
    return window.location.protocol + '//' + window.location.host + window.location.pathname;
  }
  static urlWithHash() {
    return window.location.protocol + '//' + window.location.host + window.location.pathname + window.location.hash;
  }
  static fullUrl() {
    return window.location.href;
  }
  static urlWithArgs() {
    return window.location.href.split('#')[0];
  }
  static baseUrl() {
    return window.location.protocol + '//' + window.location.host;
  }
  static urlProtocol() {
    return window.location.protocol + '//';
  }
  static urlHost() {
    return window.location.host;
  }
  static urlHostTopLevel() {
    let host = window.location.host;
    // ipv4
    if (host.match(/^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/)) {
      return host;
    }
    host = host.split('.');
    while (host.length > 2) {
      host.shift();
    }
    host = host.join('.');
    return host;
  }
  static urlPath() {
    return window.location.pathname;
  }
  static urlHash() {
    return window.location.hash;
  }
  static urlArgs() {
    return window.location.search;
  }
  static urlOfScript() {
    if (document.currentScript) {
      return document.currentScript.src;
    } else {
      let scripts = document.getElementsByTagName('script');
      return scripts[scripts.length - 1].src;
    }
  }
  static pathOfScript() {
    let script = this.urlOfScript(),
      path = script.substring(0, script.lastIndexOf('/'));
    return path;
  }
  static waitUntil(selector) {
    let css_option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    let css_value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    return new Promise((resolve, reject) => {
      let timeout = setInterval(() => {
        if (document.querySelector(selector) !== null && (css_option === null || css_value === null && window.getComputedStyle(document.querySelector(selector))[css_option] !== undefined && window.getComputedStyle(document.querySelector(selector))[css_option] != '' || css_value !== null && window.getComputedStyle(document.querySelector(selector))[css_option] === css_value)) {
          window.clearInterval(timeout);
          resolve();
        }
      }, 30);
    });
  }
  static waitUntilVar() {
    let arg1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    let arg2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    let value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    let varName = null,
      parentContainer = null;
    if (arg2 === null) {
      varName = arg1;
      parentContainer = window;
    } else {
      varName = arg2;
      parentContainer = arg1;
    }
    return new Promise((resolve, reject) => {
      let timeout = setInterval(() => {
        if (parentContainer[varName] !== undefined && parentContainer[varName] !== null) {
          if (value === null || parentContainer[varName] === value) {
            window.clearInterval(timeout);
            resolve();
          }
        }
      }, 30);
    });
  }
  static ready() {
    return new Promise(resolve => {
      if (document.readyState !== 'loading') {
        return resolve();
      } else {
        document.addEventListener('DOMContentLoaded', () => {
          return resolve();
        });
      }
    });
  }
  static load() {
    return new Promise(resolve => {
      if (document.readyState === 'complete') {
        return resolve();
      } else {
        window.addEventListener('load', () => {
          return resolve();
        });
      }
    });
  }
  static runForEl(selector, callback) {
    hlp.ready().then(() => {
      // add unique id
      let id = hlp.pushId();

      // also run for existing
      if (document.querySelector(selector) !== null) {
        document.querySelectorAll(selector).forEach(el => {
          if (el.runForEl === undefined) {
            el.runForEl = [];
          }
          if (!el.runForEl.includes(id)) {
            el.runForEl.push(id);
            callback(el);
          }
        });
      }
      // setup queue
      if (window.runForEl_queue === undefined) {
        window.runForEl_queue = [];
      }
      // setup observer
      if (window.runForEl_observer === undefined) {
        window.runForEl_observer = new MutationObserver(mutations => {
          mutations.forEach(mutations__value => {
            if (!mutations__value.addedNodes) {
              return;
            }
            for (let i = 0; i < mutations__value.addedNodes.length; i++) {
              let node = mutations__value.addedNodes[i];
              if (node.nodeType === Node.ELEMENT_NODE) {
                window.runForEl_queue.forEach(queue__value => {
                  if (node.matches(queue__value.selector)) {
                    if (node.runForEl === undefined) {
                      node.runForEl = [];
                    }
                    if (!node.runForEl.includes(queue__value.id)) {
                      node.runForEl.push(queue__value.id);
                      queue__value.callback(node);
                    }
                  }
                  // if you modify lots of html (e.g. with innerHTML), also check childs
                  if (node.querySelector(queue__value.selector) !== null) {
                    node.querySelectorAll(queue__value.selector).forEach(nodes__value => {
                      if (nodes__value.runForEl === undefined) {
                        nodes__value.runForEl = [];
                      }
                      if (!nodes__value.runForEl.includes(queue__value.id)) {
                        nodes__value.runForEl.push(queue__value.id);
                        queue__value.callback(nodes__value);
                      }
                    });
                  }
                });
              }
            }
          });
        }).observe(document.body, {
          attributes: false,
          childList: true,
          characterData: false,
          subtree: true,
          attributeOldValue: false,
          characterDataOldValue: false
        });
      }
      // push to queue
      window.runForEl_queue.push({
        id: id,
        selector: selector,
        callback: callback
      });
    });
  }
  static fmath(op, x, y) {
    let precision = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 8;
    let n = {
      '*': x * y,
      '-': x - y,
      '+': x + y,
      '/': x / y
    }[op];
    return Math.round(n * 10 * Math.pow(10, precision)) / (10 * Math.pow(10, precision));
  }
  static trim(str, charlist) {
    let whitespace = [' ', '\n', '\r', '\t', '\f', '\x0b', '\xa0', '\u2000', '\u2001', '\u2002', '\u2003', '\u2004', '\u2005', '\u2006', '\u2007', '\u2008', '\u2009', '\u200a', '\u200b', '\u2028', '\u2029', '\u3000'].join('');
    let l = 0;
    let i = 0;
    str += '';
    if (charlist) {
      whitespace = (charlist + '').replace(/([[\]().?/*{}+$^:])/g, '$1');
    }
    l = str.length;
    for (i = 0; i < l; i++) {
      if (whitespace.indexOf(str.charAt(i)) === -1) {
        str = str.substring(i);
        break;
      }
    }
    l = str.length;
    for (i = l - 1; i >= 0; i--) {
      if (whitespace.indexOf(str.charAt(i)) === -1) {
        str = str.substring(0, i + 1);
        break;
      }
    }
    return whitespace.indexOf(str.charAt(0)) === -1 ? str : '';
  }
  static ltrim(str, charlist) {
    charlist = !charlist ? ' \\s\u00A0' : (charlist + '').replace(/([[\]().?/*{}+$^:])/g, '$1');
    const re = new RegExp('^[' + charlist + ']+', 'g');
    return (str + '').replace(re, '');
  }
  static rtrim(str, charlist) {
    charlist = !charlist ? ' \\s\u00A0' : (charlist + '').replace(/([[\]().?/*{}+$^:])/g, '\\$1');
    const re = new RegExp('[' + charlist + ']+$', 'g');
    return (str + '').replace(re, '');
  }
  static truncate_string(str) {
    let len = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;
    let chars = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '...';
    if (this.nx(str) || !(typeof str === 'string' || str instanceof String)) {
      return str;
    }
    if (this.trim(str).length > len) {
      str = this.trim(str);
      if (str.indexOf(' ') === -1) {
        str = str.substring(0, len);
      } else {
        str = str.substring(0, len);
        str = this.trim(str);
        if (str.lastIndexOf(' ') > -1) {
          str = str.substring(0, str.lastIndexOf(' '));
          str = this.trim(str);
        }
      }
      str += ' ' + chars;
    }
    return str;
  }
  static pushId() {
    /* source https://gist.github.com/mikelehen/3596a30bd69384624c11 */
    let pushIdData = null;
    // browser
    if (window !== undefined) {
      if (window.pushIdDataGlobal === undefined) {
        window.pushIdDataGlobal = {};
      }
      pushIdData = window.pushIdDataGlobal;
    }
    // node.js
    if (global !== undefined) {
      if (global.pushIdDataGlobal === undefined) {
        global.pushIdDataGlobal = {};
      }
      pushIdData = global.pushIdDataGlobal;
    }
    // first run
    if (hlp.objectsAreEqual(pushIdData, {})) {
      pushIdData.lastPushTime = 0;
      pushIdData.lastRandChars = [];
      pushIdData.PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';
    }
    let now = new Date().getTime(),
      duplicateTime = now === pushIdData.lastPushTime;
    pushIdData.lastPushTime = now;
    let timeStampChars = new Array(8);
    for (var i = 7; i >= 0; i--) {
      timeStampChars[i] = pushIdData.PUSH_CHARS.charAt(now % 64);
      now = Math.floor(now / 64);
    }
    if (now !== 0) {
      throw new Error();
    }
    let id = timeStampChars.join('');
    if (!duplicateTime) {
      for (i = 0; i < 12; i++) {
        pushIdData.lastRandChars[i] = Math.floor(Math.random() * 64);
      }
    } else {
      for (i = 11; i >= 0 && pushIdData.lastRandChars[i] === 63; i--) {
        pushIdData.lastRandChars[i] = 0;
      }
      pushIdData.lastRandChars[i]++;
    }
    for (i = 0; i < 12; i++) {
      id += pushIdData.PUSH_CHARS.charAt(pushIdData.lastRandChars[i]);
    }
    if (id.length != 20) {
      throw new Error();
    }
    return id;
  }
  static getProp(obj, desc) {
    let arr = desc.split('.');
    while (arr.length && (obj = obj[arr.shift()]));
    return obj;
  }
  static base64toblob(base64) {
    let contentType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    let sliceSize = 512,
      byteCharacters = atob(base64),
      byteArrays = [];
    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
      let slice = byteCharacters.slice(offset, offset + sliceSize),
        byteNumbers = new Array(slice.length);
      for (let i = 0; i < slice.length; i++) {
        byteNumbers[i] = slice.charCodeAt(i);
      }
      let byteArray = new Uint8Array(byteNumbers);
      byteArrays.push(byteArray);
    }
    let blob = new Blob(byteArrays, {
      type: contentType
    });
    return blob;
  }
  static blobtobase64(blob) {
    return new Promise(resolve => {
      let reader = new FileReader();
      reader.onload = () => {
        var dataUrl = reader.result;
        var base64 = dataUrl.split(',')[1];
        resolve(base64);
      };
      reader.readAsDataURL(blob);
    });
  }
  static stringtoblob(string) {
    let contentType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    let blob = new Blob([string], {
      type: contentType
    });
    return blob;
  }
  static blobtostring(blob) {
    return new Promise(resolve => {
      let reader = new FileReader();
      reader.onload = () => {
        resolve(reader.result);
      };
      reader.readAsText(blob);
    });
  }
  static filetobase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result.split(',')[1]);
      reader.onerror = error => reject(error);
    });
  }
  static blobtofile(blob) {
    let filename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'file.txt';
    let file = null;
    try {
      file = new File([blob], filename);
    } catch {
      // ie 11
      file = new Blob([blob], filename);
    }
    return file;
  }
  static filetoblob(file) {
    return new Blob([file]);
  }
  static base64tofile(base64) {
    let contentType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    let filename = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'file.txt';
    return this.blobtofile(this.base64toblob(base64, contentType), filename);
  }
  static blobtourl(blob) {
    return URL.createObjectURL(blob, {
      type: 'text/plain'
    });
  }
  static stringtourl(string) {
    return this.blobtourl(this.stringtoblob(string));
  }
  static base64tostring(base64) {
    return atob(base64);
  }
  static stringtobase64(string) {
    return btoa(string);
  }
  static base64tourl(base64) {
    return this.blobtourl(this.base64toblob(base64));
  }
  static filetourl(file) {
    return this.blobtourl(this.filetoblob(file));
  }
  static getImageOrientation(base64) {
    return new Promise((resolve, reject) => {
      base64 = base64.replace('data:image/jpeg;base64,', '');
      let file = this.base64tofile(base64),
        reader = new FileReader();
      reader.onload = e => {
        var view = new DataView(e.target.result);
        if (view.getUint16(0, false) != 0xffd8) {
          resolve(-2);
          return;
        }
        var length = view.byteLength,
          offset = 2;
        while (offset < length) {
          if (view.getUint16(offset + 2, false) <= 8) {
            resolve(-1);
            return;
          }
          var marker = view.getUint16(offset, false);
          offset += 2;
          if (marker == 0xffe1) {
            if (view.getUint32(offset += 2, false) != 0x45786966) {
              resolve(-1);
              return;
            }
            var little = view.getUint16(offset += 6, false) == 0x4949;
            offset += view.getUint32(offset + 4, little);
            var tags = view.getUint16(offset, little);
            offset += 2;
            for (var i = 0; i < tags; i++) {
              if (view.getUint16(offset + i * 12, little) == 0x0112) {
                resolve(view.getUint16(offset + i * 12 + 8, little));
                return;
              }
            }
          } else if ((marker & 0xff00) != 0xff00) {
            break;
          } else {
            offset += view.getUint16(offset, false);
          }
        }
        resolve(-1);
        return;
      };
      reader.readAsArrayBuffer(file);
    });
  }
  static resetImageOrientation(srcBase64, srcOrientation) {
    return new Promise((resolve, reject) => {
      var img = new Image();
      img.onload = () => {
        var width = img.width,
          height = img.height,
          canvas = document.createElement('canvas'),
          ctx = canvas.getContext('2d');
        if (4 < srcOrientation && srcOrientation < 9) {
          canvas.width = height;
          canvas.height = width;
        } else {
          canvas.width = width;
          canvas.height = height;
        }
        switch (srcOrientation) {
          case 2:
            ctx.transform(-1, 0, 0, 1, width, 0);
            break;
          case 3:
            ctx.transform(-1, 0, 0, -1, width, height);
            break;
          case 4:
            ctx.transform(1, 0, 0, -1, 0, height);
            break;
          case 5:
            ctx.transform(0, 1, 1, 0, 0, 0);
            break;
          case 6:
            ctx.transform(0, 1, -1, 0, height, 0);
            break;
          case 7:
            ctx.transform(0, -1, -1, 0, height, width);
            break;
          case 8:
            ctx.transform(0, -1, 1, 0, 0, width);
            break;
          default:
            break;
        }
        ctx.drawImage(img, 0, 0);
        let base64 = canvas.toDataURL();
        base64 = 'data:image/jpeg;base64,' + base64.split(',')[1];
        resolve(base64);
        return;
      };
      img.src = srcBase64;
    });
  }
  static fixImageOrientation(base64) {
    return new Promise((resolve, reject) => {
      if (base64.indexOf('data:') === -1) {
        resolve(base64);
        return;
      }
      if (base64.indexOf('data:image/jpeg;base64,') === 0) {
        base64 = base64.replace('data:image/jpeg;base64,', '');
      }
      this.getImageOrientation(base64).then(orientation => {
        base64 = 'data:image/jpeg;base64,' + base64;
        if (orientation <= 1) {
          resolve(base64);
          return;
        } else {
          this.resetImageOrientation(base64, orientation).then(base64_new => {
            resolve(base64_new);
            return;
          });
        }
      });
    });
  }
  static debounce(func, wait, immediate) {
    var timeout;
    return function () {
      var context = this,
        args = arguments;
      var later = function () {
        timeout = null;
        if (!immediate) func.apply(context, args);
      };
      var callNow = immediate && !timeout;
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
      if (callNow) func.apply(context, args);
    };
  }
  static throttle(func, wait, options) {
    var context, args, result;
    var timeout = null;
    var previous = 0;
    if (!options) options = {};
    var later = function () {
      previous = options.leading === false ? 0 : Date.now();
      timeout = null;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    };
    return function () {
      var now = Date.now();
      if (!previous && options.leading === false) previous = now;
      var remaining = wait - (now - previous);
      context = this;
      args = arguments;
      if (remaining <= 0 || remaining > wait) {
        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }
        previous = now;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      } else if (!timeout && options.trailing !== false) {
        timeout = setTimeout(later, remaining);
      }
      return result;
    };
  }
  static shuffle(array) {
    let currentIndex = array.length,
      temporaryValue,
      randomIndex;
    while (0 !== currentIndex) {
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex -= 1;
      temporaryValue = array[currentIndex];
      array[currentIndex] = array[randomIndex];
      array[randomIndex] = temporaryValue;
    }
    return array;
  }
  static findRecursiveInObject(object) {
    let key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    let value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    let path = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
    let paths = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];
    if (object !== null && typeof object === 'object') {
      for (const [object__key, object__value] of Object.entries(object)) {
        if (object__value !== null && typeof object__value === 'object') {
          this.findRecursiveInObject(object__value, key, value, (path === '' ? '' : path + '.') + object__key, paths);
        } else if ((key === null || object__key === key) && (value === null || object__value === value)) {
          paths.push(path);
          break; // only take first
        }
      }
    }

    return paths;
  }
}

/* expose all functions to window */
exports.default = hlp;
if (typeof window !== 'undefined') {
  window.hlp = {};
  Object.getOwnPropertyNames(hlp).forEach((value, key) => {
    if (value === 'length' || value === 'name' || value === 'prototype' || value === 'caller' || value === 'arguments') {
      return;
    }
    window.hlp[value] = hlp[value];
  });
}
}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],41:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("core-js/modules/es.regexp.exec.js");

require("core-js/modules/es.string.match.js");

require("core-js/modules/es.regexp.constructor.js");

require("core-js/modules/es.regexp.to-string.js");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var helpers = /*#__PURE__*/function () {
  function helpers() {
    (0, _classCallCheck2.default)(this, helpers);
  }

  (0, _createClass2.default)(helpers, null, [{
    key: "cookieExists",
    value: function cookieExists(cookie_name) {
      if (document.cookie !== undefined && this.cookieGet(cookie_name) !== null) {
        return true;
      }

      return false;
    }
  }, {
    key: "cookieGet",
    value: function cookieGet(cookie_name) {
      var cookie_match = document.cookie.match(new RegExp(cookie_name + '=([^;]+)'));

      if (cookie_match) {
        return decodeURIComponent(cookie_match[1]);
      }

      return null;
    }
  }, {
    key: "cookieSet",
    value: function cookieSet(cookie_name, cookie_value, days) {
      var samesite = '';

      if (window.location.protocol.indexOf('https') > -1) {
        samesite = '; SameSite=None; Secure';
      }

      document.cookie = cookie_name + '=' + encodeURIComponent(cookie_value) + '; ' + 'expires=' + new Date(new Date().getTime() + days * 24 * 60 * 60 * 1000).toUTCString() + '; path=/' + samesite;
    }
  }, {
    key: "cookieDelete",
    value: function cookieDelete(cookie_name) {
      var samesite = '';

      if (window.location.protocol.indexOf('https') > -1) {
        samesite = '; SameSite=None; Secure';
      }

      document.cookie = cookie_name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/' + samesite;
    }
  }, {
    key: "remove",
    value: function remove(el) {
      if (el !== null) {
        el.parentNode.removeChild(el);
      }
    }
  }]);
  return helpers;
}();

exports.default = helpers;
},{"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/interopRequireDefault":27,"core-js/modules/es.regexp.constructor.js":191,"core-js/modules/es.regexp.exec.js":192,"core-js/modules/es.regexp.to-string.js":193,"core-js/modules/es.string.match.js":194}],42:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("core-js/modules/es.string.sub.js");

require("core-js/modules/es.regexp.exec.js");

require("core-js/modules/es.string.split.js");

require("core-js/modules/es.object.to-string.js");

require("core-js/modules/es.promise.js");

require("core-js/modules/es.regexp.to-string.js");

require("core-js/modules/web.dom-collections.for-each.js");

require("core-js/modules/es.array.concat.js");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

require("whatwg-fetch");

var _helpers = _interopRequireDefault(require("./_helpers"));

// use fetch
var jwtbutler = /*#__PURE__*/function () {
  function jwtbutler(config) {
    (0, _classCallCheck2.default)(this, jwtbutler);

    if (!('auth_login' in config)) {
      config.auth_login = 'email';
    }

    this.config = config;
  }

  (0, _createClass2.default)(jwtbutler, [{
    key: "isLoggedIn",
    value: function isLoggedIn() {
      if (this.getPayload() === null) {
        return false;
      }

      return true;
    }
  }, {
    key: "getUserId",
    value: function getUserId() {
      var payload = this.getPayload();

      if (payload === null) {
        return null;
      }

      return payload.sub;
    }
  }, {
    key: "getPayload",
    value: function getPayload() {
      if (_helpers.default.cookieGet('access_token') === null) {
        return null;
      }

      try {
        return JSON.parse(atob(_helpers.default.cookieGet('access_token').split('.')[1]));
      } catch (e) {
        return null;
      }
    }
  }, {
    key: "logout",
    value: function logout() {
      var _this2 = this;

      return new Promise(function (resolve, reject) {
        _this2.addLoadingState('logging-out');

        fetch(_this2.config.auth_server + '/logout', {
          method: 'POST',
          headers: {
            'content-type': 'application/json',
            Authorization: 'Bearer ' + _helpers.default.cookieGet('access_token')
          },
          cache: 'no-cache'
        }).then(function (res) {
          return res.json();
        }).catch(function (err) {
          return err;
        }).then(function (response) {
          _this2.setCookies(null).then(function () {
            _this2.removeLoadingStates();

            resolve();
          }).catch(function (error) {
            reject(error);
          });
        });
      });
    }
  }, {
    key: "login",
    value: function login() {
      var _this3 = this;

      return new Promise(function (resolve, reject) {
        if (_helpers.default.cookieGet('access_token') !== null) {
          _this3.addLoadingState('logging-in');

          fetch(_this3.config.auth_server + '/check', {
            method: 'POST',
            body: JSON.stringify({
              access_token: _helpers.default.cookieGet('access_token')
            }),
            headers: {
              'content-type': 'application/json'
            },
            cache: 'no-cache'
          }).then(function (res) {
            return res.json();
          }).catch(function (err) {
            return err;
          }).then(function (response) {
            if (response.success === true) {
              _this3.setCookies(_helpers.default.cookieGet('access_token')).then(function () {
                _this3.removeLoadingStates();

                resolve();
              }).catch(function (error) {
                reject(error);
              });
            } else {
              fetch(_this3.config.auth_server + '/refresh', {
                method: 'POST',
                headers: {
                  'content-type': 'application/json',
                  Authorization: 'Bearer ' + _helpers.default.cookieGet('access_token')
                },
                cache: 'no-cache'
              }).then(function (res) {
                return res.json();
              }).catch(function (err) {
                return err;
              }).then(function (response) {
                if (response.success === true) {
                  _this3.setCookies(response.data.access_token).then(function () {
                    _this3.removeLoadingStates();

                    resolve();
                  }).catch(function (error) {
                    reject(error);
                  });
                } else {
                  _this3.renderLoginFormWithPromise().then(function () {
                    resolve();
                  });
                }
              });
            }
          });
        } else {
          _this3.renderLoginFormWithPromise().then(function () {
            resolve();
          }).catch(function () {
            reject();
          });
        }
      });
    }
  }, {
    key: "fetch",
    value: function (_fetch) {
      function fetch(_x) {
        return _fetch.apply(this, arguments);
      }

      fetch.toString = function () {
        return _fetch.toString();
      };

      return fetch;
    }(function (url) {
      var _this4 = this;

      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return new Promise(function (resolve, reject) {
        if (!('headers' in args)) {
          args.headers = {};
        }

        if (!('tries' in args)) {
          args.tries = 0;
        }

        args.tries++;

        if (args.tries > 3) {
          reject(null);
          return;
        } else if (_this4.isLoggedIn() === false) {
          _this4.login().then(function () {
            _this4.fetch(url, args).then(function (response) {
              resolve(response);
            }).catch(function (error) {
              reject(error);
            });
          }).catch(function (error) {
            reject(error);
          });
        } else {
          _this4.addLoadingState('fetching');

          args.headers.Authorization = 'Bearer ' + _helpers.default.cookieGet('access_token');
          fetch(url, args).then(function (v) {
            return v;
          }).catch(function (v) {
            return v;
          }).then(function (response) {
            _this4.removeLoadingStates();

            if (response.status === 401) {
              _this4.addLoadingState('logging-in');

              fetch(_this4.config.auth_server + '/refresh', {
                method: 'POST',
                headers: {
                  'content-type': 'application/json',
                  Authorization: 'Bearer ' + _helpers.default.cookieGet('access_token')
                },
                cache: 'no-cache'
              }).then(function (res) {
                return res.json();
              }).catch(function (error) {
                return error;
              }).then(function (response) {
                if (response.success === true) {
                  _this4.setCookies(response.data.access_token).then(function () {
                    _this4.removeLoadingStates();

                    _this4.fetch(url, args).then(function (response) {
                      resolve(response);
                    }).catch(function (error) {
                      reject(error);
                    });
                  }).catch(function (error) {
                    _this4.removeLoadingStates();

                    reject(error);
                  });
                } else {
                  _this4.removeLoadingStates();

                  _this4.renderLoginFormWithPromise().then(function () {
                    _this4.fetch(url, args).then(function (response) {
                      resolve(response);
                    }).catch(function (error) {
                      reject(error);
                    });
                  }).catch(function (error) {
                    reject(error);
                  });
                }
              });
            } else {
              resolve(response);
            }
          });
        }
      });
    })
  }, {
    key: "setCookies",
    value: function setCookies() {
      var _this5 = this;

      var access_token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      return new Promise(function (resolve, reject) {
        if (_this5.setCookieLoading === undefined) {
          _this5.setCookieLoading === false;
        }

        if (_this5.setCookieLoading === true) {
          resolve();
          return;
        }

        _this5.setCookieLoading = true;

        if (access_token !== null) {
          _helpers.default.cookieSet('access_token', access_token, 28);
        } else {
          _helpers.default.cookieDelete('access_token');
        }

        if (_this5.config.sso === undefined || _this5.config.sso.length === 1 && _this5.config.sso[0] === window.location.protocol + '//' + window.location.host) {
          _this5.setCookieLoading = false;
          resolve();
          return;
        }

        _helpers.default.remove(document.querySelector('.iframe_wrapper'));

        var iframe_wrapper = document.createElement('div');
        iframe_wrapper.setAttribute('class', 'iframe_wrapper');
        iframe_wrapper.style.position = 'absolute';
        iframe_wrapper.style.opacity = '0';
        document.body.appendChild(iframe_wrapper);
        var timeout = null;

        var _this = _this5,
            todo = _this5.config.sso.length - 1,
            waitForPostMessage = function waitForPostMessage(e) {
          if (_this.config.sso.indexOf(e.origin) === -1) {
            return;
          }

          if (e.data !== undefined && e.data !== null && 'success' in e.data && e.data.success === true) {
            todo--;
          } //console.log(todo);


          if (todo <= 0) {
            if (timeout) {
              //console.log('cleared timeout');
              clearTimeout(timeout);
            }

            window.removeEventListener('message', waitForPostMessage, false);

            _helpers.default.remove(document.querySelector('.iframe_wrapper'));

            _this.setCookieLoading = false;
            resolve();
          }
        };

        window.addEventListener('message', waitForPostMessage, false);
        timeout = setTimeout(function () {
          if (_this5.setCookieLoading === true) {
            //console.log('timeout');
            window.removeEventListener('message', waitForPostMessage, false);

            _helpers.default.remove(document.querySelector('.iframe_wrapper'));

            _this5.setCookieLoading = false;
            resolve();
          }
        }, 20000);

        _this5.config.sso.forEach(function (sso__value) {
          if (sso__value === window.location.protocol + '//' + window.location.host) {
            return;
          }

          var iframe = document.createElement('iframe');
          iframe.setAttribute('src', sso__value + '/sso.html');
          iframe.style.width = '1px';
          iframe.style.height = '1px';
          iframe.addEventListener('load', function (e) {
            iframe.contentWindow.postMessage({
              access_token: access_token
            }, sso__value);
          });
          document.querySelector('.iframe_wrapper').appendChild(iframe);
        });
      });
    }
  }, {
    key: "renderLoginFormWithPromise",
    value: function renderLoginFormWithPromise() {
      var _this6 = this;

      return new Promise(function (resolve, reject) {
        _this6.buildUpLoginFormHtml();

        _this6.bindLoginFormSubmit().then(function () {
          resolve();
        }).catch(function (error) {
          reject(error);
        });

        _this6.triggerLoginFormRenderedEvent();
      });
    }
  }, {
    key: "buildUpLoginFormHtml",
    value: function buildUpLoginFormHtml() {
      if (!('login_form' in this.config) || this.config.login_form == '') {
        this.config.login_form = "<div class=\"login-form\">\n                <div class=\"login-form__inner\">\n                    <form class=\"login-form__form\">\n                        <ul class=\"login-form__items\">\n                            <li class=\"login-form__item\">\n                                <label class=\"login-form__label login-form__label--".concat(this.config.auth_login, "\" for=\"login-form__label--").concat(this.config.auth_login, "\">").concat(this.config.auth_login === 'email' ? 'E-Mail-Adresse' : this.config.auth_login === 'username' ? 'Benutzername' : this.config.auth_login, "</label>\n                                <input class=\"login-form__input login-form__input--").concat(this.config.auth_login, "\" id=\"login-form__label--").concat(this.config.auth_login, "\" type=\"text\" required=\"required\" name=\"").concat(this.config.auth_login, "\" />\n                            </li>\n                            <li class=\"login-form__item\">\n                                <label class=\"login-form__label login-form__label--password\" for=\"login-form__label--password\">Passwort</label>\n                                <input class=\"login-form__input login-form__input--password\" id=\"login-form__label--password\" type=\"password\" required=\"required\" name=\"password\" />\n                            </li>\n                            <li class=\"login-form__item\">\n                                <input class=\"login-form__submit\" type=\"submit\" value=\"Anmelden\" />\n                            </li>\n                        </ul>\n                    </form>\n                </div>\n            </div>");
      }

      var dom = new DOMParser().parseFromString(this.config.login_form, 'text/html').body.childNodes[0];
      this.config.login_form_class = dom.getAttribute('class').split(' ')[0];

      _helpers.default.remove(document.querySelector('.' + this.config.login_form_class));

      this.addLoadingState('login-form-visible');
      var parent = document.body;

      if ('login_form_parent' in this.config && this.config.login_form_parent != '' && document.querySelector(this.config.login_form_parent) !== null) {
        parent = document.querySelector(this.config.login_form_parent);
      }

      parent.appendChild(dom);
    }
  }, {
    key: "triggerLoginFormRenderedEvent",
    value: function triggerLoginFormRenderedEvent() {
      if ('login_form_rendered' in this.config && this.config.login_form_rendered != '' && typeof this.config.login_form_rendered === 'function') {
        this.config.login_form_rendered(document.querySelector('.' + this.config.login_form_class));
      }
    }
  }, {
    key: "bindLoginFormSubmit",
    value: function bindLoginFormSubmit() {
      var _this7 = this;

      return new Promise(function (resolve, reject) {
        var dom = document.querySelector('.' + _this7.config.login_form_class),
            form = dom.querySelector('form');
        form.addEventListener('submit', function (e) {
          var _JSON$stringify;

          _this7.addLoadingState('logging-in');

          if (form.querySelector('input[type="submit"]') !== null) {
            form.querySelector('input[type="submit"]').disabled = true;
          }

          _helpers.default.remove(dom.querySelector('.' + _this7.config.login_form_class + '__error'));

          fetch(_this7.config.auth_server + '/login', {
            method: 'POST',
            body: JSON.stringify((_JSON$stringify = {}, (0, _defineProperty2.default)(_JSON$stringify, _this7.config.auth_login, form.querySelector('input[name="' + _this7.config.auth_login + '"]').value), (0, _defineProperty2.default)(_JSON$stringify, "password", form.querySelector('input[name="password"]').value), _JSON$stringify)),
            headers: {
              'content-type': 'application/json'
            },
            cache: 'no-cache'
          }).then(function (res) {
            return res.json();
          }).catch(function (err) {
            return err;
          }).then(function (response) {
            if (form.querySelector('input[type="submit"]') !== null) {
              form.querySelector('input[type="submit"]').disabled = false;
            }

            if (response !== undefined && response !== null && 'success' in response && response.success === true) {
              _helpers.default.remove(document.querySelector('.' + _this7.config.login_form_class));

              _this7.setCookies(response.data.access_token).then(function () {
                _this7.removeLoadingStates();

                resolve();
              }).catch(function (error) {
                reject(error);
              });
            } else {
              form.insertAdjacentHTML('afterbegin', '<div class="' + _this7.config.login_form_class + '__error">' + response.public_message + '</div>');
            }
          });
          e.preventDefault();
        }, false);
      });
    }
  }, {
    key: "addLoadingState",
    value: function addLoadingState(state) {
      document.documentElement.classList.add('jwtbutler-' + state);

      if (state === 'logging-in' || state === 'logging-out') {
        document.documentElement.classList.add('jwtbutler-loading');
      }
    }
  }, {
    key: "removeLoadingStates",
    value: function removeLoadingStates() {
      document.documentElement.classList.remove('jwtbutler-logging-in');
      document.documentElement.classList.remove('jwtbutler-logging-out');
      document.documentElement.classList.remove('jwtbutler-loading');
      document.documentElement.classList.remove('jwtbutler-fetching');
      document.documentElement.classList.remove('jwtbutler-login-form-visible');
    }
  }]);
  return jwtbutler;
}();

exports.default = jwtbutler;
window.jwtbutler = jwtbutler;
},{"./_helpers":41,"@babel/runtime/helpers/classCallCheck":24,"@babel/runtime/helpers/createClass":25,"@babel/runtime/helpers/defineProperty":26,"@babel/runtime/helpers/interopRequireDefault":27,"core-js/modules/es.array.concat.js":182,"core-js/modules/es.object.to-string.js":183,"core-js/modules/es.promise.js":187,"core-js/modules/es.regexp.exec.js":192,"core-js/modules/es.regexp.to-string.js":193,"core-js/modules/es.string.split.js":195,"core-js/modules/es.string.sub.js":196,"core-js/modules/web.dom-collections.for-each.js":197,"whatwg-fetch":199}],43:[function(require,module,exports){
'use strict';
var isCallable = require('../internals/is-callable');
var tryToString = require('../internals/try-to-string');

var $TypeError = TypeError;

// `Assert: IsCallable(argument) is true`
module.exports = function (argument) {
  if (isCallable(argument)) return argument;
  throw $TypeError(tryToString(argument) + ' is not a function');
};

},{"../internals/is-callable":111,"../internals/try-to-string":175}],44:[function(require,module,exports){
'use strict';
var isConstructor = require('../internals/is-constructor');
var tryToString = require('../internals/try-to-string');

var $TypeError = TypeError;

// `Assert: IsConstructor(argument) is true`
module.exports = function (argument) {
  if (isConstructor(argument)) return argument;
  throw $TypeError(tryToString(argument) + ' is not a constructor');
};

},{"../internals/is-constructor":112,"../internals/try-to-string":175}],45:[function(require,module,exports){
'use strict';
var isCallable = require('../internals/is-callable');

var $String = String;
var $TypeError = TypeError;

module.exports = function (argument) {
  if (typeof argument == 'object' || isCallable(argument)) return argument;
  throw $TypeError("Can't set " + $String(argument) + ' as a prototype');
};

},{"../internals/is-callable":111}],46:[function(require,module,exports){
'use strict';
var charAt = require('../internals/string-multibyte').charAt;

// `AdvanceStringIndex` abstract operation
// https://tc39.es/ecma262/#sec-advancestringindex
module.exports = function (S, index, unicode) {
  return index + (unicode ? charAt(S, index).length : 1);
};

},{"../internals/string-multibyte":163}],47:[function(require,module,exports){
'use strict';
var isPrototypeOf = require('../internals/object-is-prototype-of');

var $TypeError = TypeError;

module.exports = function (it, Prototype) {
  if (isPrototypeOf(Prototype, it)) return it;
  throw $TypeError('Incorrect invocation');
};

},{"../internals/object-is-prototype-of":133}],48:[function(require,module,exports){
'use strict';
var isObject = require('../internals/is-object');

var $String = String;
var $TypeError = TypeError;

// `Assert: Type(argument) is Object`
module.exports = function (argument) {
  if (isObject(argument)) return argument;
  throw $TypeError($String(argument) + ' is not an object');
};

},{"../internals/is-object":115}],49:[function(require,module,exports){
'use strict';
var $forEach = require('../internals/array-iteration').forEach;
var arrayMethodIsStrict = require('../internals/array-method-is-strict');

var STRICT_METHOD = arrayMethodIsStrict('forEach');

// `Array.prototype.forEach` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.foreach
module.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {
  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
// eslint-disable-next-line es/no-array-prototype-foreach -- safe
} : [].forEach;

},{"../internals/array-iteration":51,"../internals/array-method-is-strict":53}],50:[function(require,module,exports){
'use strict';
var toIndexedObject = require('../internals/to-indexed-object');
var toAbsoluteIndex = require('../internals/to-absolute-index');
var lengthOfArrayLike = require('../internals/length-of-array-like');

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = lengthOfArrayLike(O);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare -- NaN check
    if (IS_INCLUDES && el !== el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare -- NaN check
      if (value !== value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.es/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.es/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};

},{"../internals/length-of-array-like":122,"../internals/to-absolute-index":166,"../internals/to-indexed-object":167}],51:[function(require,module,exports){
'use strict';
var bind = require('../internals/function-bind-context');
var uncurryThis = require('../internals/function-uncurry-this');
var IndexedObject = require('../internals/indexed-object');
var toObject = require('../internals/to-object');
var lengthOfArrayLike = require('../internals/length-of-array-like');
var arraySpeciesCreate = require('../internals/array-species-create');

var push = uncurryThis([].push);

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE === 1;
  var IS_FILTER = TYPE === 2;
  var IS_SOME = TYPE === 3;
  var IS_EVERY = TYPE === 4;
  var IS_FIND_INDEX = TYPE === 6;
  var IS_FILTER_REJECT = TYPE === 7;
  var NO_HOLES = TYPE === 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var boundFunction = bind(callbackfn, that);
    var length = lengthOfArrayLike(self);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push(target, value);      // filter
        } else switch (TYPE) {
          case 4: return false;             // every
          case 7: push(target, value);      // filterReject
        }
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6),
  // `Array.prototype.filterReject` method
  // https://github.com/tc39/proposal-array-filtering
  filterReject: createMethod(7)
};

},{"../internals/array-species-create":57,"../internals/function-bind-context":88,"../internals/function-uncurry-this":94,"../internals/indexed-object":105,"../internals/length-of-array-like":122,"../internals/to-object":170}],52:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');
var wellKnownSymbol = require('../internals/well-known-symbol');
var V8_VERSION = require('../internals/engine-v8-version');

var SPECIES = wellKnownSymbol('species');

module.exports = function (METHOD_NAME) {
  // We can't use this feature detection in V8 since it causes
  // deoptimization and serious performance degradation
  // https://github.com/zloirock/core-js/issues/677
  return V8_VERSION >= 51 || !fails(function () {
    var array = [];
    var constructor = array.constructor = {};
    constructor[SPECIES] = function () {
      return { foo: 1 };
    };
    return array[METHOD_NAME](Boolean).foo !== 1;
  });
};

},{"../internals/engine-v8-version":82,"../internals/fails":85,"../internals/well-known-symbol":181}],53:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');

module.exports = function (METHOD_NAME, argument) {
  var method = [][METHOD_NAME];
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call -- required for testing
    method.call(null, argument || function () { return 1; }, 1);
  });
};

},{"../internals/fails":85}],54:[function(require,module,exports){
'use strict';
var toAbsoluteIndex = require('../internals/to-absolute-index');
var lengthOfArrayLike = require('../internals/length-of-array-like');
var createProperty = require('../internals/create-property');

var $Array = Array;
var max = Math.max;

module.exports = function (O, start, end) {
  var length = lengthOfArrayLike(O);
  var k = toAbsoluteIndex(start, length);
  var fin = toAbsoluteIndex(end === undefined ? length : end, length);
  var result = $Array(max(fin - k, 0));
  var n = 0;
  for (; k < fin; k++, n++) createProperty(result, n, O[k]);
  result.length = n;
  return result;
};

},{"../internals/create-property":65,"../internals/length-of-array-like":122,"../internals/to-absolute-index":166}],55:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');

module.exports = uncurryThis([].slice);

},{"../internals/function-uncurry-this":94}],56:[function(require,module,exports){
'use strict';
var isArray = require('../internals/is-array');
var isConstructor = require('../internals/is-constructor');
var isObject = require('../internals/is-object');
var wellKnownSymbol = require('../internals/well-known-symbol');

var SPECIES = wellKnownSymbol('species');
var $Array = Array;

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? $Array : C;
};

},{"../internals/is-array":110,"../internals/is-constructor":112,"../internals/is-object":115,"../internals/well-known-symbol":181}],57:[function(require,module,exports){
'use strict';
var arraySpeciesConstructor = require('../internals/array-species-constructor');

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};

},{"../internals/array-species-constructor":56}],58:[function(require,module,exports){
'use strict';
var wellKnownSymbol = require('../internals/well-known-symbol');

var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;

try {
  var called = 0;
  var iteratorWithReturn = {
    next: function () {
      return { done: !!called++ };
    },
    'return': function () {
      SAFE_CLOSING = true;
    }
  };
  iteratorWithReturn[ITERATOR] = function () {
    return this;
  };
  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing
  Array.from(iteratorWithReturn, function () { throw 2; });
} catch (error) { /* empty */ }

module.exports = function (exec, SKIP_CLOSING) {
  try {
    if (!SKIP_CLOSING && !SAFE_CLOSING) return false;
  } catch (error) { return false; } // workaround of old WebKit + `eval` bug
  var ITERATION_SUPPORT = false;
  try {
    var object = {};
    object[ITERATOR] = function () {
      return {
        next: function () {
          return { done: ITERATION_SUPPORT = true };
        }
      };
    };
    exec(object);
  } catch (error) { /* empty */ }
  return ITERATION_SUPPORT;
};

},{"../internals/well-known-symbol":181}],59:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');

var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);

module.exports = function (it) {
  return stringSlice(toString(it), 8, -1);
};

},{"../internals/function-uncurry-this":94}],60:[function(require,module,exports){
'use strict';
var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');
var isCallable = require('../internals/is-callable');
var classofRaw = require('../internals/classof-raw');
var wellKnownSymbol = require('../internals/well-known-symbol');

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;

// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};

},{"../internals/classof-raw":59,"../internals/is-callable":111,"../internals/to-string-tag-support":173,"../internals/well-known-symbol":181}],61:[function(require,module,exports){
'use strict';
var hasOwn = require('../internals/has-own-property');
var ownKeys = require('../internals/own-keys');
var getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');
var definePropertyModule = require('../internals/object-define-property');

module.exports = function (target, source, exceptions) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
      defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  }
};

},{"../internals/has-own-property":100,"../internals/object-define-property":129,"../internals/object-get-own-property-descriptor":130,"../internals/own-keys":140}],62:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var requireObjectCoercible = require('../internals/require-object-coercible');
var toString = require('../internals/to-string');

var quot = /"/g;
var replace = uncurryThis(''.replace);

// `CreateHTML` abstract operation
// https://tc39.es/ecma262/#sec-createhtml
module.exports = function (string, tag, attribute, value) {
  var S = toString(requireObjectCoercible(string));
  var p1 = '<' + tag;
  if (attribute !== '') p1 += ' ' + attribute + '="' + replace(toString(value), quot, '&quot;') + '"';
  return p1 + '>' + S + '</' + tag + '>';
};

},{"../internals/function-uncurry-this":94,"../internals/require-object-coercible":155,"../internals/to-string":174}],63:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var definePropertyModule = require('../internals/object-define-property');
var createPropertyDescriptor = require('../internals/create-property-descriptor');

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};

},{"../internals/create-property-descriptor":64,"../internals/descriptors":69,"../internals/object-define-property":129}],64:[function(require,module,exports){
'use strict';
module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};

},{}],65:[function(require,module,exports){
'use strict';
var toPropertyKey = require('../internals/to-property-key');
var definePropertyModule = require('../internals/object-define-property');
var createPropertyDescriptor = require('../internals/create-property-descriptor');

module.exports = function (object, key, value) {
  var propertyKey = toPropertyKey(key);
  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));
  else object[propertyKey] = value;
};

},{"../internals/create-property-descriptor":64,"../internals/object-define-property":129,"../internals/to-property-key":172}],66:[function(require,module,exports){
'use strict';
var makeBuiltIn = require('../internals/make-built-in');
var defineProperty = require('../internals/object-define-property');

module.exports = function (target, name, descriptor) {
  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });
  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });
  return defineProperty.f(target, name, descriptor);
};

},{"../internals/make-built-in":123,"../internals/object-define-property":129}],67:[function(require,module,exports){
'use strict';
var isCallable = require('../internals/is-callable');
var definePropertyModule = require('../internals/object-define-property');
var makeBuiltIn = require('../internals/make-built-in');
var defineGlobalProperty = require('../internals/define-global-property');

module.exports = function (O, key, value, options) {
  if (!options) options = {};
  var simple = options.enumerable;
  var name = options.name !== undefined ? options.name : key;
  if (isCallable(value)) makeBuiltIn(value, name, options);
  if (options.global) {
    if (simple) O[key] = value;
    else defineGlobalProperty(key, value);
  } else {
    try {
      if (!options.unsafe) delete O[key];
      else if (O[key]) simple = true;
    } catch (error) { /* empty */ }
    if (simple) O[key] = value;
    else definePropertyModule.f(O, key, {
      value: value,
      enumerable: false,
      configurable: !options.nonConfigurable,
      writable: !options.nonWritable
    });
  } return O;
};

},{"../internals/define-global-property":68,"../internals/is-callable":111,"../internals/make-built-in":123,"../internals/object-define-property":129}],68:[function(require,module,exports){
'use strict';
var global = require('../internals/global');

// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;

module.exports = function (key, value) {
  try {
    defineProperty(global, key, { value: value, configurable: true, writable: true });
  } catch (error) {
    global[key] = value;
  } return value;
};

},{"../internals/global":99}],69:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');

// Detect IE8's incomplete defineProperty implementation
module.exports = !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;
});

},{"../internals/fails":85}],70:[function(require,module,exports){
'use strict';
var documentAll = typeof document == 'object' && document.all;

// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot
// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing
var IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;

module.exports = {
  all: documentAll,
  IS_HTMLDDA: IS_HTMLDDA
};

},{}],71:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var isObject = require('../internals/is-object');

var document = global.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};

},{"../internals/global":99,"../internals/is-object":115}],72:[function(require,module,exports){
'use strict';
var $TypeError = TypeError;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991

module.exports = function (it) {
  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');
  return it;
};

},{}],73:[function(require,module,exports){
'use strict';
// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
module.exports = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};

},{}],74:[function(require,module,exports){
'use strict';
// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`
var documentCreateElement = require('../internals/document-create-element');

var classList = documentCreateElement('span').classList;
var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;

module.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;

},{"../internals/document-create-element":71}],75:[function(require,module,exports){
'use strict';
var IS_DENO = require('../internals/engine-is-deno');
var IS_NODE = require('../internals/engine-is-node');

module.exports = !IS_DENO && !IS_NODE
  && typeof window == 'object'
  && typeof document == 'object';

},{"../internals/engine-is-deno":76,"../internals/engine-is-node":79}],76:[function(require,module,exports){
'use strict';
/* global Deno -- Deno case */
module.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';

},{}],77:[function(require,module,exports){
'use strict';
var userAgent = require('../internals/engine-user-agent');

module.exports = /ipad|iphone|ipod/i.test(userAgent) && typeof Pebble != 'undefined';

},{"../internals/engine-user-agent":81}],78:[function(require,module,exports){
'use strict';
var userAgent = require('../internals/engine-user-agent');

// eslint-disable-next-line redos/no-vulnerable -- safe
module.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);

},{"../internals/engine-user-agent":81}],79:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var classof = require('../internals/classof-raw');

module.exports = classof(global.process) === 'process';

},{"../internals/classof-raw":59,"../internals/global":99}],80:[function(require,module,exports){
'use strict';
var userAgent = require('../internals/engine-user-agent');

module.exports = /web0s(?!.*chrome)/i.test(userAgent);

},{"../internals/engine-user-agent":81}],81:[function(require,module,exports){
'use strict';
module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';

},{}],82:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var userAgent = require('../internals/engine-user-agent');

var process = global.process;
var Deno = global.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  // in old Chrome, versions of V8 isn't V8 = Chrome / 10
  // but their correct versions are not interesting for us
  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}

// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`
// so check `userAgent` even if `.v8` exists, but 0
if (!version && userAgent) {
  match = userAgent.match(/Edge\/(\d+)/);
  if (!match || match[1] >= 74) {
    match = userAgent.match(/Chrome\/(\d+)/);
    if (match) version = +match[1];
  }
}

module.exports = version;

},{"../internals/engine-user-agent":81,"../internals/global":99}],83:[function(require,module,exports){
'use strict';
// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];

},{}],84:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;
var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');
var defineBuiltIn = require('../internals/define-built-in');
var defineGlobalProperty = require('../internals/define-global-property');
var copyConstructorProperties = require('../internals/copy-constructor-properties');
var isForced = require('../internals/is-forced');

/*
  options.target         - name of the target object
  options.global         - target is the global object
  options.stat           - export as static methods of target
  options.proto          - export as prototype methods of target
  options.real           - real prototype method for the `pure` version
  options.forced         - export even if the native feature is available
  options.bind           - bind methods to the target, required for the `pure` version
  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe         - use the simple assignment of property instead of delete + defineProperty
  options.sham           - add a flag to not completely full polyfills
  options.enumerable     - export as enumerable property
  options.dontCallGetSet - prevent calling a getter on target
  options.name           - the .name of the function if it does not match the key
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = global;
  } else if (STATIC) {
    target = global[TARGET] || defineGlobalProperty(TARGET, {});
  } else {
    target = (global[TARGET] || {}).prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.dontCallGetSet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty == typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      createNonEnumerableProperty(sourceProperty, 'sham', true);
    }
    defineBuiltIn(target, key, sourceProperty, options);
  }
};

},{"../internals/copy-constructor-properties":61,"../internals/create-non-enumerable-property":63,"../internals/define-built-in":67,"../internals/define-global-property":68,"../internals/global":99,"../internals/is-forced":113,"../internals/object-get-own-property-descriptor":130}],85:[function(require,module,exports){
'use strict';
module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};

},{}],86:[function(require,module,exports){
'use strict';
// TODO: Remove from `core-js@4` since it's moved to entry points
require('../modules/es.regexp.exec');
var uncurryThis = require('../internals/function-uncurry-this-clause');
var defineBuiltIn = require('../internals/define-built-in');
var regexpExec = require('../internals/regexp-exec');
var fails = require('../internals/fails');
var wellKnownSymbol = require('../internals/well-known-symbol');
var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');

var SPECIES = wellKnownSymbol('species');
var RegExpPrototype = RegExp.prototype;

module.exports = function (KEY, exec, FORCED, SHAM) {
  var SYMBOL = wellKnownSymbol(KEY);

  var DELEGATES_TO_SYMBOL = !fails(function () {
    // String methods call symbol-named RegEp methods
    var O = {};
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) !== 7;
  });

  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
    // Symbol-named RegExp methods call .exec
    var execCalled = false;
    var re = /a/;

    if (KEY === 'split') {
      // We can't use real regex here since it causes deoptimization
      // and serious performance degradation in V8
      // https://github.com/zloirock/core-js/issues/306
      re = {};
      // RegExp[@@split] doesn't call the regex's exec method, but first creates
      // a new one. We need to return the patched regex when creating the new one.
      re.constructor = {};
      re.constructor[SPECIES] = function () { return re; };
      re.flags = '';
      re[SYMBOL] = /./[SYMBOL];
    }

    re.exec = function () {
      execCalled = true;
      return null;
    };

    re[SYMBOL]('');
    return !execCalled;
  });

  if (
    !DELEGATES_TO_SYMBOL ||
    !DELEGATES_TO_EXEC ||
    FORCED
  ) {
    var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);
    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
      var uncurriedNativeMethod = uncurryThis(nativeMethod);
      var $exec = regexp.exec;
      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
          // The native String method already delegates to @@method (this
          // polyfilled function), leasing to infinite recursion.
          // We avoid it by directly calling the native @@method method.
          return { done: true, value: uncurriedNativeRegExpMethod(regexp, str, arg2) };
        }
        return { done: true, value: uncurriedNativeMethod(str, regexp, arg2) };
      }
      return { done: false };
    });

    defineBuiltIn(String.prototype, KEY, methods[0]);
    defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);
  }

  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);
};

},{"../internals/create-non-enumerable-property":63,"../internals/define-built-in":67,"../internals/fails":85,"../internals/function-uncurry-this-clause":93,"../internals/regexp-exec":149,"../internals/well-known-symbol":181,"../modules/es.regexp.exec":192}],87:[function(require,module,exports){
'use strict';
var NATIVE_BIND = require('../internals/function-bind-native');

var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var call = FunctionPrototype.call;

// eslint-disable-next-line es/no-reflect -- safe
module.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {
  return call.apply(apply, arguments);
});

},{"../internals/function-bind-native":89}],88:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this-clause');
var aCallable = require('../internals/a-callable');
var NATIVE_BIND = require('../internals/function-bind-native');

var bind = uncurryThis(uncurryThis.bind);

// optional / simple context binding
module.exports = function (fn, that) {
  aCallable(fn);
  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};

},{"../internals/a-callable":43,"../internals/function-bind-native":89,"../internals/function-uncurry-this-clause":93}],89:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');

module.exports = !fails(function () {
  // eslint-disable-next-line es/no-function-prototype-bind -- safe
  var test = (function () { /* empty */ }).bind();
  // eslint-disable-next-line no-prototype-builtins -- safe
  return typeof test != 'function' || test.hasOwnProperty('prototype');
});

},{"../internals/fails":85}],90:[function(require,module,exports){
'use strict';
var NATIVE_BIND = require('../internals/function-bind-native');

var call = Function.prototype.call;

module.exports = NATIVE_BIND ? call.bind(call) : function () {
  return call.apply(call, arguments);
};

},{"../internals/function-bind-native":89}],91:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var hasOwn = require('../internals/has-own-property');

var FunctionPrototype = Function.prototype;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;

var EXISTS = hasOwn(FunctionPrototype, 'name');
// additional protection from minified / mangled / dropped function names
var PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));

module.exports = {
  EXISTS: EXISTS,
  PROPER: PROPER,
  CONFIGURABLE: CONFIGURABLE
};

},{"../internals/descriptors":69,"../internals/has-own-property":100}],92:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var aCallable = require('../internals/a-callable');

module.exports = function (object, key, method) {
  try {
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
  } catch (error) { /* empty */ }
};

},{"../internals/a-callable":43,"../internals/function-uncurry-this":94}],93:[function(require,module,exports){
'use strict';
var classofRaw = require('../internals/classof-raw');
var uncurryThis = require('../internals/function-uncurry-this');

module.exports = function (fn) {
  // Nashorn bug:
  //   https://github.com/zloirock/core-js/issues/1128
  //   https://github.com/zloirock/core-js/issues/1130
  if (classofRaw(fn) === 'Function') return uncurryThis(fn);
};

},{"../internals/classof-raw":59,"../internals/function-uncurry-this":94}],94:[function(require,module,exports){
'use strict';
var NATIVE_BIND = require('../internals/function-bind-native');

var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);

module.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {
  return function () {
    return call.apply(fn, arguments);
  };
};

},{"../internals/function-bind-native":89}],95:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var isCallable = require('../internals/is-callable');

var aFunction = function (argument) {
  return isCallable(argument) ? argument : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];
};

},{"../internals/global":99,"../internals/is-callable":111}],96:[function(require,module,exports){
'use strict';
var classof = require('../internals/classof');
var getMethod = require('../internals/get-method');
var isNullOrUndefined = require('../internals/is-null-or-undefined');
var Iterators = require('../internals/iterators');
var wellKnownSymbol = require('../internals/well-known-symbol');

var ITERATOR = wellKnownSymbol('iterator');

module.exports = function (it) {
  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)
    || getMethod(it, '@@iterator')
    || Iterators[classof(it)];
};

},{"../internals/classof":60,"../internals/get-method":98,"../internals/is-null-or-undefined":114,"../internals/iterators":121,"../internals/well-known-symbol":181}],97:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var aCallable = require('../internals/a-callable');
var anObject = require('../internals/an-object');
var tryToString = require('../internals/try-to-string');
var getIteratorMethod = require('../internals/get-iterator-method');

var $TypeError = TypeError;

module.exports = function (argument, usingIterator) {
  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));
  throw $TypeError(tryToString(argument) + ' is not iterable');
};

},{"../internals/a-callable":43,"../internals/an-object":48,"../internals/function-call":90,"../internals/get-iterator-method":96,"../internals/try-to-string":175}],98:[function(require,module,exports){
'use strict';
var aCallable = require('../internals/a-callable');
var isNullOrUndefined = require('../internals/is-null-or-undefined');

// `GetMethod` abstract operation
// https://tc39.es/ecma262/#sec-getmethod
module.exports = function (V, P) {
  var func = V[P];
  return isNullOrUndefined(func) ? undefined : aCallable(func);
};

},{"../internals/a-callable":43,"../internals/is-null-or-undefined":114}],99:[function(require,module,exports){
(function (global){(function (){
'use strict';
var check = function (it) {
  return it && it.Math === Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line es/no-global-this -- safe
  check(typeof globalThis == 'object' && globalThis) ||
  check(typeof window == 'object' && window) ||
  // eslint-disable-next-line no-restricted-globals -- safe
  check(typeof self == 'object' && self) ||
  check(typeof global == 'object' && global) ||
  // eslint-disable-next-line no-new-func -- fallback
  (function () { return this; })() || this || Function('return this')();

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],100:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var toObject = require('../internals/to-object');

var hasOwnProperty = uncurryThis({}.hasOwnProperty);

// `HasOwnProperty` abstract operation
// https://tc39.es/ecma262/#sec-hasownproperty
// eslint-disable-next-line es/no-object-hasown -- safe
module.exports = Object.hasOwn || function hasOwn(it, key) {
  return hasOwnProperty(toObject(it), key);
};

},{"../internals/function-uncurry-this":94,"../internals/to-object":170}],101:[function(require,module,exports){
'use strict';
module.exports = {};

},{}],102:[function(require,module,exports){
'use strict';
module.exports = function (a, b) {
  try {
    // eslint-disable-next-line no-console -- safe
    arguments.length === 1 ? console.error(a) : console.error(a, b);
  } catch (error) { /* empty */ }
};

},{}],103:[function(require,module,exports){
'use strict';
var getBuiltIn = require('../internals/get-built-in');

module.exports = getBuiltIn('document', 'documentElement');

},{"../internals/get-built-in":95}],104:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var fails = require('../internals/fails');
var createElement = require('../internals/document-create-element');

// Thanks to IE8 for its funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a !== 7;
});

},{"../internals/descriptors":69,"../internals/document-create-element":71,"../internals/fails":85}],105:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var fails = require('../internals/fails');
var classof = require('../internals/classof-raw');

var $Object = Object;
var split = uncurryThis(''.split);

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins -- safe
  return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) === 'String' ? split(it, '') : $Object(it);
} : $Object;

},{"../internals/classof-raw":59,"../internals/fails":85,"../internals/function-uncurry-this":94}],106:[function(require,module,exports){
'use strict';
var isCallable = require('../internals/is-callable');
var isObject = require('../internals/is-object');
var setPrototypeOf = require('../internals/object-set-prototype-of');

// makes subclassing work correct for wrapped built-ins
module.exports = function ($this, dummy, Wrapper) {
  var NewTarget, NewTargetPrototype;
  if (
    // it can work only with native `setPrototypeOf`
    setPrototypeOf &&
    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this
    isCallable(NewTarget = dummy.constructor) &&
    NewTarget !== Wrapper &&
    isObject(NewTargetPrototype = NewTarget.prototype) &&
    NewTargetPrototype !== Wrapper.prototype
  ) setPrototypeOf($this, NewTargetPrototype);
  return $this;
};

},{"../internals/is-callable":111,"../internals/is-object":115,"../internals/object-set-prototype-of":137}],107:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var isCallable = require('../internals/is-callable');
var store = require('../internals/shared-store');

var functionToString = uncurryThis(Function.toString);

// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper
if (!isCallable(store.inspectSource)) {
  store.inspectSource = function (it) {
    return functionToString(it);
  };
}

module.exports = store.inspectSource;

},{"../internals/function-uncurry-this":94,"../internals/is-callable":111,"../internals/shared-store":159}],108:[function(require,module,exports){
'use strict';
var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');
var global = require('../internals/global');
var isObject = require('../internals/is-object');
var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');
var hasOwn = require('../internals/has-own-property');
var shared = require('../internals/shared-store');
var sharedKey = require('../internals/shared-key');
var hiddenKeys = require('../internals/hidden-keys');

var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = global.TypeError;
var WeakMap = global.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP || shared.state) {
  var store = shared.state || (shared.state = new WeakMap());
  /* eslint-disable no-self-assign -- prototype methods protection */
  store.get = store.get;
  store.has = store.has;
  store.set = store.set;
  /* eslint-enable no-self-assign -- prototype methods protection */
  set = function (it, metadata) {
    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    store.set(it, metadata);
    return metadata;
  };
  get = function (it) {
    return store.get(it) || {};
  };
  has = function (it) {
    return store.has(it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    createNonEnumerableProperty(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return hasOwn(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return hasOwn(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};

},{"../internals/create-non-enumerable-property":63,"../internals/global":99,"../internals/has-own-property":100,"../internals/hidden-keys":101,"../internals/is-object":115,"../internals/shared-key":158,"../internals/shared-store":159,"../internals/weak-map-basic-detection":180}],109:[function(require,module,exports){
'use strict';
var wellKnownSymbol = require('../internals/well-known-symbol');
var Iterators = require('../internals/iterators');

var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;

// check on default Array iterator
module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};

},{"../internals/iterators":121,"../internals/well-known-symbol":181}],110:[function(require,module,exports){
'use strict';
var classof = require('../internals/classof-raw');

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) === 'Array';
};

},{"../internals/classof-raw":59}],111:[function(require,module,exports){
'use strict';
var $documentAll = require('../internals/document-all');

var documentAll = $documentAll.all;

// `IsCallable` abstract operation
// https://tc39.es/ecma262/#sec-iscallable
module.exports = $documentAll.IS_HTMLDDA ? function (argument) {
  return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
  return typeof argument == 'function';
};

},{"../internals/document-all":70}],112:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var fails = require('../internals/fails');
var isCallable = require('../internals/is-callable');
var classof = require('../internals/classof');
var getBuiltIn = require('../internals/get-built-in');
var inspectSource = require('../internals/inspect-source');

var noop = function () { /* empty */ };
var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.exec(noop);

var isConstructorModern = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(noop, empty, argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
  }
  try {
    // we can't check .prototype since constructors produced by .bind haven't it
    // `Function#toString` throws on some built-it function in some legacy engines
    // (for example, `DOMQuad` and similar in FF41-)
    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
  } catch (error) {
    return true;
  }
};

isConstructorLegacy.sham = true;

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;

},{"../internals/classof":60,"../internals/fails":85,"../internals/function-uncurry-this":94,"../internals/get-built-in":95,"../internals/inspect-source":107,"../internals/is-callable":111}],113:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');
var isCallable = require('../internals/is-callable');

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value === POLYFILL ? true
    : value === NATIVE ? false
    : isCallable(detection) ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;

},{"../internals/fails":85,"../internals/is-callable":111}],114:[function(require,module,exports){
'use strict';
// we can't use just `it == null` since of `document.all` special case
// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec
module.exports = function (it) {
  return it === null || it === undefined;
};

},{}],115:[function(require,module,exports){
'use strict';
var isCallable = require('../internals/is-callable');
var $documentAll = require('../internals/document-all');

var documentAll = $documentAll.all;

module.exports = $documentAll.IS_HTMLDDA ? function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;
} : function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it);
};

},{"../internals/document-all":70,"../internals/is-callable":111}],116:[function(require,module,exports){
'use strict';
module.exports = false;

},{}],117:[function(require,module,exports){
'use strict';
var isObject = require('../internals/is-object');
var classof = require('../internals/classof-raw');
var wellKnownSymbol = require('../internals/well-known-symbol');

var MATCH = wellKnownSymbol('match');

// `IsRegExp` abstract operation
// https://tc39.es/ecma262/#sec-isregexp
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');
};

},{"../internals/classof-raw":59,"../internals/is-object":115,"../internals/well-known-symbol":181}],118:[function(require,module,exports){
'use strict';
var getBuiltIn = require('../internals/get-built-in');
var isCallable = require('../internals/is-callable');
var isPrototypeOf = require('../internals/object-is-prototype-of');
var USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');

var $Object = Object;

module.exports = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  var $Symbol = getBuiltIn('Symbol');
  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};

},{"../internals/get-built-in":95,"../internals/is-callable":111,"../internals/object-is-prototype-of":133,"../internals/use-symbol-as-uid":177}],119:[function(require,module,exports){
'use strict';
var bind = require('../internals/function-bind-context');
var call = require('../internals/function-call');
var anObject = require('../internals/an-object');
var tryToString = require('../internals/try-to-string');
var isArrayIteratorMethod = require('../internals/is-array-iterator-method');
var lengthOfArrayLike = require('../internals/length-of-array-like');
var isPrototypeOf = require('../internals/object-is-prototype-of');
var getIterator = require('../internals/get-iterator');
var getIteratorMethod = require('../internals/get-iterator-method');
var iteratorClose = require('../internals/iterator-close');

var $TypeError = TypeError;

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var ResultPrototype = Result.prototype;

module.exports = function (iterable, unboundFunction, options) {
  var that = options && options.that;
  var AS_ENTRIES = !!(options && options.AS_ENTRIES);
  var IS_RECORD = !!(options && options.IS_RECORD);
  var IS_ITERATOR = !!(options && options.IS_ITERATOR);
  var INTERRUPTED = !!(options && options.INTERRUPTED);
  var fn = bind(unboundFunction, that);
  var iterator, iterFn, index, length, result, next, step;

  var stop = function (condition) {
    if (iterator) iteratorClose(iterator, 'normal', condition);
    return new Result(true, condition);
  };

  var callFn = function (value) {
    if (AS_ENTRIES) {
      anObject(value);
      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
    } return INTERRUPTED ? fn(value, stop) : fn(value);
  };

  if (IS_RECORD) {
    iterator = iterable.iterator;
  } else if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod(iterable);
    if (!iterFn) throw $TypeError(tryToString(iterable) + ' is not iterable');
    // optimisation for array iterators
    if (isArrayIteratorMethod(iterFn)) {
      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
        result = callFn(iterable[index]);
        if (result && isPrototypeOf(ResultPrototype, result)) return result;
      } return new Result(false);
    }
    iterator = getIterator(iterable, iterFn);
  }

  next = IS_RECORD ? iterable.next : iterator.next;
  while (!(step = call(next, iterator)).done) {
    try {
      result = callFn(step.value);
    } catch (error) {
      iteratorClose(iterator, 'throw', error);
    }
    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;
  } return new Result(false);
};

},{"../internals/an-object":48,"../internals/function-bind-context":88,"../internals/function-call":90,"../internals/get-iterator":97,"../internals/get-iterator-method":96,"../internals/is-array-iterator-method":109,"../internals/iterator-close":120,"../internals/length-of-array-like":122,"../internals/object-is-prototype-of":133,"../internals/try-to-string":175}],120:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var anObject = require('../internals/an-object');
var getMethod = require('../internals/get-method');

module.exports = function (iterator, kind, value) {
  var innerResult, innerError;
  anObject(iterator);
  try {
    innerResult = getMethod(iterator, 'return');
    if (!innerResult) {
      if (kind === 'throw') throw value;
      return value;
    }
    innerResult = call(innerResult, iterator);
  } catch (error) {
    innerError = true;
    innerResult = error;
  }
  if (kind === 'throw') throw value;
  if (innerError) throw innerResult;
  anObject(innerResult);
  return value;
};

},{"../internals/an-object":48,"../internals/function-call":90,"../internals/get-method":98}],121:[function(require,module,exports){
arguments[4][101][0].apply(exports,arguments)
},{"dup":101}],122:[function(require,module,exports){
'use strict';
var toLength = require('../internals/to-length');

// `LengthOfArrayLike` abstract operation
// https://tc39.es/ecma262/#sec-lengthofarraylike
module.exports = function (obj) {
  return toLength(obj.length);
};

},{"../internals/to-length":169}],123:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var fails = require('../internals/fails');
var isCallable = require('../internals/is-callable');
var hasOwn = require('../internals/has-own-property');
var DESCRIPTORS = require('../internals/descriptors');
var CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;
var inspectSource = require('../internals/inspect-source');
var InternalStateModule = require('../internals/internal-state');

var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var $String = String;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;
var stringSlice = uncurryThis(''.slice);
var replace = uncurryThis(''.replace);
var join = uncurryThis([].join);

var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;
});

var TEMPLATE = String(String).split('String');

var makeBuiltIn = module.exports = function (value, name, options) {
  if (stringSlice($String(name), 0, 7) === 'Symbol(') {
    name = '[' + replace($String(name), /^Symbol\(([^)]*)\)/, '$1') + ']';
  }
  if (options && options.getter) name = 'get ' + name;
  if (options && options.setter) name = 'set ' + name;
  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {
    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });
    else value.name = name;
  }
  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
    defineProperty(value, 'length', { value: options.arity });
  }
  try {
    if (options && hasOwn(options, 'constructor') && options.constructor) {
      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });
    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable
    } else if (value.prototype) value.prototype = undefined;
  } catch (error) { /* empty */ }
  var state = enforceInternalState(value);
  if (!hasOwn(state, 'source')) {
    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');
  } return value;
};

// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
// eslint-disable-next-line no-extend-native -- required
Function.prototype.toString = makeBuiltIn(function toString() {
  return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');

},{"../internals/descriptors":69,"../internals/fails":85,"../internals/function-name":91,"../internals/function-uncurry-this":94,"../internals/has-own-property":100,"../internals/inspect-source":107,"../internals/internal-state":108,"../internals/is-callable":111}],124:[function(require,module,exports){
'use strict';
var ceil = Math.ceil;
var floor = Math.floor;

// `Math.trunc` method
// https://tc39.es/ecma262/#sec-math.trunc
// eslint-disable-next-line es/no-math-trunc -- safe
module.exports = Math.trunc || function trunc(x) {
  var n = +x;
  return (n > 0 ? floor : ceil)(n);
};

},{}],125:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var bind = require('../internals/function-bind-context');
var getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;
var macrotask = require('../internals/task').set;
var Queue = require('../internals/queue');
var IS_IOS = require('../internals/engine-is-ios');
var IS_IOS_PEBBLE = require('../internals/engine-is-ios-pebble');
var IS_WEBOS_WEBKIT = require('../internals/engine-is-webos-webkit');
var IS_NODE = require('../internals/engine-is-node');

var MutationObserver = global.MutationObserver || global.WebKitMutationObserver;
var document = global.document;
var process = global.process;
var Promise = global.Promise;
// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`
var queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');
var microtask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;
var notify, toggle, node, promise, then;

// modern engines have queueMicrotask method
if (!microtask) {
  var queue = new Queue();

  var flush = function () {
    var parent, fn;
    if (IS_NODE && (parent = process.domain)) parent.exit();
    while (fn = queue.get()) try {
      fn();
    } catch (error) {
      if (queue.head) notify();
      throw error;
    }
    if (parent) parent.enter();
  };

  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339
  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898
  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {
    toggle = true;
    node = document.createTextNode('');
    new MutationObserver(flush).observe(node, { characterData: true });
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {
    // Promise.resolve without an argument throws an error in LG WebOS 2
    promise = Promise.resolve(undefined);
    // workaround of WebKit ~ iOS Safari 10.1 bug
    promise.constructor = Promise;
    then = bind(promise.then, promise);
    notify = function () {
      then(flush);
    };
  // Node.js without promises
  } else if (IS_NODE) {
    notify = function () {
      process.nextTick(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessage
  // - onreadystatechange
  // - setTimeout
  } else {
    // `webpack` dev server bug on IE global methods - use bind(fn, global)
    macrotask = bind(macrotask, global);
    notify = function () {
      macrotask(flush);
    };
  }

  microtask = function (fn) {
    if (!queue.head) notify();
    queue.add(fn);
  };
}

module.exports = microtask;

},{"../internals/engine-is-ios":78,"../internals/engine-is-ios-pebble":77,"../internals/engine-is-node":79,"../internals/engine-is-webos-webkit":80,"../internals/function-bind-context":88,"../internals/global":99,"../internals/object-get-own-property-descriptor":130,"../internals/queue":147,"../internals/task":165}],126:[function(require,module,exports){
'use strict';
var aCallable = require('../internals/a-callable');

var $TypeError = TypeError;

var PromiseCapability = function (C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw $TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aCallable(resolve);
  this.reject = aCallable(reject);
};

// `NewPromiseCapability` abstract operation
// https://tc39.es/ecma262/#sec-newpromisecapability
module.exports.f = function (C) {
  return new PromiseCapability(C);
};

},{"../internals/a-callable":43}],127:[function(require,module,exports){
'use strict';
/* global ActiveXObject -- old IE, WSH */
var anObject = require('../internals/an-object');
var definePropertiesModule = require('../internals/object-define-properties');
var enumBugKeys = require('../internals/enum-bug-keys');
var hiddenKeys = require('../internals/hidden-keys');
var html = require('../internals/html');
var documentCreateElement = require('../internals/document-create-element');
var sharedKey = require('../internals/shared-key');

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
// eslint-disable-next-line es/no-object-create -- safe
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};

},{"../internals/an-object":48,"../internals/document-create-element":71,"../internals/enum-bug-keys":83,"../internals/hidden-keys":101,"../internals/html":103,"../internals/object-define-properties":128,"../internals/shared-key":158}],128:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');
var definePropertyModule = require('../internals/object-define-property');
var anObject = require('../internals/an-object');
var toIndexedObject = require('../internals/to-indexed-object');
var objectKeys = require('../internals/object-keys');

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var props = toIndexedObject(Properties);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);
  return O;
};

},{"../internals/an-object":48,"../internals/descriptors":69,"../internals/object-define-property":129,"../internals/object-keys":135,"../internals/to-indexed-object":167,"../internals/v8-prototype-define-bug":178}],129:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var IE8_DOM_DEFINE = require('../internals/ie8-dom-define');
var V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');
var anObject = require('../internals/an-object');
var toPropertyKey = require('../internals/to-property-key');

var $TypeError = TypeError;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var $defineProperty = Object.defineProperty;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';

// `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
    var current = $getOwnPropertyDescriptor(O, P);
    if (current && current[WRITABLE]) {
      O[P] = Attributes.value;
      Attributes = {
        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
        writable: false
      };
    }
  } return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return $defineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};

},{"../internals/an-object":48,"../internals/descriptors":69,"../internals/ie8-dom-define":104,"../internals/to-property-key":172,"../internals/v8-prototype-define-bug":178}],130:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var call = require('../internals/function-call');
var propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');
var createPropertyDescriptor = require('../internals/create-property-descriptor');
var toIndexedObject = require('../internals/to-indexed-object');
var toPropertyKey = require('../internals/to-property-key');
var hasOwn = require('../internals/has-own-property');
var IE8_DOM_DEFINE = require('../internals/ie8-dom-define');

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPropertyKey(P);
  if (IE8_DOM_DEFINE) try {
    return $getOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};

},{"../internals/create-property-descriptor":64,"../internals/descriptors":69,"../internals/function-call":90,"../internals/has-own-property":100,"../internals/ie8-dom-define":104,"../internals/object-property-is-enumerable":136,"../internals/to-indexed-object":167,"../internals/to-property-key":172}],131:[function(require,module,exports){
'use strict';
var internalObjectKeys = require('../internals/object-keys-internal');
var enumBugKeys = require('../internals/enum-bug-keys');

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
// eslint-disable-next-line es/no-object-getownpropertynames -- safe
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};

},{"../internals/enum-bug-keys":83,"../internals/object-keys-internal":134}],132:[function(require,module,exports){
'use strict';
// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe
exports.f = Object.getOwnPropertySymbols;

},{}],133:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');

module.exports = uncurryThis({}.isPrototypeOf);

},{"../internals/function-uncurry-this":94}],134:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var hasOwn = require('../internals/has-own-property');
var toIndexedObject = require('../internals/to-indexed-object');
var indexOf = require('../internals/array-includes').indexOf;
var hiddenKeys = require('../internals/hidden-keys');

var push = uncurryThis([].push);

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (hasOwn(O, key = names[i++])) {
    ~indexOf(result, key) || push(result, key);
  }
  return result;
};

},{"../internals/array-includes":50,"../internals/function-uncurry-this":94,"../internals/has-own-property":100,"../internals/hidden-keys":101,"../internals/to-indexed-object":167}],135:[function(require,module,exports){
'use strict';
var internalObjectKeys = require('../internals/object-keys-internal');
var enumBugKeys = require('../internals/enum-bug-keys');

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};

},{"../internals/enum-bug-keys":83,"../internals/object-keys-internal":134}],136:[function(require,module,exports){
'use strict';
var $propertyIsEnumerable = {}.propertyIsEnumerable;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;

},{}],137:[function(require,module,exports){
'use strict';
/* eslint-disable no-proto -- safe */
var uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');
var anObject = require('../internals/an-object');
var aPossiblePrototype = require('../internals/a-possible-prototype');

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');
    setter(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    anObject(O);
    aPossiblePrototype(proto);
    if (CORRECT_SETTER) setter(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);

},{"../internals/a-possible-prototype":45,"../internals/an-object":48,"../internals/function-uncurry-this-accessor":92}],138:[function(require,module,exports){
'use strict';
var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');
var classof = require('../internals/classof');

// `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
  return '[object ' + classof(this) + ']';
};

},{"../internals/classof":60,"../internals/to-string-tag-support":173}],139:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var isCallable = require('../internals/is-callable');
var isObject = require('../internals/is-object');

var $TypeError = TypeError;

// `OrdinaryToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-ordinarytoprimitive
module.exports = function (input, pref) {
  var fn, val;
  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;
  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  throw $TypeError("Can't convert object to primitive value");
};

},{"../internals/function-call":90,"../internals/is-callable":111,"../internals/is-object":115}],140:[function(require,module,exports){
'use strict';
var getBuiltIn = require('../internals/get-built-in');
var uncurryThis = require('../internals/function-uncurry-this');
var getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');
var getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');
var anObject = require('../internals/an-object');

var concat = uncurryThis([].concat);

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};

},{"../internals/an-object":48,"../internals/function-uncurry-this":94,"../internals/get-built-in":95,"../internals/object-get-own-property-names":131,"../internals/object-get-own-property-symbols":132}],141:[function(require,module,exports){
'use strict';
module.exports = function (exec) {
  try {
    return { error: false, value: exec() };
  } catch (error) {
    return { error: true, value: error };
  }
};

},{}],142:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var NativePromiseConstructor = require('../internals/promise-native-constructor');
var isCallable = require('../internals/is-callable');
var isForced = require('../internals/is-forced');
var inspectSource = require('../internals/inspect-source');
var wellKnownSymbol = require('../internals/well-known-symbol');
var IS_BROWSER = require('../internals/engine-is-browser');
var IS_DENO = require('../internals/engine-is-deno');
var IS_PURE = require('../internals/is-pure');
var V8_VERSION = require('../internals/engine-v8-version');

var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var SPECIES = wellKnownSymbol('species');
var SUBCLASSING = false;
var NATIVE_PROMISE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);

var FORCED_PROMISE_CONSTRUCTOR = isForced('Promise', function () {
  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor);
  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor);
  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565
  // We can't detect it synchronously, so just check versions
  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;
  // We need Promise#{ catch, finally } in the pure version for preventing prototype pollution
  if (IS_PURE && !(NativePromisePrototype['catch'] && NativePromisePrototype['finally'])) return true;
  // We can't use @@species feature detection in V8 since it causes
  // deoptimization and performance degradation
  // https://github.com/zloirock/core-js/issues/679
  if (!V8_VERSION || V8_VERSION < 51 || !/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) {
    // Detect correctness of subclassing with @@species support
    var promise = new NativePromiseConstructor(function (resolve) { resolve(1); });
    var FakePromise = function (exec) {
      exec(function () { /* empty */ }, function () { /* empty */ });
    };
    var constructor = promise.constructor = {};
    constructor[SPECIES] = FakePromise;
    SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;
    if (!SUBCLASSING) return true;
  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test
  } return !GLOBAL_CORE_JS_PROMISE && (IS_BROWSER || IS_DENO) && !NATIVE_PROMISE_REJECTION_EVENT;
});

module.exports = {
  CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR,
  REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT,
  SUBCLASSING: SUBCLASSING
};

},{"../internals/engine-is-browser":75,"../internals/engine-is-deno":76,"../internals/engine-v8-version":82,"../internals/global":99,"../internals/inspect-source":107,"../internals/is-callable":111,"../internals/is-forced":113,"../internals/is-pure":116,"../internals/promise-native-constructor":143,"../internals/well-known-symbol":181}],143:[function(require,module,exports){
'use strict';
var global = require('../internals/global');

module.exports = global.Promise;

},{"../internals/global":99}],144:[function(require,module,exports){
'use strict';
var anObject = require('../internals/an-object');
var isObject = require('../internals/is-object');
var newPromiseCapability = require('../internals/new-promise-capability');

module.exports = function (C, x) {
  anObject(C);
  if (isObject(x) && x.constructor === C) return x;
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};

},{"../internals/an-object":48,"../internals/is-object":115,"../internals/new-promise-capability":126}],145:[function(require,module,exports){
'use strict';
var NativePromiseConstructor = require('../internals/promise-native-constructor');
var checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');
var FORCED_PROMISE_CONSTRUCTOR = require('../internals/promise-constructor-detection').CONSTRUCTOR;

module.exports = FORCED_PROMISE_CONSTRUCTOR || !checkCorrectnessOfIteration(function (iterable) {
  NativePromiseConstructor.all(iterable).then(undefined, function () { /* empty */ });
});

},{"../internals/check-correctness-of-iteration":58,"../internals/promise-constructor-detection":142,"../internals/promise-native-constructor":143}],146:[function(require,module,exports){
'use strict';
var defineProperty = require('../internals/object-define-property').f;

module.exports = function (Target, Source, key) {
  key in Target || defineProperty(Target, key, {
    configurable: true,
    get: function () { return Source[key]; },
    set: function (it) { Source[key] = it; }
  });
};

},{"../internals/object-define-property":129}],147:[function(require,module,exports){
'use strict';
var Queue = function () {
  this.head = null;
  this.tail = null;
};

Queue.prototype = {
  add: function (item) {
    var entry = { item: item, next: null };
    var tail = this.tail;
    if (tail) tail.next = entry;
    else this.head = entry;
    this.tail = entry;
  },
  get: function () {
    var entry = this.head;
    if (entry) {
      var next = this.head = entry.next;
      if (next === null) this.tail = null;
      return entry.item;
    }
  }
};

module.exports = Queue;

},{}],148:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var anObject = require('../internals/an-object');
var isCallable = require('../internals/is-callable');
var classof = require('../internals/classof-raw');
var regexpExec = require('../internals/regexp-exec');

var $TypeError = TypeError;

// `RegExpExec` abstract operation
// https://tc39.es/ecma262/#sec-regexpexec
module.exports = function (R, S) {
  var exec = R.exec;
  if (isCallable(exec)) {
    var result = call(exec, R, S);
    if (result !== null) anObject(result);
    return result;
  }
  if (classof(R) === 'RegExp') return call(regexpExec, R, S);
  throw $TypeError('RegExp#exec called on incompatible receiver');
};

},{"../internals/an-object":48,"../internals/classof-raw":59,"../internals/function-call":90,"../internals/is-callable":111,"../internals/regexp-exec":149}],149:[function(require,module,exports){
'use strict';
/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */
/* eslint-disable regexp/no-useless-quantifier -- testing */
var call = require('../internals/function-call');
var uncurryThis = require('../internals/function-uncurry-this');
var toString = require('../internals/to-string');
var regexpFlags = require('../internals/regexp-flags');
var stickyHelpers = require('../internals/regexp-sticky-helpers');
var shared = require('../internals/shared');
var create = require('../internals/object-create');
var getInternalState = require('../internals/internal-state').get;
var UNSUPPORTED_DOT_ALL = require('../internals/regexp-unsupported-dot-all');
var UNSUPPORTED_NCG = require('../internals/regexp-unsupported-ncg');

var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);

var UPDATES_LAST_INDEX_WRONG = (function () {
  var re1 = /a/;
  var re2 = /b*/g;
  call(nativeExec, re1, 'a');
  call(nativeExec, re2, 'a');
  return re1.lastIndex !== 0 || re2.lastIndex !== 0;
})();

var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;

// nonparticipating capturing group, copied from es5-shim's String#split patch.
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;

var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;

if (PATCH) {
  patchedExec = function exec(string) {
    var re = this;
    var state = getInternalState(re);
    var str = toString(string);
    var raw = state.raw;
    var result, reCopy, lastIndex, match, i, object, group;

    if (raw) {
      raw.lastIndex = re.lastIndex;
      result = call(patchedExec, raw, str);
      re.lastIndex = raw.lastIndex;
      return result;
    }

    var groups = state.groups;
    var sticky = UNSUPPORTED_Y && re.sticky;
    var flags = call(regexpFlags, re);
    var source = re.source;
    var charsAdded = 0;
    var strCopy = str;

    if (sticky) {
      flags = replace(flags, 'y', '');
      if (indexOf(flags, 'g') === -1) {
        flags += 'g';
      }

      strCopy = stringSlice(str, re.lastIndex);
      // Support anchored sticky behavior.
      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
        source = '(?: ' + source + ')';
        strCopy = ' ' + strCopy;
        charsAdded++;
      }
      // ^(? + rx + ) is needed, in combination with some str slicing, to
      // simulate the 'y' flag.
      reCopy = new RegExp('^(?:' + source + ')', flags);
    }

    if (NPCG_INCLUDED) {
      reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
    }
    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;

    match = call(nativeExec, sticky ? reCopy : re, strCopy);

    if (sticky) {
      if (match) {
        match.input = stringSlice(match.input, charsAdded);
        match[0] = stringSlice(match[0], charsAdded);
        match.index = re.lastIndex;
        re.lastIndex += match[0].length;
      } else re.lastIndex = 0;
    } else if (UPDATES_LAST_INDEX_WRONG && match) {
      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
    }
    if (NPCG_INCLUDED && match && match.length > 1) {
      // Fix browsers whose `exec` methods don't consistently return `undefined`
      // for NPCG, like IE8. NOTE: This doesn't work for /(.?)?/
      call(nativeReplace, match[0], reCopy, function () {
        for (i = 1; i < arguments.length - 2; i++) {
          if (arguments[i] === undefined) match[i] = undefined;
        }
      });
    }

    if (match && groups) {
      match.groups = object = create(null);
      for (i = 0; i < groups.length; i++) {
        group = groups[i];
        object[group[0]] = match[group[1]];
      }
    }

    return match;
  };
}

module.exports = patchedExec;

},{"../internals/function-call":90,"../internals/function-uncurry-this":94,"../internals/internal-state":108,"../internals/object-create":127,"../internals/regexp-flags":150,"../internals/regexp-sticky-helpers":152,"../internals/regexp-unsupported-dot-all":153,"../internals/regexp-unsupported-ncg":154,"../internals/shared":160,"../internals/to-string":174}],150:[function(require,module,exports){
'use strict';
var anObject = require('../internals/an-object');

// `RegExp.prototype.flags` getter implementation
// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.hasIndices) result += 'd';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.dotAll) result += 's';
  if (that.unicode) result += 'u';
  if (that.unicodeSets) result += 'v';
  if (that.sticky) result += 'y';
  return result;
};

},{"../internals/an-object":48}],151:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var hasOwn = require('../internals/has-own-property');
var isPrototypeOf = require('../internals/object-is-prototype-of');
var regExpFlags = require('../internals/regexp-flags');

var RegExpPrototype = RegExp.prototype;

module.exports = function (R) {
  var flags = R.flags;
  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)
    ? call(regExpFlags, R) : flags;
};

},{"../internals/function-call":90,"../internals/has-own-property":100,"../internals/object-is-prototype-of":133,"../internals/regexp-flags":150}],152:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');
var global = require('../internals/global');

// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError
var $RegExp = global.RegExp;

var UNSUPPORTED_Y = fails(function () {
  var re = $RegExp('a', 'y');
  re.lastIndex = 2;
  return re.exec('abcd') !== null;
});

// UC Browser bug
// https://github.com/zloirock/core-js/issues/1008
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
  return !$RegExp('a', 'y').sticky;
});

var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687
  var re = $RegExp('^r', 'gy');
  re.lastIndex = 2;
  return re.exec('str') !== null;
});

module.exports = {
  BROKEN_CARET: BROKEN_CARET,
  MISSED_STICKY: MISSED_STICKY,
  UNSUPPORTED_Y: UNSUPPORTED_Y
};

},{"../internals/fails":85,"../internals/global":99}],153:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');
var global = require('../internals/global');

// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError
var $RegExp = global.RegExp;

module.exports = fails(function () {
  var re = $RegExp('.', 's');
  return !(re.dotAll && re.exec('\n') && re.flags === 's');
});

},{"../internals/fails":85,"../internals/global":99}],154:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');
var global = require('../internals/global');

// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError
var $RegExp = global.RegExp;

module.exports = fails(function () {
  var re = $RegExp('(?<a>b)', 'g');
  return re.exec('b').groups.a !== 'b' ||
    'b'.replace(re, '$<a>c') !== 'bc';
});

},{"../internals/fails":85,"../internals/global":99}],155:[function(require,module,exports){
'use strict';
var isNullOrUndefined = require('../internals/is-null-or-undefined');

var $TypeError = TypeError;

// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (isNullOrUndefined(it)) throw $TypeError("Can't call method on " + it);
  return it;
};

},{"../internals/is-null-or-undefined":114}],156:[function(require,module,exports){
'use strict';
var getBuiltIn = require('../internals/get-built-in');
var defineBuiltInAccessor = require('../internals/define-built-in-accessor');
var wellKnownSymbol = require('../internals/well-known-symbol');
var DESCRIPTORS = require('../internals/descriptors');

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineBuiltInAccessor(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};

},{"../internals/define-built-in-accessor":66,"../internals/descriptors":69,"../internals/get-built-in":95,"../internals/well-known-symbol":181}],157:[function(require,module,exports){
'use strict';
var defineProperty = require('../internals/object-define-property').f;
var hasOwn = require('../internals/has-own-property');
var wellKnownSymbol = require('../internals/well-known-symbol');

var TO_STRING_TAG = wellKnownSymbol('toStringTag');

module.exports = function (target, TAG, STATIC) {
  if (target && !STATIC) target = target.prototype;
  if (target && !hasOwn(target, TO_STRING_TAG)) {
    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });
  }
};

},{"../internals/has-own-property":100,"../internals/object-define-property":129,"../internals/well-known-symbol":181}],158:[function(require,module,exports){
'use strict';
var shared = require('../internals/shared');
var uid = require('../internals/uid');

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};

},{"../internals/shared":160,"../internals/uid":176}],159:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var defineGlobalProperty = require('../internals/define-global-property');

var SHARED = '__core-js_shared__';
var store = global[SHARED] || defineGlobalProperty(SHARED, {});

module.exports = store;

},{"../internals/define-global-property":68,"../internals/global":99}],160:[function(require,module,exports){
'use strict';
var IS_PURE = require('../internals/is-pure');
var store = require('../internals/shared-store');

(module.exports = function (key, value) {
  return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: '3.32.2',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: 'Â© 2014-2023 Denis Pushkarev (zloirock.ru)',
  license: 'https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE',
  source: 'https://github.com/zloirock/core-js'
});

},{"../internals/is-pure":116,"../internals/shared-store":159}],161:[function(require,module,exports){
'use strict';
var anObject = require('../internals/an-object');
var aConstructor = require('../internals/a-constructor');
var isNullOrUndefined = require('../internals/is-null-or-undefined');
var wellKnownSymbol = require('../internals/well-known-symbol');

var SPECIES = wellKnownSymbol('species');

// `SpeciesConstructor` abstract operation
// https://tc39.es/ecma262/#sec-speciesconstructor
module.exports = function (O, defaultConstructor) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);
};

},{"../internals/a-constructor":44,"../internals/an-object":48,"../internals/is-null-or-undefined":114,"../internals/well-known-symbol":181}],162:[function(require,module,exports){
'use strict';
var fails = require('../internals/fails');

// check the existence of a method, lowercase
// of a tag and escaping quotes in arguments
module.exports = function (METHOD_NAME) {
  return fails(function () {
    var test = ''[METHOD_NAME]('"');
    return test !== test.toLowerCase() || test.split('"').length > 3;
  });
};

},{"../internals/fails":85}],163:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');
var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');
var toString = require('../internals/to-string');
var requireObjectCoercible = require('../internals/require-object-coercible');

var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);

var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = toString(requireObjectCoercible($this));
    var position = toIntegerOrInfinity(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = charCodeAt(S, position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING
          ? charAt(S, position)
          : first
        : CONVERT_TO_STRING
          ? stringSlice(S, position, position + 2)
          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.es/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};

},{"../internals/function-uncurry-this":94,"../internals/require-object-coercible":155,"../internals/to-integer-or-infinity":168,"../internals/to-string":174}],164:[function(require,module,exports){
'use strict';
/* eslint-disable es/no-symbol -- required for testing */
var V8_VERSION = require('../internals/engine-v8-version');
var fails = require('../internals/fails');
var global = require('../internals/global');

var $String = global.String;

// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  var symbol = Symbol('symbol detection');
  // Chrome 38 Symbol has incorrect toString conversion
  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances
  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,
  // of course, fail.
  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||
    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
    !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});

},{"../internals/engine-v8-version":82,"../internals/fails":85,"../internals/global":99}],165:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var apply = require('../internals/function-apply');
var bind = require('../internals/function-bind-context');
var isCallable = require('../internals/is-callable');
var hasOwn = require('../internals/has-own-property');
var fails = require('../internals/fails');
var html = require('../internals/html');
var arraySlice = require('../internals/array-slice');
var createElement = require('../internals/document-create-element');
var validateArgumentsLength = require('../internals/validate-arguments-length');
var IS_IOS = require('../internals/engine-is-ios');
var IS_NODE = require('../internals/engine-is-node');

var set = global.setImmediate;
var clear = global.clearImmediate;
var process = global.process;
var Dispatch = global.Dispatch;
var Function = global.Function;
var MessageChannel = global.MessageChannel;
var String = global.String;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var $location, defer, channel, port;

fails(function () {
  // Deno throws a ReferenceError on `location` access without `--location` flag
  $location = global.location;
});

var run = function (id) {
  if (hasOwn(queue, id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};

var runner = function (id) {
  return function () {
    run(id);
  };
};

var eventListener = function (event) {
  run(event.data);
};

var globalPostMessageDefer = function (id) {
  // old engines have not location.origin
  global.postMessage(String(id), $location.protocol + '//' + $location.host);
};

// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!set || !clear) {
  set = function setImmediate(handler) {
    validateArgumentsLength(arguments.length, 1);
    var fn = isCallable(handler) ? handler : Function(handler);
    var args = arraySlice(arguments, 1);
    queue[++counter] = function () {
      apply(fn, undefined, args);
    };
    defer(counter);
    return counter;
  };
  clear = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (IS_NODE) {
    defer = function (id) {
      process.nextTick(runner(id));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(runner(id));
    };
  // Browsers with MessageChannel, includes WebWorkers
  // except iOS - https://github.com/zloirock/core-js/issues/624
  } else if (MessageChannel && !IS_IOS) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = eventListener;
    defer = bind(port.postMessage, port);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (
    global.addEventListener &&
    isCallable(global.postMessage) &&
    !global.importScripts &&
    $location && $location.protocol !== 'file:' &&
    !fails(globalPostMessageDefer)
  ) {
    defer = globalPostMessageDefer;
    global.addEventListener('message', eventListener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in createElement('script')) {
    defer = function (id) {
      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(runner(id), 0);
    };
  }
}

module.exports = {
  set: set,
  clear: clear
};

},{"../internals/array-slice":55,"../internals/document-create-element":71,"../internals/engine-is-ios":78,"../internals/engine-is-node":79,"../internals/fails":85,"../internals/function-apply":87,"../internals/function-bind-context":88,"../internals/global":99,"../internals/has-own-property":100,"../internals/html":103,"../internals/is-callable":111,"../internals/validate-arguments-length":179}],166:[function(require,module,exports){
'use strict';
var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
module.exports = function (index, length) {
  var integer = toIntegerOrInfinity(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};

},{"../internals/to-integer-or-infinity":168}],167:[function(require,module,exports){
'use strict';
// toObject with fallback for non-array-like ES3 strings
var IndexedObject = require('../internals/indexed-object');
var requireObjectCoercible = require('../internals/require-object-coercible');

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};

},{"../internals/indexed-object":105,"../internals/require-object-coercible":155}],168:[function(require,module,exports){
'use strict';
var trunc = require('../internals/math-trunc');

// `ToIntegerOrInfinity` abstract operation
// https://tc39.es/ecma262/#sec-tointegerorinfinity
module.exports = function (argument) {
  var number = +argument;
  // eslint-disable-next-line no-self-compare -- NaN check
  return number !== number || number === 0 ? 0 : trunc(number);
};

},{"../internals/math-trunc":124}],169:[function(require,module,exports){
'use strict';
var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength
module.exports = function (argument) {
  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};

},{"../internals/to-integer-or-infinity":168}],170:[function(require,module,exports){
'use strict';
var requireObjectCoercible = require('../internals/require-object-coercible');

var $Object = Object;

// `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject
module.exports = function (argument) {
  return $Object(requireObjectCoercible(argument));
};

},{"../internals/require-object-coercible":155}],171:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var isObject = require('../internals/is-object');
var isSymbol = require('../internals/is-symbol');
var getMethod = require('../internals/get-method');
var ordinaryToPrimitive = require('../internals/ordinary-to-primitive');
var wellKnownSymbol = require('../internals/well-known-symbol');

var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

// `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
module.exports = function (input, pref) {
  if (!isObject(input) || isSymbol(input)) return input;
  var exoticToPrim = getMethod(input, TO_PRIMITIVE);
  var result;
  if (exoticToPrim) {
    if (pref === undefined) pref = 'default';
    result = call(exoticToPrim, input, pref);
    if (!isObject(result) || isSymbol(result)) return result;
    throw $TypeError("Can't convert object to primitive value");
  }
  if (pref === undefined) pref = 'number';
  return ordinaryToPrimitive(input, pref);
};

},{"../internals/function-call":90,"../internals/get-method":98,"../internals/is-object":115,"../internals/is-symbol":118,"../internals/ordinary-to-primitive":139,"../internals/well-known-symbol":181}],172:[function(require,module,exports){
'use strict';
var toPrimitive = require('../internals/to-primitive');
var isSymbol = require('../internals/is-symbol');

// `ToPropertyKey` abstract operation
// https://tc39.es/ecma262/#sec-topropertykey
module.exports = function (argument) {
  var key = toPrimitive(argument, 'string');
  return isSymbol(key) ? key : key + '';
};

},{"../internals/is-symbol":118,"../internals/to-primitive":171}],173:[function(require,module,exports){
'use strict';
var wellKnownSymbol = require('../internals/well-known-symbol');

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';

},{"../internals/well-known-symbol":181}],174:[function(require,module,exports){
'use strict';
var classof = require('../internals/classof');

var $String = String;

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');
  return $String(argument);
};

},{"../internals/classof":60}],175:[function(require,module,exports){
'use strict';
var $String = String;

module.exports = function (argument) {
  try {
    return $String(argument);
  } catch (error) {
    return 'Object';
  }
};

},{}],176:[function(require,module,exports){
'use strict';
var uncurryThis = require('../internals/function-uncurry-this');

var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);

module.exports = function (key) {
  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};

},{"../internals/function-uncurry-this":94}],177:[function(require,module,exports){
'use strict';
/* eslint-disable es/no-symbol -- required for testing */
var NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');

module.exports = NATIVE_SYMBOL
  && !Symbol.sham
  && typeof Symbol.iterator == 'symbol';

},{"../internals/symbol-constructor-detection":164}],178:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var fails = require('../internals/fails');

// V8 ~ Chrome 36-
// https://bugs.chromium.org/p/v8/issues/detail?id=3334
module.exports = DESCRIPTORS && fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(function () { /* empty */ }, 'prototype', {
    value: 42,
    writable: false
  }).prototype !== 42;
});

},{"../internals/descriptors":69,"../internals/fails":85}],179:[function(require,module,exports){
'use strict';
var $TypeError = TypeError;

module.exports = function (passed, required) {
  if (passed < required) throw $TypeError('Not enough arguments');
  return passed;
};

},{}],180:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var isCallable = require('../internals/is-callable');

var WeakMap = global.WeakMap;

module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));

},{"../internals/global":99,"../internals/is-callable":111}],181:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var shared = require('../internals/shared');
var hasOwn = require('../internals/has-own-property');
var uid = require('../internals/uid');
var NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');
var USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');

var Symbol = global.Symbol;
var WellKnownSymbolsStore = shared('wks');
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;

module.exports = function (name) {
  if (!hasOwn(WellKnownSymbolsStore, name)) {
    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)
      ? Symbol[name]
      : createWellKnownSymbol('Symbol.' + name);
  } return WellKnownSymbolsStore[name];
};

},{"../internals/global":99,"../internals/has-own-property":100,"../internals/shared":160,"../internals/symbol-constructor-detection":164,"../internals/uid":176,"../internals/use-symbol-as-uid":177}],182:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var fails = require('../internals/fails');
var isArray = require('../internals/is-array');
var isObject = require('../internals/is-object');
var toObject = require('../internals/to-object');
var lengthOfArrayLike = require('../internals/length-of-array-like');
var doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');
var createProperty = require('../internals/create-property');
var arraySpeciesCreate = require('../internals/array-species-create');
var arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');
var wellKnownSymbol = require('../internals/well-known-symbol');
var V8_VERSION = require('../internals/engine-v8-version');

var IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');

// We can't use this feature detection in V8 since it causes
// deoptimization and serious performance degradation
// https://github.com/zloirock/core-js/issues/679
var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {
  var array = [];
  array[IS_CONCAT_SPREADABLE] = false;
  return array.concat()[0] !== array;
});

var isConcatSpreadable = function (O) {
  if (!isObject(O)) return false;
  var spreadable = O[IS_CONCAT_SPREADABLE];
  return spreadable !== undefined ? !!spreadable : isArray(O);
};

var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !arrayMethodHasSpeciesSupport('concat');

// `Array.prototype.concat` method
// https://tc39.es/ecma262/#sec-array.prototype.concat
// with adding support of @@isConcatSpreadable and @@species
$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  concat: function concat(arg) {
    var O = toObject(this);
    var A = arraySpeciesCreate(O, 0);
    var n = 0;
    var i, k, length, len, E;
    for (i = -1, length = arguments.length; i < length; i++) {
      E = i === -1 ? O : arguments[i];
      if (isConcatSpreadable(E)) {
        len = lengthOfArrayLike(E);
        doesNotExceedSafeInteger(n + len);
        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);
      } else {
        doesNotExceedSafeInteger(n + 1);
        createProperty(A, n++, E);
      }
    }
    A.length = n;
    return A;
  }
});

},{"../internals/array-method-has-species-support":52,"../internals/array-species-create":57,"../internals/create-property":65,"../internals/does-not-exceed-safe-integer":72,"../internals/engine-v8-version":82,"../internals/export":84,"../internals/fails":85,"../internals/is-array":110,"../internals/is-object":115,"../internals/length-of-array-like":122,"../internals/to-object":170,"../internals/well-known-symbol":181}],183:[function(require,module,exports){
'use strict';
var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');
var defineBuiltIn = require('../internals/define-built-in');
var toString = require('../internals/object-to-string');

// `Object.prototype.toString` method
// https://tc39.es/ecma262/#sec-object.prototype.tostring
if (!TO_STRING_TAG_SUPPORT) {
  defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });
}

},{"../internals/define-built-in":67,"../internals/object-to-string":138,"../internals/to-string-tag-support":173}],184:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var call = require('../internals/function-call');
var aCallable = require('../internals/a-callable');
var newPromiseCapabilityModule = require('../internals/new-promise-capability');
var perform = require('../internals/perform');
var iterate = require('../internals/iterate');
var PROMISE_STATICS_INCORRECT_ITERATION = require('../internals/promise-statics-incorrect-iteration');

// `Promise.all` method
// https://tc39.es/ecma262/#sec-promise.all
$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapabilityModule.f(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aCallable(C.resolve);
      var values = [];
      var counter = 0;
      var remaining = 1;
      iterate(iterable, function (promise) {
        var index = counter++;
        var alreadyCalled = false;
        remaining++;
        call($promiseResolve, C, promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});

},{"../internals/a-callable":43,"../internals/export":84,"../internals/function-call":90,"../internals/iterate":119,"../internals/new-promise-capability":126,"../internals/perform":141,"../internals/promise-statics-incorrect-iteration":145}],185:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var IS_PURE = require('../internals/is-pure');
var FORCED_PROMISE_CONSTRUCTOR = require('../internals/promise-constructor-detection').CONSTRUCTOR;
var NativePromiseConstructor = require('../internals/promise-native-constructor');
var getBuiltIn = require('../internals/get-built-in');
var isCallable = require('../internals/is-callable');
var defineBuiltIn = require('../internals/define-built-in');

var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;

// `Promise.prototype.catch` method
// https://tc39.es/ecma262/#sec-promise.prototype.catch
$({ target: 'Promise', proto: true, forced: FORCED_PROMISE_CONSTRUCTOR, real: true }, {
  'catch': function (onRejected) {
    return this.then(undefined, onRejected);
  }
});

// makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`
if (!IS_PURE && isCallable(NativePromiseConstructor)) {
  var method = getBuiltIn('Promise').prototype['catch'];
  if (NativePromisePrototype['catch'] !== method) {
    defineBuiltIn(NativePromisePrototype, 'catch', method, { unsafe: true });
  }
}

},{"../internals/define-built-in":67,"../internals/export":84,"../internals/get-built-in":95,"../internals/is-callable":111,"../internals/is-pure":116,"../internals/promise-constructor-detection":142,"../internals/promise-native-constructor":143}],186:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var IS_PURE = require('../internals/is-pure');
var IS_NODE = require('../internals/engine-is-node');
var global = require('../internals/global');
var call = require('../internals/function-call');
var defineBuiltIn = require('../internals/define-built-in');
var setPrototypeOf = require('../internals/object-set-prototype-of');
var setToStringTag = require('../internals/set-to-string-tag');
var setSpecies = require('../internals/set-species');
var aCallable = require('../internals/a-callable');
var isCallable = require('../internals/is-callable');
var isObject = require('../internals/is-object');
var anInstance = require('../internals/an-instance');
var speciesConstructor = require('../internals/species-constructor');
var task = require('../internals/task').set;
var microtask = require('../internals/microtask');
var hostReportErrors = require('../internals/host-report-errors');
var perform = require('../internals/perform');
var Queue = require('../internals/queue');
var InternalStateModule = require('../internals/internal-state');
var NativePromiseConstructor = require('../internals/promise-native-constructor');
var PromiseConstructorDetection = require('../internals/promise-constructor-detection');
var newPromiseCapabilityModule = require('../internals/new-promise-capability');

var PROMISE = 'Promise';
var FORCED_PROMISE_CONSTRUCTOR = PromiseConstructorDetection.CONSTRUCTOR;
var NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;
var NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;
var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
var setInternalState = InternalStateModule.set;
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var PromiseConstructor = NativePromiseConstructor;
var PromisePrototype = NativePromisePrototype;
var TypeError = global.TypeError;
var document = global.document;
var process = global.process;
var newPromiseCapability = newPromiseCapabilityModule.f;
var newGenericPromiseCapability = newPromiseCapability;

var DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;

var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;

// helpers
var isThenable = function (it) {
  var then;
  return isObject(it) && isCallable(then = it.then) ? then : false;
};

var callReaction = function (reaction, state) {
  var value = state.value;
  var ok = state.state === FULFILLED;
  var handler = ok ? reaction.ok : reaction.fail;
  var resolve = reaction.resolve;
  var reject = reaction.reject;
  var domain = reaction.domain;
  var result, then, exited;
  try {
    if (handler) {
      if (!ok) {
        if (state.rejection === UNHANDLED) onHandleUnhandled(state);
        state.rejection = HANDLED;
      }
      if (handler === true) result = value;
      else {
        if (domain) domain.enter();
        result = handler(value); // can throw
        if (domain) {
          domain.exit();
          exited = true;
        }
      }
      if (result === reaction.promise) {
        reject(TypeError('Promise-chain cycle'));
      } else if (then = isThenable(result)) {
        call(then, result, resolve, reject);
      } else resolve(result);
    } else reject(value);
  } catch (error) {
    if (domain && !exited) domain.exit();
    reject(error);
  }
};

var notify = function (state, isReject) {
  if (state.notified) return;
  state.notified = true;
  microtask(function () {
    var reactions = state.reactions;
    var reaction;
    while (reaction = reactions.get()) {
      callReaction(reaction, state);
    }
    state.notified = false;
    if (isReject && !state.rejection) onUnhandled(state);
  });
};

var dispatchEvent = function (name, promise, reason) {
  var event, handler;
  if (DISPATCH_EVENT) {
    event = document.createEvent('Event');
    event.promise = promise;
    event.reason = reason;
    event.initEvent(name, false, true);
    global.dispatchEvent(event);
  } else event = { promise: promise, reason: reason };
  if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);
  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);
};

var onUnhandled = function (state) {
  call(task, global, function () {
    var promise = state.facade;
    var value = state.value;
    var IS_UNHANDLED = isUnhandled(state);
    var result;
    if (IS_UNHANDLED) {
      result = perform(function () {
        if (IS_NODE) {
          process.emit('unhandledRejection', value, promise);
        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
      if (result.error) throw result.value;
    }
  });
};

var isUnhandled = function (state) {
  return state.rejection !== HANDLED && !state.parent;
};

var onHandleUnhandled = function (state) {
  call(task, global, function () {
    var promise = state.facade;
    if (IS_NODE) {
      process.emit('rejectionHandled', promise);
    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);
  });
};

var bind = function (fn, state, unwrap) {
  return function (value) {
    fn(state, value, unwrap);
  };
};

var internalReject = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  state.value = value;
  state.state = REJECTED;
  notify(state, true);
};

var internalResolve = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  try {
    if (state.facade === value) throw TypeError("Promise can't be resolved itself");
    var then = isThenable(value);
    if (then) {
      microtask(function () {
        var wrapper = { done: false };
        try {
          call(then, value,
            bind(internalResolve, wrapper, state),
            bind(internalReject, wrapper, state)
          );
        } catch (error) {
          internalReject(wrapper, error, state);
        }
      });
    } else {
      state.value = value;
      state.state = FULFILLED;
      notify(state, false);
    }
  } catch (error) {
    internalReject({ done: false }, error, state);
  }
};

// constructor polyfill
if (FORCED_PROMISE_CONSTRUCTOR) {
  // 25.4.3.1 Promise(executor)
  PromiseConstructor = function Promise(executor) {
    anInstance(this, PromisePrototype);
    aCallable(executor);
    call(Internal, this);
    var state = getInternalPromiseState(this);
    try {
      executor(bind(internalResolve, state), bind(internalReject, state));
    } catch (error) {
      internalReject(state, error);
    }
  };

  PromisePrototype = PromiseConstructor.prototype;

  // eslint-disable-next-line no-unused-vars -- required for `.length`
  Internal = function Promise(executor) {
    setInternalState(this, {
      type: PROMISE,
      done: false,
      notified: false,
      parent: false,
      reactions: new Queue(),
      rejection: false,
      state: PENDING,
      value: undefined
    });
  };

  // `Promise.prototype.then` method
  // https://tc39.es/ecma262/#sec-promise.prototype.then
  Internal.prototype = defineBuiltIn(PromisePrototype, 'then', function then(onFulfilled, onRejected) {
    var state = getInternalPromiseState(this);
    var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
    state.parent = true;
    reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
    reaction.fail = isCallable(onRejected) && onRejected;
    reaction.domain = IS_NODE ? process.domain : undefined;
    if (state.state === PENDING) state.reactions.add(reaction);
    else microtask(function () {
      callReaction(reaction, state);
    });
    return reaction.promise;
  });

  OwnPromiseCapability = function () {
    var promise = new Internal();
    var state = getInternalPromiseState(promise);
    this.promise = promise;
    this.resolve = bind(internalResolve, state);
    this.reject = bind(internalReject, state);
  };

  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return C === PromiseConstructor || C === PromiseWrapper
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };

  if (!IS_PURE && isCallable(NativePromiseConstructor) && NativePromisePrototype !== Object.prototype) {
    nativeThen = NativePromisePrototype.then;

    if (!NATIVE_PROMISE_SUBCLASSING) {
      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs
      defineBuiltIn(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {
        var that = this;
        return new PromiseConstructor(function (resolve, reject) {
          call(nativeThen, that, resolve, reject);
        }).then(onFulfilled, onRejected);
      // https://github.com/zloirock/core-js/issues/640
      }, { unsafe: true });
    }

    // make `.constructor === Promise` work for native promise-based APIs
    try {
      delete NativePromisePrototype.constructor;
    } catch (error) { /* empty */ }

    // make `instanceof Promise` work for native promise-based APIs
    if (setPrototypeOf) {
      setPrototypeOf(NativePromisePrototype, PromisePrototype);
    }
  }
}

$({ global: true, constructor: true, wrap: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {
  Promise: PromiseConstructor
});

setToStringTag(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);

},{"../internals/a-callable":43,"../internals/an-instance":47,"../internals/define-built-in":67,"../internals/engine-is-node":79,"../internals/export":84,"../internals/function-call":90,"../internals/global":99,"../internals/host-report-errors":102,"../internals/internal-state":108,"../internals/is-callable":111,"../internals/is-object":115,"../internals/is-pure":116,"../internals/microtask":125,"../internals/new-promise-capability":126,"../internals/object-set-prototype-of":137,"../internals/perform":141,"../internals/promise-constructor-detection":142,"../internals/promise-native-constructor":143,"../internals/queue":147,"../internals/set-species":156,"../internals/set-to-string-tag":157,"../internals/species-constructor":161,"../internals/task":165}],187:[function(require,module,exports){
'use strict';
// TODO: Remove this module from `core-js@4` since it's split to modules listed below
require('../modules/es.promise.constructor');
require('../modules/es.promise.all');
require('../modules/es.promise.catch');
require('../modules/es.promise.race');
require('../modules/es.promise.reject');
require('../modules/es.promise.resolve');

},{"../modules/es.promise.all":184,"../modules/es.promise.catch":185,"../modules/es.promise.constructor":186,"../modules/es.promise.race":188,"../modules/es.promise.reject":189,"../modules/es.promise.resolve":190}],188:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var call = require('../internals/function-call');
var aCallable = require('../internals/a-callable');
var newPromiseCapabilityModule = require('../internals/new-promise-capability');
var perform = require('../internals/perform');
var iterate = require('../internals/iterate');
var PROMISE_STATICS_INCORRECT_ITERATION = require('../internals/promise-statics-incorrect-iteration');

// `Promise.race` method
// https://tc39.es/ecma262/#sec-promise.race
$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapabilityModule.f(C);
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aCallable(C.resolve);
      iterate(iterable, function (promise) {
        call($promiseResolve, C, promise).then(capability.resolve, reject);
      });
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});

},{"../internals/a-callable":43,"../internals/export":84,"../internals/function-call":90,"../internals/iterate":119,"../internals/new-promise-capability":126,"../internals/perform":141,"../internals/promise-statics-incorrect-iteration":145}],189:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var call = require('../internals/function-call');
var newPromiseCapabilityModule = require('../internals/new-promise-capability');
var FORCED_PROMISE_CONSTRUCTOR = require('../internals/promise-constructor-detection').CONSTRUCTOR;

// `Promise.reject` method
// https://tc39.es/ecma262/#sec-promise.reject
$({ target: 'Promise', stat: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {
  reject: function reject(r) {
    var capability = newPromiseCapabilityModule.f(this);
    call(capability.reject, undefined, r);
    return capability.promise;
  }
});

},{"../internals/export":84,"../internals/function-call":90,"../internals/new-promise-capability":126,"../internals/promise-constructor-detection":142}],190:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var getBuiltIn = require('../internals/get-built-in');
var IS_PURE = require('../internals/is-pure');
var NativePromiseConstructor = require('../internals/promise-native-constructor');
var FORCED_PROMISE_CONSTRUCTOR = require('../internals/promise-constructor-detection').CONSTRUCTOR;
var promiseResolve = require('../internals/promise-resolve');

var PromiseConstructorWrapper = getBuiltIn('Promise');
var CHECK_WRAPPER = IS_PURE && !FORCED_PROMISE_CONSTRUCTOR;

// `Promise.resolve` method
// https://tc39.es/ecma262/#sec-promise.resolve
$({ target: 'Promise', stat: true, forced: IS_PURE || FORCED_PROMISE_CONSTRUCTOR }, {
  resolve: function resolve(x) {
    return promiseResolve(CHECK_WRAPPER && this === PromiseConstructorWrapper ? NativePromiseConstructor : this, x);
  }
});

},{"../internals/export":84,"../internals/get-built-in":95,"../internals/is-pure":116,"../internals/promise-constructor-detection":142,"../internals/promise-native-constructor":143,"../internals/promise-resolve":144}],191:[function(require,module,exports){
'use strict';
var DESCRIPTORS = require('../internals/descriptors');
var global = require('../internals/global');
var uncurryThis = require('../internals/function-uncurry-this');
var isForced = require('../internals/is-forced');
var inheritIfRequired = require('../internals/inherit-if-required');
var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');
var getOwnPropertyNames = require('../internals/object-get-own-property-names').f;
var isPrototypeOf = require('../internals/object-is-prototype-of');
var isRegExp = require('../internals/is-regexp');
var toString = require('../internals/to-string');
var getRegExpFlags = require('../internals/regexp-get-flags');
var stickyHelpers = require('../internals/regexp-sticky-helpers');
var proxyAccessor = require('../internals/proxy-accessor');
var defineBuiltIn = require('../internals/define-built-in');
var fails = require('../internals/fails');
var hasOwn = require('../internals/has-own-property');
var enforceInternalState = require('../internals/internal-state').enforce;
var setSpecies = require('../internals/set-species');
var wellKnownSymbol = require('../internals/well-known-symbol');
var UNSUPPORTED_DOT_ALL = require('../internals/regexp-unsupported-dot-all');
var UNSUPPORTED_NCG = require('../internals/regexp-unsupported-ncg');

var MATCH = wellKnownSymbol('match');
var NativeRegExp = global.RegExp;
var RegExpPrototype = NativeRegExp.prototype;
var SyntaxError = global.SyntaxError;
var exec = uncurryThis(RegExpPrototype.exec);
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
// TODO: Use only proper RegExpIdentifierName
var IS_NCG = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/;
var re1 = /a/g;
var re2 = /a/g;

// "new" should create a new object, old webkit bug
var CORRECT_NEW = new NativeRegExp(re1) !== re1;

var MISSED_STICKY = stickyHelpers.MISSED_STICKY;
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;

var BASE_FORCED = DESCRIPTORS &&
  (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {
    re2[MATCH] = false;
    // RegExp constructor can alter flags and IsRegExp works correct with @@match
    return NativeRegExp(re1) !== re1 || NativeRegExp(re2) === re2 || String(NativeRegExp(re1, 'i')) !== '/a/i';
  }));

var handleDotAll = function (string) {
  var length = string.length;
  var index = 0;
  var result = '';
  var brackets = false;
  var chr;
  for (; index <= length; index++) {
    chr = charAt(string, index);
    if (chr === '\\') {
      result += chr + charAt(string, ++index);
      continue;
    }
    if (!brackets && chr === '.') {
      result += '[\\s\\S]';
    } else {
      if (chr === '[') {
        brackets = true;
      } else if (chr === ']') {
        brackets = false;
      } result += chr;
    }
  } return result;
};

var handleNCG = function (string) {
  var length = string.length;
  var index = 0;
  var result = '';
  var named = [];
  var names = {};
  var brackets = false;
  var ncg = false;
  var groupid = 0;
  var groupname = '';
  var chr;
  for (; index <= length; index++) {
    chr = charAt(string, index);
    if (chr === '\\') {
      chr += charAt(string, ++index);
    } else if (chr === ']') {
      brackets = false;
    } else if (!brackets) switch (true) {
      case chr === '[':
        brackets = true;
        break;
      case chr === '(':
        if (exec(IS_NCG, stringSlice(string, index + 1))) {
          index += 2;
          ncg = true;
        }
        result += chr;
        groupid++;
        continue;
      case chr === '>' && ncg:
        if (groupname === '' || hasOwn(names, groupname)) {
          throw new SyntaxError('Invalid capture group name');
        }
        names[groupname] = true;
        named[named.length] = [groupname, groupid];
        ncg = false;
        groupname = '';
        continue;
    }
    if (ncg) groupname += chr;
    else result += chr;
  } return [result, named];
};

// `RegExp` constructor
// https://tc39.es/ecma262/#sec-regexp-constructor
if (isForced('RegExp', BASE_FORCED)) {
  var RegExpWrapper = function RegExp(pattern, flags) {
    var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);
    var patternIsRegExp = isRegExp(pattern);
    var flagsAreUndefined = flags === undefined;
    var groups = [];
    var rawPattern = pattern;
    var rawFlags, dotAll, sticky, handled, result, state;

    if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {
      return pattern;
    }

    if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {
      pattern = pattern.source;
      if (flagsAreUndefined) flags = getRegExpFlags(rawPattern);
    }

    pattern = pattern === undefined ? '' : toString(pattern);
    flags = flags === undefined ? '' : toString(flags);
    rawPattern = pattern;

    if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {
      dotAll = !!flags && stringIndexOf(flags, 's') > -1;
      if (dotAll) flags = replace(flags, /s/g, '');
    }

    rawFlags = flags;

    if (MISSED_STICKY && 'sticky' in re1) {
      sticky = !!flags && stringIndexOf(flags, 'y') > -1;
      if (sticky && UNSUPPORTED_Y) flags = replace(flags, /y/g, '');
    }

    if (UNSUPPORTED_NCG) {
      handled = handleNCG(pattern);
      pattern = handled[0];
      groups = handled[1];
    }

    result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);

    if (dotAll || sticky || groups.length) {
      state = enforceInternalState(result);
      if (dotAll) {
        state.dotAll = true;
        state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);
      }
      if (sticky) state.sticky = true;
      if (groups.length) state.groups = groups;
    }

    if (pattern !== rawPattern) try {
      // fails in old engines, but we have no alternatives for unsupported regex syntax
      createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);
    } catch (error) { /* empty */ }

    return result;
  };

  for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {
    proxyAccessor(RegExpWrapper, NativeRegExp, keys[index++]);
  }

  RegExpPrototype.constructor = RegExpWrapper;
  RegExpWrapper.prototype = RegExpPrototype;
  defineBuiltIn(global, 'RegExp', RegExpWrapper, { constructor: true });
}

// https://tc39.es/ecma262/#sec-get-regexp-@@species
setSpecies('RegExp');

},{"../internals/create-non-enumerable-property":63,"../internals/define-built-in":67,"../internals/descriptors":69,"../internals/fails":85,"../internals/function-uncurry-this":94,"../internals/global":99,"../internals/has-own-property":100,"../internals/inherit-if-required":106,"../internals/internal-state":108,"../internals/is-forced":113,"../internals/is-regexp":117,"../internals/object-get-own-property-names":131,"../internals/object-is-prototype-of":133,"../internals/proxy-accessor":146,"../internals/regexp-get-flags":151,"../internals/regexp-sticky-helpers":152,"../internals/regexp-unsupported-dot-all":153,"../internals/regexp-unsupported-ncg":154,"../internals/set-species":156,"../internals/to-string":174,"../internals/well-known-symbol":181}],192:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var exec = require('../internals/regexp-exec');

// `RegExp.prototype.exec` method
// https://tc39.es/ecma262/#sec-regexp.prototype.exec
$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
  exec: exec
});

},{"../internals/export":84,"../internals/regexp-exec":149}],193:[function(require,module,exports){
'use strict';
var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;
var defineBuiltIn = require('../internals/define-built-in');
var anObject = require('../internals/an-object');
var $toString = require('../internals/to-string');
var fails = require('../internals/fails');
var getRegExpFlags = require('../internals/regexp-get-flags');

var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var nativeToString = RegExpPrototype[TO_STRING];

var NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) !== '/a/b'; });
// FF44- RegExp#toString has a wrong name
var INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name !== TO_STRING;

// `RegExp.prototype.toString` method
// https://tc39.es/ecma262/#sec-regexp.prototype.tostring
if (NOT_GENERIC || INCORRECT_NAME) {
  defineBuiltIn(RegExp.prototype, TO_STRING, function toString() {
    var R = anObject(this);
    var pattern = $toString(R.source);
    var flags = $toString(getRegExpFlags(R));
    return '/' + pattern + '/' + flags;
  }, { unsafe: true });
}

},{"../internals/an-object":48,"../internals/define-built-in":67,"../internals/fails":85,"../internals/function-name":91,"../internals/regexp-get-flags":151,"../internals/to-string":174}],194:[function(require,module,exports){
'use strict';
var call = require('../internals/function-call');
var fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');
var anObject = require('../internals/an-object');
var isNullOrUndefined = require('../internals/is-null-or-undefined');
var toLength = require('../internals/to-length');
var toString = require('../internals/to-string');
var requireObjectCoercible = require('../internals/require-object-coercible');
var getMethod = require('../internals/get-method');
var advanceStringIndex = require('../internals/advance-string-index');
var regExpExec = require('../internals/regexp-exec-abstract');

// @@match logic
fixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {
  return [
    // `String.prototype.match` method
    // https://tc39.es/ecma262/#sec-string.prototype.match
    function match(regexp) {
      var O = requireObjectCoercible(this);
      var matcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, MATCH);
      return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));
    },
    // `RegExp.prototype[@@match]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match
    function (string) {
      var rx = anObject(this);
      var S = toString(string);
      var res = maybeCallNative(nativeMatch, rx, S);

      if (res.done) return res.value;

      if (!rx.global) return regExpExec(rx, S);

      var fullUnicode = rx.unicode;
      rx.lastIndex = 0;
      var A = [];
      var n = 0;
      var result;
      while ((result = regExpExec(rx, S)) !== null) {
        var matchStr = toString(result[0]);
        A[n] = matchStr;
        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
        n++;
      }
      return n === 0 ? null : A;
    }
  ];
});

},{"../internals/advance-string-index":46,"../internals/an-object":48,"../internals/fix-regexp-well-known-symbol-logic":86,"../internals/function-call":90,"../internals/get-method":98,"../internals/is-null-or-undefined":114,"../internals/regexp-exec-abstract":148,"../internals/require-object-coercible":155,"../internals/to-length":169,"../internals/to-string":174}],195:[function(require,module,exports){
'use strict';
var apply = require('../internals/function-apply');
var call = require('../internals/function-call');
var uncurryThis = require('../internals/function-uncurry-this');
var fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');
var anObject = require('../internals/an-object');
var isNullOrUndefined = require('../internals/is-null-or-undefined');
var isRegExp = require('../internals/is-regexp');
var requireObjectCoercible = require('../internals/require-object-coercible');
var speciesConstructor = require('../internals/species-constructor');
var advanceStringIndex = require('../internals/advance-string-index');
var toLength = require('../internals/to-length');
var toString = require('../internals/to-string');
var getMethod = require('../internals/get-method');
var arraySlice = require('../internals/array-slice-simple');
var callRegExpExec = require('../internals/regexp-exec-abstract');
var regexpExec = require('../internals/regexp-exec');
var stickyHelpers = require('../internals/regexp-sticky-helpers');
var fails = require('../internals/fails');

var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
var MAX_UINT32 = 0xFFFFFFFF;
var min = Math.min;
var $push = [].push;
var exec = uncurryThis(/./.exec);
var push = uncurryThis($push);
var stringSlice = uncurryThis(''.slice);

// Chrome 51 has a buggy "split" implementation when RegExp#exec !== nativeExec
// Weex JS has frozen built-in prototypes, so use try / catch wrapper
var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {
  // eslint-disable-next-line regexp/no-empty-group -- required for testing
  var re = /(?:)/;
  var originalExec = re.exec;
  re.exec = function () { return originalExec.apply(this, arguments); };
  var result = 'ab'.split(re);
  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';
});

// @@split logic
fixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {
  var internalSplit;
  if (
    'abbc'.split(/(b)*/)[1] === 'c' ||
    // eslint-disable-next-line regexp/no-empty-group -- required for testing
    'test'.split(/(?:)/, -1).length !== 4 ||
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing
    '.'.split(/()()/).length > 1 ||
    ''.split(/.?/).length
  ) {
    // based on es5-shim implementation, need to rework it
    internalSplit = function (separator, limit) {
      var string = toString(requireObjectCoercible(this));
      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
      if (lim === 0) return [];
      if (separator === undefined) return [string];
      // If `separator` is not a regex, use native split
      if (!isRegExp(separator)) {
        return call(nativeSplit, string, separator, lim);
      }
      var output = [];
      var flags = (separator.ignoreCase ? 'i' : '') +
                  (separator.multiline ? 'm' : '') +
                  (separator.unicode ? 'u' : '') +
                  (separator.sticky ? 'y' : '');
      var lastLastIndex = 0;
      // Make `global` and avoid `lastIndex` issues by working with a copy
      var separatorCopy = new RegExp(separator.source, flags + 'g');
      var match, lastIndex, lastLength;
      while (match = call(regexpExec, separatorCopy, string)) {
        lastIndex = separatorCopy.lastIndex;
        if (lastIndex > lastLastIndex) {
          push(output, stringSlice(string, lastLastIndex, match.index));
          if (match.length > 1 && match.index < string.length) apply($push, output, arraySlice(match, 1));
          lastLength = match[0].length;
          lastLastIndex = lastIndex;
          if (output.length >= lim) break;
        }
        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop
      }
      if (lastLastIndex === string.length) {
        if (lastLength || !exec(separatorCopy, '')) push(output, '');
      } else push(output, stringSlice(string, lastLastIndex));
      return output.length > lim ? arraySlice(output, 0, lim) : output;
    };
  // Chakra, V8
  } else if ('0'.split(undefined, 0).length) {
    internalSplit = function (separator, limit) {
      return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);
    };
  } else internalSplit = nativeSplit;

  return [
    // `String.prototype.split` method
    // https://tc39.es/ecma262/#sec-string.prototype.split
    function split(separator, limit) {
      var O = requireObjectCoercible(this);
      var splitter = isNullOrUndefined(separator) ? undefined : getMethod(separator, SPLIT);
      return splitter
        ? call(splitter, separator, O, limit)
        : call(internalSplit, toString(O), separator, limit);
    },
    // `RegExp.prototype[@@split]` method
    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split
    //
    // NOTE: This cannot be properly polyfilled in engines that don't support
    // the 'y' flag.
    function (string, limit) {
      var rx = anObject(this);
      var S = toString(string);
      var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);

      if (res.done) return res.value;

      var C = speciesConstructor(rx, RegExp);

      var unicodeMatching = rx.unicode;
      var flags = (rx.ignoreCase ? 'i' : '') +
                  (rx.multiline ? 'm' : '') +
                  (rx.unicode ? 'u' : '') +
                  (UNSUPPORTED_Y ? 'g' : 'y');

      // ^(? + rx + ) is needed, in combination with some S slicing, to
      // simulate the 'y' flag.
      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);
      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
      if (lim === 0) return [];
      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];
      var p = 0;
      var q = 0;
      var A = [];
      while (q < S.length) {
        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;
        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);
        var e;
        if (
          z === null ||
          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p
        ) {
          q = advanceStringIndex(S, q, unicodeMatching);
        } else {
          push(A, stringSlice(S, p, q));
          if (A.length === lim) return A;
          for (var i = 1; i <= z.length - 1; i++) {
            push(A, z[i]);
            if (A.length === lim) return A;
          }
          q = p = e;
        }
      }
      push(A, stringSlice(S, p));
      return A;
    }
  ];
}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);

},{"../internals/advance-string-index":46,"../internals/an-object":48,"../internals/array-slice-simple":54,"../internals/fails":85,"../internals/fix-regexp-well-known-symbol-logic":86,"../internals/function-apply":87,"../internals/function-call":90,"../internals/function-uncurry-this":94,"../internals/get-method":98,"../internals/is-null-or-undefined":114,"../internals/is-regexp":117,"../internals/regexp-exec":149,"../internals/regexp-exec-abstract":148,"../internals/regexp-sticky-helpers":152,"../internals/require-object-coercible":155,"../internals/species-constructor":161,"../internals/to-length":169,"../internals/to-string":174}],196:[function(require,module,exports){
'use strict';
var $ = require('../internals/export');
var createHTML = require('../internals/create-html');
var forcedStringHTMLMethod = require('../internals/string-html-forced');

// `String.prototype.sub` method
// https://tc39.es/ecma262/#sec-string.prototype.sub
$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {
  sub: function sub() {
    return createHTML(this, 'sub', '', '');
  }
});

},{"../internals/create-html":62,"../internals/export":84,"../internals/string-html-forced":162}],197:[function(require,module,exports){
'use strict';
var global = require('../internals/global');
var DOMIterables = require('../internals/dom-iterables');
var DOMTokenListPrototype = require('../internals/dom-token-list-prototype');
var forEach = require('../internals/array-for-each');
var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');

var handlePrototype = function (CollectionPrototype) {
  // some Chrome versions have non-configurable methods on DOMTokenList
  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {
    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);
  } catch (error) {
    CollectionPrototype.forEach = forEach;
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  if (DOMIterables[COLLECTION_NAME]) {
    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);
  }
}

handlePrototype(DOMTokenListPrototype);

},{"../internals/array-for-each":49,"../internals/create-non-enumerable-property":63,"../internals/dom-iterables":73,"../internals/dom-token-list-prototype":74,"../internals/global":99}],198:[function(require,module,exports){
/*!
 * pulltorefreshjs v0.1.22
 * (c) Rafael Soto
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global = global || self, global.PullToRefresh = factory());
}(this, function () { 'use strict';

  var _shared = {
    pullStartY: null,
    pullMoveY: null,
    handlers: [],
    styleEl: null,
    events: null,
    dist: 0,
    state: 'pending',
    timeout: null,
    distResisted: 0,
    supportsPassive: false,
    supportsPointerEvents: typeof window !== 'undefined' && !!window.PointerEvent
  };

  try {
    window.addEventListener('test', null, {
      get passive() {
        // eslint-disable-line getter-return
        _shared.supportsPassive = true;
      }

    });
  } catch (e) {// do nothing
  }

  function setupDOM(handler) {
    if (!handler.ptrElement) {
      var ptr = document.createElement('div');

      if (handler.mainElement !== document.body) {
        handler.mainElement.parentNode.insertBefore(ptr, handler.mainElement);
      } else {
        document.body.insertBefore(ptr, document.body.firstChild);
      }

      ptr.classList.add(((handler.classPrefix) + "ptr"));
      ptr.innerHTML = handler.getMarkup().replace(/__PREFIX__/g, handler.classPrefix);
      handler.ptrElement = ptr;

      if (typeof handler.onInit === 'function') {
        handler.onInit(handler);
      } // Add the css styles to the style node, and then
      // insert it into the dom


      if (!_shared.styleEl) {
        _shared.styleEl = document.createElement('style');

        _shared.styleEl.setAttribute('id', 'pull-to-refresh-js-style');

        document.head.appendChild(_shared.styleEl);
      }

      _shared.styleEl.textContent = handler.getStyles().replace(/__PREFIX__/g, handler.classPrefix).replace(/\s+/g, ' ');
    }

    return handler;
  }

  function onReset(handler) {
    if (!handler.ptrElement) { return; }
    handler.ptrElement.classList.remove(((handler.classPrefix) + "refresh"));
    handler.ptrElement.style[handler.cssProp] = '0px';
    setTimeout(function () {
      // remove previous ptr-element from DOM
      if (handler.ptrElement && handler.ptrElement.parentNode) {
        handler.ptrElement.parentNode.removeChild(handler.ptrElement);
        handler.ptrElement = null;
      } // reset state


      _shared.state = 'pending';
    }, handler.refreshTimeout);
  }

  function update(handler) {
    var iconEl = handler.ptrElement.querySelector(("." + (handler.classPrefix) + "icon"));
    var textEl = handler.ptrElement.querySelector(("." + (handler.classPrefix) + "text"));

    if (iconEl) {
      if (_shared.state === 'refreshing') {
        iconEl.innerHTML = handler.iconRefreshing;
      } else {
        iconEl.innerHTML = handler.iconArrow;
      }
    }

    if (textEl) {
      if (_shared.state === 'releasing') {
        textEl.innerHTML = handler.instructionsReleaseToRefresh;
      }

      if (_shared.state === 'pulling' || _shared.state === 'pending') {
        textEl.innerHTML = handler.instructionsPullToRefresh;
      }

      if (_shared.state === 'refreshing') {
        textEl.innerHTML = handler.instructionsRefreshing;
      }
    }
  }

  var _ptr = {
    setupDOM: setupDOM,
    onReset: onReset,
    update: update
  };

  var _timeout;

  var screenY = function screenY(event) {
    if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {
      return event.screenY;
    }

    return event.touches[0].screenY;
  };

  var _setupEvents = (function () {
    var _el;

    function _onTouchStart(e) {
      // here, we must pick a handler first, and then append their html/css on the DOM
      var target = _shared.handlers.filter(function (h) { return h.contains(e.target); })[0];

      _shared.enable = !!target;

      if (target && _shared.state === 'pending') {
        _el = _ptr.setupDOM(target);

        if (target.shouldPullToRefresh()) {
          _shared.pullStartY = screenY(e);
        }

        clearTimeout(_shared.timeout);

        _ptr.update(target);
      }
    }

    function _onTouchMove(e) {
      if (!(_el && _el.ptrElement && _shared.enable)) {
        return;
      }

      if (!_shared.pullStartY) {
        if (_el.shouldPullToRefresh()) {
          _shared.pullStartY = screenY(e);
        }
      } else {
        _shared.pullMoveY = screenY(e);
      }

      if (_shared.state === 'refreshing') {
        if (e.cancelable && _el.shouldPullToRefresh() && _shared.pullStartY < _shared.pullMoveY) {
          e.preventDefault();
        }

        return;
      }

      if (_shared.state === 'pending') {
        _el.ptrElement.classList.add(((_el.classPrefix) + "pull"));

        _shared.state = 'pulling';

        _ptr.update(_el);
      }

      if (_shared.pullStartY && _shared.pullMoveY) {
        _shared.dist = _shared.pullMoveY - _shared.pullStartY;
      }

      _shared.distExtra = _shared.dist - _el.distIgnore;

      if (_shared.distExtra > 0) {
        if (e.cancelable) {
          e.preventDefault();
        }

        _el.ptrElement.style[_el.cssProp] = (_shared.distResisted) + "px";
        _shared.distResisted = _el.resistanceFunction(_shared.distExtra / _el.distThreshold) * Math.min(_el.distMax, _shared.distExtra);

        if (_shared.state === 'pulling' && _shared.distResisted > _el.distThreshold) {
          _el.ptrElement.classList.add(((_el.classPrefix) + "release"));

          _shared.state = 'releasing';

          _ptr.update(_el);
        }

        if (_shared.state === 'releasing' && _shared.distResisted < _el.distThreshold) {
          _el.ptrElement.classList.remove(((_el.classPrefix) + "release"));

          _shared.state = 'pulling';

          _ptr.update(_el);
        }
      }
    }

    function _onTouchEnd() {
      if (!(_el && _el.ptrElement && _shared.enable)) {
        return;
      } // wait 1/2 sec before unmounting...


      clearTimeout(_timeout);
      _timeout = setTimeout(function () {
        if (_el && _el.ptrElement && _shared.state === 'pending') {
          _ptr.onReset(_el);
        }
      }, 500);

      if (_shared.state === 'releasing' && _shared.distResisted > _el.distThreshold) {
        _shared.state = 'refreshing';
        _el.ptrElement.style[_el.cssProp] = (_el.distReload) + "px";

        _el.ptrElement.classList.add(((_el.classPrefix) + "refresh"));

        _shared.timeout = setTimeout(function () {
          var retval = _el.onRefresh(function () { return _ptr.onReset(_el); });

          if (retval && typeof retval.then === 'function') {
            retval.then(function () { return _ptr.onReset(_el); });
          }

          if (!retval && !_el.onRefresh.length) {
            _ptr.onReset(_el);
          }
        }, _el.refreshTimeout);
      } else {
        if (_shared.state === 'refreshing') {
          return;
        }

        _el.ptrElement.style[_el.cssProp] = '0px';
        _shared.state = 'pending';
      }

      _ptr.update(_el);

      _el.ptrElement.classList.remove(((_el.classPrefix) + "release"));

      _el.ptrElement.classList.remove(((_el.classPrefix) + "pull"));

      _shared.pullStartY = _shared.pullMoveY = null;
      _shared.dist = _shared.distResisted = 0;
    }

    function _onScroll() {
      if (_el) {
        _el.mainElement.classList.toggle(((_el.classPrefix) + "top"), _el.shouldPullToRefresh());
      }
    }

    var _passiveSettings = _shared.supportsPassive ? {
      passive: _shared.passive || false
    } : undefined;

    if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {
      window.addEventListener('pointerup', _onTouchEnd);
      window.addEventListener('pointerdown', _onTouchStart);
      window.addEventListener('pointermove', _onTouchMove, _passiveSettings);
    } else {
      window.addEventListener('touchend', _onTouchEnd);
      window.addEventListener('touchstart', _onTouchStart);
      window.addEventListener('touchmove', _onTouchMove, _passiveSettings);
    }

    window.addEventListener('scroll', _onScroll);
    return {
      onTouchEnd: _onTouchEnd,
      onTouchStart: _onTouchStart,
      onTouchMove: _onTouchMove,
      onScroll: _onScroll,

      destroy: function destroy() {
        if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {
          window.removeEventListener('pointerdown', _onTouchStart);
          window.removeEventListener('pointerup', _onTouchEnd);
          window.removeEventListener('pointermove', _onTouchMove, _passiveSettings);
        } else {
          window.removeEventListener('touchstart', _onTouchStart);
          window.removeEventListener('touchend', _onTouchEnd);
          window.removeEventListener('touchmove', _onTouchMove, _passiveSettings);
        }

        window.removeEventListener('scroll', _onScroll);
      }

    };
  });

  var _ptrMarkup = "\n<div class=\"__PREFIX__box\">\n  <div class=\"__PREFIX__content\">\n    <div class=\"__PREFIX__icon\"></div>\n    <div class=\"__PREFIX__text\"></div>\n  </div>\n</div>\n";

  var _ptrStyles = "\n.__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n\n.__PREFIX__pull {\n  transition: none;\n}\n\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n\n/*\nWhen at the top of the page, disable vertical overscroll so passive touch\nlisteners can take over.\n*/\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}\n";

  var _defaults = {
    distThreshold: 60,
    distMax: 80,
    distReload: 50,
    distIgnore: 0,
    mainElement: 'body',
    triggerElement: 'body',
    ptrElement: '.ptr',
    classPrefix: 'ptr--',
    cssProp: 'min-height',
    iconArrow: '&#8675;',
    iconRefreshing: '&hellip;',
    instructionsPullToRefresh: 'Pull down to refresh',
    instructionsReleaseToRefresh: 'Release to refresh',
    instructionsRefreshing: 'Refreshing',
    refreshTimeout: 500,
    getMarkup: function () { return _ptrMarkup; },
    getStyles: function () { return _ptrStyles; },
    onInit: function () {},
    onRefresh: function () { return location.reload(); },
    resistanceFunction: function (t) { return Math.min(1, t / 2.5); },
    shouldPullToRefresh: function () { return !window.scrollY; }
  };

  var _methods = ['mainElement', 'ptrElement', 'triggerElement'];
  var _setupHandler = (function (options) {
    var _handler = {}; // merge options with defaults

    Object.keys(_defaults).forEach(function (key) {
      _handler[key] = options[key] || _defaults[key];
    }); // normalize timeout value, even if it is zero

    _handler.refreshTimeout = typeof options.refreshTimeout === 'number' ? options.refreshTimeout : _defaults.refreshTimeout; // normalize elements

    _methods.forEach(function (method) {
      if (typeof _handler[method] === 'string') {
        _handler[method] = document.querySelector(_handler[method]);
      }
    }); // attach events lazily


    if (!_shared.events) {
      _shared.events = _setupEvents();
    }

    _handler.contains = function (target) {
      return _handler.triggerElement.contains(target);
    };

    _handler.destroy = function () {
      // stop pending any pending callbacks
      clearTimeout(_shared.timeout); // remove handler from shared state

      var offset = _shared.handlers.indexOf(_handler);

      _shared.handlers.splice(offset, 1);
    };

    return _handler;
  });

  var index = {
    setPassiveMode: function setPassiveMode(isPassive) {
      _shared.passive = isPassive;
    },

    setPointerEventsMode: function setPointerEventsMode(isEnabled) {
      _shared.pointerEventsEnabled = isEnabled;
    },

    destroyAll: function destroyAll() {
      if (_shared.events) {
        _shared.events.destroy();

        _shared.events = null;
      }

      _shared.handlers.forEach(function (h) {
        h.destroy();
      });
    },

    init: function init(options) {
      if ( options === void 0 ) options = {};

      var handler = _setupHandler(options);

      _shared.handlers.push(handler);

      return handler;
    },

    // export utils for testing
    _: {
      setupHandler: _setupHandler,
      setupEvents: _setupEvents,
      setupDOM: _ptr.setupDOM,
      onReset: _ptr.onReset,
      update: _ptr.update
    }
  };

  return index;

}));

},{}],199:[function(require,module,exports){
(function (global){(function (){
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (factory((global.WHATWGFetch = {})));
}(this, (function (exports) { 'use strict';

  /* eslint-disable no-prototype-builtins */
  var g =
    (typeof globalThis !== 'undefined' && globalThis) ||
    (typeof self !== 'undefined' && self) ||
    // eslint-disable-next-line no-undef
    (typeof global !== 'undefined' && global) ||
    {};

  var support = {
    searchParams: 'URLSearchParams' in g,
    iterable: 'Symbol' in g && 'iterator' in Symbol,
    blob:
      'FileReader' in g &&
      'Blob' in g &&
      (function() {
        try {
          new Blob();
          return true
        } catch (e) {
          return false
        }
      })(),
    formData: 'FormData' in g,
    arrayBuffer: 'ArrayBuffer' in g
  };

  function isDataView(obj) {
    return obj && DataView.prototype.isPrototypeOf(obj)
  }

  if (support.arrayBuffer) {
    var viewClasses = [
      '[object Int8Array]',
      '[object Uint8Array]',
      '[object Uint8ClampedArray]',
      '[object Int16Array]',
      '[object Uint16Array]',
      '[object Int32Array]',
      '[object Uint32Array]',
      '[object Float32Array]',
      '[object Float64Array]'
    ];

    var isArrayBufferView =
      ArrayBuffer.isView ||
      function(obj) {
        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1
      };
  }

  function normalizeName(name) {
    if (typeof name !== 'string') {
      name = String(name);
    }
    if (/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {
      throw new TypeError('Invalid character in header field name: "' + name + '"')
    }
    return name.toLowerCase()
  }

  function normalizeValue(value) {
    if (typeof value !== 'string') {
      value = String(value);
    }
    return value
  }

  // Build a destructive iterator for the value list
  function iteratorFor(items) {
    var iterator = {
      next: function() {
        var value = items.shift();
        return {done: value === undefined, value: value}
      }
    };

    if (support.iterable) {
      iterator[Symbol.iterator] = function() {
        return iterator
      };
    }

    return iterator
  }

  function Headers(headers) {
    this.map = {};

    if (headers instanceof Headers) {
      headers.forEach(function(value, name) {
        this.append(name, value);
      }, this);
    } else if (Array.isArray(headers)) {
      headers.forEach(function(header) {
        if (header.length != 2) {
          throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)
        }
        this.append(header[0], header[1]);
      }, this);
    } else if (headers) {
      Object.getOwnPropertyNames(headers).forEach(function(name) {
        this.append(name, headers[name]);
      }, this);
    }
  }

  Headers.prototype.append = function(name, value) {
    name = normalizeName(name);
    value = normalizeValue(value);
    var oldValue = this.map[name];
    this.map[name] = oldValue ? oldValue + ', ' + value : value;
  };

  Headers.prototype['delete'] = function(name) {
    delete this.map[normalizeName(name)];
  };

  Headers.prototype.get = function(name) {
    name = normalizeName(name);
    return this.has(name) ? this.map[name] : null
  };

  Headers.prototype.has = function(name) {
    return this.map.hasOwnProperty(normalizeName(name))
  };

  Headers.prototype.set = function(name, value) {
    this.map[normalizeName(name)] = normalizeValue(value);
  };

  Headers.prototype.forEach = function(callback, thisArg) {
    for (var name in this.map) {
      if (this.map.hasOwnProperty(name)) {
        callback.call(thisArg, this.map[name], name, this);
      }
    }
  };

  Headers.prototype.keys = function() {
    var items = [];
    this.forEach(function(value, name) {
      items.push(name);
    });
    return iteratorFor(items)
  };

  Headers.prototype.values = function() {
    var items = [];
    this.forEach(function(value) {
      items.push(value);
    });
    return iteratorFor(items)
  };

  Headers.prototype.entries = function() {
    var items = [];
    this.forEach(function(value, name) {
      items.push([name, value]);
    });
    return iteratorFor(items)
  };

  if (support.iterable) {
    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;
  }

  function consumed(body) {
    if (body._noBody) return
    if (body.bodyUsed) {
      return Promise.reject(new TypeError('Already read'))
    }
    body.bodyUsed = true;
  }

  function fileReaderReady(reader) {
    return new Promise(function(resolve, reject) {
      reader.onload = function() {
        resolve(reader.result);
      };
      reader.onerror = function() {
        reject(reader.error);
      };
    })
  }

  function readBlobAsArrayBuffer(blob) {
    var reader = new FileReader();
    var promise = fileReaderReady(reader);
    reader.readAsArrayBuffer(blob);
    return promise
  }

  function readBlobAsText(blob) {
    var reader = new FileReader();
    var promise = fileReaderReady(reader);
    var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type);
    var encoding = match ? match[1] : 'utf-8';
    reader.readAsText(blob, encoding);
    return promise
  }

  function readArrayBufferAsText(buf) {
    var view = new Uint8Array(buf);
    var chars = new Array(view.length);

    for (var i = 0; i < view.length; i++) {
      chars[i] = String.fromCharCode(view[i]);
    }
    return chars.join('')
  }

  function bufferClone(buf) {
    if (buf.slice) {
      return buf.slice(0)
    } else {
      var view = new Uint8Array(buf.byteLength);
      view.set(new Uint8Array(buf));
      return view.buffer
    }
  }

  function Body() {
    this.bodyUsed = false;

    this._initBody = function(body) {
      /*
        fetch-mock wraps the Response object in an ES6 Proxy to
        provide useful test harness features such as flush. However, on
        ES5 browsers without fetch or Proxy support pollyfills must be used;
        the proxy-pollyfill is unable to proxy an attribute unless it exists
        on the object before the Proxy is created. This change ensures
        Response.bodyUsed exists on the instance, while maintaining the
        semantic of setting Request.bodyUsed in the constructor before
        _initBody is called.
      */
      // eslint-disable-next-line no-self-assign
      this.bodyUsed = this.bodyUsed;
      this._bodyInit = body;
      if (!body) {
        this._noBody = true;
        this._bodyText = '';
      } else if (typeof body === 'string') {
        this._bodyText = body;
      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
        this._bodyBlob = body;
      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
        this._bodyFormData = body;
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this._bodyText = body.toString();
      } else if (support.arrayBuffer && support.blob && isDataView(body)) {
        this._bodyArrayBuffer = bufferClone(body.buffer);
        // IE 10-11 can't handle a DataView body.
        this._bodyInit = new Blob([this._bodyArrayBuffer]);
      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
        this._bodyArrayBuffer = bufferClone(body);
      } else {
        this._bodyText = body = Object.prototype.toString.call(body);
      }

      if (!this.headers.get('content-type')) {
        if (typeof body === 'string') {
          this.headers.set('content-type', 'text/plain;charset=UTF-8');
        } else if (this._bodyBlob && this._bodyBlob.type) {
          this.headers.set('content-type', this._bodyBlob.type);
        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
        }
      }
    };

    if (support.blob) {
      this.blob = function() {
        var rejected = consumed(this);
        if (rejected) {
          return rejected
        }

        if (this._bodyBlob) {
          return Promise.resolve(this._bodyBlob)
        } else if (this._bodyArrayBuffer) {
          return Promise.resolve(new Blob([this._bodyArrayBuffer]))
        } else if (this._bodyFormData) {
          throw new Error('could not read FormData body as blob')
        } else {
          return Promise.resolve(new Blob([this._bodyText]))
        }
      };
    }

    this.arrayBuffer = function() {
      if (this._bodyArrayBuffer) {
        var isConsumed = consumed(this);
        if (isConsumed) {
          return isConsumed
        } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {
          return Promise.resolve(
            this._bodyArrayBuffer.buffer.slice(
              this._bodyArrayBuffer.byteOffset,
              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength
            )
          )
        } else {
          return Promise.resolve(this._bodyArrayBuffer)
        }
      } else if (support.blob) {
        return this.blob().then(readBlobAsArrayBuffer)
      } else {
        throw new Error('could not read as ArrayBuffer')
      }
    };

    this.text = function() {
      var rejected = consumed(this);
      if (rejected) {
        return rejected
      }

      if (this._bodyBlob) {
        return readBlobAsText(this._bodyBlob)
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))
      } else if (this._bodyFormData) {
        throw new Error('could not read FormData body as text')
      } else {
        return Promise.resolve(this._bodyText)
      }
    };

    if (support.formData) {
      this.formData = function() {
        return this.text().then(decode)
      };
    }

    this.json = function() {
      return this.text().then(JSON.parse)
    };

    return this
  }

  // HTTP methods whose capitalization should be normalized
  var methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE'];

  function normalizeMethod(method) {
    var upcased = method.toUpperCase();
    return methods.indexOf(upcased) > -1 ? upcased : method
  }

  function Request(input, options) {
    if (!(this instanceof Request)) {
      throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')
    }

    options = options || {};
    var body = options.body;

    if (input instanceof Request) {
      if (input.bodyUsed) {
        throw new TypeError('Already read')
      }
      this.url = input.url;
      this.credentials = input.credentials;
      if (!options.headers) {
        this.headers = new Headers(input.headers);
      }
      this.method = input.method;
      this.mode = input.mode;
      this.signal = input.signal;
      if (!body && input._bodyInit != null) {
        body = input._bodyInit;
        input.bodyUsed = true;
      }
    } else {
      this.url = String(input);
    }

    this.credentials = options.credentials || this.credentials || 'same-origin';
    if (options.headers || !this.headers) {
      this.headers = new Headers(options.headers);
    }
    this.method = normalizeMethod(options.method || this.method || 'GET');
    this.mode = options.mode || this.mode || null;
    this.signal = options.signal || this.signal || (function () {
      if ('AbortController' in g) {
        var ctrl = new AbortController();
        return ctrl.signal;
      }
    }());
    this.referrer = null;

    if ((this.method === 'GET' || this.method === 'HEAD') && body) {
      throw new TypeError('Body not allowed for GET or HEAD requests')
    }
    this._initBody(body);

    if (this.method === 'GET' || this.method === 'HEAD') {
      if (options.cache === 'no-store' || options.cache === 'no-cache') {
        // Search for a '_' parameter in the query string
        var reParamSearch = /([?&])_=[^&]*/;
        if (reParamSearch.test(this.url)) {
          // If it already exists then set the value with the current time
          this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());
        } else {
          // Otherwise add a new '_' parameter to the end with the current time
          var reQueryString = /\?/;
          this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();
        }
      }
    }
  }

  Request.prototype.clone = function() {
    return new Request(this, {body: this._bodyInit})
  };

  function decode(body) {
    var form = new FormData();
    body
      .trim()
      .split('&')
      .forEach(function(bytes) {
        if (bytes) {
          var split = bytes.split('=');
          var name = split.shift().replace(/\+/g, ' ');
          var value = split.join('=').replace(/\+/g, ' ');
          form.append(decodeURIComponent(name), decodeURIComponent(value));
        }
      });
    return form
  }

  function parseHeaders(rawHeaders) {
    var headers = new Headers();
    // Replace instances of \r\n and \n followed by at least one space or horizontal tab with a space
    // https://tools.ietf.org/html/rfc7230#section-3.2
    var preProcessedHeaders = rawHeaders.replace(/\r?\n[\t ]+/g, ' ');
    // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill
    // https://github.com/github/fetch/issues/748
    // https://github.com/zloirock/core-js/issues/751
    preProcessedHeaders
      .split('\r')
      .map(function(header) {
        return header.indexOf('\n') === 0 ? header.substr(1, header.length) : header
      })
      .forEach(function(line) {
        var parts = line.split(':');
        var key = parts.shift().trim();
        if (key) {
          var value = parts.join(':').trim();
          try {
            headers.append(key, value);
          } catch (error) {
            console.warn('Response ' + error.message);
          }
        }
      });
    return headers
  }

  Body.call(Request.prototype);

  function Response(bodyInit, options) {
    if (!(this instanceof Response)) {
      throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')
    }
    if (!options) {
      options = {};
    }

    this.type = 'default';
    this.status = options.status === undefined ? 200 : options.status;
    if (this.status < 200 || this.status > 599) {
      throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].")
    }
    this.ok = this.status >= 200 && this.status < 300;
    this.statusText = options.statusText === undefined ? '' : '' + options.statusText;
    this.headers = new Headers(options.headers);
    this.url = options.url || '';
    this._initBody(bodyInit);
  }

  Body.call(Response.prototype);

  Response.prototype.clone = function() {
    return new Response(this._bodyInit, {
      status: this.status,
      statusText: this.statusText,
      headers: new Headers(this.headers),
      url: this.url
    })
  };

  Response.error = function() {
    var response = new Response(null, {status: 200, statusText: ''});
    response.status = 0;
    response.type = 'error';
    return response
  };

  var redirectStatuses = [301, 302, 303, 307, 308];

  Response.redirect = function(url, status) {
    if (redirectStatuses.indexOf(status) === -1) {
      throw new RangeError('Invalid status code')
    }

    return new Response(null, {status: status, headers: {location: url}})
  };

  exports.DOMException = g.DOMException;
  try {
    new exports.DOMException();
  } catch (err) {
    exports.DOMException = function(message, name) {
      this.message = message;
      this.name = name;
      var error = Error(message);
      this.stack = error.stack;
    };
    exports.DOMException.prototype = Object.create(Error.prototype);
    exports.DOMException.prototype.constructor = exports.DOMException;
  }

  function fetch(input, init) {
    return new Promise(function(resolve, reject) {
      var request = new Request(input, init);

      if (request.signal && request.signal.aborted) {
        return reject(new exports.DOMException('Aborted', 'AbortError'))
      }

      var xhr = new XMLHttpRequest();

      function abortXhr() {
        xhr.abort();
      }

      xhr.onload = function() {
        var options = {
          statusText: xhr.statusText,
          headers: parseHeaders(xhr.getAllResponseHeaders() || '')
        };
        // This check if specifically for when a user fetches a file locally from the file system
        // Only if the status is out of a normal range
        if (request.url.startsWith('file://') && (xhr.status < 200 || xhr.status > 599)) {
          options.status = 200;
        } else {
          options.status = xhr.status;
        }
        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');
        var body = 'response' in xhr ? xhr.response : xhr.responseText;
        setTimeout(function() {
          resolve(new Response(body, options));
        }, 0);
      };

      xhr.onerror = function() {
        setTimeout(function() {
          reject(new TypeError('Network request failed'));
        }, 0);
      };

      xhr.ontimeout = function() {
        setTimeout(function() {
          reject(new TypeError('Network request timed out'));
        }, 0);
      };

      xhr.onabort = function() {
        setTimeout(function() {
          reject(new exports.DOMException('Aborted', 'AbortError'));
        }, 0);
      };

      function fixUrl(url) {
        try {
          return url === '' && g.location.href ? g.location.href : url
        } catch (e) {
          return url
        }
      }

      xhr.open(request.method, fixUrl(request.url), true);

      if (request.credentials === 'include') {
        xhr.withCredentials = true;
      } else if (request.credentials === 'omit') {
        xhr.withCredentials = false;
      }

      if ('responseType' in xhr) {
        if (support.blob) {
          xhr.responseType = 'blob';
        } else if (
          support.arrayBuffer
        ) {
          xhr.responseType = 'arraybuffer';
        }
      }

      if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers || (g.Headers && init.headers instanceof g.Headers))) {
        var names = [];
        Object.getOwnPropertyNames(init.headers).forEach(function(name) {
          names.push(normalizeName(name));
          xhr.setRequestHeader(name, normalizeValue(init.headers[name]));
        });
        request.headers.forEach(function(value, name) {
          if (names.indexOf(name) === -1) {
            xhr.setRequestHeader(name, value);
          }
        });
      } else {
        request.headers.forEach(function(value, name) {
          xhr.setRequestHeader(name, value);
        });
      }

      if (request.signal) {
        request.signal.addEventListener('abort', abortXhr);

        xhr.onreadystatechange = function() {
          // DONE (success or failure)
          if (xhr.readyState === 4) {
            request.signal.removeEventListener('abort', abortXhr);
          }
        };
      }

      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);
    })
  }

  fetch.polyfill = true;

  if (!g.fetch) {
    g.fetch = fetch;
    g.Headers = Headers;
    g.Request = Request;
    g.Response = Response;
  }

  exports.Headers = Headers;
  exports.Request = Request;
  exports.Response = Response;
  exports.fetch = fetch;

  Object.defineProperty(exports, '__esModule', { value: true });

})));

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},[19])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJfanMvQXBwLmpzIiwiX2pzL0F0dGFjaG1lbnRzLmpzIiwiX2pzL0F1dGguanMiLCJfanMvRGF0ZXMuanMiLCJfanMvRmlsdGVyLmpzIiwiX2pzL0Zvb3Rlci5qcyIsIl9qcy9IZWxwZXIuanMiLCJfanMvSHRtbC5qcyIsIl9qcy9LZXlib2FyZC5qcyIsIl9qcy9Mb2NrLmpzIiwiX2pzL1F1aWNrYm94LmpzIiwiX2pzL1NjaGVkdWxlci5qcyIsIl9qcy9Tb3J0LmpzIiwiX2pzL1N0b3JlLmpzIiwiX2pzL1RleHRhcmVhLmpzIiwiX2pzL1RpY2tldHMuanMiLCJfanMvVXNlci5qcyIsIl9qcy9XZWF0aGVyLmpzIiwiX2pzL3NjcmlwdC5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FycmF5TGlrZVRvQXJyYXkuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhIb2xlcy5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FycmF5V2l0aG91dEhvbGVzLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2l0ZXJhYmxlVG9BcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvbm9uSXRlcmFibGVSZXN0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvbm9uSXRlcmFibGVTcHJlYWQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9yZWdlbmVyYXRvclJ1bnRpbWUuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXkuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b1ByaW1pdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvUHJvcGVydHlLZXkuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9obHAvX2pzL19idWlsZC9zY3JpcHQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL19qcy9fYnVpbGQvX2hlbHBlcnMuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL19qcy9fYnVpbGQvc2NyaXB0LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYS1jYWxsYWJsZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2EtY29uc3RydWN0b3IuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hLXBvc3NpYmxlLXByb3RvdHlwZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FkdmFuY2Utc3RyaW5nLWluZGV4LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYW4taW5zdGFuY2UuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hbi1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1mb3ItZWFjaC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2FycmF5LWluY2x1ZGVzLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktaXRlcmF0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktbWV0aG9kLWhhcy1zcGVjaWVzLXN1cHBvcnQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1tZXRob2QtaXMtc3RyaWN0LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktc2xpY2Utc2ltcGxlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktc2xpY2UuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9hcnJheS1zcGVjaWVzLWNvbnN0cnVjdG9yLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvYXJyYXktc3BlY2llcy1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jaGVjay1jb3JyZWN0bmVzcy1vZi1pdGVyYXRpb24uanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jbGFzc29mLXJhdy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NsYXNzb2YuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jb3B5LWNvbnN0cnVjdG9yLXByb3BlcnRpZXMuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9jcmVhdGUtaHRtbC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NyZWF0ZS1ub24tZW51bWVyYWJsZS1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluLWFjY2Vzc29yLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZGVmaW5lLWdsb2JhbC1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2Rlc2NyaXB0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZG9jdW1lbnQtYWxsLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZG9jdW1lbnQtY3JlYXRlLWVsZW1lbnQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9kb2VzLW5vdC1leGNlZWQtc2FmZS1pbnRlZ2VyLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZG9tLWl0ZXJhYmxlcy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2RvbS10b2tlbi1saXN0LXByb3RvdHlwZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VuZ2luZS1pcy1icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZW5naW5lLWlzLWRlbm8uanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9lbmdpbmUtaXMtaW9zLXBlYmJsZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VuZ2luZS1pcy1pb3MuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9lbmdpbmUtaXMtbm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VuZ2luZS1pcy13ZWJvcy13ZWJraXQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9lbmdpbmUtdXNlci1hZ2VudC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2VuZ2luZS12OC12ZXJzaW9uLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZW51bS1idWcta2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2V4cG9ydC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2ZhaWxzLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZml4LXJlZ2V4cC13ZWxsLWtub3duLXN5bWJvbC1sb2dpYy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2Z1bmN0aW9uLWFwcGx5LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1jb250ZXh0LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi1jYWxsLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZnVuY3Rpb24tbmFtZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcy1hY2Nlc3Nvci5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcy1jbGF1c2UuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtYnVpbHQtaW4uanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9nZXQtaXRlcmF0b3ItbWV0aG9kLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZ2V0LWl0ZXJhdG9yLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvZ2V0LW1ldGhvZC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2dsb2JhbC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9oaWRkZW4ta2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2hvc3QtcmVwb3J0LWVycm9ycy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2h0bWwuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pZTgtZG9tLWRlZmluZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2luZGV4ZWQtb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaW5oZXJpdC1pZi1yZXF1aXJlZC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2luc3BlY3Qtc291cmNlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1hcnJheS1pdGVyYXRvci1tZXRob2QuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1hcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLWNhbGxhYmxlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXMtY29uc3RydWN0b3IuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1mb3JjZWQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1udWxsLW9yLXVuZGVmaW5lZC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL2lzLXB1cmUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1yZWdleHAuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pcy1zeW1ib2wuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9pdGVyYXRlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvaXRlcmF0b3ItY2xvc2UuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9sZW5ndGgtb2YtYXJyYXktbGlrZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL21ha2UtYnVpbHQtaW4uanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9tYXRoLXRydW5jLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvbWljcm90YXNrLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvbmV3LXByb21pc2UtY2FwYWJpbGl0eS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnRpZXMuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktc3ltYm9scy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1pcy1wcm90b3R5cGUtb2YuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qta2V5cy1pbnRlcm5hbC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC1rZXlzLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvb2JqZWN0LXByb3BlcnR5LWlzLWVudW1lcmFibGUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3Qtc2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL29iamVjdC10by1zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vcmRpbmFyeS10by1wcmltaXRpdmUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vd24ta2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3BlcmZvcm0uanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9wcm9taXNlLWNvbnN0cnVjdG9yLWRldGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3Byb21pc2UtbmF0aXZlLWNvbnN0cnVjdG9yLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcHJvbWlzZS1yZXNvbHZlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcHJvbWlzZS1zdGF0aWNzLWluY29ycmVjdC1pdGVyYXRpb24uanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9wcm94eS1hY2Nlc3Nvci5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3F1ZXVlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMtYWJzdHJhY3QuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWdleHAtZXhlYy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC1mbGFncy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC1nZXQtZmxhZ3MuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWdleHAtc3RpY2t5LWhlbHBlcnMuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtZG90LWFsbC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3JlZ2V4cC11bnN1cHBvcnRlZC1uY2cuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zZXQtc3BlY2llcy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NldC10by1zdHJpbmctdGFnLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc2hhcmVkLWtleS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NoYXJlZC1zdG9yZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NoYXJlZC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3NwZWNpZXMtY29uc3RydWN0b3IuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zdHJpbmctaHRtbC1mb3JjZWQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9zdHJpbmctbXVsdGlieXRlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvc3ltYm9sLWNvbnN0cnVjdG9yLWRldGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3Rhc2suanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy90by1hYnNvbHV0ZS1pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdG8taW50ZWdlci1vci1pbmZpbml0eS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLWxlbmd0aC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXByaW1pdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXByb3BlcnR5LWtleS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RvLXN0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3RyeS10by1zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy91aWQuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy91c2Utc3ltYm9sLWFzLXVpZC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3Y4LXByb3RvdHlwZS1kZWZpbmUtYnVnLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9pbnRlcm5hbHMvdmFsaWRhdGUtYXJndW1lbnRzLWxlbmd0aC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3dlYWstbWFwLWJhc2ljLWRldGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuYWxsLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuY2F0Y2guanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5jb25zdHJ1Y3Rvci5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UucmFjZS5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLnJlamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLnJlc29sdmUuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvand0YnV0bGVyL25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIsIm5vZGVfbW9kdWxlcy9qd3RidXRsZXIvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3ViLmpzIiwibm9kZV9tb2R1bGVzL2p3dGJ1dGxlci9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiLCJub2RlX21vZHVsZXMvcHVsbHRvcmVmcmVzaGpzL2Rpc3QvaW5kZXgudW1kLmpzIiwibm9kZV9tb2R1bGVz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QUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQ3RELEdBQUcsR0FDSCxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FDOUIsR0FBRyxHQUNILENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUV4QztNQUNBLElBQUksTUFBTSxLQUFLLEtBQUssRUFBRTtRQUNsQixPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDbEY7TUFDQSxPQUNJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUM3QixHQUFHLEdBQ0gsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQ3BDLEdBQUcsR0FDSCxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsR0FDZixHQUFHLEdBQ0gsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQzlCLEdBQUcsR0FDSCxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FDaEMsR0FBRyxHQUNILENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV4QztFQUFDO0lB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL1NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMveEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOVpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBBdXRoIGZyb20gJy4vQXV0aCc7XG5pbXBvcnQgQXR0YWNobWVudHMgZnJvbSAnLi9BdHRhY2htZW50cyc7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyJztcbmltcG9ydCBGaWx0ZXIgZnJvbSAnLi9GaWx0ZXInO1xuaW1wb3J0IEh0bWwgZnJvbSAnLi9IdG1sJztcbmltcG9ydCBLZXlib2FyZCBmcm9tICcuL0tleWJvYXJkJztcbmltcG9ydCBTY2hlZHVsZXIgZnJvbSAnLi9TY2hlZHVsZXInO1xuaW1wb3J0IFF1aWNrYm94IGZyb20gJy4vUXVpY2tib3gnO1xuaW1wb3J0IFNvcnQgZnJvbSAnLi9Tb3J0JztcbmltcG9ydCBTdG9yZSBmcm9tICcuL1N0b3JlJztcbmltcG9ydCBUZXh0YXJlYSBmcm9tICcuL1RleHRhcmVhJztcbmltcG9ydCBUaWNrZXRzIGZyb20gJy4vVGlja2V0cyc7XG5pbXBvcnQgVXNlciBmcm9tICcuL1VzZXInO1xuaW1wb3J0IFdlYXRoZXIgZnJvbSAnLi9XZWF0aGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIHtcbiAgICBzdGF0aWMgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgU3RvcmUuaW5pdFN0b3JlKCk7XG4gICAgICAgIGF3YWl0IEF1dGgubG9naW4oKTtcbiAgICAgICAgYXdhaXQgVXNlci5mZXRjaFVzZXIoKTtcbiAgICAgICAgSHRtbC5idWlsZEh0bWwoKTtcbiAgICAgICAgYXdhaXQgVGlja2V0cy5mZXRjaEFuZFJlbmRlclRpY2tldHMoKTtcbiAgICAgICAgYXdhaXQgV2VhdGhlci5mZXRjaFdlYXRoZXIoKTtcbiAgICAgICAgVGlja2V0cy5mZXRjaEFuZFJlbmRlclRpY2tldHNJbnRlcnZhbCgpO1xuICAgICAgICBLZXlib2FyZC5pbml0S2V5Ym9hcmROYXZpZ2F0aW9uKCk7XG4gICAgICAgIFNjaGVkdWxlci5pbml0U2NoZWR1bGVyKCk7XG4gICAgICAgIFF1aWNrYm94LmluaXRRdWlja2JveCgpO1xuICAgICAgICBRdWlja2JveC5iaW5kUXVpY2tib3goKTtcbiAgICAgICAgLy8gY3VycmVudGx5IGRpc2FibGVkLCBiZWNhdXNlIHdlIHVzZSBib3RoIGNvbHVtbnMgaW5kZXBlbmRlbnRseVxuICAgICAgICAvL1RpY2tldHMuYmluZEF1dG9UaW1lKCk7XG4gICAgICAgIFRpY2tldHMuYmluZENoYW5nZVRyYWNraW5nKCk7XG4gICAgICAgIFRpY2tldHMuYmluZFZhbGlkYXRpb24oKTtcbiAgICAgICAgQXR0YWNobWVudHMuYmluZFVwbG9hZCgpO1xuICAgICAgICBBdHRhY2htZW50cy5iaW5kRG93bmxvYWQoKTtcbiAgICAgICAgQXR0YWNobWVudHMuYmluZERlbGV0ZUF0dGFjaG1lbnQoKTtcbiAgICAgICAgVGlja2V0cy5iaW5kRGVsZXRlKCk7XG4gICAgICAgIFRpY2tldHMuYmluZFNhdmUoKTtcbiAgICAgICAgRm9vdGVyLmJpbmRTYXZlKCk7XG4gICAgICAgIEZvb3Rlci5iaW5kQ3JlYXRlKCk7XG4gICAgICAgIEZvb3Rlci5iaW5kTG9nb3V0KCk7XG4gICAgICAgIEZvb3Rlci5saW5rQXBpS2V5KCk7XG4gICAgICAgIEZvb3Rlci5pbml0U3RhdHVzKCk7XG4gICAgICAgIEtleWJvYXJkLmJpbmRSZWZyZXNoKCk7XG4gICAgICAgIFRpY2tldHMuYmluZENyZWF0ZSgpO1xuICAgICAgICBTY2hlZHVsZXIuYmluZFNjaGVkdWxlcigpO1xuICAgICAgICBTb3J0LmluaXRTb3J0KCk7XG4gICAgICAgIEZpbHRlci5pbml0RmlsdGVyKCk7XG4gICAgICAgIFNjaGVkdWxlci51cGRhdGVDb2xvcnMoKTtcbiAgICAgICAgVGlja2V0cy51cGRhdGVTdW0oKTtcbiAgICAgICAgVGV4dGFyZWEudGV4dGFyZWFBdXRvSGVpZ2h0KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEhlbHBlciBmcm9tICcuL0hlbHBlcic7XG5pbXBvcnQgSHRtbCBmcm9tICcuL0h0bWwnO1xuaW1wb3J0IExvY2sgZnJvbSAnLi9Mb2NrJztcbmltcG9ydCBTdG9yZSBmcm9tICcuL1N0b3JlJztcbmltcG9ydCBUaWNrZXRzIGZyb20gJy4vVGlja2V0cyc7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyJztcbmltcG9ydCBEYXRlcyBmcm9tICcuL0RhdGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXR0YWNobWVudHMge1xuICAgIHN0YXRpYyBiaW5kRG93bmxvYWQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19hdHRhY2htZW50LWRvd25sb2FkJykpIHtcbiAgICAgICAgICAgICAgICBBdHRhY2htZW50cy5zdGFydERvd25sb2FkKGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19hdHRhY2htZW50JykuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHN0YXJ0RG93bmxvYWQoYXR0YWNobWVudF9pZCkge1xuICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICBTdG9yZS5kYXRhLmFwaVxuICAgICAgICAgICAgLmZldGNoKCdfYXBpL2F0dGFjaG1lbnRzLycgKyBhdHRhY2htZW50X2lkLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IGJhc2U2NCA9IHJlc3BvbnNlLmRhdGEuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSByZXNwb25zZS5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGhscC5iYXNlNjR0b3VybChiYXNlNjQpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6bm9uZScpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgnaHJlZicsIHVybCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgICAgICAgICBhLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGJpbmRVcGxvYWQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fZW50cnkgaW5wdXRbdHlwZT1cImZpbGVcIl0nKSkge1xuICAgICAgICAgICAgICAgIEF0dGFjaG1lbnRzLnN0YXJ0VXBsb2Fkc0FuZEJ1aWxkSHRtbChcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnRpY2tldHNfX2VudHJ5JykuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyksXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmZpbGVzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHN0YXJ0VXBsb2Fkc0FuZEJ1aWxkSHRtbCh0aWNrZXRfaWQsIGZpbGVzKSB7XG4gICAgICAgIEF0dGFjaG1lbnRzLnN0YXJ0VXBsb2Fkcyh0aWNrZXRfaWQsIGZpbGVzKVxuICAgICAgICAgICAgLnRoZW4oKGF0dGFjaG1lbnRzKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgJy50aWNrZXRzIC50aWNrZXRzX19lbnRyeVtkYXRhLWlkPVwiJyArIHRpY2tldF9pZCArICdcIl0gaW5wdXRbdHlwZT1cImZpbGVcIl0nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBlbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzLmZvckVhY2goKGF0dGFjaG1lbnRzX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlbC5jbG9zZXN0KCcudGlja2V0c19fZW50cnknKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX19hdHRhY2htZW50cycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBIdG1sLmNyZWF0ZUh0bWxEb3dubG9hZExpbmUoYXR0YWNobWVudHNfX3ZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIHN0YXJ0VXBsb2Fkcyh0aWNrZXRfaWQsIGZpbGVzKSB7XG4gICAgICAgIGxldCBhdHRhY2htZW50cyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGZpbGVzX192YWx1ZSBvZiBBcnJheS5mcm9tKGZpbGVzKSkge1xuICAgICAgICAgICAgTG9jay5sb2NrVGlja2V0KHRpY2tldF9pZCk7XG4gICAgICAgICAgICBsZXQgYXR0YWNobWVudCA9IGF3YWl0IEF0dGFjaG1lbnRzLnN0YXJ0VXBsb2FkKHRpY2tldF9pZCwgZmlsZXNfX3ZhbHVlKTtcbiAgICAgICAgICAgIExvY2sudW5sb2NrVGlja2V0KHRpY2tldF9pZCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmZXRjaCBlbnRpcmUgZG9jIHRvIGdldCBuZXdlc3QgYXR0YWNobWVudCBvYmplY3RcbiAgICAgICAgYXdhaXQgVGlja2V0cy51cGRhdGVMb2NhbFRpY2tldCh0aWNrZXRfaWQpO1xuXG4gICAgICAgIHJldHVybiBhdHRhY2htZW50cztcbiAgICB9XG5cbiAgICBzdGF0aWMgc3RhcnRVcGxvYWQodGlja2V0X2lkLCBmaWxlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPiA1KSB7XG4gICAgICAgICAgICAgICAgRm9vdGVyLnVwZGF0ZVN0YXR1cygnc2l6ZSBndCA1IG1iIScsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSGVscGVyLmZpbGVUb0Jhc2U2NChmaWxlKS50aGVuKChiYXNlNjQpID0+IHtcbiAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYXBpXG4gICAgICAgICAgICAgICAgICAgIC5mZXRjaCgnX2FwaS9hdHRhY2htZW50cycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBiYXNlNjQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0X2lkOiB0aWNrZXRfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlZF9hdCA9IERhdGVzLnRpbWUoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgVGlja2V0cy5zZXRUaWNrZXREYXRhKHRpY2tldF9pZCwgJ3VwZGF0ZWRfYXQnLCB1cGRhdGVkX2F0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmFwaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mZXRjaCgnX2FwaS90aWNrZXRzLycgKyB0aWNrZXRfaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogdXBkYXRlZF9hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZERlbGV0ZUF0dGFjaG1lbnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19hdHRhY2htZW50LWRlbGV0ZScpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpY2tldF9pZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19lbnRyeScpLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgICAgICAgICAgICAgIGlmIChMb2NrLnRpY2tldElzTG9ja2VkKHRpY2tldF9pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYXR0YWNobWVudF9pZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19hdHRhY2htZW50JykuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG4gICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmFwaVxuICAgICAgICAgICAgICAgICAgICAuZmV0Y2goJ19hcGkvYXR0YWNobWVudHMvJyArIGF0dGFjaG1lbnRfaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRfYXQgPSBEYXRlcy50aW1lKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRpY2tldHMuc2V0VGlja2V0RGF0YSh0aWNrZXRfaWQsICd1cGRhdGVkX2F0JywgdXBkYXRlZF9hdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmV0Y2goJ19hcGkvdGlja2V0cy8nICsgdGlja2V0X2lkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IHVwZGF0ZWRfYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnRpY2tldHNfX2F0dGFjaG1lbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RvcmUgZnJvbSAnLi9TdG9yZSc7XG5pbXBvcnQgand0YnV0bGVyIGZyb20gJ2p3dGJ1dGxlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dGgge1xuICAgIHN0YXRpYyBsb2dpbigpIHtcbiAgICAgICAgU3RvcmUuZGF0YS5hcGkgPSBuZXcgand0YnV0bGVyKHtcbiAgICAgICAgICAgIGF1dGhfc2VydmVyOiAnX2F1dGgnLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFN0b3JlLmRhdGEuYXBpLmxvZ2luKCk7XG4gICAgfVxuICAgIHN0YXRpYyBsb2dvdXQoKSB7XG4gICAgICAgIHJldHVybiBTdG9yZS5kYXRhLmFwaS5sb2dvdXQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RvcmUgZnJvbSAnLi9TdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGVzIHtcbiAgICBzdGF0aWMgZ2V0Q3VycmVudERhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRBY3RpdmVEYXRlKCkge1xuICAgICAgICByZXR1cm4gU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGF5T2ZBY3RpdmVXZWVrKHNoaWZ0KSB7XG4gICAgICAgIHJldHVybiBEYXRlcy5nZXREYXlPZldlZWsoc2hpZnQsIFN0b3JlLmRhdGEuc2Vzc2lvbi5hY3RpdmVEYXkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXREYXlPZkN1cnJlbnRXZWVrKHNoaWZ0KSB7XG4gICAgICAgIHJldHVybiBEYXRlcy5nZXREYXlPZldlZWsoc2hpZnQsIHRoaXMuZ2V0Q3VycmVudERhdGUoKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldERheU9mV2VlayhzaGlmdCwgZGF0ZSkge1xuICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKGRhdGUpLFxuICAgICAgICAgICAgZGF5ID0gZC5nZXREYXkoKSxcbiAgICAgICAgICAgIGRpZmYgPSBkLmdldERhdGUoKSAtIGRheSArIChkYXkgPT0gMCA/IC02IDogMSkgKyAoc2hpZnQgLSAxKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuc2V0RGF0ZShkaWZmKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlRGF0ZVN0cmluZyhzdHJpbmcsIHZpZXcpIHtcbiAgICAgICAgaWYgKCFbJ3RpY2tldHMnLCAnc2NoZWR1bGVyJywgJ3RvZGF5JywgJ2FsbCddLmluY2x1ZGVzKHZpZXcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RyaW5nID09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmV0ID0gW10sXG4gICAgICAgICAgICBlcnJvciA9IGZhbHNlLFxuICAgICAgICAgICAgZDtcblxuICAgICAgICBzdHJpbmcuc3BsaXQoJ1xcbicpLmZvckVhY2goKHN0cmluZ19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIC8vIDAxLjAxLjE4XG4gICAgICAgICAgICAvLyAwMS4wMS4xOCAwOTowMC0xMDowMFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoJ15bMC05XVswLTldLlswLTldWzAtOV0uWzEtMl1bMC05XSggWzAtOV1bMC05XTpbMC05XVswLTldLVswLTldWzAtOV06WzAtOV1bMC05XSk/JCcpLnRlc3QoXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ19fdmFsdWVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkID0gbmV3IERhdGUoXG4gICAgICAgICAgICAgICAgICAgICcyMCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoNiwgOCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKDMsIDUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICctJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygwLCAyKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICh2aWV3ID09PSAndGlja2V0cycgJiYgRGF0ZXMuZGF0ZUlzQWN0aXZlRGF5KGQpKSB8fFxuICAgICAgICAgICAgICAgICAgICAodmlldyA9PT0gJ3NjaGVkdWxlcicgJiYgRGF0ZXMuZGF0ZUlzSW5BY3RpdmVXZWVrKGQpKSB8fFxuICAgICAgICAgICAgICAgICAgICAodmlldyA9PT0gJ3RvZGF5JyAmJiBEYXRlcy5kYXRlSXNUb2RheShkKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgdmlldyA9PT0gJ2FsbCdcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJlZ2luID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdfX3ZhbHVlLmxlbmd0aCA+IDhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZyg5LCAxMSkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygxMiwgMTQpKSAvIDYwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nX192YWx1ZS5sZW5ndGggPiA4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoMTUsIDE3KSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKDE4LCAyMCkpIC8gNjBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSAyNDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkLnNldEhvdXJzKE1hdGguZmxvb3IoYmVnaW4gPT09IG51bGwgPyAwIDogYmVnaW4pKTtcbiAgICAgICAgICAgICAgICAgICAgZC5zZXRNaW51dGVzKCgoYmVnaW4gPT09IG51bGwgPyAwIDogYmVnaW4pICUgMSkgKiA2MCk7XG4gICAgICAgICAgICAgICAgICAgIGQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgICAgICAgICAgZC5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6ICgoZC5nZXREYXkoKSArIDYpICUgNykgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbmQgLSBiZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXNfbGVmdDogdGhpcy5kYXRlRGlmZkluTWludXRlcyhkLCBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNTyBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuICAgICAgICAgICAgLy8gTU8gMTA6MDAtMTE6MDAgWy0wNS4xMC4xOCAtMTIuMTAuMTggPjAxLjAxLjE4IDwwMS4wMS4xOV1cbiAgICAgICAgICAgIC8vIE1PIzEgMTA6MDAtMTE6MDAgWy0wNS4xMC4xOCAtMTIuMTAuMTggPjAxLjAxLjE4IDwwMS4wMS4xOV1cbiAgICAgICAgICAgIC8vIE1PIzEyIDEwOjAwLTExOjAwIFstMDUuMTAuMTggLTEyLjEwLjE4ID4wMS4wMS4xOCA8MDEuMDEuMTldXG4gICAgICAgICAgICAvLyBNT34xIDEwOjAwLTExOjAwIFstMDUuMTAuMTggLTEyLjEwLjE4ID4wMS4wMS4xOCA8MDEuMDEuMTldXG4gICAgICAgICAgICAvLyBNT34xMiAxMDowMC0xMTowMCBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuICAgICAgICAgICAgLy8gTU8lMiAxMDowMC0xMTowMCBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgbmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgJ14oTU98REl8TUl8RE98RlJ8U0F8U08pKCgjfH58JSlbMS05XVswLTldPyk/KCBbMC05XVswLTldOlswLTldWzAtOV0tWzAtOV1bMC05XTpbMC05XVswLTldKT8oICgtfD58PClbMC05XVswLTldLlswLTldWzAtOV0uWzEtMl1bMC05XSkqJCdcbiAgICAgICAgICAgICAgICApLnRlc3Qoc3RyaW5nX192YWx1ZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3ID09PSAndG9kYXknKSB7XG4gICAgICAgICAgICAgICAgICAgIGQgPSBEYXRlcy5nZXREYXlPZkN1cnJlbnRXZWVrKERhdGVzLmdldERheUZyb21TdHJpbmcoc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoMCwgMikpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkID0gRGF0ZXMuZ2V0RGF5T2ZBY3RpdmVXZWVrKERhdGVzLmdldERheUZyb21TdHJpbmcoc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoMCwgMikpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmlldyAhPT0gJ2FsbCcgJiYgRGF0ZXMuZGF0ZUlzRXhjbHVkZWQoZCwgc3RyaW5nX192YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh2aWV3ICE9PSAnYWxsJyAmJiBzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygyLCAzKSA9PT0gJyMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBudW0gPSBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygzLCA1KS50cmltKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnRoV2Vla2RheU9mTW9udGggPSB0aGlzLm50aFdlZWtkYXlPZk1vbnRoKGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtICUgNCAhPT0gbnRoV2Vla2RheU9mTW9udGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGQuZ2V0TW9udGgoKSArIDEpICUgKE1hdGguZmxvb3IoKG51bSAtIDEpIC8gNCkgKyAxKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHZpZXcgIT09ICdhbGwnICYmIHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKDIsIDMpID09PSAnficpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG51bSA9IHBhcnNlSW50KHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKDMsIDUpLnRyaW0oKSksXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWVrTnVtYmVyID0gdGhpcy53ZWVrTnVtYmVyKGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtICE9IHdlZWtOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh2aWV3ICE9PSAnYWxsJyAmJiBzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygyLCAzKSA9PT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBudW0gPSBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygzLCA1KS50cmltKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2Vla051bWJlciA9IHRoaXMud2Vla051bWJlcihkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gc3RyaW5nX192YWx1ZS5tYXRjaCgvPihbMC05XVswLTldXFwuWzAtOV1bMC05XVxcLlswLTldWzAtOV0pL2kpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtOdW1iZXIgLT0gdGhpcy53ZWVrTnVtYmVyKG5ldyBEYXRlKERhdGVzLmdlcm1hblRvRW5nbGlzaFN0cmluZyhtYXRjaFsxXSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAod2Vla051bWJlciAlIG51bSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAodmlldyA9PT0gJ3RpY2tldHMnICYmIERhdGVzLmRhdGVJc0FjdGl2ZURheShkKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHZpZXcgPT09ICdzY2hlZHVsZXInICYmIERhdGVzLmRhdGVJc0luQWN0aXZlV2VlayhkKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHZpZXcgPT09ICd0b2RheScgJiYgRGF0ZXMuZGF0ZUlzVG9kYXkoZCkpIHx8XG4gICAgICAgICAgICAgICAgICAgIHZpZXcgPT09ICdhbGwnXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiZWdpbiA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nX192YWx1ZS5zcGxpdCgnOicpLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNoaWZ0ID0gc3RyaW5nX192YWx1ZS5pbmRleE9mKCc6JykgLSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW4gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKHNoaWZ0LCBzaGlmdCArIDIpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoc2hpZnQgKyAzLCBzaGlmdCArIDUpKSAvIDYwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZyhzaGlmdCArIDYsIHNoaWZ0ICsgOCkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZyhzaGlmdCArIDksIHNoaWZ0ICsgMTEpKSAvIDYwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IDI0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGQuc2V0SG91cnMoTWF0aC5mbG9vcihiZWdpbikpO1xuICAgICAgICAgICAgICAgICAgICBkLnNldE1pbnV0ZXMoKGJlZ2luICUgMSkgKiA2MCk7XG4gICAgICAgICAgICAgICAgICAgIGQuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgICAgICAgICAgZC5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6ICgoZC5nZXREYXkoKSArIDYpICUgNykgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbmQgLSBiZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXNfbGVmdDogdGhpcy5kYXRlRGlmZkluTWludXRlcyhkLCBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAwMS4wMS4gWy0wNS4xMC4xOCAtMTIuMTAuMTggPjAxLjAxLjE4IDwwMS4wMS4xOV1cbiAgICAgICAgICAgIC8vIDAxLjAxLiAwOTowMC0xMDowMCBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgbmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgJ15bMC05XVswLTldLlswLTldWzAtOV0uKCBbMC05XVswLTldOlswLTldWzAtOV0tWzAtOV1bMC05XTpbMC05XVswLTldKT8oICgtfD58PClbMC05XVswLTldLlswLTldWzAtOV0uWzEtMl1bMC05XSkqJCdcbiAgICAgICAgICAgICAgICApLnRlc3Qoc3RyaW5nX192YWx1ZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGxldCB5ZWFyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodmlldyA9PT0gJ3RvZGF5Jykge1xuICAgICAgICAgICAgICAgICAgICB5ZWFyID0gRGF0ZXMuZ2V0Q3VycmVudERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHllYXIgPSBEYXRlcy5nZXRBY3RpdmVEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIG9uIHllYXIgY2hhbmdlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBEYXRlcy53ZWVrTnVtYmVyKERhdGVzLmdldEFjdGl2ZURhdGUoKSkgPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgRGF0ZXMuZ2V0QWN0aXZlRGF0ZSgpLmdldE1vbnRoKCkgKyAxICE9IHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKDMsIDUpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHllYXItLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZCA9IG5ldyBEYXRlKHllYXIgKyAnLScgKyBzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZygzLCA1KSArICctJyArIHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKDAsIDIpKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2aWV3ICE9PSAnYWxsJyAmJiBEYXRlcy5kYXRlSXNFeGNsdWRlZChkLCBzdHJpbmdfX3ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgKHZpZXcgPT09ICd0aWNrZXRzJyAmJiBEYXRlcy5kYXRlSXNBY3RpdmVEYXkoZCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICh2aWV3ID09PSAnc2NoZWR1bGVyJyAmJiBEYXRlcy5kYXRlSXNJbkFjdGl2ZVdlZWsoZCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICh2aWV3ID09PSAndG9kYXknICYmIERhdGVzLmRhdGVJc1RvZGF5KGQpKSB8fFxuICAgICAgICAgICAgICAgICAgICB2aWV3ID09PSAnYWxsJ1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmVnaW4gPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ19fdmFsdWUuc3BsaXQoJzonKS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaGlmdCA9IHN0cmluZ19fdmFsdWUuaW5kZXhPZignOicpIC0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzdHJpbmdfX3ZhbHVlLnN1YnN0cmluZyhzaGlmdCwgc2hpZnQgKyAyKSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHN0cmluZ19fdmFsdWUuc3Vic3RyaW5nKHNoaWZ0ICsgMywgc2hpZnQgKyA1KSkgLyA2MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoc2hpZnQgKyA2LCBzaGlmdCArIDgpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoc3RyaW5nX192YWx1ZS5zdWJzdHJpbmcoc2hpZnQgKyA5LCBzaGlmdCArIDExKSkgLyA2MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSAyNDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkLnNldEhvdXJzKE1hdGguZmxvb3IoYmVnaW4pKTtcbiAgICAgICAgICAgICAgICAgICAgZC5zZXRNaW51dGVzKChiZWdpbiAlIDEpICogNjApO1xuICAgICAgICAgICAgICAgICAgICBkLnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgICAgICAgICAgIGQuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICAgICAgICAgICAgICByZXQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiAoKGQuZ2V0RGF5KCkgKyA2KSAlIDcpICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBiZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogZW5kIC0gYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzX2xlZnQ6IHRoaXMuZGF0ZURpZmZJbk1pbnV0ZXMoZCwgbmV3IERhdGUoKSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGVycm9yID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXJtYW5Ub0VuZ2xpc2hTdHJpbmcoc3RyKSB7XG4gICAgICAgIHJldHVybiAnMjAnICsgc3RyLnN1YnN0cmluZyg2LCA4KSArICctJyArIHN0ci5zdWJzdHJpbmcoMywgNSkgKyAnLScgKyBzdHIuc3Vic3RyaW5nKDAsIDIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXJtYW5EYXRlVGltZVRvRW5nbGlzaFN0cmluZyhzdHIpIHtcbiAgICAgICAgcmV0dXJuICcyMCcgKyBzdHIuc3Vic3RyaW5nKDYsIDgpICsgJy0nICsgc3RyLnN1YnN0cmluZygzLCA1KSArICctJyArIHN0ci5zdWJzdHJpbmcoMCwgMikgKyBzdHIuc3Vic3RyaW5nKDkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBkYXRlRm9ybWF0KGQsIGZvcm1hdCkge1xuICAgICAgICBpZiAoZm9ybWF0ID09PSAnRCBkLm0uJykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBbJ1NPJywgJ01PJywgJ0RJJywgJ01JJywgJ0RPJywgJ0ZSJywgJ1NBJ11bZC5nZXREYXkoKV0gK1xuICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICcuJyArXG4gICAgICAgICAgICAgICAgKCcwJyArIChkLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICAgICAnLidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gJ2QuIEYgWScpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICcuICcgK1xuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgJ0phbnVhcicsXG4gICAgICAgICAgICAgICAgICAgICdGZWJydWFyJyxcbiAgICAgICAgICAgICAgICAgICAgJ03DpHJ6JyxcbiAgICAgICAgICAgICAgICAgICAgJ0FwcmlsJyxcbiAgICAgICAgICAgICAgICAgICAgJ01haScsXG4gICAgICAgICAgICAgICAgICAgICdKdW5pJyxcbiAgICAgICAgICAgICAgICAgICAgJ0p1bGknLFxuICAgICAgICAgICAgICAgICAgICAnQXVndXN0JyxcbiAgICAgICAgICAgICAgICAgICAgJ1NlcHRlbWJlcicsXG4gICAgICAgICAgICAgICAgICAgICdPa3RvYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgJ05vdmVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgJ0RlemVtYmVyJyxcbiAgICAgICAgICAgICAgICBdW2QuZ2V0TW9udGgoKV0gK1xuICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgZC5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdZLW0tZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyAnLScgKyAoJzAnICsgKGQuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgKyAnLScgKyAoJzAnICsgZC5nZXREYXRlKCkpLnNsaWNlKC0yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSAnZC5tLlknKSB7XG4gICAgICAgICAgICByZXR1cm4gKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgKyAnLicgKyAoJzAnICsgKGQuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgKyAnLicgKyBkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gJ2QubS55Jykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAoJzAnICsgZC5nZXREYXRlKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgJy4nICtcbiAgICAgICAgICAgICAgICAoJzAnICsgKGQuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICcuJyArXG4gICAgICAgICAgICAgICAgZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIsIDQpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdkLm0uJykge1xuICAgICAgICAgICAgcmV0dXJuICgnMCcgKyBkLmdldERhdGUoKSkuc2xpY2UoLTIpICsgJy4nICsgKCcwJyArIChkLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsgJy4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdEIEg6aScpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgWydTTycsICdNTycsICdESScsICdNSScsICdETycsICdGUicsICdTQSddW2QuZ2V0RGF5KCldICtcbiAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICgnMCcgKyBkLmdldEhvdXJzKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgJzonICtcbiAgICAgICAgICAgICAgICAoJzAnICsgZC5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSAnSDppJykge1xuICAgICAgICAgICAgcmV0dXJuICgnMCcgKyBkLmdldEhvdXJzKCkpLnNsaWNlKC0yKSArICc6JyArICgnMCcgKyBkLmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAoJzAnICsgZC5nZXREYXRlKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAnLicgK1xuICAgICAgICAgICAgKCcwJyArIChkLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAgICcuJyArXG4gICAgICAgICAgICBkLmdldEZ1bGxZZWFyKCkgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICgnMCcgKyBkLmdldEhvdXJzKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAnOicgK1xuICAgICAgICAgICAgKCcwJyArIGQuZ2V0TWludXRlcygpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgJzonICtcbiAgICAgICAgICAgICgnMCcgKyBkLmdldFNlY29uZHMoKSkuc2xpY2UoLTIpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3RhdGljIHRpbWVGb3JtYXQoZmxvYXQpIHtcbiAgICAgICAgbGV0IGhvdXJzID0gTWF0aC5mbG9vcihmbG9hdCksXG4gICAgICAgICAgICBtaW51dGVzID0gKGZsb2F0ICUgMSkgKiA2MDtcbiAgICAgICAgcmV0dXJuICgnMCcgKyBob3Vycykuc2xpY2UoLTIpICsgJzonICsgKCcwJyArIG1pbnV0ZXMpLnNsaWNlKC0yKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGF0ZUlzSW5BY3RpdmVXZWVrKGQpIHtcbiAgICAgICAgaWYgKGQgPT09IG51bGwgfHwgZCA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgICAgIHJldHVybiBEYXRlcy5zYW1lRGF5KERhdGVzLmdldERheU9mV2VlaygxLCBkKSwgRGF0ZXMuZ2V0RGF5T2ZBY3RpdmVXZWVrKDEpKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGF0ZUlzQWN0aXZlRGF5KGQpIHtcbiAgICAgICAgaWYgKGQgPT09IG51bGwgfHwgZCA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgICAgIHJldHVybiBEYXRlcy5zYW1lRGF5KGQsIERhdGVzLmdldEFjdGl2ZURhdGUoKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGRhdGVJc0luRnV0dXJlKGQpIHtcbiAgICAgICAgaWYgKGQgPT09IG51bGwgfHwgZCA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZDEgPSBuZXcgRGF0ZShkKSxcbiAgICAgICAgICAgIGQyID0gbmV3IERhdGUoKTtcbiAgICAgICAgZDEuc2V0SG91cnMoMCk7XG4gICAgICAgIGQxLnNldE1pbnV0ZXMoMCk7XG4gICAgICAgIGQxLnNldFNlY29uZHMoMCk7XG4gICAgICAgIGQxLnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICAgICAgZDIuc2V0SG91cnMoMCk7XG4gICAgICAgIGQyLnNldE1pbnV0ZXMoMCk7XG4gICAgICAgIGQyLnNldFNlY29uZHMoMCk7XG4gICAgICAgIGQyLnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICAgICAgcmV0dXJuIGQxID4gZDI7XG4gICAgfVxuXG4gICAgc3RhdGljIGRhdGVJc1RvZGF5KGQpIHtcbiAgICAgICAgaWYgKGQgPT09IG51bGwgfHwgZCA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZDEgPSBuZXcgRGF0ZShkKSxcbiAgICAgICAgICAgIGQyID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGQxLmdldERhdGUoKSA9PT0gZDIuZ2V0RGF0ZSgpICYmIGQxLmdldE1vbnRoKCkgPT09IGQyLmdldE1vbnRoKCkgJiYgZDEuZ2V0RnVsbFllYXIoKSA9PT0gZDIuZ2V0RnVsbFllYXIoKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXRpYyBkYXRlSXNJblBhc3QoZCkge1xuICAgICAgICBpZiAoZCA9PT0gbnVsbCB8fCBkID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkMSA9IG5ldyBEYXRlKGQpLFxuICAgICAgICAgICAgZDIgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBkMS5zZXRIb3VycygwKTtcbiAgICAgICAgZDEuc2V0TWludXRlcygwKTtcbiAgICAgICAgZDEuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgZDEuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICBkMi5zZXRIb3VycygwKTtcbiAgICAgICAgZDIuc2V0TWludXRlcygwKTtcbiAgICAgICAgZDIuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgZDIuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgICAgICByZXR1cm4gZDEgPCBkMjtcbiAgICB9XG5cbiAgICBzdGF0aWMgc2FtZURheShkMSwgZDIpIHtcbiAgICAgICAgaWYgKGQxID09PSBudWxsIHx8IGQxID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGQxID0gbmV3IERhdGUoZDEpO1xuICAgICAgICBkMiA9IG5ldyBEYXRlKGQyKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGQxLmdldEZ1bGxZZWFyKCkgPT09IGQyLmdldEZ1bGxZZWFyKCkgJiYgZDEuZ2V0TW9udGgoKSA9PT0gZDIuZ2V0TW9udGgoKSAmJiBkMS5nZXREYXRlKCkgPT09IGQyLmdldERhdGUoKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXRpYyBjb21wYXJlRGF0ZXMoZDEsIGQyKSB7XG4gICAgICAgIGlmIChkMS5nZXRGdWxsWWVhcigpIDwgZDIuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkMS5nZXRGdWxsWWVhcigpID4gZDIuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQxLmdldE1vbnRoKCkgPCBkMi5nZXRNb250aCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQxLmdldE1vbnRoKCkgPiBkMi5nZXRNb250aCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZDEuZ2V0RGF0ZSgpIDwgZDIuZ2V0RGF0ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQxLmdldERhdGUoKSA+IGQyLmdldERhdGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgc3RhdGljIGRhdGVEaWZmSW5NaW51dGVzKGQxLCBkMikge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoZDEgLSBkMikgLyAoMTAwMCAqIDYwKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHdlZWtOdW1iZXIoZCkge1xuICAgICAgICBkID0gbmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpKSk7XG4gICAgICAgIGxldCBkYXlOdW0gPSBkLmdldFVUQ0RheSgpIHx8IDc7XG4gICAgICAgIGQuc2V0VVRDRGF0ZShkLmdldFVUQ0RhdGUoKSArIDQgLSBkYXlOdW0pO1xuICAgICAgICBsZXQgeWVhclN0YXJ0ID0gbmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRVVENGdWxsWWVhcigpLCAwLCAxKSk7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwoKChkIC0geWVhclN0YXJ0KSAvIDg2NDAwMDAwICsgMSkgLyA3KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNEYXRlKHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoc3RyaW5nKSAhPT0gJ0ludmFsaWQgRGF0ZScgJiYgIWlzTmFOKG5ldyBEYXRlKHN0cmluZykpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXREYXlGcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICByZXR1cm4geyBNTzogMSwgREk6IDIsIE1JOiAzLCBETzogNCwgRlI6IDUsIFNBOiA2LCBTTzogNyB9W3N0cmluZ107XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFN0cmluZ0Zyb21EYXkoZGF5KSB7XG4gICAgICAgIHJldHVybiB7IDE6IE1PLCAyOiBESSwgMzogTUksIDQ6IERPLCA1OiBGUiwgNjogU0EsIDc6IFNPIH1bZGF5XTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGF0ZUlzRXhjbHVkZWQoZCwgc3RyKSB7XG4gICAgICAgIGxldCByZXQgPSBmYWxzZTtcbiAgICAgICAgc3RyLnNwbGl0KCcgJykuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGxldCBleGNsdWRlZERhdGUgPSBuZXcgRGF0ZShEYXRlcy5nZXJtYW5Ub0VuZ2xpc2hTdHJpbmcodmFsdWUuc3Vic3RyaW5nKDEpKSk7XG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignLScpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKERhdGVzLnNhbWVEYXkoZXhjbHVkZWREYXRlLCBkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCc+JykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoRGF0ZXMuY29tcGFyZURhdGVzKGV4Y2x1ZGVkRGF0ZSwgZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJzwnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChEYXRlcy5jb21wYXJlRGF0ZXMoZXhjbHVkZWREYXRlLCBkKSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGV4dHJhY3RUaW1lRnJvbURhdGUoZCkge1xuICAgICAgICBsZXQgbWF0Y2ggPSBkLm1hdGNoKG5ldyBSZWdFeHAoJ1swLTldWzAtOV06WzAtOV1bMC05XS1bMC05XVswLTldOlswLTldWzAtOV0nKSk7XG4gICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBzdGF0aWMgZGF5T2ZZZWFyKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIChEYXRlLlVUQyhkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpIC0gRGF0ZS5VVEMoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAwKSkgL1xuICAgICAgICAgICAgMjQgL1xuICAgICAgICAgICAgNjAgL1xuICAgICAgICAgICAgNjAgL1xuICAgICAgICAgICAgMTAwMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXRpYyBudGhXZWVrZGF5T2ZNb250aChkYXRlKSB7XG4gICAgICAgIGxldCBjID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKChjIC0gMSkgLyA3KSArIDE7XG4gICAgfVxuXG4gICAgc3RhdGljIGluY2x1ZGVOZXdMb3dlckJvdW5kSW5EYXRlKGRhdGUsIGxvd2VyQm91bmQpIHtcbiAgICAgICAgZGF0ZSA9IGRhdGUuc3BsaXQoJ1xcbicpO1xuICAgICAgICBkYXRlLmZvckVhY2goKGRhdGVfX3ZhbHVlLCBkYXRlX19rZXkpID0+IHtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IGRhdGVfX3ZhbHVlLm1hdGNoKG5ldyBSZWdFeHAoJz5bMC05XVswLTldLlswLTldWzAtOV0uWzEtMl1bMC05XScsICdnJykpLFxuICAgICAgICAgICAgICAgIGlzT2Jzb2xldGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG1hdGNoLmZvckVhY2goKG1hdGNoX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyQm91bmQgPSBuZXcgRGF0ZShEYXRlcy5nZXJtYW5Ub0VuZ2xpc2hTdHJpbmcobWF0Y2hfX3ZhbHVlLnN1YnN0cmluZygxKSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZXMuY29tcGFyZURhdGVzKGxvd2VyQm91bmQsIGN1ckJvdW5kKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZV9fdmFsdWUgPSBkYXRlX192YWx1ZS5zcGxpdChtYXRjaF9fdmFsdWUpLmpvaW4oJycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNPYnNvbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGVfX3ZhbHVlID0gZGF0ZV9fdmFsdWUucmVwbGFjZSgvICsoPz0gKS9nLCAnJyk7IC8vIHJlbW92ZSBkb3VibGUgd2hpdGVzcGFjZXNcbiAgICAgICAgICAgIGRhdGVfX3ZhbHVlID0gZGF0ZV9fdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGlzT2Jzb2xldGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZGF0ZV9fdmFsdWUgPSBkYXRlX192YWx1ZSArICcgPicgKyBEYXRlcy5kYXRlRm9ybWF0KERhdGVzLmdldEFjdGl2ZURhdGUoKSwgJ2QubS55Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRlW2RhdGVfX2tleV0gPSBkYXRlX192YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGUgPSBkYXRlLmpvaW4oJ1xcbicpO1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdGltZSgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICB9XG59XG5cbi8qIGRlYnVnICovXG53aW5kb3cuRGF0ZXMgPSBEYXRlcztcbiIsImltcG9ydCBEYXRlcyBmcm9tICcuL0RhdGVzJztcbmltcG9ydCBUaWNrZXRzIGZyb20gJy4vVGlja2V0cyc7XG5pbXBvcnQgU29ydCBmcm9tICcuL1NvcnQnO1xuaW1wb3J0IFN0b3JlIGZyb20gJy4vU3RvcmUnO1xuaW1wb3J0IFNjaGVkdWxlciBmcm9tICcuL1NjaGVkdWxlcic7XG5pbXBvcnQgVGV4dGFyZWEgZnJvbSAnLi9UZXh0YXJlYSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbHRlciB7XG4gICAgc3RhdGljIGluaXRGaWx0ZXIoKSB7XG4gICAgICAgIEZpbHRlci5pbml0VXBkYXRlRmlsdGVyKGZhbHNlKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdXBkYXRlRmlsdGVyKCkge1xuICAgICAgICBGaWx0ZXIuaW5pdFVwZGF0ZUZpbHRlcih0cnVlKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaW5pdFVwZGF0ZUZpbHRlcih1cGRhdGUpIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0ge307XG4gICAgICAgIGlmICh1cGRhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19maWx0ZXInKVxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcubWV0YWJhcl9fc2VsZWN0LS1maWx0ZXInKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFtlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0gPSBlbC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19maWx0ZXInKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyJykuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnPGRpdiBjbGFzcz1cIm1ldGFiYXJfX2ZpbHRlclwiPjwvZGl2PicpO1xuICAgICAgICBbJ3N0YXR1cycsICdwcmlvcml0eScsICdkYXRlJywgJ3Byb2plY3QnXS5mb3JFYWNoKChjb2x1bW5zX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1ldGFiYXJfX2ZpbHRlcicpLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cIm1ldGFiYXJfX3NlbGVjdCBtZXRhYmFyX19zZWxlY3QtLWZpbHRlclwiIG5hbWU9XCIke2NvbHVtbnNfX3ZhbHVlfVwiPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiKlwiPiR7Y29sdW1uc19fdmFsdWV9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNvbHVtbnNfX3ZhbHVlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLm1ldGFiYXJfX3NlbGVjdC0tZmlsdGVyW25hbWU9XCJkYXRlXCJdJylcbiAgICAgICAgICAgICAgICAgICAgLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxvcHRpb24gdmFsdWU9XCJcIj48L29wdGlvbj4nKTtcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3REYXkgPSBuZXcgRGF0ZSgnMjAxOC0wMS0wMSAwMDowMDowMCcpO1xuICAgICAgICAgICAgICAgIGxldCBjdXJEYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIGN1ckRheS5zZXRIb3VycygwKTtcbiAgICAgICAgICAgICAgICBjdXJEYXkuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgICAgICBjdXJEYXkuc2V0U2Vjb25kcygwKTtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdERheSA9IG5ldyBEYXRlKHBhcnNlSW50KG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSkgKyAxICsgJy0xMi0zMSAwMDowMDowMCcpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChmaXJzdERheSA8IGxhc3REYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcubWV0YWJhcl9fc2VsZWN0LS1maWx0ZXJbbmFtZT1cImRhdGVcIl0nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPG9wdGlvbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoRGF0ZXMuc2FtZURheShmaXJzdERheSwgY3VyRGF5KSA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgdmFsdWU9XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZXMuZGF0ZUZvcm1hdChmaXJzdERheSwgJ1ktbS1kJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVzLmRhdGVGb3JtYXQoZmlyc3REYXksICdkLm0ueScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RGF5LnNldERhdGUoZmlyc3REYXkuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgbGV0IHNraXBfb2xkX2RhdGVzID0gW10sXG4gICAgICAgICAgICAgICAgICAgIHNraXBfeWVhcl9lbmQgPSBwYXJzZUludChuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zbGljZSgtMikpIC0gMTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBza2lwX3llYXIgPSAxNzsgc2tpcF95ZWFyIDw9IHNraXBfeWVhcl9lbmQ7IHNraXBfeWVhcisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraXBfb2xkX2RhdGVzLnB1c2goJy4nICsgc2tpcF95ZWFyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnRpY2tldHMuZm9yRWFjaCgodGlja2V0c19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcCBvbGQgcHJvamVjdHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbnNfX3ZhbHVlID09PSAncHJvamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwX29sZF9kYXRlcy5pbmNsdWRlcyh0aWNrZXRzX192YWx1ZS5kYXRlLnN1YnN0cmluZyg1LCA4KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbnNfdmFsdWUgPSB0aWNrZXRzX192YWx1ZVtjb2x1bW5zX192YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5pbmNsdWRlcyhvcHRpb25zX3ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKG9wdGlvbnNfdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gY29tYmluZWQgZmlsdGVyXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnNfX3ZhbHVlID09PSAnc3RhdHVzJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmZpbHRlcigob3B0aW9uc19fdmFsdWUpID0+ICFbJ2RvbmUnLCAncmVjdXJyaW5nJ10uaW5jbHVkZXMob3B0aW9uc19fdmFsdWUpKS5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKCchZG9uZSYhcmVjdXJyaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5maWx0ZXIoKG9wdGlvbnNfX3ZhbHVlKSA9PiBbJ2RvbmUnLCAnc2NoZWR1bGVkJywgJ3dvcmtpbmcnXS5pbmNsdWRlcyhvcHRpb25zX192YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goJ2RvbmV8c2NoZWR1bGVkfHdvcmtpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmZpbHRlcigob3B0aW9uc19fdmFsdWUpID0+IFsnc2NoZWR1bGVkJywgJ3dvcmtpbmcnXS5pbmNsdWRlcyhvcHRpb25zX192YWx1ZSkpLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goJ3NjaGVkdWxlZHx3b3JraW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZmlsdGVyKChvcHRpb25zX192YWx1ZSkgPT4gWydmaXhlZCcsICd3b3JraW5nJ10uaW5jbHVkZXMob3B0aW9uc19fdmFsdWUpKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goJ2ZpeGVkfHdvcmtpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYiA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhLmluZGV4T2YoJ3wnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gJ3p6JyArIGE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGIuaW5kZXhPZignfCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSAnenonICsgYjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbnNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLm1ldGFiYXJfX3NlbGVjdC0tZmlsdGVyW25hbWU9XCInICsgY29sdW1uc19fdmFsdWUgKyAnXCJdJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICsgb3B0aW9uc19fdmFsdWUgKyAnXCI+JyArIG9wdGlvbnNfX3ZhbHVlICsgJzwvb3B0aW9uPidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh1cGRhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHNlbGVjdGVkKS5mb3JFYWNoKChbc2VsZWN0ZWRfX2tleSwgc2VsZWN0ZWRfX3ZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19maWx0ZXIgW25hbWU9XCInICsgc2VsZWN0ZWRfX2tleSArICdcIl0nKS52YWx1ZSA9IHNlbGVjdGVkX192YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRmlsdGVyLmRvRmlsdGVyKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWV0YWJhcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5tZXRhYmFyX19zZWxlY3QtLWZpbHRlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRlID0gZS50YXJnZXQuY2xvc2VzdCgnLm1ldGFiYXJfX3NlbGVjdC0tZmlsdGVyW25hbWU9XCJkYXRlXCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRlICYmIGRhdGUudmFsdWUgIT09ICcqJyAmJiBkYXRlLnZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheSA9IG5ldyBEYXRlKGRhdGUudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU2NoZWR1bGVyLmluaXRTY2hlZHVsZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBGaWx0ZXIuZG9GaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkb0ZpbHRlcigpIHtcbiAgICAgICAgU3RvcmUuZGF0YS50aWNrZXRzLmZvckVhY2goKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICBsZXQgdmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcubWV0YWJhcl9fZmlsdGVyJylcbiAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JylcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbF9zZWFyY2ggPSBlbC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF90YXJnZXQgPSB0aWNrZXRzX192YWx1ZVtlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlX3RoaXMgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBkYXRlXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PT0gJ2RhdGUnICYmIHZhbF9zZWFyY2ggIT09ICcqJyAmJiB2YWxfc2VhcmNoICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZF92YWx1ZXMgPSBEYXRlcy5wYXJzZURhdGVTdHJpbmcodmFsX3RhcmdldCwgJ3RpY2tldHMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRfdmFsdWVzICE9PSBmYWxzZSAmJiBwYXJzZWRfdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlX3RoaXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIG90aGVyc1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF9zZWFyY2ggPT09ICcqJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsX3RhcmdldCA9PT0gdmFsX3NlYXJjaCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZhbF9zZWFyY2guaW5kZXhPZignfCcpID4gLTEgJiYgdmFsX3NlYXJjaC5zcGxpdCgnfCcpLmluY2x1ZGVzKHZhbF90YXJnZXQpKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVfdGhpcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvKiBzcGVjaWFsIGJlaGF2aW91cjogaGlkZSBiaWxsZWQgaW4gb3ZlcnZpZXcgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ3N0YXR1cycgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF9zZWFyY2ggPT09ICcqJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsX3RhcmdldCA9PT0gJ2JpbGxlZCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19zZWxlY3QtLWZpbHRlcltuYW1lPVwiZGF0ZVwiXScpLnZhbHVlID09PSAnKidcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlX3RoaXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlX3RoaXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh2aXNpYmxlID09PSBmYWxzZSAmJiB0aWNrZXRzX192YWx1ZS52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcudGlja2V0cyAudGlja2V0c19fZW50cnlbZGF0YS1pZD1cIicgKyB0aWNrZXRzX192YWx1ZS5pZCArICdcIl0nKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgndGlja2V0c19fZW50cnktLXZpc2libGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmlzaWJsZSA9PT0gdHJ1ZSAmJiB0aWNrZXRzX192YWx1ZS52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRpY2tldHNfX3ZhbHVlLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcudGlja2V0cyAudGlja2V0c19fZW50cnlbZGF0YS1pZD1cIicgKyB0aWNrZXRzX192YWx1ZS5pZCArICdcIl0nKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmFkZCgndGlja2V0c19fZW50cnktLXZpc2libGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFNvcnQuZG9Tb3J0KCk7XG4gICAgICAgIFNjaGVkdWxlci51cGRhdGVDb2xvcnMoKTtcbiAgICAgICAgVGlja2V0cy51cGRhdGVTdW0oKTtcbiAgICAgICAgVGV4dGFyZWEudGV4dGFyZWFTZXRWaXNpYmxlSGVpZ2h0cygpO1xuICAgIH1cbn1cbiIsImltcG9ydCBUaWNrZXRzIGZyb20gJy4vVGlja2V0cyc7XG5pbXBvcnQgQXV0aCBmcm9tICcuL0F1dGgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb290ZXIge1xuICAgIHN0YXRpYyBibG9ja1N0YXR1c1VwZGF0ZSA9IGZhbHNlO1xuICAgIHN0YXRpYyBzaG93VGltZSA9IDM1MDA7XG5cbiAgICBzdGF0aWMgaW5pdFN0YXR1cygpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3N0YXR1cycpID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEZvb3Rlci5ibG9ja1N0YXR1c1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGxldCBkID1cbiAgICAgICAgICAgICAgICAoJzAnICsgbmV3IERhdGUoKS5nZXREYXRlKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgJy4nICtcbiAgICAgICAgICAgICAgICAoJzAnICsgKG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICcuJyArXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIsIDQpICtcbiAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICgnMCcgKyBuZXcgRGF0ZSgpLmdldEhvdXJzKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgJzonICtcbiAgICAgICAgICAgICAgICAoJzAnICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgJzonICtcbiAgICAgICAgICAgICAgICAoJzAnICsgbmV3IERhdGUoKS5nZXRTZWNvbmRzKCkpLnNsaWNlKC0yKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3N0YXR1cycpLnRleHRDb250ZW50ID0gZDtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KEZvb3Rlci5pbml0U3RhdHVzLCAxMDAwKTtcbiAgICB9XG4gICAgc3RhdGljIHVwZGF0ZVN0YXR1cyhzdGF0dXMsIHR5cGUpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3Rlcl9fc3RhdHVzJykudGV4dENvbnRlbnQgPSBzdGF0dXM7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3N0YXR1cycpLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvb3Rlcl9fc3RhdHVzLS1zdWNjZXNzJyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3N0YXR1cycpLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvb3Rlcl9fc3RhdHVzLS13YXJuaW5nJyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3N0YXR1cycpLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvb3Rlcl9fc3RhdHVzLS1lcnJvcicpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyX19zdGF0dXMnKS5jbGFzc0xpc3QuYWRkKCdmb290ZXJfX3N0YXR1cy0tJyArIHR5cGUpO1xuICAgICAgICBGb290ZXIuYmxvY2tTdGF0dXNVcGRhdGUgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIEZvb3Rlci5ibG9ja1N0YXR1c1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgICB9LCBGb290ZXIuc2hvd1RpbWUgLSAxMDAwKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyX19zdGF0dXMnKS5jbGFzc0xpc3QucmVtb3ZlKCdmb290ZXJfX3N0YXR1cy0tJyArIHR5cGUpO1xuICAgICAgICB9LCBGb290ZXIuc2hvd1RpbWUpO1xuICAgIH1cbiAgICBzdGF0aWMgYmluZFNhdmUoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmZvb3Rlcl9fc2F2ZScpKSB7XG4gICAgICAgICAgICAgICAgRm9vdGVyLnVwZGF0ZVN0YXR1cygnc2F2aW5nLi4uJywgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICBUaWNrZXRzLnNhdmVUaWNrZXRzKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRm9vdGVyLnVwZGF0ZVN0YXR1cygnc2F2ZWQhJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgRm9vdGVyLnVwZGF0ZVN0YXR1cyhlcnJvciwgJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBiaW5kQ3JlYXRlKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5mb290ZXJfX2NyZWF0ZScpKSB7XG4gICAgICAgICAgICAgICAgVGlja2V0cy5wcmVwYXJlQ3JlYXRlVGlja2V0KCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGJpbmRMb2dvdXQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmZvb3Rlcl9fbG9nb3V0JykpIHtcbiAgICAgICAgICAgICAgICBBdXRoLmxvZ291dCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHNpbXBseSBvdmVyY29tZSB0aGUgaXNzdWUgb2YgZGVsZXRpbmcgZXZlbnQgbGlzdGVuZXJzIG9uIGRvY3VtZW50IGJ5IHNpbXBseSByZWZyZXNoaW5nIHRoZSBhcHBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxpbmtBcGlLZXkoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX2Nyb24nKS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnX2FwaS9jcm9uLycgKyBTdG9yZS5kYXRhLnVzZXIuYXBpX2tleSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX2ljYWwnKS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnX2FwaS9pY2FsLycgKyBTdG9yZS5kYXRhLnVzZXIuYXBpX2tleSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVscGVyIHtcbiAgICBzdGF0aWMgcHJldkFsbChlbCwgc2VsZWN0b3IgPSBudWxsKSB7XG4gICAgICAgIGxldCBwcmV2ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIFtdLmZpbHRlclxuICAgICAgICAgICAgLmNhbGwoZWwucGFyZW50Tm9kZS5jaGlsZHJlbiwgKGh0bWxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGh0bWxFbGVtZW50ID09PSBlbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yICE9PSBudWxsICYmICFodG1sRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IucmVwbGFjZSgnLicsICcnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBuZXh0QWxsKGVsLCBzZWxlY3RvciA9IG51bGwpIHtcbiAgICAgICAgbGV0IG5leHQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIFtdLmZpbHRlci5jYWxsKGVsLnBhcmVudE5vZGUuY2hpbGRyZW4sIChodG1sRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGh0bWxFbGVtZW50ID09PSBlbCkge1xuICAgICAgICAgICAgICAgIG5leHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxlY3RvciAhPT0gbnVsbCAmJiAhaHRtbEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yLnJlcGxhY2UoJy4nLCAnJykpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc09iamVjdChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JztcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNJbnRlZ2VyKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4odmFsdWUpICYmIHBhcnNlSW50KE51bWJlcih2YWx1ZSkpID09IHZhbHVlICYmICFpc05hTihwYXJzZUludCh2YWx1ZSwgMTApKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZmlsZVRvQmFzZTY0KGZpbGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlYWRlci5yZXN1bHQuc3BsaXQoJywnKVsxXSk7XG4gICAgICAgICAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgICB2YXIgdGltZW91dDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0b3JlIGZyb20gJy4vU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIdG1sIHtcbiAgICBzdGF0aWMgYnVpbGRIdG1sKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXBwJykuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0aW9uXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGlja2V0c1wiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjaGVkdWxlclwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1aWNrYm94XCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+PC9kaXY+XG4gICAgICAgIGBcbiAgICAgICAgKTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYW5pbWF0aW9uJykuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0aW9uX193cmFwXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGlvbl9fdG9wXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGlvbl9fYm90dG9tXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgKTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJykuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwiZm9vdGVyX19zYXZlXCI+X3NhdmU8L2E+XG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwiZm9vdGVyX19jcmVhdGVcIj5fY3JlYXRlPC9hPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb290ZXJfX3N0YXR1c1wiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJmb290ZXJfX2Nyb25cIiB0YXJnZXQ9XCJfYmxhbmtcIj5fY3JvbjwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJmb290ZXJfX2ljYWxcIiB0YXJnZXQ9XCJfYmxhbmtcIj5faWNhbDwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJmb290ZXJfX2xvZ291dFwiPl9sb2dvdXQ8L2E+XG4gICAgICAgICAgICBgXG4gICAgICAgICk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpY2tldHMnKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRhYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGlja2V0c19fdGFibGUtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwidGlja2V0c19fdGFibGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzPVwidGlja2V0c19fdGFibGUtaGVhZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwidGlja2V0c19fdGFibGUtcm93XCI+PC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGNsYXNzPVwidGlja2V0c19fdGFibGUtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICA8dGZvb3QgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS1mb290XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS1yb3dcIj48L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3Rmb290PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYFxuICAgICAgICApO1xuICAgICAgICBTdG9yZS5kYXRhLmNvbHMuZm9yRWFjaCgoY29sc19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1oZWFkIHRyJylcbiAgICAgICAgICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnPHRkIGNsYXNzPVwidGlja2V0c19fdGFibGUtY2VsbFwiPicgKyBjb2xzX192YWx1ZSArICc8L3RkPicpO1xuICAgICAgICAgICAgaWYgKGNvbHNfX3ZhbHVlID09PSAnc3RhdHVzJykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1oZWFkIHRyIHRkOmxhc3QtY2hpbGQnKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgICAgICdiZWZvcmVlbmQnLFxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPVwic2NoZWR1bGVkXG5pZGxlXG5hbGxkYXlcbnJvYW1pbmdcbmZpeGVkXG5kb25lXG5iaWxsZWRcbnJlY3VycmluZ1xud29ya2luZ1wiIGNsYXNzPVwidGlja2V0c19fdGFibGUtdG9vbHRpcFwiPig/KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2xzX192YWx1ZSA9PT0gJ3ByaW9yaXR5Jykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1oZWFkIHRyIHRkOmxhc3QtY2hpbGQnKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgICAgICdiZWZvcmVlbmQnLFxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPVwiW0EtRF1cIiBjbGFzcz1cInRpY2tldHNfX3RhYmxlLXRvb2x0aXBcIj4oPyk8L3NwYW4+XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sc19fdmFsdWUgPT09ICd0aW1lJykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1oZWFkIHRyIHRkOmxhc3QtY2hpbGQnKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgICAgICdiZWZvcmVlbmQnLFxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPVwiWzAtMjRdXCIgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS10b29sdGlwXCI+KD8pPC9zcGFuPlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHNfX3ZhbHVlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGlja2V0c19fdGFibGUtaGVhZCB0ciB0ZDpsYXN0LWNoaWxkJykuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB0aXRsZT1cIjAxLjAxLjE4XG4wMS4wMS4xOCAwOTowMC0xMDowMFxuTU8gWy0wNS4xMC4xOCAtMTIuMTAuMTggPjAxLjAxLjE4IDwwMS4wMS4xOV1cbk1PIDEwOjAwLTExOjAwIFstMDUuMTAuMTggLTEyLjEwLjE4ID4wMS4wMS4xOCA8MDEuMDEuMTldXG5NTyMxIDEwOjAwLTExOjAwIFstMDUuMTAuMTggLTEyLjEwLjE4ID4wMS4wMS4xOCA8MDEuMDEuMTldXG5NTyMxMiAxMDowMC0xMTowMCBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuTU9+MSAxMDowMC0xMTowMCBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuTU9+MTIgMTA6MDAtMTE6MDAgWy0wNS4xMC4xOCAtMTIuMTAuMTggPjAxLjAxLjE4IDwwMS4wMS4xOV1cbk1PJTIgMTA6MDAtMTE6MDAgWy0wNS4xMC4xOCAtMTIuMTAuMTggPjAxLjAxLjE4IDwwMS4wMS4xOV1cbjAxLjAxLiBbLTA1LjEwLjE4IC0xMi4xMC4xOCA+MDEuMDEuMTggPDAxLjAxLjE5XVxuMDEuMDEuIDA5OjAwLTEwOjAwIFstMDUuMTAuMTggLTEyLjEwLjE4ID4wMS4wMS4xOCA8MDEuMDEuMTldXG5cbkREI046IChOJTQpdGggd2Vla2RheSBpbiBldmVyeSAoKE4tMSkvNCl0aCBtb250aFxuRER+Tjogd2Vla2RheSBpbiBjYWxlbmRhciB3ZWVrIE5cbkREJU46IHdlZWtkYXkgaW4gY2FsZW5kYXIgd2VlayAlTj0wIChpZiA+WCBzcGVjaWZpZWQsIE4gLT0gY2FsZW5kYXIgd2VlayBvZiBYKVwiIGNsYXNzPVwidGlja2V0c19fdGFibGUtdG9vbHRpcFwiPig/KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1mb290IHRyJylcbiAgICAgICAgICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgJzx0ZCBjbGFzcz1cInRpY2tldHNfX3RhYmxlLWNlbGxcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChjb2xzX192YWx1ZSA9PSAndGltZScgPyAnPHNwYW4gY2xhc3M9XCJ0aWNrZXRzX19zdW1cIj48L3NwYW4+JyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1oZWFkIHRyJykuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRpY2tldHNfX3RhYmxlLWNlbGxcIj5hdHRhY2htZW50czwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRpY2tldHNfX3RhYmxlLWNlbGxcIj5kZWxldGU8L3RkPlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpY2tldHNfX3RhYmxlLWZvb3QgdHInKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS1jZWxsXCI+PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS1jZWxsXCI+PC90ZD5cbiAgICAgICAgICAgIGBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgY3JlYXRlSHRtbExpbmUodGlja2V0LCB2aXNpYmxlKSB7XG4gICAgICAgIGxldCBodG1sID0gJyc7XG5cbiAgICAgICAgaHRtbCArPVxuICAgICAgICAgICAgJzx0ciBjbGFzcz1cInRpY2tldHNfX3RhYmxlLXJvdyB0aWNrZXRzX19lbnRyeScgK1xuICAgICAgICAgICAgKHZpc2libGUgPT09IHRydWUgPyAnIHRpY2tldHNfX2VudHJ5LS12aXNpYmxlJyA6ICcnKSArXG4gICAgICAgICAgICAnXCIgZGF0YS1pZD1cIicgK1xuICAgICAgICAgICAgdGlja2V0LmlkICtcbiAgICAgICAgICAgICdcIj4nO1xuXG4gICAgICAgIFN0b3JlLmRhdGEuY29scy5mb3JFYWNoKChjb2xzX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaHRtbCArPSAnPHRkIGNsYXNzPVwidGlja2V0c19fdGFibGUtY2VsbFwiPic7XG4gICAgICAgICAgICBodG1sICs9XG4gICAgICAgICAgICAgICAgJzx0ZXh0YXJlYSBjbGFzcz1cInRpY2tldHNfX3RleHRhcmVhIHRpY2tldHNfX3RleHRhcmVhLS0nICtcbiAgICAgICAgICAgICAgICBjb2xzX192YWx1ZSArXG4gICAgICAgICAgICAgICAgJ1wiIGF1dG9jb3JyZWN0PVwib2ZmXCIgYXV0b2NhcGl0YWxpemU9XCJvZmZcIiBzcGVsbGNoZWNrPVwiZmFsc2VcIiAnICtcbiAgICAgICAgICAgICAgICAoWydkYXRlJywgJ2Rlc2NyaXB0aW9uJ10uaW5jbHVkZXMoY29sc19fdmFsdWUpID8gJyBjbGFzcz1cImF1dG9zaXplXCInIDogJycpICtcbiAgICAgICAgICAgICAgICAnIG5hbWU9XCInICtcbiAgICAgICAgICAgICAgICBjb2xzX192YWx1ZSArXG4gICAgICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgICAgICh0aWNrZXRbY29sc19fdmFsdWVdIHx8ICcnKSArXG4gICAgICAgICAgICAgICAgJzwvdGV4dGFyZWE+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvdGQ+JztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaHRtbCArPSBgXG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS1jZWxsXCI+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwidGlja2V0c19fYXR0YWNobWVudHNcIj5gO1xuICAgICAgICBpZiAodGlja2V0LmF0dGFjaG1lbnRzICE9PSB1bmRlZmluZWQgJiYgdGlja2V0LmF0dGFjaG1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRpY2tldC5hdHRhY2htZW50cy5mb3JFYWNoKChhdHRhY2htZW50c19fdmFsdWUsIGF0dGFjaG1lbnRzX19rZXkpID0+IHtcbiAgICAgICAgICAgICAgICBodG1sICs9IEh0bWwuY3JlYXRlSHRtbERvd25sb2FkTGluZShhdHRhY2htZW50c19fdmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaHRtbCArPSBgXG4gICAgICAgICAgICAgICAgPC91bD5cblxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInRpY2tldHNfX3VwbG9hZFwiIHRpdGxlPVwiX3VwbG9hZFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0aWNrZXRzX191cGxvYWQtaW5wdXRcIiB0eXBlPVwiZmlsZVwiIG5hbWU9XCJhdHRhY2htZW50c1wiIG11bHRpcGxlPVwibXVsdGlwbGVcIiAvPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICBcbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJ0aWNrZXRzX190YWJsZS1jZWxsXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cInRpY2tldHNfX2VudHJ5X19kZWxldGVcIj54PC9hPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgYDtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZUh0bWxEb3dubG9hZExpbmUoYXR0YWNobWVudCkge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwidGlja2V0c19fYXR0YWNobWVudFwiIGRhdGEtaWQ9XCIke2F0dGFjaG1lbnQuaWR9XCI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJ0aWNrZXRzX19hdHRhY2htZW50LWRvd25sb2FkXCIgaHJlZj1cIiNcIiB0aXRsZT1cIiR7YXR0YWNobWVudC5uYW1lfVwiPjwvYT5cbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cInRpY2tldHNfX2F0dGFjaG1lbnQtZGVsZXRlXCIgaHJlZj1cIiNcIiB0aXRsZT1cIl9kZWxldGVcIj48L2E+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICBgO1xuICAgIH1cbn1cbiIsImltcG9ydCBGaWx0ZXIgZnJvbSAnLi9GaWx0ZXInO1xuaW1wb3J0IEhlbHBlciBmcm9tICcuL0hlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtleWJvYXJkIHtcbiAgICBzdGF0aWMgaW5pdEtleWJvYXJkTmF2aWdhdGlvbigpIHtcbiAgICAgICAgLy8gb25lIG1vcmUga2V5Ym9hcmQgZXZlbnQgaXMgbmVlZGVkIChzbyB0aGF0IGp1bXBzIGFyZSBub3QgdG9vIGVhcmx5KVxuICAgICAgICAvLyB0aGVyZWZvcmUgd2Ugc2F2ZSB0aGUgcHJldmlvdXMgY3Vyc29yIHBvaW50ZXIgaGVyZVxuICAgICAgICBsZXQgc2VsZWN0aW9uRW5kQmVmb3JlID0gMTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpY2tldHMnKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLnRhcmdldCB8fCAoZS50YXJnZXQudGFnTmFtZSAhPT0gJ0lOUFVUJyAmJiBlLnRhcmdldC50YWdOYW1lICE9PSAnVEVYVEFSRUEnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsZWZ0ID0gZS50YXJnZXQuY2xvc2VzdCgndGQnKS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLFxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gZS50YXJnZXQuY2xvc2VzdCgndGQnKS5uZXh0RWxlbWVudFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgdG9wID0gSGVscGVyLnByZXZBbGwoZS50YXJnZXQuY2xvc2VzdCgndHInKSwgJy50aWNrZXRzX19lbnRyeS0tdmlzaWJsZScpWzBdLFxuICAgICAgICAgICAgICAgIGRvd24gPSBIZWxwZXIubmV4dEFsbChlLnRhcmdldC5jbG9zZXN0KCd0cicpLCAnLnRpY2tldHNfX2VudHJ5LS12aXNpYmxlJylbMF0sXG4gICAgICAgICAgICAgICAgaW5kZXggPSBIZWxwZXIucHJldkFsbChlLnRhcmdldC5jbG9zZXN0KCd0ZCcpKS5sZW5ndGggKyAxO1xuXG4gICAgICAgICAgICAvLyBhcnJvdyByaWdodCAoc3dpdGNoKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gMzkgJiZcbiAgICAgICAgICAgICAgICByaWdodCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdGlvbkVuZCA+PSBlLnRhcmdldC52YWx1ZS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPj0gZS50YXJnZXQudmFsdWUubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByaWdodC5xdWVyeVNlbGVjdG9yKCdpbnB1dCwgdGV4dGFyZWEnKS5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPSAxO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFycm93IGxlZnQgKHN3aXRjaClcbiAgICAgICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gMzcgJiZcbiAgICAgICAgICAgICAgICBsZWZ0ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc2VsZWN0aW9uRW5kIDw9IDAgJiZcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPD0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbGVmdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCwgdGV4dGFyZWEnKS5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPSAxO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFycm93IHRvcCAoc3dpdGNoKVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID09PSAzOCAmJlxuICAgICAgICAgICAgICAgIHRvcCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc2VsZWN0aW9uRW5kIDw9IDAgJiZcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPD0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdG9wLnF1ZXJ5U2VsZWN0b3IoJ3RkOm50aC1jaGlsZCgnICsgaW5kZXggKyAnKScpXG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbnB1dCwgdGV4dGFyZWEnKVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCk7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uRW5kQmVmb3JlID0gMTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhcnJvdyBkb3duIChzd2l0Y2gpXG4gICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPT09IDQwICYmXG4gICAgICAgICAgICAgICAgZG93biAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc2VsZWN0aW9uRW5kID49IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZEJlZm9yZSA+PSBlLnRhcmdldC52YWx1ZS5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvd24ucXVlcnlTZWxlY3RvcigndGQ6bnRoLWNoaWxkKCcgKyBpbmRleCArICcpJylcbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LCB0ZXh0YXJlYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPSAxO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uRW5kQmVmb3JlID0gZS50YXJnZXQuc2VsZWN0aW9uRW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZFJlZnJlc2goKSB7XG4gICAgICAgIC8vIGY1XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTE2KSB7XG4gICAgICAgICAgICAgICAgRmlsdGVyLmRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9jayB7XG4gICAgc3RhdGljIGxvY2tUaWNrZXQodGlja2V0X2lkKSB7XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnRpY2tldHNfX2VudHJ5W2RhdGEtaWQ9XCInICsgdGlja2V0X2lkICsgJ1wiXScpXG4gICAgICAgICAgICAuY2xhc3NMaXN0LmFkZCgndGlja2V0c19fZW50cnktLWxvY2tlZCcpO1xuICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX19lbnRyeVtkYXRhLWlkPVwiJyArIHRpY2tldF9pZCArICdcIl0nKVxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCB0ZXh0YXJlYScpXG4gICAgICAgICAgICAuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gcmVuYWJsZSB0aGlzIGlmIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUyNTQ2MjY2L3RleHRhcmVhLXdoaXRlLXNwYWNlLW5vd3JhcC1pbi1jb21iaW5hdGlvbi13aXRoLXJlYWRvbmx5IGlzIHNvbHZlZFxuICAgICAgICAgICAgICAgIC8vZWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIC8vZWwuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHVubG9ja1RpY2tldCh0aWNrZXRfaWQsIGxlYXZlX2NoYW5nZWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAobGVhdmVfY2hhbmdlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX19lbnRyeVtkYXRhLWlkPVwiJyArIHRpY2tldF9pZCArICdcIl0nKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCd0aWNrZXRzX19lbnRyeS0tY2hhbmdlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnRpY2tldHNfX2VudHJ5W2RhdGEtaWQ9XCInICsgdGlja2V0X2lkICsgJ1wiXScpXG4gICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgndGlja2V0c19fZW50cnktLWxvY2tlZCcpO1xuICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX19lbnRyeVtkYXRhLWlkPVwiJyArIHRpY2tldF9pZCArICdcIl0nKVxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCB0ZXh0YXJlYScpXG4gICAgICAgICAgICAuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyB0aWNrZXRJc0xvY2tlZCh0aWNrZXRfaWQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAnLnRpY2tldHNfX2VudHJ5W2RhdGEtaWQ9XCInICsgdGlja2V0X2lkICsgJ1wiXSAudGlja2V0c19fZW50cnktLWxvY2tlZCdcbiAgICAgICAgICAgICkgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IFRpY2tldHMgZnJvbSAnLi9UaWNrZXRzJztcbmltcG9ydCBTdG9yZSBmcm9tICcuL1N0b3JlJztcbmltcG9ydCBEYXRlcyBmcm9tICcuL0RhdGVzJztcbmltcG9ydCBTY2hlZHVsZXIgZnJvbSAnLi9TY2hlZHVsZXInO1xuaW1wb3J0IEZpbHRlciBmcm9tICcuL0ZpbHRlcic7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyJztcbmltcG9ydCBobHAgZnJvbSAnaGxwJztcbmltcG9ydCBQdWxsVG9SZWZyZXNoIGZyb20gJ3B1bGx0b3JlZnJlc2hqcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1aWNrYm94IHtcbiAgICBsYXN0U2Nyb2xsUG9zID0gMDtcblxuICAgIHN0YXRpYyBpbml0UXVpY2tib3goKSB7XG4gICAgICAgIFF1aWNrYm94LmJ1aWxkSHRtbCgpO1xuICAgICAgICBRdWlja2JveC5pbml0TWFpbHMoKTtcbiAgICAgICAgUXVpY2tib3guaW5pdFRvZGF5KCk7XG4gICAgICAgIFF1aWNrYm94LmluaXROZXcoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZFF1aWNrYm94KCkge1xuICAgICAgICBRdWlja2JveC5iaW5kTWFpbHMoKTtcbiAgICAgICAgUXVpY2tib3guYWxsb3dVbnNlbGVjdFJhZGlvKCk7XG4gICAgICAgIFF1aWNrYm94LmJpbmRUb2RheSgpO1xuICAgICAgICBRdWlja2JveC5iaW5kTmF2KCk7XG4gICAgICAgIFF1aWNrYm94LmJpbmROZXcoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYnVpbGRIdG1sKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3gnKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVpY2tib3hfX2NvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVpY2tib3hfX21haWxzXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1aWNrYm94X190b2RheVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWlja2JveF9fbmV3XCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWlja2JveF9fbmF2XCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNtYWlsc1wiIGNsYXNzPVwicXVpY2tib3hfX25hdml0ZW1cIj5fbWFpbHM8c3BhbiBjbGFzcz1cInF1aWNrYm94X19uYXZpdGVtLWNvdW50XCI+PC9zcGFuPjwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiI3RvZGF5XCIgY2xhc3M9XCJxdWlja2JveF9fbmF2aXRlbVwiPl90b2RheTxzcGFuIGNsYXNzPVwicXVpY2tib3hfX25hdml0ZW0tY291bnRcIj48L3NwYW4+PC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjbmV3XCIgY2xhc3M9XCJxdWlja2JveF9fbmF2aXRlbVwiPl9uZXc8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBzdGF0aWMgaW5pdE1haWxzKCkge1xuICAgICAgICBRdWlja2JveC5mZXRjaE1haWxzKHRydWUpO1xuICAgICAgICBpZiAoaGxwLmlzRGVza3RvcCgpKSB7XG4gICAgICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFN0b3JlLmRhdGEuYnVzeSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFF1aWNrYm94LmZldGNoTWFpbHMoZmFsc2UpO1xuICAgICAgICAgICAgICAgIEZvb3Rlci51cGRhdGVTdGF0dXMoJ3N1Y2Nlc3NmdWxseSBzeW5jZWQgbWFpbHMuJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0sIDcwICogMTAwMCk7IC8vIG11c3QgYmUgbm9uIGRpdmlzaWJsZSBieSA2MCAob3RoZXJ3aXNlIGl0IGJsb2NrcyBvdGhlcnMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZmV0Y2hNYWlscyhmaXJzdEluaXQgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19tYWlscycpLmNsYXNzTGlzdC5jb250YWlucygncXVpY2tib3hfX21haWxzLS1sb2FkaW5nJykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3RJbml0ID09PSB0cnVlIHx8ICFobHAuaXNEZXNrdG9wKCkpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbHMnKS5jbGFzc0xpc3QuYWRkKCdxdWlja2JveF9fbWFpbHMtLWxvYWRpbmcnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbHMnKS5jbGFzc0xpc3QucmVtb3ZlKCdxdWlja2JveF9fbWFpbHMtLWZpbmlzaGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gdHJ1ZTtcbiAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgIC5mZXRjaCgnX2FwaS9tYWlscycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLm1haWxzID0gW107XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKChtYWlsc19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5tYWlscy5wdXNoKG1haWxzX192YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgUXVpY2tib3gucmVuZGVyTWFpbHMoKTtcbiAgICAgICAgICAgICAgICBRdWlja2JveC51cGRhdGVNYWlsQ291bnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyB1cGRhdGVNYWlsQ291bnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmF2aXRlbS1jb3VudCcpLmlubmVyVGV4dCA9IFN0b3JlLmRhdGEubWFpbHMubGVuZ3RoO1xuICAgIH1cblxuICAgIHN0YXRpYyByZW5kZXJNYWlscygpIHtcbiAgICAgICAgLy8gYWRkIG5ld1xuICAgICAgICBTdG9yZS5kYXRhLm1haWxzLmZvckVhY2goKG1haWxzX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbFtkYXRhLWlkPVwiJyArIG1haWxzX192YWx1ZS5pZCArICdcIl0nKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gbWFpbHNfX3ZhbHVlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19tYWlscycpLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgICAgICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1aWNrYm94X19tYWlsIHF1aWNrYm94X19tYWlsLS11bnJlYWRcIiBkYXRhLWlkPVwiJHttYWlsc19fdmFsdWUuaWR9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwicXVpY2tib3hfX21haWwtdG9nZ2xlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1aWNrYm94X19tYWlsLW1ldGEgcXVpY2tib3hfX21haWwtbWV0YS0tZnJvbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbHNfX3ZhbHVlLmZyb21fbmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWlsc19fdmFsdWUuZnJvbV9uYW1lICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWlsc19fdmFsdWUuZnJvbV9uYW1lICE9PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbHNfX3ZhbHVlLmZyb21fbmFtZSAhPT0gJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG1haWxzX192YWx1ZS5mcm9tX25hbWUgKyAnICgnICsgbWFpbHNfX3ZhbHVlLmZyb21fZW1haWwgKyAnKSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1haWxzX192YWx1ZS5mcm9tX2VtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVpY2tib3hfX21haWwtbWV0YSBxdWlja2JveF9fbWFpbC1tZXRhLS1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7RGF0ZXMuZGF0ZUZvcm1hdChuZXcgRGF0ZShtYWlsc19fdmFsdWUuZGF0ZSksICdEIEg6aScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1tZXRhIHF1aWNrYm94X19tYWlsLW1ldGEtLXN1YmplY3RcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHttYWlsc19fdmFsdWUuc3ViamVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpZnJhbWUgc3JjPVwiYWJvdXQ6YmxhbmtcIiBjbGFzcz1cInF1aWNrYm94X19tYWlsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2lmcmFtZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XCJxdWlja2JveF9fbWFpbC1mb3JtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImlkXCIgdmFsdWU9XCIke21haWxzX192YWx1ZS5pZH1cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJtYWlsYm94XCIgdmFsdWU9XCIke21haWxzX192YWx1ZS5tYWlsYm94fVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cInF1aWNrYm94X19tYWlsLWlucHV0cm93c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicXVpY2tib3hfX21haWwtaW5wdXRyb3cgcXVpY2tib3hfX21haWwtaW5wdXRyb3ctLTEvM1wiPjxsYWJlbCBjbGFzcz1cInF1aWNrYm94X19tYWlsLWxhYmVsXCI+PGlucHV0IGNsYXNzPVwicXVpY2tib3hfX21haWwtaW5wdXQgcXVpY2tib3hfX21haWwtaW5wdXQtLXJhZGlvXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cImFjdGlvbl90aWNrZXRfdGltZVwiIHZhbHVlPVwidG9uaWdodFwiIHVuY2hlY2thYmxlIGRhdGEtY2hlY2tlZCBjaGVja2VkIC8+PHNwYW4gY2xhc3M9XCJxdWlja2JveF9fbWFpbC1sYWJlbC10ZXh0XCI+dG9uaWdodDwvc3Bhbj48L2xhYmVsPjwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dHJvdyBxdWlja2JveF9fbWFpbC1pbnB1dHJvdy0tMS8zXCI+PGxhYmVsIGNsYXNzPVwicXVpY2tib3hfX21haWwtbGFiZWxcIj48aW5wdXQgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dCBxdWlja2JveF9fbWFpbC1pbnB1dC0tcmFkaW9cIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwiYWN0aW9uX3RpY2tldF90aW1lXCIgdmFsdWU9XCJ3ZWVrZW5kXCIgdW5jaGVja2FibGUgLz48c3BhbiBjbGFzcz1cInF1aWNrYm94X19tYWlsLWxhYmVsLXRleHRcIj53ZWVrZW5kPC9zcGFuPjwvbGFiZWw+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInF1aWNrYm94X19tYWlsLWlucHV0cm93IHF1aWNrYm94X19tYWlsLWlucHV0cm93LS0xLzNcIj48bGFiZWwgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1sYWJlbFwiPjxpbnB1dCBjbGFzcz1cInF1aWNrYm94X19tYWlsLWlucHV0IHF1aWNrYm94X19tYWlsLWlucHV0LS1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJhY3Rpb25fdGlja2V0X3RpbWVcIiB2YWx1ZT1cIm5leHRcIiB1bmNoZWNrYWJsZSAvPjxzcGFuIGNsYXNzPVwicXVpY2tib3hfX21haWwtbGFiZWwtdGV4dFwiPm5leHQ8L3NwYW4+PC9sYWJlbD48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicXVpY2tib3hfX21haWwtaW5wdXRyb3cgcXVpY2tib3hfX21haWwtaW5wdXRyb3ctLTEvJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWlsc19fdmFsdWUuZWRpdG9ycy5sZW5ndGggKyAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XCI+PGxhYmVsIGNsYXNzPVwicXVpY2tib3hfX21haWwtbGFiZWxcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dCBxdWlja2JveF9fbWFpbC1pbnB1dC0tY2hlY2tib3hcIiBuYW1lPVwiYWN0aW9uX3NlbmRbXVwiIHZhbHVlPVwic2VuZGVyXCIgLz48c3BhbiBjbGFzcz1cInF1aWNrYm94X19tYWlsLWxhYmVsLXRleHRcIj5zZW5kZXI8L3NwYW4+PC9sYWJlbD48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke21haWxzX192YWx1ZS5lZGl0b3JzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlZGl0b3JzX192YWx1ZSkgPT4gYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dHJvdyBxdWlja2JveF9fbWFpbC1pbnB1dHJvdy0tMS8ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbHNfX3ZhbHVlLmVkaXRvcnMubGVuZ3RoICsgMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XCI+PGxhYmVsIGNsYXNzPVwicXVpY2tib3hfX21haWwtbGFiZWxcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dCBxdWlja2JveF9fbWFpbC1pbnB1dC0tY2hlY2tib3hcIiBuYW1lPVwiYWN0aW9uX3NlbmRbXVwiIHZhbHVlPVwiJHtlZGl0b3JzX192YWx1ZX1cIiAvPjxzcGFuIGNsYXNzPVwicXVpY2tib3hfX21haWwtbGFiZWwtdGV4dFwiPiR7ZWRpdG9yc19fdmFsdWV9PC9zcGFuPjwvbGFiZWw+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dHJvdyBxdWlja2JveF9fbWFpbC1pbnB1dHJvdy0tMS8ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haWxzX192YWx1ZS5lZGl0b3JzLmxlbmd0aCArIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dCBxdWlja2JveF9fbWFpbC1pbnB1dC0tdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoPVwiMjU1XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIm1haWx0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImFjdGlvbl9zZW5kX3RleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicXVpY2tib3hfX21haWwtaW5wdXRyb3cgcXVpY2tib3hfX21haWwtaW5wdXRyb3ctLTEvMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInF1aWNrYm94X19tYWlsLXN1Ym1pdCBxdWlja2JveF9fbWFpbC1zdWJtaXQtLWRpc2NhcmRcIiB0eXBlPVwic3VibWl0XCIgbmFtZT1cImRpc2NhcmRcIiB2YWx1ZT1cIl9kaXNjYXJkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fbWFpbC1pbnB1dHJvdyBxdWlja2JveF9fbWFpbC1pbnB1dHJvdy0tMS8yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwicXVpY2tib3hfX21haWwtc3VibWl0IHF1aWNrYm94X19tYWlsLXN1Ym1pdC0tY3JlYXRlXCIgdHlwZT1cInN1Ym1pdFwiIG5hbWU9XCJjcmVhdGVcIiB2YWx1ZT1cIl9jcmVhdGVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgXHQgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGxldCBpZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICAnLnF1aWNrYm94X19tYWlsW2RhdGEtaWQ9XCInICsgbWFpbHNfX3ZhbHVlLmlkICsgJ1wiXSAucXVpY2tib3hfX21haWwtY29udGVudCdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOjAuNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojZmZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiMwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5Ojotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5Ojotd2Via2l0LXNjcm9sbGJhci10cmFjayB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IC0xcHggMCAwIDAgI2ZmZmZmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnREb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50RG9jdW1lbnQucXVlcnlTZWxlY3RvcignYScpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUuY29udGVudERvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NyY2RvYycsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbCcpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucXVpY2tib3hfX21haWwnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5tYWlscy5maWx0ZXIoKG1haWxzX192YWx1ZSkgPT4gbWFpbHNfX3ZhbHVlLmlkID09PSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSkubGVuZ3RoID09PVxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbHMtLWxvYWRpbmcnKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19tYWlscy0tbG9hZGluZycpLmNsYXNzTGlzdC5yZW1vdmUoJ3F1aWNrYm94X19tYWlscy0tbG9hZGluZycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX21haWwnKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19tYWlscycpLmNsYXNzTGlzdC5hZGQoJ3F1aWNrYm94X19tYWlscy0tZmluaXNoZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbHMnKS5jbGFzc0xpc3QucmVtb3ZlKCdxdWlja2JveF9fbWFpbHMtLWZpbmlzaGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZE1haWxzKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZWwgPSBlLnRhcmdldC5jbG9zZXN0KCcucXVpY2tib3hfX21haWwtdG9nZ2xlJyk7XG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuY2xvc2VzdCgnLnF1aWNrYm94X19tYWlsJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdxdWlja2JveF9fbWFpbC0tZXhwYW5kZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBlbC5jbG9zZXN0KCcucXVpY2tib3hfX21haWxzJykuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgICAgICBlbC5jbG9zZXN0KCcucXVpY2tib3hfX21haWwnKS5jbGFzc0xpc3QucmVtb3ZlKCdxdWlja2JveF9fbWFpbC0tZXhwYW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xvc2VzdCgnLnF1aWNrYm94X19tYWlscycpLnNjcm9sbFRvcCA9IHRoaXMubGFzdFNjcm9sbFBvcztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xvc2VzdCgnLnF1aWNrYm94X19tYWlsJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdxdWlja2JveF9fbWFpbC0tdW5yZWFkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsb3Nlc3QoJy5xdWlja2JveF9fbWFpbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3F1aWNrYm94X19tYWlsLS11bnJlYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxQb3MgPSBlbC5jbG9zZXN0KCcucXVpY2tib3hfX21haWxzJykuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICBlbC5jbG9zZXN0KCcucXVpY2tib3hfX21haWxzJykuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xvc2VzdCgnLnF1aWNrYm94X19tYWlscycpLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgICAgICBlbC5jbG9zZXN0KCcucXVpY2tib3hfX21haWwnKS5jbGFzc0xpc3QuYWRkKCdxdWlja2JveF9fbWFpbC0tZXhwYW5kZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZWwgPSBlLnRhcmdldC5jbG9zZXN0KCcucXVpY2tib3hfX21haWwtc3VibWl0Jyk7XG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICBsZXQgZm9ybSA9IGVsLmNsb3Nlc3QoJy5xdWlja2JveF9fbWFpbC1mb3JtJyksXG4gICAgICAgICAgICAgICAgICAgIGlkID0gZm9ybS5jbG9zZXN0KCcucXVpY2tib3hfX21haWwnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgbWFpbCA9IFN0b3JlLmRhdGEubWFpbHMuZmlsdGVyKChtYWlsc19fdmFsdWUpID0+IG1haWxzX192YWx1ZS5pZCA9PT0gaWQpWzBdLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb24gPSBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3F1aWNrYm94X19tYWlsLXN1Ym1pdC0tY3JlYXRlJykgPyAnY3JlYXRlJyA6ICdkaXNjYXJkJztcblxuICAgICAgICAgICAgICAgIGZvcm0uY2xvc2VzdCgnLnF1aWNrYm94X19tYWlsJykuY2xhc3NMaXN0LmFkZChcbiAgICAgICAgICAgICAgICAgICAgJ3F1aWNrYm94X19tYWlsLS1tb3ZlLScgKyAoYWN0aW9uID09PSAnZGlzY2FyZCcgPyAnbGVmdCcgOiAncmlnaHQnKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19tYWlscycpLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX21haWxzJykuc2Nyb2xsVG9wID0gdGhpcy5sYXN0U2Nyb2xsUG9zO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NyZWF0ZScgJiYgZm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImFjdGlvbl90aWNrZXRfdGltZVwiXTpjaGVja2VkJykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiYWN0aW9uX3RpY2tldF90aW1lXCJdOmNoZWNrZWQnKS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgVGlja2V0cy5jcmVhdGVBbmRBcHBlbmRUaWNrZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbWFpbC5zdWJqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAnQScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogJ21haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3NjaGVkdWxlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogJzAsNTAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGxwLmJhc2U2NHRvZmlsZShtYWlsLmVtbCwgbnVsbCwgaGxwLnNsdWdpZnkobWFpbC5zdWJqZWN0ICsgJyAnICsgbWFpbC5kYXRlKSArICcuZW1sJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgICAgICAgICAgLmZldGNoKCdfYXBpL21haWxzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMobmV3IEZvcm1EYXRhKGZvcm0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7fSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEubWFpbHMgPSBTdG9yZS5kYXRhLm1haWxzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIChtYWlsc19fdmFsdWUpID0+IG1haWxzX192YWx1ZS5pZCAhPSBmb3JtLmNsb3Nlc3QoJy5xdWlja2JveF9fbWFpbCcpLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIFF1aWNrYm94LnJlbmRlck1haWxzKCk7XG4gICAgICAgICAgICAgICAgICAgIFF1aWNrYm94LnVwZGF0ZU1haWxDb3VudCgpO1xuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaGxwLmlzRGVza3RvcCgpKSB7XG4gICAgICAgICAgICBQdWxsVG9SZWZyZXNoLmluaXQoe1xuICAgICAgICAgICAgICAgIG1haW5FbGVtZW50OiAnLnF1aWNrYm94X19tYWlscycsXG4gICAgICAgICAgICAgICAgdHJpZ2dlckVsZW1lbnQ6ICcucXVpY2tib3hfX21haWxzJyxcbiAgICAgICAgICAgICAgICBjbGFzc1ByZWZpeDogJ3F1aWNrYm94X19wdWxsLXRvLXJlZnJlc2gtLScsXG4gICAgICAgICAgICAgICAgZGlzdFRocmVzaG9sZDogODAsXG4gICAgICAgICAgICAgICAgZGlzdE1heDogMTQwLFxuICAgICAgICAgICAgICAgIGRpc3RJZ25vcmU6IDEwLFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uc1B1bGxUb1JlZnJlc2g6ICdfc3dpcGUgZG93biB0byByZWZyZXNoJyxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNSZWxlYXNlVG9SZWZyZXNoOiAnX3JlbGVhc2UgdG8gcmVmcmVzaCcsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUmVmcmVzaGluZzogJ19yZWZyZXNoaW5nJyxcbiAgICAgICAgICAgICAgICBzaG91bGRQdWxsVG9SZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5tYWluRWxlbWVudC5zY3JvbGxUb3AgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbWFpbHMtLWxvYWRpbmcnKSA9PT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19tYWlsLS1leHBhbmRlZCcpID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblJlZnJlc2goKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX21haWwtLWV4cGFuZGVkJykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBRdWlja2JveC5mZXRjaE1haWxzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgYWxsb3dVbnNlbGVjdFJhZGlvKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZWwgPSBlLnRhcmdldC5jbG9zZXN0KCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bdW5jaGVja2FibGVdJyk7XG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdkYXRhLWNoZWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY2hlY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICBlbC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwicmFkaW9cIl1bdW5jaGVja2FibGVdW2RhdGEtY2hlY2tlZF0nKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdW3VuY2hlY2thYmxlXVtkYXRhLWNoZWNrZWRdJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY2hlY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrZWQnLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZE5hdigpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fY29udGVudCcpICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmROYXZUb2dnbGUoJ21haWxzJyk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGVsID0gZS50YXJnZXQuY2xvc2VzdCgnLnF1aWNrYm94X19uYXZpdGVtJyk7XG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygncXVpY2tib3hfX25hdml0ZW0tLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZE5hdlRvZ2dsZShlbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5yZXBsYWNlKCcjJywgJycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZE5hdlRvZ2dsZSh2aWV3KSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX2NvbnRlbnQnKS5jbGFzc0xpc3QuY29udGFpbnMoJ3F1aWNrYm94X19jb250ZW50LS1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19jb250ZW50JykuY2xhc3NMaXN0LmFkZCgncXVpY2tib3hfX2NvbnRlbnQtLWRpc2FibGVkJyk7XG4gICAgICAgIC8qIGluIGNocm9tZSB3ZSB3YW50IGN0cmwrZiB0byBub3QgZmluZCBoaWRkZW4gZWxlbWVudHMgKHNvIHdlIG11c3QgYXBwbHkgZGlzcGxheTpub25lKSAqL1xuICAgICAgICAvKiB0aGUgZm9sbG93aW5nIGxpbmVzIGVuc3VyZSB0byBkbyBleGFjdGx5IHRoYXQgKi9cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnF1aWNrYm94X19jb250ZW50ID4gKicpLmZvckVhY2goKGVsMikgPT4ge1xuICAgICAgICAgICAgZWwyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWlja2JveF9fY29udGVudCA+ICo6bm90KC5xdWlja2JveF9fJyArIHZpZXcgKyAnKScpLmZvckVhY2goKGVsMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlbDIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX2NvbnRlbnQnKS5jbGFzc0xpc3QucmVtb3ZlKCdxdWlja2JveF9fY29udGVudC0tZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX2NvbnRlbnQnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmlldycsIHZpZXcpO1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmF2aXRlbS0tYWN0aXZlJykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucXVpY2tib3hfX25hdml0ZW0tLWFjdGl2ZScpLmZvckVhY2goKG5hdml0ZW1fX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5hdml0ZW1fX3ZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoJ3F1aWNrYm94X19uYXZpdGVtLS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmF2aXRlbVtocmVmPVwiIycgKyB2aWV3ICsgJ1wiXScpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoJ3F1aWNrYm94X19uYXZpdGVtLS1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGluaXRUb2RheSgpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X190b2RheScpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWlja2JveF9fdG9kYXktbmF2XCI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJxdWlja2JveF9fdG9kYXktbmF2aXRlbSBxdWlja2JveF9fdG9kYXktbmF2aXRlbS0tcHJldi1kYXlcIiBocmVmPVwiI1wiPiZsdDs8L2E+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJxdWlja2JveF9fdG9kYXktbmF2aXRlbSBxdWlja2JveF9fdG9kYXktbmF2aXRlbS0tY3VyLWRheVwiIGhyZWY9XCIjXCI+JHtEYXRlcy5kYXRlRm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBEYXRlcy5nZXRBY3RpdmVEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgICdkLm0ueSdcbiAgICAgICAgICAgICAgICApfTwvYT5cbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cInF1aWNrYm94X190b2RheS1uYXZpdGVtIHF1aWNrYm94X190b2RheS1uYXZpdGVtLS1uZXh0LWRheVwiIGhyZWY9XCIjXCI+Jmd0OzwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwicXVpY2tib3hfX3RvZGF5LXRpY2tldHNcIj48L3VsPlxuICAgICAgICBgO1xuICAgICAgICBsZXQgdGlja2V0cyA9IGhscC5kZWVwQ29weShTdG9yZS5kYXRhLnRpY2tldHMpLFxuICAgICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICB0aWNrZXRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGxldCBzb3J0X2xpc3QgPSBbXG4gICAgICAgICAgICAgICAgICAgICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICdzY2hlZHVsZWQnLFxuICAgICAgICAgICAgICAgICAgICAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICAnaWRsZScsXG4gICAgICAgICAgICAgICAgICAgICdhbGxkYXknLFxuICAgICAgICAgICAgICAgICAgICAncm9hbWluZycsXG4gICAgICAgICAgICAgICAgICAgICdyZWN1cnJpbmcnLFxuICAgICAgICAgICAgICAgICAgICAnZG9uZScsXG4gICAgICAgICAgICAgICAgICAgICdiaWxsZWQnLFxuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgYV9wb3MgPSBJbmZpbml0eSxcbiAgICAgICAgICAgICAgICBiX3BvcyA9IEluZmluaXR5O1xuICAgICAgICAgICAgc29ydF9saXN0LmZvckVhY2goKHNvcnRfbGlzdF9fdmFsdWUsIHNvcnRfbGlzdF9fa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNvcnRfbGlzdF9fdmFsdWUgPT09IGEuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFfcG9zID0gc29ydF9saXN0X19rZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzb3J0X2xpc3RfX3ZhbHVlID09PSBiLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBiX3BvcyA9IHNvcnRfbGlzdF9fa2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFfcG9zIDwgYl9wb3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYV9wb3MgPiBiX3Bvcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgW3ZhbF9hLCB2YWxfYl0gb2YgW1xuICAgICAgICAgICAgICAgIGEuc3RhdHVzID09ICdyZWN1cnJpbmcnICYmIGIuc3RhdHVzID09ICdyZWN1cnJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gW2EuZGF0ZSwgYi5kYXRlXVxuICAgICAgICAgICAgICAgICAgICA6IFtEYXRlcy5nZXJtYW5EYXRlVGltZVRvRW5nbGlzaFN0cmluZyhhLmRhdGUpLCBEYXRlcy5nZXJtYW5EYXRlVGltZVRvRW5nbGlzaFN0cmluZyhiLmRhdGUpXSxcbiAgICAgICAgICAgICAgICBbYS5wcmlvcml0eSwgYi5wcmlvcml0eV0sXG4gICAgICAgICAgICAgICAgW2EucHJvamVjdCwgYi5wcm9qZWN0XSxcbiAgICAgICAgICAgICAgICAvL1thLmRlc2NyaXB0aW9uLCBiLmRlc2NyaXB0aW9uXSxcbiAgICAgICAgICAgICAgICBbYS5pZCwgYi5pZF0sXG4gICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbF9hIDwgdmFsX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmFsX2EgPiB2YWxfYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRpY2tldHMuZm9yRWFjaCgodGlja2V0c19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChbJ2RvbmUnLCAnYmlsbGVkJ10uaW5jbHVkZXModGlja2V0c19fdmFsdWUuc3RhdHVzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwYXJzZWRfdmFsdWVzID0gRGF0ZXMucGFyc2VEYXRlU3RyaW5nKHRpY2tldHNfX3ZhbHVlLmRhdGUsICd0aWNrZXRzJyk7XG4gICAgICAgICAgICBpZiAocGFyc2VkX3ZhbHVlcyAhPT0gZmFsc2UgJiYgcGFyc2VkX3ZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkX3ZhbHVlcy5mb3JFYWNoKChwYXJzZWRfdmFsdWVzX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX3RvZGF5LXRpY2tldHMnKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fdG9kYXktdGlja2V0XCIgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydmaXhlZCddLmluY2x1ZGVzKHRpY2tldHNfX3ZhbHVlLnN0YXR1cykgPyAnYm9yZGVyLWNvbG9yJyA6ICdib3JkZXItbGVmdC1jb2xvcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH06ICR7U2NoZWR1bGVyLmdldFN0b3JlUHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvcmRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldHNfX3ZhbHVlLnByb2plY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zcGFyZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgKX07ICR7WydmaXhlZCddLmluY2x1ZGVzKHRpY2tldHNfX3ZhbHVlLnN0YXR1cykgPyAnYm9yZGVyLXdpZHRoOiA1cmVtOycgOiAnJ31cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1aWNrYm94X190b2RheS10aWNrZXQtcHJvamVjdFwiPiR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZS5wcm9qZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH08c21hbGwgY2xhc3M9XCJxdWlja2JveF9fdG9kYXktdGlja2V0LXByb2plY3Qtc3RhdHVzXCI+WyR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUuc3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICB9XTwvc21hbGw+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWlja2JveF9fdG9kYXktdGlja2V0LWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUuc3RhdHVzID09PSAnZml4ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHBhcnNlZF92YWx1ZXNfX3ZhbHVlLm1pbnV0ZXNfbGVmdCA8IDggKiA2MFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICc8c3BhbiBjbGFzcz1cInF1aWNrYm94X190b2RheS10aWNrZXQtZGF0ZS1jb3VudGRvd25cIj4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGFyc2VkX3ZhbHVlc19fdmFsdWUubWludXRlc19sZWZ0IDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICfijJvijJvijJsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcGFyc2VkX3ZhbHVlc19fdmFsdWUubWludXRlc19sZWZ0IDwgOCAqIDYwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ+KMmycgKyBwYXJzZWRfdmFsdWVzX192YWx1ZS5taW51dGVzX2xlZnQgKyAnbWlu4oybJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBhcnNlZF92YWx1ZXNfX3ZhbHVlLm1pbnV0ZXNfbGVmdCA8IDggKiA2MCA/ICc8L3NwYW4+JyA6ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldHNfX3ZhbHVlLmRhdGUuaW5kZXhPZignICcpID4gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aWNrZXRzX192YWx1ZS5kYXRlLnNwbGl0KCcgJylbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aWNrZXRzX192YWx1ZS5kYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVpY2tib3hfX3RvZGF5LXRpY2tldC1kZXNjcmlwdGlvblwiPiR7aGxwLm5sMmJyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUuZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX25hdml0ZW1baHJlZj1cIiN0b2RheVwiXSAucXVpY2tib3hfX25hdml0ZW0tY291bnQnKS5pbm5lclRleHQgPSBjb3VudDtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZFRvZGF5KCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZWwgPSBlLnRhcmdldC5jbG9zZXN0KCcucXVpY2tib3hfX3RvZGF5LW5hdicpO1xuICAgICAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5xdWlja2JveF9fdG9kYXktbmF2aXRlbS0tcHJldi1kYXknKSkge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnNlc3Npb24uYWN0aXZlRGF5LnNldERhdGUoU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5nZXREYXRlKCkgLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5xdWlja2JveF9fdG9kYXktbmF2aXRlbS0tY3VyLWRheScpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuc2Vzc2lvbi5hY3RpdmVEYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnF1aWNrYm94X190b2RheS1uYXZpdGVtLS1uZXh0LWRheScpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuc2Vzc2lvbi5hY3RpdmVEYXkuc2V0RGF0ZShTdG9yZS5kYXRhLnNlc3Npb24uYWN0aXZlRGF5LmdldERhdGUoKSArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBRdWlja2JveC5pbml0VG9kYXkoKTtcbiAgICAgICAgICAgICAgICBTY2hlZHVsZXIuaW5pdFNjaGVkdWxlcigpO1xuICAgICAgICAgICAgICAgIEZpbHRlci5kb0ZpbHRlcigpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFobHAuaXNEZXNrdG9wKCkpIHtcbiAgICAgICAgICAgIFB1bGxUb1JlZnJlc2guaW5pdCh7XG4gICAgICAgICAgICAgICAgbWFpbkVsZW1lbnQ6ICcucXVpY2tib3hfX3RvZGF5JyxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRWxlbWVudDogJy5xdWlja2JveF9fdG9kYXknLFxuICAgICAgICAgICAgICAgIGNsYXNzUHJlZml4OiAncXVpY2tib3hfX3B1bGwtdG8tcmVmcmVzaC0tJyxcbiAgICAgICAgICAgICAgICBkaXN0VGhyZXNob2xkOiA4MCxcbiAgICAgICAgICAgICAgICBkaXN0TWF4OiAxNDAsXG4gICAgICAgICAgICAgICAgZGlzdElnbm9yZTogMTAsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUHVsbFRvUmVmcmVzaDogJ19zd2lwZSBkb3duIHRvIHJlZnJlc2gnLFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uc1JlbGVhc2VUb1JlZnJlc2g6ICdfcmVsZWFzZSB0byByZWZyZXNoJyxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNSZWZyZXNoaW5nOiAnX3JlZnJlc2hpbmcnLFxuICAgICAgICAgICAgICAgIHNob3VsZFB1bGxUb1JlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbkVsZW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X190b2RheS10aWNrZXRzJykgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLm1haW5FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fdG9kYXktdGlja2V0cycpLnNjcm9sbFRvcFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25SZWZyZXNoKCkge1xuICAgICAgICAgICAgICAgICAgICBUaWNrZXRzLmZldGNoQW5kUmVuZGVyVGlja2V0c0FuZFVwZGF0ZUFwcCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBpbml0TmV3KCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX25ldycpLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxmb3JtIGNsYXNzPVwicXVpY2tib3hfX25ldy1mb3JtXCI+XG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dHJvd3NcIj5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dHJvdyBxdWlja2JveF9fbmV3LWlucHV0cm93LS0xLzRcIj48bGFiZWwgY2xhc3M9XCJxdWlja2JveF9fbmV3LWxhYmVsXCI+PGlucHV0IGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dCBxdWlja2JveF9fbmV3LWlucHV0LS1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJkYXRlXCIgdmFsdWU9XCJ0b25pZ2h0XCIgY2hlY2tlZCAvPjxzcGFuIGNsYXNzPVwicXVpY2tib3hfX25ldy1sYWJlbC10ZXh0XCI+dG9uaWdodDwvc3Bhbj48L2xhYmVsPjwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInF1aWNrYm94X19uZXctaW5wdXRyb3cgcXVpY2tib3hfX25ldy1pbnB1dHJvdy0tMS80XCI+PGxhYmVsIGNsYXNzPVwicXVpY2tib3hfX25ldy1sYWJlbFwiPjxpbnB1dCBjbGFzcz1cInF1aWNrYm94X19uZXctaW5wdXQgcXVpY2tib3hfX25ldy1pbnB1dC0tcmFkaW9cIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwiZGF0ZVwiIHZhbHVlPVwid2Vla2VuZFwiIC8+PHNwYW4gY2xhc3M9XCJxdWlja2JveF9fbmV3LWxhYmVsLXRleHRcIj53ZWVrZW5kPC9zcGFuPjwvbGFiZWw+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dHJvdyBxdWlja2JveF9fbmV3LWlucHV0cm93LS0xLzRcIj48bGFiZWwgY2xhc3M9XCJxdWlja2JveF9fbmV3LWxhYmVsXCI+PGlucHV0IGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dCBxdWlja2JveF9fbmV3LWlucHV0LS1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJkYXRlXCIgdmFsdWU9XCJuZXh0XCIgLz48c3BhbiBjbGFzcz1cInF1aWNrYm94X19uZXctbGFiZWwtdGV4dFwiPm5leHQ8L3NwYW4+PC9sYWJlbD48L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fbmV3LWlucHV0cm93IHF1aWNrYm94X19uZXctaW5wdXRyb3ctLTEvNFwiPjxpbnB1dCBjbGFzcz1cInF1aWNrYm94X19uZXctaW5wdXQgcXVpY2tib3hfX25ldy1pbnB1dC0tdGV4dFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImRhdGVcIiBwbGFjZWhvbGRlcj1cImRhdGVcIiB2YWx1ZT1cIlwiIC8+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dHJvd1wiPjxpbnB1dCBjbGFzcz1cInF1aWNrYm94X19uZXctaW5wdXQgcXVpY2tib3hfX25ldy1pbnB1dC0tdGV4dFwiIHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiIG5hbWU9XCJwcm9qZWN0XCIgcGxhY2Vob2xkZXI9XCJwcm9qZWN0XCIgdmFsdWU9XCJwcml2YXRlXCIgLz48L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJxdWlja2JveF9fbmV3LWlucHV0cm93IHF1aWNrYm94X19uZXctaW5wdXRyb3ctLXJoZWlnaHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicXVpY2tib3hfX25ldy1pbnB1dCBxdWlja2JveF9fbmV3LWlucHV0LS10ZXh0YXJlYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2NvcnJlY3Q9XCJvZmZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9jYXBpdGFsaXplPVwib2ZmXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbGNoZWNrPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPVwicmVxdWlyZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJkZXNjcmlwdGlvblwiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInF1aWNrYm94X19uZXctaW5wdXRyb3dcIj48aW5wdXQgY2xhc3M9XCJxdWlja2JveF9fbmV3LXN1Ym1pdFwiIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIl9jcmVhdGVcIiAvPjwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZE5ldygpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19uZXctZm9ybSBbbmFtZT1cImRhdGVcIl1bdHlwZT1cInRleHRcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgIT0gJycgJiZcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX25ldy1mb3JtIFtuYW1lPVwiZGF0ZVwiXVt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcpICE9PSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX25ldy1mb3JtIFtuYW1lPVwiZGF0ZVwiXVt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcpLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWlja2JveF9fbmV3LWZvcm0gW25hbWU9XCJkYXRlXCJdW3R5cGU9XCJyYWRpb1wiXScpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmV3LWZvcm0gW25hbWU9XCJkYXRlXCJdW3R5cGU9XCJ0ZXh0XCJdJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmV3LWZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgVGlja2V0cy5jcmVhdGVBbmRBcHBlbmRUaWNrZXQoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOlxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19uZXctZm9ybSBbdHlwZT1cInJhZGlvXCJdW25hbWU9XCJkYXRlXCJdOmNoZWNrZWQnKSAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19uZXctZm9ybSBbdHlwZT1cInJhZGlvXCJdW25hbWU9XCJkYXRlXCJdOmNoZWNrZWQnKS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19uZXctZm9ybSBbdHlwZT1cInRleHRcIl1bbmFtZT1cImRhdGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmV3LWZvcm0gW25hbWU9XCJkZXNjcmlwdGlvblwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogJ0EnLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVpY2tib3hfX25ldy1mb3JtIFtuYW1lPVwicHJvamVjdFwiXScpLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdzY2hlZHVsZWQnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiAnMCw1MCcsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlja2JveF9fbmV3LWZvcm0nKS5yZXNldCgpO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrYm94X19uYXZpdGVtW2hyZWY9XCIjdG9kYXlcIl0nKS5jbGljaygpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RvcmUgZnJvbSAnLi9TdG9yZSc7XG5pbXBvcnQgRGF0ZXMgZnJvbSAnLi9EYXRlcyc7XG5pbXBvcnQgRmlsdGVyIGZyb20gJy4vRmlsdGVyJztcbmltcG9ydCBobHAgZnJvbSAnaGxwJztcbmltcG9ydCBRdWlja2JveCBmcm9tICcuL1F1aWNrYm94JztcbmltcG9ydCBXZWF0aGVyIGZyb20gJy4vV2VhdGhlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjaGVkdWxlciB7XG4gICAgc3RhdGljIGluaXRTY2hlZHVsZXIoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZXInKS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2NoZWR1bGVyX19uYXZpZ2F0aW9uXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzY2hlZHVsZXJfX25hdmlnYXRpb24td2Vla1wiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwic2NoZWR1bGVyX19uYXZpZ2F0aW9uLWJ1dHRvbiBzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS1uZXh0LW1vbnRoXCIgdGl0bGU9XCJfbmV4dF9tb250aFwiPiZndDsmZ3Q7Jmd0OzwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwic2NoZWR1bGVyX19uYXZpZ2F0aW9uLWJ1dHRvbiBzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS1uZXh0LXdlZWtcIiB0aXRsZT1cIl9uZXh0X3dlZWtcIj4mZ3Q7Jmd0OzwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwic2NoZWR1bGVyX19uYXZpZ2F0aW9uLWJ1dHRvbiBzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS1uZXh0LWRheVwiIHRpdGxlPVwiX25leHRfZGF5XCI+Jmd0OzwvYT5cbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwic2NoZWR1bGVyX19uYXZpZ2F0aW9uLWJ1dHRvbiBzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS10b2RheVwiIHRpdGxlPVwiX25leHRfdG9kYXlcIj5fPC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uIHNjaGVkdWxlcl9fbmF2aWdhdGlvbi1idXR0b24tLXByZXYtZGF5XCIgdGl0bGU9XCJfcHJldl9kYXlcIj4mbHQ7PC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uIHNjaGVkdWxlcl9fbmF2aWdhdGlvbi1idXR0b24tLXByZXYtd2Vla1wiIHRpdGxlPVwiX3ByZXZfd2Vla1wiPiZsdDsmbHQ7PC9hPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uIHNjaGVkdWxlcl9fbmF2aWdhdGlvbi1idXR0b24tLXByZXYtbW9udGhcIiB0aXRsZT1cIl9wcmV2X21vbnRoXCI+Jmx0OyZsdDsmbHQ7PC9hPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInNjaGVkdWxlcl9fdGFibGVcIj5cbiAgICAgICAgICAgICAgICA8dGhlYWQgY2xhc3M9XCJzY2hlZHVsZXJfX3RhYmxlLWhlYWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic2NoZWR1bGVyX19yb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInNjaGVkdWxlcl9fY2VsbFwiPjwvdGQ+ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAke0FycmF5KDcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXRlbSwgaSkgPT4gYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZXJfX2NlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVzLnNhbWVEYXkoRGF0ZXMuZ2V0RGF5T2ZBY3RpdmVXZWVrKGkgKyAxKSwgRGF0ZXMuZ2V0Q3VycmVudERhdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1jdXJkYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlcy5zYW1lRGF5KERhdGVzLmdldERheU9mQWN0aXZlV2VlayhpICsgMSksIERhdGVzLmdldEFjdGl2ZURhdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1hY3RpdmVkYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7RGF0ZXMuZGF0ZUZvcm1hdChEYXRlcy5nZXREYXlPZkFjdGl2ZVdlZWsoaSArIDEpLCAnRCBkLm0uJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzY2hlZHVsZXJfX3Jvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic2NoZWR1bGVyX19jZWxsXCI+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7QXJyYXkoNylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbigwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpdGVtLCBpKSA9PiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZXJfX2NlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlcy5zYW1lRGF5KERhdGVzLmdldERheU9mQWN0aXZlV2VlayhpICsgMSksIERhdGVzLmdldEN1cnJlbnREYXRlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1jdXJkYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVzLnNhbWVEYXkoRGF0ZXMuZ2V0RGF5T2ZBY3RpdmVXZWVrKGkgKyAxKSwgRGF0ZXMuZ2V0QWN0aXZlRGF0ZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHNjaGVkdWxlcl9fY2VsbC0tYWN0aXZlZGF5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7V2VhdGhlci5vdXRwdXRXZWF0aGVyKERhdGVzLmdldERheU9mQWN0aXZlV2VlayhpICsgMSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHkgY2xhc3M9XCJzY2hlZHVsZXJfX3RhYmxlLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic2NoZWR1bGVyX19yb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInNjaGVkdWxlcl9fY2VsbFwiPjwvdGQ+ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAke0FycmF5KDcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXRlbSwgaSkgPT4gYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZXJfX2NlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVzLnNhbWVEYXkoRGF0ZXMuZ2V0RGF5T2ZBY3RpdmVXZWVrKGkgKyAxKSwgRGF0ZXMuZ2V0Q3VycmVudERhdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1jdXJkYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlcy5zYW1lRGF5KERhdGVzLmdldERheU9mQWN0aXZlV2VlayhpICsgMSksIERhdGVzLmdldEFjdGl2ZURhdGUoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1hY3RpdmVkYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAke0FycmF5KDE1KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoaXRlbSwgaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBqICsgOTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInNjaGVkdWxlcl9fcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInNjaGVkdWxlcl9fY2VsbFwiPiR7KCcwJyArIGopLnNsaWNlKC0yKX0mbmRhc2g7JHsoJzAnICsgKGogKyAxKSkuc2xpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke0FycmF5KDcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbigwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpdGVtLCBpKSA9PiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZXJfX2NlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlcy5zYW1lRGF5KERhdGVzLmdldERheU9mQWN0aXZlV2VlayhpICsgMSksIERhdGVzLmdldEN1cnJlbnREYXRlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1jdXJkYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVzLnNhbWVEYXkoRGF0ZXMuZ2V0RGF5T2ZBY3RpdmVXZWVrKGkgKyAxKSwgRGF0ZXMuZ2V0QWN0aXZlRGF0ZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHNjaGVkdWxlcl9fY2VsbC0tYWN0aXZlZGF5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpIDwgNSAmJiAoKGogPj0gOSAmJiBqIDwgMTMpIHx8IChqID49IDE0ICYmIGogPCAxOCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2NoZWR1bGVyX19jZWxsLS1tYWluJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjaGVkdWxlcl9fYXBwb2ludG1lbnRzXCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBsZXQgZ2VuZXJhdGVkRGF0ZXMgPSBTY2hlZHVsZXIuZ2VuZXJhdGVEYXRlcygpO1xuXG4gICAgICAgIGxldCB3ZWVrbHlTdW0gPSAwO1xuXG4gICAgICAgIGdlbmVyYXRlZERhdGVzLmZvckVhY2goKGRhdGVfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVyX19hcHBvaW50bWVudHMnKS5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2NoZWR1bGVyX19hcHBvaW50bWVudFwiIHRpdGxlPVwiJHtkYXRlX192YWx1ZS50aXRsZX1cIiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDoke2RhdGVfX3ZhbHVlLnBvc0xlZnR9JTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDoke2RhdGVfX3ZhbHVlLnBvc1RvcH0lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiR7ZGF0ZV9fdmFsdWUucG9zQm90dG9tfSU7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiR7ZGF0ZV9fdmFsdWUuYmFja2dyb3VuZH07XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiR7ZGF0ZV9fdmFsdWUub3BhY2l0eX07XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDoke2RhdGVfX3ZhbHVlLndpZHRofTtcbiAgICAgICAgICAgICAgICAgICAgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke2RhdGVfX3ZhbHVlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZGF0ZV9fdmFsdWUudGltZSAhPSAnJyAmJiBkYXRlX192YWx1ZS5wcm9qZWN0ICE9PSAnT2xnYScpIHtcbiAgICAgICAgICAgICAgICB3ZWVrbHlTdW0gKz0gZGF0ZV9fdmFsdWUudGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdlZWtseVN1bSA9IChNYXRoLnJvdW5kKHdlZWtseVN1bSAqIDEwMCkgLyAxMDApLnRvU3RyaW5nKCkucmVwbGFjZSgnLicsICcsJyk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlcl9fbmF2aWdhdGlvbi13ZWVrJykuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgJHtEYXRlcy5kYXRlRm9ybWF0KERhdGVzLmdldERheU9mQWN0aXZlV2VlaygxKSwgJ2QubS4nKX0gJm5kYXNoOyAke0RhdGVzLmRhdGVGb3JtYXQoXG4gICAgICAgICAgICBEYXRlcy5nZXREYXlPZkFjdGl2ZVdlZWsoNyksXG4gICAgICAgICAgICAnZC5tLlknXG4gICAgICAgICl9IC8vLyBfa3cgJHtEYXRlcy53ZWVrTnVtYmVyKERhdGVzLmdldERheU9mQWN0aXZlV2VlaygxKSl9IC8vLyAke3dlZWtseVN1bX0gaG91cnNcbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZFNjaGVkdWxlcigpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuc2NoZWR1bGVyX19uYXZpZ2F0aW9uLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5zY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS10b2RheScpKSB7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuc2Vzc2lvbi5hY3RpdmVEYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnNjaGVkdWxlcl9fbmF2aWdhdGlvbi1idXR0b24tLXByZXYtZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5zZXREYXRlKFN0b3JlLmRhdGEuc2Vzc2lvbi5hY3RpdmVEYXkuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuc2NoZWR1bGVyX19uYXZpZ2F0aW9uLWJ1dHRvbi0tbmV4dC1kYXknKSkge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnNlc3Npb24uYWN0aXZlRGF5LnNldERhdGUoU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5nZXREYXRlKCkgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5zY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS1wcmV2LXdlZWsnKSkge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnNlc3Npb24uYWN0aXZlRGF5LnNldERhdGUoU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5nZXREYXRlKCkgLSA3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5zY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS1uZXh0LXdlZWsnKSkge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnNlc3Npb24uYWN0aXZlRGF5LnNldERhdGUoU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5nZXREYXRlKCkgKyA3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5zY2hlZHVsZXJfX25hdmlnYXRpb24tYnV0dG9uLS1wcmV2LW1vbnRoJykpIHtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5zZXREYXRlKFN0b3JlLmRhdGEuc2Vzc2lvbi5hY3RpdmVEYXkuZ2V0RGF0ZSgpIC0gMjgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnNjaGVkdWxlcl9fbmF2aWdhdGlvbi1idXR0b24tLW5leHQtbW9udGgnKSkge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnNlc3Npb24uYWN0aXZlRGF5LnNldERhdGUoU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheS5nZXREYXRlKCkgKyAyOCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19zZWxlY3QtLWZpbHRlcltuYW1lPVwiZGF0ZVwiXScpLnZhbHVlID0gRGF0ZXMuZGF0ZUZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5zZXNzaW9uLmFjdGl2ZURheSxcbiAgICAgICAgICAgICAgICAgICAgJ1ktbS1kJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgU2NoZWR1bGVyLmluaXRTY2hlZHVsZXIoKTtcbiAgICAgICAgICAgICAgICBRdWlja2JveC5pbml0VG9kYXkoKTtcbiAgICAgICAgICAgICAgICBGaWx0ZXIuZG9GaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZW5lcmF0ZURhdGVzKCkge1xuICAgICAgICBsZXQgZ2VuZXJhdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgU3RvcmUuZGF0YS50aWNrZXRzLmZvckVhY2goKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHRpY2tldHNfX3ZhbHVlLnByb2plY3QsXG4gICAgICAgICAgICAgICAgdGl0bGUgPSBobHAuaHRtbEVuY29kZShcbiAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUucHJvamVjdCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnXFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAodGlja2V0c19fdmFsdWUuZGVzY3JpcHRpb24gfHwgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGkpID0+IGhscC50cnVuY2F0ZV9zdHJpbmcoaSwgMTAwKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignXFxuJylcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHByb2plY3QgPSB0aWNrZXRzX192YWx1ZS5wcm9qZWN0LFxuICAgICAgICAgICAgICAgIHBhcnNlZF92YWx1ZXMgPSBEYXRlcy5wYXJzZURhdGVTdHJpbmcodGlja2V0c19fdmFsdWUuZGF0ZSwgJ3NjaGVkdWxlcicpO1xuICAgICAgICAgICAgbGV0IGJhY2tncm91bmQgPVxuICAgICAgICAgICAgICAgIFNjaGVkdWxlci5nZXRTdG9yZVByb3BlcnR5KCdiYWNrZ3JvdW5kJywgdGlja2V0c19fdmFsdWUuc3RhdHVzLCB0aWNrZXRzX192YWx1ZS5wcm9qZWN0LCBudWxsKSB8fFxuICAgICAgICAgICAgICAgIFNjaGVkdWxlci5nZXRTdG9yZVByb3BlcnR5KCdib3JkZXInLCB0aWNrZXRzX192YWx1ZS5zdGF0dXMsIHRpY2tldHNfX3ZhbHVlLnByb2plY3QsICcjOUU5RTlFJyk7XG4gICAgICAgICAgICBpZiAocGFyc2VkX3ZhbHVlcyAhPT0gZmFsc2UgJiYgcGFyc2VkX3ZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkX3ZhbHVlcy5mb3JFYWNoKChwYXJzZWRfdmFsdWVzX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWREYXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogcGFyc2VkX3ZhbHVlc19fdmFsdWUuZGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IHBhcnNlZF92YWx1ZXNfX3ZhbHVlLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBwYXJzZWRfdmFsdWVzX192YWx1ZS5lbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHBhcnNlZF92YWx1ZXNfX3ZhbHVlLnRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBiYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogU2NoZWR1bGVyLmdldFN0b3JlUHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldHNfX3ZhbHVlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZS5wcm9qZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiB2aXN1YWwgY29tcHJlc3Npb24gb2YgYWxsIGRheSBldmVudHMgKi9cbiAgICAgICAgbGV0IGdlbmVyYXRlZERhdGVzVW5kZWZpbmVkTWF4ID0gW10sXG4gICAgICAgICAgICBnZW5lcmF0ZWREYXRlc1VuZGVmaW5lZEN1ciA9IFtdO1xuICAgICAgICBnZW5lcmF0ZWREYXRlcy5mb3JFYWNoKChnZW5lcmF0ZWREYXRlc19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0ZWREYXRlc19fdmFsdWUuYmVnaW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShnZW5lcmF0ZWREYXRlc19fdmFsdWUuZGF5IGluIGdlbmVyYXRlZERhdGVzVW5kZWZpbmVkTWF4KSkge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWREYXRlc1VuZGVmaW5lZE1heFtnZW5lcmF0ZWREYXRlc19fdmFsdWUuZGF5XSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKGdlbmVyYXRlZERhdGVzX192YWx1ZS5kYXkgaW4gZ2VuZXJhdGVkRGF0ZXNVbmRlZmluZWRDdXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlZERhdGVzVW5kZWZpbmVkQ3VyW2dlbmVyYXRlZERhdGVzX192YWx1ZS5kYXldID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkRGF0ZXNVbmRlZmluZWRNYXhbZ2VuZXJhdGVkRGF0ZXNfX3ZhbHVlLmRheV0rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogdmlzdWFsIGNvbXByZXNzaW9uIG9mIGNvbmZsaWN0aW5nIGV2ZW50cyAqL1xuICAgICAgICBsZXQgY29uZmxpY3RzID0ge307XG4gICAgICAgIGdlbmVyYXRlZERhdGVzLmZvckVhY2goKGd2MSwgZ2sxKSA9PiB7XG4gICAgICAgICAgICBpZiAoZ3YxLmJlZ2luID09PSBudWxsIHx8IGd2MS5lbmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZW5lcmF0ZWREYXRlcy5mb3JFYWNoKChndjIsIGdrMikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChnazEgPT09IGdrMikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChndjIuZGF5ICE9PSBndjEuZGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGd2Mi5iZWdpbiA9PT0gbnVsbCB8fCBndjIuZW5kID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGd2Mi5iZWdpbiA8IGd2MS5iZWdpbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgnY29uZmxpY3QnIGluIGd2MiAmJiAnY29uZmxpY3QnIGluIGd2MSAmJiBndjIuY29uZmxpY3QgPT09IGd2MS5jb25mbGljdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChndjIuYmVnaW4gPCBndjEuZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgnY29uZmxpY3QnIGluIGd2MSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbmZsaWN0SWQgPSBndjEuY29uZmxpY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBndjIuY29uZmxpY3QgPSBjb25mbGljdElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoY29uZmxpY3RJZCBpbiBjb25mbGljdHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RzW2NvbmZsaWN0SWRdID0geyBjb3VudDogMCwgcGFpbnRlZDogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RzW2NvbmZsaWN0SWRdLmNvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ2NvbmZsaWN0JyBpbiBndjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25mbGljdElkID0gZ3YyLmNvbmZsaWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3YxLmNvbmZsaWN0ID0gY29uZmxpY3RJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGNvbmZsaWN0SWQgaW4gY29uZmxpY3RzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0c1tjb25mbGljdElkXSA9IHsgY291bnQ6IDAsIHBhaW50ZWQ6IDAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0c1tjb25mbGljdElkXS5jb3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbmZsaWN0SWQgPSBobHAucHVzaElkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBndjEuY29uZmxpY3QgPSBjb25mbGljdElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3YyLmNvbmZsaWN0ID0gY29uZmxpY3RJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGNvbmZsaWN0SWQgaW4gY29uZmxpY3RzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0c1tjb25mbGljdElkXSA9IHsgY291bnQ6IDAsIHBhaW50ZWQ6IDAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0c1tjb25mbGljdElkXS5jb3VudCArPSAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIGZpbmFsaXplICovXG4gICAgICAgIGdlbmVyYXRlZERhdGVzLmZvckVhY2goKGRhdGVfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcG9zVG9wLCBwb3NCb3R0b207XG4gICAgICAgICAgICBpZiAoZGF0ZV9fdmFsdWUuYmVnaW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwb3NUb3AgPVxuICAgICAgICAgICAgICAgICAgICAoZ2VuZXJhdGVkRGF0ZXNVbmRlZmluZWRDdXJbZGF0ZV9fdmFsdWUuZGF5XSAvIGdlbmVyYXRlZERhdGVzVW5kZWZpbmVkTWF4W2RhdGVfX3ZhbHVlLmRheV0pICogNi4yNTtcbiAgICAgICAgICAgICAgICBwb3NCb3R0b20gPVxuICAgICAgICAgICAgICAgICAgICAxMDAgLVxuICAgICAgICAgICAgICAgICAgICAoKGdlbmVyYXRlZERhdGVzVW5kZWZpbmVkQ3VyW2RhdGVfX3ZhbHVlLmRheV0gKyAxKSAvIGdlbmVyYXRlZERhdGVzVW5kZWZpbmVkTWF4W2RhdGVfX3ZhbHVlLmRheV0pICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDYuMjU7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkRGF0ZXNVbmRlZmluZWRDdXJbZGF0ZV9fdmFsdWUuZGF5XSsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3NUb3AgPSA2LjI1ICogKGRhdGVfX3ZhbHVlLmJlZ2luIC0gOCk7XG4gICAgICAgICAgICAgICAgcG9zQm90dG9tID0gMTAwIC0gNi4yNSAqIChkYXRlX192YWx1ZS5lbmQgLSA4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHdpZHRoLCBwb3NMZWZ0O1xuICAgICAgICAgICAgaWYgKCEoJ2NvbmZsaWN0JyBpbiBkYXRlX192YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9ICdjYWxjKDEyLjUlIC0gNHJlbSknO1xuICAgICAgICAgICAgICAgIHBvc0xlZnQgPSAxMi41ICogZGF0ZV9fdmFsdWUuZGF5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9ICdjYWxjKCcgKyAxMi41IC8gY29uZmxpY3RzW2RhdGVfX3ZhbHVlLmNvbmZsaWN0XS5jb3VudCArICclIC0gNHJlbSknO1xuICAgICAgICAgICAgICAgIHBvc0xlZnQgPVxuICAgICAgICAgICAgICAgICAgICAxMi41ICogZGF0ZV9fdmFsdWUuZGF5ICtcbiAgICAgICAgICAgICAgICAgICAgKDEyLjUgLyBjb25mbGljdHNbZGF0ZV9fdmFsdWUuY29uZmxpY3RdLmNvdW50KSAqIGNvbmZsaWN0c1tkYXRlX192YWx1ZS5jb25mbGljdF0ucGFpbnRlZDtcbiAgICAgICAgICAgICAgICBjb25mbGljdHNbZGF0ZV9fdmFsdWUuY29uZmxpY3RdLnBhaW50ZWQrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGF0ZV9fdmFsdWUucG9zTGVmdCA9IHBvc0xlZnQ7XG4gICAgICAgICAgICBkYXRlX192YWx1ZS5wb3NUb3AgPSBwb3NUb3A7XG4gICAgICAgICAgICBkYXRlX192YWx1ZS5wb3NCb3R0b20gPSBwb3NCb3R0b207XG4gICAgICAgICAgICBkYXRlX192YWx1ZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVkRGF0ZXM7XG4gICAgfVxuXG4gICAgc3RhdGljIGRldGVybWluZU5leHRGcmVlU2xvdChzdHIpIHtcbiAgICAgICAgbGV0IGQgPSBEYXRlcy5wYXJzZURhdGVTdHJpbmcoc3RyLCAnc2NoZWR1bGVyJylbMF0sXG4gICAgICAgICAgICBkYXRlcyA9IFtdO1xuICAgICAgICBTdG9yZS5kYXRhLnRpY2tldHMuZm9yRWFjaCgodGlja2V0c19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGxldCBwYXJzZWRfdmFsdWVzID0gRGF0ZXMucGFyc2VEYXRlU3RyaW5nKHRpY2tldHNfX3ZhbHVlLmRhdGUsICdzY2hlZHVsZXInKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWRfdmFsdWVzICE9PSBmYWxzZSAmJiBwYXJzZWRfdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRfdmFsdWVzLmZvckVhY2goKHBhcnNlZF92YWx1ZXNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogcGFyc2VkX3ZhbHVlc19fdmFsdWUuZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBwYXJzZWRfdmFsdWVzX192YWx1ZS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogcGFyc2VkX3ZhbHVlc19fdmFsdWUuZW5kLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjb25mbGljdCA9IHRydWU7XG4gICAgICAgIHdoaWxlIChjb25mbGljdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uZmxpY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIGRhdGVzLmZvckVhY2goKGRhdGVzX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkYXRlc19fdmFsdWUuYmVnaW4gPT09IG51bGwgfHwgZGF0ZXNfX3ZhbHVlLmVuZCA9PT0gbnVsbCB8fCBkLmJlZ2luID09PSBudWxsIHx8IGQuZW5kID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKERhdGVzLmNvbXBhcmVEYXRlcyhkLmRhdGUsIGRhdGVzX192YWx1ZS5kYXRlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkLmVuZCA8PSBkYXRlc19fdmFsdWUuYmVnaW4gfHwgZGF0ZXNfX3ZhbHVlLmVuZCA8PSBkLmJlZ2luKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZC5iZWdpbiArPSAwLjU7XG4gICAgICAgICAgICAgICAgZC5lbmQgKz0gMC41O1xuICAgICAgICAgICAgICAgIGlmIChkLmJlZ2luID49IDIxKSB7XG4gICAgICAgICAgICAgICAgICAgIGQuZGF0ZS5zZXREYXRlKGQuZGF0ZS5nZXREYXRlKCkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgZC5kYXRlLnNldEhvdXJzKDkpO1xuICAgICAgICAgICAgICAgICAgICBkLmJlZ2luID0gOTtcbiAgICAgICAgICAgICAgICAgICAgZC5lbmQgPSA5LjU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbmZsaWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBEYXRlcy5kYXRlRm9ybWF0KGQuZGF0ZSwgJ2QubS55JykgKyAnICcgKyBEYXRlcy50aW1lRm9ybWF0KGQuYmVnaW4pICsgJy0nICsgRGF0ZXMudGltZUZvcm1hdChkLmVuZCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFN0b3JlUHJvcGVydHkocHJvcGVydHksIHN0YXR1cywgcHJvamVjdCA9IG51bGwsIGRlZlZhbHVlID0gbnVsbCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwcm9qZWN0ICE9PSBudWxsICYmXG4gICAgICAgICAgICBwcm9qZWN0ICE9PSAnJyAmJlxuICAgICAgICAgICAgU3RvcmUuZGF0YS5jb2xvcnMucHJvamVjdC5oYXNPd25Qcm9wZXJ0eShwcm9qZWN0KSAmJlxuICAgICAgICAgICAgdHlwZW9mIFN0b3JlLmRhdGEuY29sb3JzLnByb2plY3RbcHJvamVjdF0gPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBwcm9wZXJ0eSBpbiBTdG9yZS5kYXRhLmNvbG9ycy5wcm9qZWN0W3Byb2plY3RdXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIFN0b3JlLmRhdGEuY29sb3JzLnByb2plY3RbcHJvamVjdF1bcHJvcGVydHldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHN0YXR1cyAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgc3RhdHVzICE9PSAnJyAmJlxuICAgICAgICAgICAgU3RvcmUuZGF0YS5jb2xvcnMuc3RhdHVzLmhhc093blByb3BlcnR5KHN0YXR1cykgJiZcbiAgICAgICAgICAgIHR5cGVvZiBTdG9yZS5kYXRhLmNvbG9ycy5zdGF0dXNbc3RhdHVzXSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHByb3BlcnR5IGluIFN0b3JlLmRhdGEuY29sb3JzLnN0YXR1c1tzdGF0dXNdXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIFN0b3JlLmRhdGEuY29sb3JzLnN0YXR1c1tzdGF0dXNdW3Byb3BlcnR5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmVmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIHVwZGF0ZUNvbG9ycygpIHtcbiAgICAgICAgU3RvcmUuZGF0YS50aWNrZXRzLmZvckVhY2goKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGlja2V0c19fdmFsdWUudmlzaWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGxldCBib3JkZXJDb2xvciA9IFNjaGVkdWxlci5nZXRTdG9yZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JvcmRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZS5wcm9qZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgJyM5RTlFOUUnXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IFNjaGVkdWxlci5nZXRTdG9yZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUucHJvamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eSA9IFNjaGVkdWxlci5nZXRTdG9yZVByb3BlcnR5KCdvcGFjaXR5JywgdGlja2V0c19fdmFsdWUuc3RhdHVzLCB0aWNrZXRzX192YWx1ZS5wcm9qZWN0LCAxKSxcbiAgICAgICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGlja2V0cyAudGlja2V0c19fZW50cnlbZGF0YS1pZD1cIicgKyB0aWNrZXRzX192YWx1ZS5pZCArICdcIl0nKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9yZGVyQ29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gYm9yZGVyQ29sb3I7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0b3JlIGZyb20gJy4vU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTb3J0IHtcbiAgICBzdGF0aWMgaW5pdFNvcnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyJykuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnPGRpdiBjbGFzcz1cIm1ldGFiYXJfX3NvcnRcIj48L2Rpdj4nKTtcbiAgICAgICAgWzEsIDJdLmZvckVhY2goKHN0ZXApID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19zb3J0JylcbiAgICAgICAgICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgJzxzZWxlY3QgY2xhc3M9XCJtZXRhYmFyX19zZWxlY3QgbWV0YWJhcl9fc2VsZWN0LS1zb3J0XCIgbmFtZT1cInNvcnRfJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdcIj48b3B0aW9uIHZhbHVlPVwiXCI+c29ydCAjJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L29wdGlvbj48L3NlbGVjdD4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFN0b3JlLmRhdGEuY29scy5mb3JFYWNoKChjb2x1bW5zX192YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcubWV0YWJhcl9fc2VsZWN0LS1zb3J0W25hbWU9XCJzb3J0XycgKyBzdGVwICsgJ1wiXScpXG4gICAgICAgICAgICAgICAgICAgIC5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiJyArIGNvbHVtbnNfX3ZhbHVlICsgJ1wiPicgKyBjb2x1bW5zX192YWx1ZSArICc8L29wdGlvbj4nXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1ldGFiYXInKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5tZXRhYmFyX19zZWxlY3QtLXNvcnQnKSkge1xuICAgICAgICAgICAgICAgIFNvcnQuZG9Tb3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBkb1NvcnQoKSB7XG4gICAgICAgIGxldCBzb3J0XzEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWV0YWJhcl9fc2VsZWN0LS1zb3J0W25hbWU9XCJzb3J0XzFcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgIHNvcnRfMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXRhYmFyX19zZWxlY3QtLXNvcnRbbmFtZT1cInNvcnRfMlwiXScpLnZhbHVlLFxuICAgICAgICAgICAgc29ydGVkID0gW1xuICAgICAgICAgICAgICAgIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzIC50aWNrZXRzX190YWJsZS1ib2R5JykucXVlcnlTZWxlY3RvckFsbCgnLnRpY2tldHNfX2VudHJ5LS12aXNpYmxlJyksXG4gICAgICAgICAgICBdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsX2EsIHZhbF9iO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRfMSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICB2YWxfYSA9IGEucXVlcnlTZWxlY3RvcignW25hbWU9XCInICsgc29ydF8xICsgJ1wiXScpLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhbF9iID0gYi5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cIicgKyBzb3J0XzEgKyAnXCJdJykudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRfMSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxfYSA9IERhdGVzLmdlcm1hbkRhdGVUaW1lVG9FbmdsaXNoU3RyaW5nKHZhbF9hKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbF9iID0gRGF0ZXMuZ2VybWFuRGF0ZVRpbWVUb0VuZ2xpc2hTdHJpbmcodmFsX2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxfYSA8IHZhbF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbF9hID4gdmFsX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRfMSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB2YWxfYSA9IGEucXVlcnlTZWxlY3RvcignW25hbWU9XCJzdGF0dXNcIl0nKS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFsX2IgPSBiLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwic3RhdHVzXCJdJykudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxfYSAhPSB2YWxfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3RhdHVzX192YWx1ZSBvZiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FsbGRheScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JpbGxlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RvbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3JraW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzY2hlZHVsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVjdXJyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncm9hbWluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbF9hID09PSBzdGF0dXNfX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbF9iID09PSBzdGF0dXNfX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzb3J0XzIgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsX2EgPSBhLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiJyArIHNvcnRfMiArICdcIl0nKS52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YWxfYiA9IGIucXVlcnlTZWxlY3RvcignW25hbWU9XCInICsgc29ydF8yICsgJ1wiXScpLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxfYSA8IHZhbF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbF9hID4gdmFsX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgW3ZhbF9hLCB2YWxfYl0gb2YgW1xuICAgICAgICAgICAgICAgICAgICBhLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwic3RhdHVzXCJdJykudmFsdWUgPT0gJ3JlY3VycmluZycgJiZcbiAgICAgICAgICAgICAgICAgICAgYi5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cInN0YXR1c1wiXScpLnZhbHVlID09ICdyZWN1cnJpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFthLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiZGF0ZVwiXScpLnZhbHVlLCBiLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiZGF0ZVwiXScpLnZhbHVlXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlcy5nZXJtYW5EYXRlVGltZVRvRW5nbGlzaFN0cmluZyhhLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiZGF0ZVwiXScpLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGVzLmdlcm1hbkRhdGVUaW1lVG9FbmdsaXNoU3RyaW5nKGIucXVlcnlTZWxlY3RvcignW25hbWU9XCJkYXRlXCJdJykudmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBbYS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cInByaW9yaXR5XCJdJykudmFsdWUsIGIucXVlcnlTZWxlY3RvcignW25hbWU9XCJwcmlvcml0eVwiXScpLnZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgW2EucXVlcnlTZWxlY3RvcignW25hbWU9XCJwcm9qZWN0XCJdJykudmFsdWUsIGIucXVlcnlTZWxlY3RvcignW25hbWU9XCJwcm9qZWN0XCJdJykudmFsdWVdLFxuICAgICAgICAgICAgICAgICAgICBbYS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImRlc2NyaXB0aW9uXCJdJykudmFsdWUsIGIucXVlcnlTZWxlY3RvcignW25hbWU9XCJkZXNjcmlwdGlvblwiXScpLnZhbHVlXSxcbiAgICAgICAgICAgICAgICAgICAgW2EuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyksIGIuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyldLFxuICAgICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbF9hIDwgdmFsX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsX2EgPiB2YWxfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gc2F2ZSBzY3JvbGwgcG9zaXRpb25zXG4gICAgICAgICAgICBzb3J0ZWRbaV0ucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsLnNjcm9sbFRvcEJhY2t1cCA9IGVsLnNjcm9sbFRvcDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc29ydGVkW2ldLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoc29ydGVkW2ldKTtcbiAgICAgICAgICAgIC8vIHJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uc1xuICAgICAgICAgICAgc29ydGVkW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBlbC5zY3JvbGxUb3AgPSBlbC5zY3JvbGxUb3BCYWNrdXA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JlIHtcclxuICAgIHN0YXRpYyBkYXRhID0ge307XHJcblxyXG4gICAgc3RhdGljIGluaXRTdG9yZSgpIHtcclxuICAgICAgICBTdG9yZS5kYXRhID0ge1xyXG4gICAgICAgICAgICBidXN5OiBmYWxzZSxcclxuICAgICAgICAgICAgYXBpOiBudWxsLFxyXG4gICAgICAgICAgICB1c2VyOiBudWxsLFxyXG4gICAgICAgICAgICB0aWNrZXRzOiBudWxsLFxyXG4gICAgICAgICAgICBtYWlsczogbnVsbCxcclxuICAgICAgICAgICAgd2VhdGhlcjogbnVsbCxcclxuICAgICAgICAgICAgY29sczogWydzdGF0dXMnLCAncHJpb3JpdHknLCAnZGF0ZScsICd0aW1lJywgJ3Byb2plY3QnLCAnZGVzY3JpcHRpb24nXSxcclxuICAgICAgICAgICAgY29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZGxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogJyM0NTI3YTAnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsZGF5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogJyM4Njg2ODYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc1LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgcm9hbWluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcjYmE2OGM4JyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpeGVkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogJyMyMTk2RjMnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZG9uZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcjRkZCMzAwJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJpbGxlZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcjNENBRjUwJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY3VycmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcjRTkxRTYzJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtpbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAnI0Y0NDMzNicsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZWQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAnIzlFOUU5RScsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2VidXJ0c3RhZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcjYmE2OGM4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgxNzhkZWcsICNjYjYwYjMgMCUsICNjMTQ2YTEgNTAlLCAjYTgwMDc3IDUxJSwgI2RiMzZhNCAxMDAlKScsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBPbGdhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNzUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBtYWlsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNzUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlc3Npb246IHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZURheTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuU3RvcmUgPSBTdG9yZTtcclxuIiwiaW1wb3J0IEhlbHBlciBmcm9tICcuL0hlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRleHRhcmVhIHtcbiAgICBzdGF0aWMgdGV4dGFyZWFBdXRvSGVpZ2h0KCkge1xuICAgICAgICBsZXQgZGVib3VuY2UgPSBIZWxwZXIuZGVib3VuY2UoKGUpID0+IHtcbiAgICAgICAgICAgIFRleHRhcmVhLnRleHRhcmVhU2V0SGVpZ2h0KGUudGFyZ2V0KTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpY2tldHMgLnRpY2tldHNfX3RhYmxlLWJvZHknKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZS50YXJnZXQgJiZcbiAgICAgICAgICAgICAgICBlLnRhcmdldC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aWNrZXRzX190ZXh0YXJlYS0tZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLyogaW1tZWRpYXRlbHkgY2hhbmdlIGhlaWdodCBpZiBlbnRlciBpcyBwcmVzc2VkICovXG4gICAgICAgICAgICAgICAgaWYgKGUuaW5wdXRUeXBlID09PSAnaW5zZXJ0TGluZUJyZWFrJykge1xuICAgICAgICAgICAgICAgICAgICBUZXh0YXJlYS50ZXh0YXJlYVNldEhlaWdodChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLyogb3RoZXJ3aXNlIGRlYm91bmNlICovXG4gICAgICAgICAgICAgICAgICAgIGRlYm91bmNlKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHRleHRhcmVhU2V0VmlzaWJsZUhlaWdodHMoKSB7XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnRpY2tldHMgLnRpY2tldHNfX3RhYmxlLWJvZHknKVxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50aWNrZXRzX19lbnRyeS0tdmlzaWJsZSAudGlja2V0c19fdGV4dGFyZWEtLWRlc2NyaXB0aW9uJylcbiAgICAgICAgICAgIC5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBUZXh0YXJlYS50ZXh0YXJlYVNldEhlaWdodChlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdGV4dGFyZWFTZXRIZWlnaHQoZWwpIHtcbiAgICAgICAgbGV0IG1pbiA9IDMsXG4gICAgICAgICAgICBtYXggPSA3LFxuICAgICAgICAgICAgY3VyID0gKGVsLnZhbHVlLm1hdGNoKC9cXG4vZykgfHwgW10pLmxlbmd0aCArIDE7XG4gICAgICAgIGlmIChjdXIgPCBtaW4pIHtcbiAgICAgICAgICAgIGN1ciA9IG1pbjtcbiAgICAgICAgfSBlbHNlIGlmIChjdXIgPiBtYXgpIHtcbiAgICAgICAgICAgIGN1ciA9IG1heDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaGVpZ2h0ID0gMTUgKiBjdXIgKyAncmVtJztcbiAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAvKiBhbHNvIHNldCBvdGhlciB0ZXh0YXJlYSBoZWlnaHRzICovXG4gICAgICAgIGxldCBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgICBbLi4ucGFyZW50LnBhcmVudE5vZGUuY2hpbGRyZW5dXG4gICAgICAgICAgICAuZmlsdGVyKChjaGlsZCkgPT4gY2hpbGQgIT09IHBhcmVudClcbiAgICAgICAgICAgIC5mb3JFYWNoKChpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGkucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCBEYXRlcyBmcm9tICcuL0RhdGVzJztcbmltcG9ydCBGaWx0ZXIgZnJvbSAnLi9GaWx0ZXInO1xuaW1wb3J0IEhlbHBlciBmcm9tICcuL0hlbHBlcic7XG5pbXBvcnQgSHRtbCBmcm9tICcuL0h0bWwnO1xuaW1wb3J0IExvY2sgZnJvbSAnLi9Mb2NrJztcbmltcG9ydCBTY2hlZHVsZXIgZnJvbSAnLi9TY2hlZHVsZXInO1xuaW1wb3J0IFF1aWNrYm94IGZyb20gJy4vUXVpY2tib3gnO1xuaW1wb3J0IFN0b3JlIGZyb20gJy4vU3RvcmUnO1xuaW1wb3J0IFRleHRhcmVhIGZyb20gJy4vVGV4dGFyZWEnO1xuaW1wb3J0IEZvb3RlciBmcm9tICcuL0Zvb3Rlcic7XG5pbXBvcnQgQXR0YWNobWVudHMgZnJvbSAnLi9BdHRhY2htZW50cyc7XG5pbXBvcnQgaGxwIGZyb20gJ2hscCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpY2tldHMge1xuICAgIHN0YXRpYyB1cGRhdGVMb2NhbFRpY2tldCh0aWNrZXRfaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IHRydWU7XG4gICAgICAgICAgICBTdG9yZS5kYXRhLmFwaVxuICAgICAgICAgICAgICAgIC5mZXRjaCgnX2FwaS90aWNrZXRzLycgKyB0aWNrZXRfaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgVGlja2V0cy5zZXRUaWNrZXREYXRhKHRpY2tldF9pZCwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBzZXRUaWNrZXREYXRhKHRpY2tldF9pZCwgcHJvcGVydHksIHZhbHVlID0gbnVsbCkge1xuICAgICAgICBTdG9yZS5kYXRhLnRpY2tldHMuZm9yRWFjaCgodGlja2V0c19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aWNrZXRzX192YWx1ZS5pZCA9PSB0aWNrZXRfaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoSGVscGVyLmlzT2JqZWN0KHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhwcm9wZXJ0eSkuZm9yRWFjaCgoW3Byb3BlcnR5X19rZXksIHByb3BlcnR5X192YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldHNfX3ZhbHVlW3Byb3BlcnR5X19rZXldID0gcHJvcGVydHlfX3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZmV0Y2hBbmRSZW5kZXJUaWNrZXRzSW50ZXJ2YWwoKSB7XG4gICAgICAgIGlmIChobHAuaXNEZXNrdG9wKCkpIHtcbiAgICAgICAgICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoU3RvcmUuZGF0YS5idXN5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJzpmb2N1cycpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVGlja2V0cy5mZXRjaEFuZFJlbmRlclRpY2tldHNBbmRVcGRhdGVBcHAoKTtcbiAgICAgICAgICAgICAgICBGb290ZXIudXBkYXRlU3RhdHVzKCdzdWNjZXNzZnVsbHkgc3luY2VkIHRhc2tzLicsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9LCAxICogNjAgKiAxMDAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhc3luYyBmZXRjaEFuZFJlbmRlclRpY2tldHNBbmRVcGRhdGVBcHAoKSB7XG4gICAgICAgIGF3YWl0IFRpY2tldHMuZmV0Y2hBbmRSZW5kZXJUaWNrZXRzKCk7XG4gICAgICAgIFNjaGVkdWxlci5pbml0U2NoZWR1bGVyKCk7XG4gICAgICAgIFNjaGVkdWxlci51cGRhdGVDb2xvcnMoKTtcbiAgICAgICAgUXVpY2tib3guaW5pdFRvZGF5KCk7XG4gICAgICAgIFRpY2tldHMudXBkYXRlU3VtKCk7XG4gICAgICAgIEZpbHRlci51cGRhdGVGaWx0ZXIoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZmV0Y2hBbmRSZW5kZXJUaWNrZXRzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gdHJ1ZTtcbiAgICAgICAgICAgIFN0b3JlLmRhdGEuYXBpXG4gICAgICAgICAgICAgICAgLmZldGNoKCdfYXBpL3RpY2tldHMnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChTdG9yZS5kYXRhLnRpY2tldHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEudGlja2V0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEudGlja2V0cyA9IFN0b3JlLmRhdGEudGlja2V0cy5maWx0ZXIoKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhpc3RzID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZpbHRlcigoZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IHRpY2tldHNfX3ZhbHVlLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX19lbnRyeVtkYXRhLWlkPVwiJyArIHRpY2tldHNfX3ZhbHVlLmlkICsgJ1wiXScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JlbW92aW5nIHRpY2tldCAnICsgdGlja2V0c19fdmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0cztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZWRpdFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnRpY2tldHMuZm9yRWFjaCgoc3RvcmVfX3ZhbHVlLCBzdG9yZV9fa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZV9fdmFsdWUuaWQgPT0gdGlja2V0c19fdmFsdWUuaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVfX3ZhbHVlLnVwZGF0ZWRfYXQgIT0gdGlja2V0c19fdmFsdWUudXBkYXRlZF9hdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEudGlja2V0c1tzdG9yZV9fa2V5XSA9IHRpY2tldHNfX3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy50aWNrZXRzX19lbnRyeVtkYXRhLWlkPVwiJyArIHRpY2tldHNfX3ZhbHVlLmlkICsgJ1wiXSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5vdXRlckhUTUwgPSBIdG1sLmNyZWF0ZUh0bWxMaW5lKHRpY2tldHNfX3ZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VkaXRpbmcgdGlja2V0ICcgKyB0aWNrZXRzX192YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS50aWNrZXRzLmZpbHRlcigoZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IHRpY2tldHNfX3ZhbHVlLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEudGlja2V0cy5wdXNoKHRpY2tldHNfX3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnRpY2tldHNfX3RhYmxlLWJvZHknKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBIdG1sLmNyZWF0ZUh0bWxMaW5lKHRpY2tldHNfX3ZhbHVlLCBmYWxzZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2FkZGluZyB0aWNrZXQgJyArIHRpY2tldHNfX3ZhbHVlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0VGlja2V0RGF0YSh0aWNrZXRfaWQpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBudWxsO1xuICAgICAgICBTdG9yZS5kYXRhLnRpY2tldHMuZm9yRWFjaCgodGlja2V0c19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aWNrZXRzX192YWx1ZS5pZCA9PSB0aWNrZXRfaWQpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdGlja2V0c19fdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaGxwLmRlZXBDb3B5KGRhdGEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBkZWxldGVUaWNrZXQodGlja2V0X2lkKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgICAgICAuZmV0Y2goJ19hcGkvdGlja2V0cy8nICsgdGlja2V0X2lkLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLnRpY2tldHMuZm9yRWFjaCgodGlja2V0c19fdmFsdWUsIHRpY2tldHNfX2tleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpY2tldHNfX3ZhbHVlLmlkID09IHRpY2tldF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEudGlja2V0cy5zcGxpY2UodGlja2V0c19fa2V5LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHNhdmVUaWNrZXRzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzIC50aWNrZXRzX190YWJsZS1ib2R5JykucXVlcnlTZWxlY3RvcignLnRpY2tldHNfX3RleHRhcmVhOmludmFsaWQnKSAhPT1cbiAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoJ25vdCBzYXZlZCAtIGludmFsaWQgZmllbGRzIScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNoYW5nZWQgPSBbXTtcblxuICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnRpY2tldHMgLnRpY2tldHNfX3RhYmxlLWJvZHknKVxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudGlja2V0c19fZW50cnktLWNoYW5nZWQnKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmNvbHMuZm9yRWFjaCgoY29sc19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbY29sc19fdmFsdWVdID0gZWwucXVlcnlTZWxlY3RvcignW25hbWU9XCInICsgY29sc19fdmFsdWUgKyAnXCJdJykudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBkYXRhWyd1cGRhdGVkX2F0J10gPSBEYXRlcy50aW1lKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgVGlja2V0cy5zZXRUaWNrZXREYXRhKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgTG9jay5sb2NrVGlja2V0KGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZC5wdXNoKFRpY2tldHMuZ2V0VGlja2V0RGF0YShlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgICAgICAuZmV0Y2goJ19hcGkvdGlja2V0cycsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0czogY2hhbmdlZCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmlkcy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgTG9jay51bmxvY2tUaWNrZXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgU2NoZWR1bGVyLmluaXRTY2hlZHVsZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgU2NoZWR1bGVyLnVwZGF0ZUNvbG9ycygpO1xuICAgICAgICAgICAgICAgICAgICBRdWlja2JveC5pbml0VG9kYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgVGlja2V0cy51cGRhdGVTdW0oKTtcbiAgICAgICAgICAgICAgICAgICAgRmlsdGVyLnVwZGF0ZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBjcmVhdGVUaWNrZXQoZGF0YSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgdGlja2V0ID0ge307XG4gICAgICAgICAgICBTdG9yZS5kYXRhLmNvbHMuZm9yRWFjaCgoY29sc19fdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aWNrZXRbY29sc19fdmFsdWVdID0gY29sc19fdmFsdWUgaW4gZGF0YSA/IGRhdGFbY29sc19fdmFsdWVdIDogJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpY2tldFsndXBkYXRlZF9hdCddID0gRGF0ZXMudGltZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgICAgICAuZmV0Y2goJ19hcGkvdGlja2V0cycsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRpY2tldCksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRpY2tldC5pZCA9IHJlc3BvbnNlLmRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHRpY2tldC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS50aWNrZXRzLnB1c2godGlja2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aWNrZXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZFNhdmUoKSB7XG4gICAgICAgIC8vIGN0cmwrc1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgZm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIGlmIChTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LndoaWNoKS50b0xvd2VyQ2FzZSgpID09PSAncycpIHtcbiAgICAgICAgICAgICAgICAgICAgRm9vdGVyLnVwZGF0ZVN0YXR1cygnc2F2aW5nLi4uJywgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgVGlja2V0cy5zYXZlVGlja2V0cygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9vdGVyLnVwZGF0ZVN0YXR1cygnc2F2ZWQhJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvb3Rlci51cGRhdGVTdGF0dXMoZXJyb3IsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZENyZWF0ZSgpIHtcbiAgICAgICAgLy8gY3RybCtkXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC53aGljaCkudG9Mb3dlckNhc2UoKSA9PT0gJ2QnKSB7XG4gICAgICAgICAgICAgICAgICAgIFRpY2tldHMucHJlcGFyZUNyZWF0ZVRpY2tldCgpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHByZXBhcmVDcmVhdGVUaWNrZXQoKSB7XG4gICAgICAgIGxldCB2aXNpYmxlQWxsID0gZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLnRpY2tldHMgLnRpY2tldHNfX3RhYmxlLWJvZHknKVxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudGlja2V0c19fZW50cnktLXZpc2libGUnKSxcbiAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsLFxuICAgICAgICAgICAgY3VycmVudENvbCA9IDEsXG4gICAgICAgICAgICBkdXBsaWNhdGVEYXRhID0ge307XG4gICAgICAgIGlmICh2aXNpYmxlQWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNsb3Nlc3QoJy50aWNrZXRzX19lbnRyeScpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xvc2VzdCgnLnRpY2tldHNfX2VudHJ5Jyk7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbCA9IEhlbHBlci5wcmV2QWxsKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xvc2VzdCgndGQnKSkubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHZpc2libGVBbGxbdmlzaWJsZUFsbC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29sID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGR1cGxpY2F0ZURhdGEgPSBUaWNrZXRzLmdldFRpY2tldERhdGEoY3VycmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICAgICAgICBkZWxldGUgZHVwbGljYXRlRGF0YVsnYXR0YWNobWVudHMnXTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpZiBzb3VyY2UgaXMgYSByZWN1cnJpbmcgdGlja2V0LCBkbyBzb21lIG1hZ2ljICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgIGR1cGxpY2F0ZURhdGEuc3RhdHVzID09PSAncmVjdXJyaW5nJyAmJlxuICAgICAgICAgICAgY29uZmlybSgnc2hvdWxkIHRoZSBjb3B5IGJlIGEgc2NoZWR1bGVkIHRpY2tldCBhbmQgdGhlIHJlY3VycmluZyB0aWNrZXQgYXV0b21hdGljYWxseSBiZSBwb3N0cG9uZWQ/JylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgbmV3RGF0ZXMgPSBbXTtcbiAgICAgICAgICAgIGR1cGxpY2F0ZURhdGEuZGF0ZS5zcGxpdCgnXFxuJykuZm9yRWFjaCgoZHVwbGljYXRlRGF0YV9fdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBvbmx5IGFkZCByZWxldmFudFxuICAgICAgICAgICAgICAgIGxldCBwYXJzZWQgPSBEYXRlcy5wYXJzZURhdGVTdHJpbmcoZHVwbGljYXRlRGF0YV9fdmFsdWUsICd0aWNrZXRzJyk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbmV3RGF0ZSA9IERhdGVzLmRhdGVGb3JtYXQoRGF0ZXMuZ2V0QWN0aXZlRGF0ZSgpLCAnZC5tLnknKSxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkVGltZSA9IERhdGVzLmV4dHJhY3RUaW1lRnJvbURhdGUoZHVwbGljYXRlRGF0YV9fdmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChleHRyYWN0ZWRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0RhdGUgKz0gJyAnICsgZXh0cmFjdGVkVGltZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3RGF0ZXMucHVzaChuZXdEYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3VycmVudC5xdWVyeVNlbGVjdG9yKCcudGlja2V0c19fdGV4dGFyZWEtLWRhdGUnKS52YWx1ZSA9IERhdGVzLmluY2x1ZGVOZXdMb3dlckJvdW5kSW5EYXRlKFxuICAgICAgICAgICAgICAgIGR1cGxpY2F0ZURhdGEuZGF0ZSxcbiAgICAgICAgICAgICAgICBEYXRlcy5nZXRBY3RpdmVEYXRlKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdXJyZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190ZXh0YXJlYS0tZGF0ZScpLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgICAgICBkdXBsaWNhdGVEYXRhLmRhdGUgPSBuZXdEYXRlcy5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgIGR1cGxpY2F0ZURhdGEuc3RhdHVzID0gJ3NjaGVkdWxlZCc7XG4gICAgICAgIH1cbiAgICAgICAgVGlja2V0cy5jcmVhdGVBbmRBcHBlbmRUaWNrZXQoZHVwbGljYXRlRGF0YSwgY3VycmVudCwgY3VycmVudENvbCwgdHJ1ZSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHN0YXRpYyBjcmVhdGVBbmRBcHBlbmRUaWNrZXQoZGF0YSwgY3VycmVudCA9IG51bGwsIGN1cnJlbnRDb2wgPSAxLCB3aXRoU2VsZWN0ID0gdHJ1ZSwgZG9GaWx0ZXIgPSBmYWxzZSkge1xuICAgICAgICBpZiAoWyd0b25pZ2h0JywgJ3dlZWtlbmQnLCAnbmV4dCddLmluY2x1ZGVzKGRhdGEuZGF0ZSkpIHtcbiAgICAgICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBpZiAoZC5nZXRIb3VycygpID49IDIxKSB7XG4gICAgICAgICAgICAgICAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgICAgICAgICAgZC5zZXRIb3Vycyg5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRlID09PSAnd2Vla2VuZCcpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZC5nZXREYXkoKSAlIDYgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZSA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5kYXRlID0gU2NoZWR1bGVyLmRldGVybWluZU5leHRGcmVlU2xvdChcbiAgICAgICAgICAgICAgICAgICAgKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJy4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICgnMCcgKyAoZC5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnLicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyKC0yKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZXMudGltZUZvcm1hdChkLmdldEhvdXJzKCkgKyAxKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnLScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgRGF0ZXMudGltZUZvcm1hdChkLmdldEhvdXJzKCkgKyAxLjUpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YS5kYXRlID1cbiAgICAgICAgICAgICAgICAgICAgKCcwJyArIGQuZ2V0RGF0ZSgpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAnLicgK1xuICAgICAgICAgICAgICAgICAgICAoJzAnICsgKGQuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgK1xuICAgICAgICAgICAgICAgICAgICAnLicgK1xuICAgICAgICAgICAgICAgICAgICBkLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zdWJzdHIoLTIpICtcbiAgICAgICAgICAgICAgICAgICAgJyAyMTowMC0yMTozMCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBUaWNrZXRzLmNyZWF0ZVRpY2tldChkYXRhKVxuICAgICAgICAgICAgLnRoZW4oKHRpY2tldCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0O1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIEh0bWwuY3JlYXRlSHRtbExpbmUodGlja2V0LCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBjdXJyZW50Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzIC50aWNrZXRzX190YWJsZS1ib2R5JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIEh0bWwuY3JlYXRlSHRtbExpbmUodGlja2V0LCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzIC50aWNrZXRzX190YWJsZS1ib2R5JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcudGlja2V0c19fZW50cnktLXZpc2libGVbZGF0YS1pZD1cIicgKyB0aWNrZXQuaWQgKyAnXCJdJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh3aXRoU2VsZWN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IG5leHQucXVlcnlTZWxlY3RvcigndGQ6bnRoLWNoaWxkKCcgKyBjdXJyZW50Q29sICsgJyknKS5xdWVyeVNlbGVjdG9yKCdpbnB1dCwgdGV4dGFyZWEnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2VsZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFNjaGVkdWxlci5pbml0U2NoZWR1bGVyKCk7XG4gICAgICAgICAgICAgICAgU2NoZWR1bGVyLnVwZGF0ZUNvbG9ycygpO1xuICAgICAgICAgICAgICAgIFF1aWNrYm94LmluaXRUb2RheSgpO1xuICAgICAgICAgICAgICAgIFRpY2tldHMudXBkYXRlU3VtKCk7XG4gICAgICAgICAgICAgICAgRmlsdGVyLnVwZGF0ZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgIFRleHRhcmVhLnRleHRhcmVhU2V0VmlzaWJsZUhlaWdodHMoKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9GaWx0ZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgRmlsdGVyLmRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgnYXR0YWNobWVudHMnIGluIGRhdGEgJiYgZGF0YS5hdHRhY2htZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIEF0dGFjaG1lbnRzLnN0YXJ0VXBsb2Fkc0FuZEJ1aWxkSHRtbCh0aWNrZXQuaWQsIGRhdGEuYXR0YWNobWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZENoYW5nZVRyYWNraW5nKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGlja2V0cycpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fZW50cnkgaW5wdXQsIC50aWNrZXRzX19lbnRyeSB0ZXh0YXJlYScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgndHlwZScpICYmIGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnZmlsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fZW50cnknKS5jbGFzc0xpc3QuYWRkKCd0aWNrZXRzX19lbnRyeS0tY2hhbmdlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZFZhbGlkYXRpb24oKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fdGV4dGFyZWEtLWRhdGUnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZXMucGFyc2VEYXRlU3RyaW5nKGUudGFyZ2V0LnZhbHVlLCAndGlja2V0cycpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0Q3VzdG9tVmFsaWRpdHkoJ3dyb25nIGZvcm1hdCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fdGV4dGFyZWEtLXRpbWUnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhbmV3IFJlZ0V4cCgnXlswLTldJHxeWzAtOV0sWzAtOV0kfF5bMC05XSxbMC05XVswLTldJCcpLnRlc3QoZS50YXJnZXQudmFsdWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA8IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID4gMjRcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zZXRDdXN0b21WYWxpZGl0eSgnd3JvbmcgZm9ybWF0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX190ZXh0YXJlYS0tcHJvamVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKCdbXmEtekEtWjAtOcOkw4TDtsOWw7zDnMOfIC4tXScpLnRlc3QoZS50YXJnZXQudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zZXRDdXN0b21WYWxpZGl0eSgnd3JvbmcgZm9ybWF0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX190ZXh0YXJlYS0tcHJpb3JpdHknKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVsnQScsICdCJywgJ0MnLCAnRCddLmluY2x1ZGVzKGUudGFyZ2V0LnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0Q3VzdG9tVmFsaWRpdHkoJ3dyb25nIGZvcm1hdCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fdGV4dGFyZWEtLXN0YXR1cycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICFbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NjaGVkdWxlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhbGxkYXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyb2FtaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkb25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmlsbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVjdXJyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd29ya2luZycsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmluY2x1ZGVzKGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNldEN1c3RvbVZhbGlkaXR5KCd3cm9uZyBmb3JtYXQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYmluZEF1dG9UaW1lKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGlja2V0cycpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcudGlja2V0c19fZW50cnkgW25hbWU9XCJkYXRlXCJdJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZF92YWx1ZXMgPSBEYXRlcy5wYXJzZURhdGVTdHJpbmcoZS50YXJnZXQudmFsdWUsICdhbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZF92YWx1ZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfdmFsdWVzLmZvckVhY2goKHBhcnNlc192YWx1ZXNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlc192YWx1ZXNfX3ZhbHVlLmJlZ2luICE9PSB1bmRlZmluZWQgJiYgcGFyc2VzX3ZhbHVlc19fdmFsdWUuZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZSArPSBNYXRoLmFicyhwYXJzZXNfdmFsdWVzX192YWx1ZS5lbmQgLSBwYXJzZXNfdmFsdWVzX192YWx1ZS5iZWdpbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodGltZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGltZS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZSA9IHRpbWUudG9TdHJpbmcoKS5yZXBsYWNlKCcuJywgJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19lbnRyeScpLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190ZXh0YXJlYS0tdGltZScpLnZhbHVlID0gdGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNsb3Nlc3QoJy50aWNrZXRzX19lbnRyeScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190ZXh0YXJlYS0tdGltZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGJpbmREZWxldGUoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50aWNrZXRzX19lbnRyeV9fZGVsZXRlJykpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGlja2V0X2lkID0gZS50YXJnZXQuY2xvc2VzdCgnLnRpY2tldHNfX2VudHJ5JykuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG4gICAgICAgICAgICAgICAgaWYgKExvY2sudGlja2V0SXNMb2NrZWQodGlja2V0X2lkKSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBjb25maXJtKCdTaW5kIFNpZSBzaWNoZXI/Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBUaWNrZXRzLmRlbGV0ZVRpY2tldCh0aWNrZXRfaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnRpY2tldHNfX2VudHJ5JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2NoZWR1bGVyLmluaXRTY2hlZHVsZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdWlja2JveC5pbml0VG9kYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaWNrZXRzLnVwZGF0ZVN1bSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlci51cGRhdGVGaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdXBkYXRlU3VtKCkge1xuICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgU3RvcmUuZGF0YS50aWNrZXRzLmZvckVhY2goKHRpY2tldHNfX3ZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUudmlzaWJsZSAhPT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICB0aWNrZXRzX192YWx1ZS50aW1lICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdGlja2V0c19fdmFsdWUudGltZSAhPSAnJyAmJlxuICAgICAgICAgICAgICAgICFbJ2FsbGRheScsICdiaWxsZWQnXS5pbmNsdWRlcyh0aWNrZXRzX192YWx1ZS5zdGF0dXMpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBzdW0gKz0gcGFyc2VGbG9hdCh0aWNrZXRzX192YWx1ZS50aW1lLnJlcGxhY2UoJywnLCAnLicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHN1bSA9IE1hdGgucm91bmQoc3VtICogMTAwKSAvIDEwMDtcbiAgICAgICAgc3VtID0gc3VtLnRvU3RyaW5nKCkucmVwbGFjZSgnLicsICcsJyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aWNrZXRzX190YWJsZS1mb290JykucXVlcnlTZWxlY3RvcignLnRpY2tldHNfX3N1bScpLnRleHRDb250ZW50ID0gc3VtO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdG9yZSBmcm9tICcuL1N0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlciB7XG4gICAgc3RhdGljIGZldGNoVXNlcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIFN0b3JlLmRhdGEuYnVzeSA9IHRydWU7XG4gICAgICAgICAgICBTdG9yZS5kYXRhLmFwaVxuICAgICAgICAgICAgICAgIC5mZXRjaCgnX2FwaS91c2VycycsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS51c2VyID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RvcmUgZnJvbSAnLi9TdG9yZSc7XG5pbXBvcnQgRGF0ZXMgZnJvbSAnLi9EYXRlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXIge1xuICAgIHN0YXRpYyBmZXRjaFdlYXRoZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSB0cnVlO1xuICAgICAgICAgICAgU3RvcmUuZGF0YS5hcGlcbiAgICAgICAgICAgICAgICAuZmV0Y2goJ19hcGkvd2VhdGhlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBTdG9yZS5kYXRhLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgU3RvcmUuZGF0YS53ZWF0aGVyID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIG91dHB1dFdlYXRoZXIoZGF0ZSkge1xuICAgICAgICBpZiAoIShEYXRlcy5kYXRlRm9ybWF0KGRhdGUsICdZLW0tZCcpIGluIFN0b3JlLmRhdGEud2VhdGhlcikpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBsZXQgaHRtbCA9ICcnLFxuICAgICAgICAgICAgZGF0YSA9IFN0b3JlLmRhdGEud2VhdGhlcltEYXRlcy5kYXRlRm9ybWF0KGRhdGUsICdZLW0tZCcpXTtcblxuICAgICAgICBodG1sICs9ICfwn4yh77iPJyArIGRhdGEudGVtcCArICfCsEPimJQnICsgZGF0YS5yYWluICsgJ21tJztcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFwcCBmcm9tICcuL0FwcCc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgQXBwLmluaXQoKTtcbn0pO1xuIiwiZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcbiAgcmV0dXJuIGFycjI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheUxpa2VUb0FycmF5LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwiZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRoSG9sZXMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJ2YXIgYXJyYXlMaWtlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2FycmF5TGlrZVRvQXJyYXkuanNcIik7XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KGFycik7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheVdpdGhvdXRIb2xlcywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7XG4gICAgICB9XG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvciwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjaywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsInZhciB0b1Byb3BlcnR5S2V5ID0gcmVxdWlyZShcIi4vdG9Qcm9wZXJ0eUtleS5qc1wiKTtcbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHRvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwidmFyIHRvUHJvcGVydHlLZXkgPSByZXF1aXJlKFwiLi90b1Byb3BlcnR5S2V5LmpzXCIpO1xuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSB0b1Byb3BlcnR5S2V5KGtleSk7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsImZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgXCJkZWZhdWx0XCI6IG9ialxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbXCJAQGl0ZXJhdG9yXCJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHtcbiAgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKG51bGwgIT0gdCkge1xuICAgIHZhciBlLFxuICAgICAgbixcbiAgICAgIGksXG4gICAgICB1LFxuICAgICAgYSA9IFtdLFxuICAgICAgZiA9ICEwLFxuICAgICAgbyA9ICExO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7XG4gICAgICAgIGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjtcbiAgICAgICAgZiA9ICExO1xuICAgICAgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIG8gPSAhMCwgbiA9IHI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghZiAmJiBudWxsICE9IHRbXCJyZXR1cm5cIl0gJiYgKHUgPSB0W1wicmV0dXJuXCJdKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChvKSB0aHJvdyBuO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5TGltaXQsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVSZXN0LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlU3ByZWFkLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwidmFyIF90eXBlb2YgPSByZXF1aXJlKFwiLi90eXBlb2YuanNcIilbXCJkZWZhdWx0XCJdO1xuZnVuY3Rpb24gX3JlZ2VuZXJhdG9yUnVudGltZSgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7IC8qISByZWdlbmVyYXRvci1ydW50aW1lIC0tIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiAtLSBsaWNlbnNlIChNSVQpOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvYmxvYi9tYWluL0xJQ0VOU0UgKi9cbiAgbW9kdWxlLmV4cG9ydHMgPSBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gX3JlZ2VuZXJhdG9yUnVudGltZSgpIHtcbiAgICByZXR1cm4gZTtcbiAgfSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzO1xuICB2YXIgdCxcbiAgICBlID0ge30sXG4gICAgciA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgbiA9IHIuaGFzT3duUHJvcGVydHksXG4gICAgbyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAodCwgZSwgcikge1xuICAgICAgdFtlXSA9IHIudmFsdWU7XG4gICAgfSxcbiAgICBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSxcbiAgICBhID0gaS5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIixcbiAgICBjID0gaS5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsXG4gICAgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG4gIGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgICB2YWx1ZTogcixcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pLCB0W2VdO1xuICB9XG4gIHRyeSB7XG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAodCkge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7XG4gICAgICByZXR1cm4gdFtlXSA9IHI7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHtcbiAgICB2YXIgaSA9IGUgJiYgZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBlIDogR2VuZXJhdG9yLFxuICAgICAgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLFxuICAgICAgYyA9IG5ldyBDb250ZXh0KG4gfHwgW10pO1xuICAgIHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7XG4gICAgICB2YWx1ZTogbWFrZUludm9rZU1ldGhvZCh0LCByLCBjKVxuICAgIH0pLCBhO1xuICB9XG4gIGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJub3JtYWxcIixcbiAgICAgICAgYXJnOiB0LmNhbGwoZSwgcilcbiAgICAgIH07XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0aHJvd1wiLFxuICAgICAgICBhcmc6IHRcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGUud3JhcCA9IHdyYXA7XG4gIHZhciBoID0gXCJzdXNwZW5kZWRTdGFydFwiLFxuICAgIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsXG4gICAgZiA9IFwiZXhlY3V0aW5nXCIsXG4gICAgcyA9IFwiY29tcGxldGVkXCIsXG4gICAgeSA9IHt9O1xuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cbiAgdmFyIHAgPSB7fTtcbiAgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIHZhciBkID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHYgPSBkICYmIGQoZCh2YWx1ZXMoW10pKSk7XG4gIHYgJiYgdiAhPT0gciAmJiBuLmNhbGwodiwgYSkgJiYgKHAgPSB2KTtcbiAgdmFyIGcgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwKTtcbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHQpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgZGVmaW5lKHQsIGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoZSwgdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkge1xuICAgICAgdmFyIGMgPSB0cnlDYXRjaCh0W3JdLCB0LCBvKTtcbiAgICAgIGlmIChcInRocm93XCIgIT09IGMudHlwZSkge1xuICAgICAgICB2YXIgdSA9IGMuYXJnLFxuICAgICAgICAgIGggPSB1LnZhbHVlO1xuICAgICAgICByZXR1cm4gaCAmJiBcIm9iamVjdFwiID09IF90eXBlb2YoaCkgJiYgbi5jYWxsKGgsIFwiX19hd2FpdFwiKSA/IGUucmVzb2x2ZShoLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHQsIGksIGEpO1xuICAgICAgICB9LCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIGludm9rZShcInRocm93XCIsIHQsIGksIGEpO1xuICAgICAgICB9KSA6IGUucmVzb2x2ZShoKS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdS52YWx1ZSA9IHQsIGkodSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIHQsIGksIGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGEoYy5hcmcpO1xuICAgIH1cbiAgICB2YXIgcjtcbiAgICBvKHRoaXMsIFwiX2ludm9rZVwiLCB7XG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCwgbikge1xuICAgICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IGUoZnVuY3Rpb24gKGUsIHIpIHtcbiAgICAgICAgICAgIGludm9rZSh0LCBuLCBlLCByKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gciA9IHIgPyByLnRoZW4oY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChlLCByLCBuKSB7XG4gICAgdmFyIG8gPSBoO1xuICAgIHJldHVybiBmdW5jdGlvbiAoaSwgYSkge1xuICAgICAgaWYgKG8gPT09IGYpIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICBpZiAobyA9PT0gcykge1xuICAgICAgICBpZiAoXCJ0aHJvd1wiID09PSBpKSB0aHJvdyBhO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB0LFxuICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBmb3IgKG4ubWV0aG9kID0gaSwgbi5hcmcgPSBhOzspIHtcbiAgICAgICAgdmFyIGMgPSBuLmRlbGVnYXRlO1xuICAgICAgICBpZiAoYykge1xuICAgICAgICAgIHZhciB1ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShjLCBuKTtcbiAgICAgICAgICBpZiAodSkge1xuICAgICAgICAgICAgaWYgKHUgPT09IHkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIHU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcIm5leHRcIiA9PT0gbi5tZXRob2QpIG4uc2VudCA9IG4uX3NlbnQgPSBuLmFyZztlbHNlIGlmIChcInRocm93XCIgPT09IG4ubWV0aG9kKSB7XG4gICAgICAgICAgaWYgKG8gPT09IGgpIHRocm93IG8gPSBzLCBuLmFyZztcbiAgICAgICAgICBuLmRpc3BhdGNoRXhjZXB0aW9uKG4uYXJnKTtcbiAgICAgICAgfSBlbHNlIFwicmV0dXJuXCIgPT09IG4ubWV0aG9kICYmIG4uYWJydXB0KFwicmV0dXJuXCIsIG4uYXJnKTtcbiAgICAgICAgbyA9IGY7XG4gICAgICAgIHZhciBwID0gdHJ5Q2F0Y2goZSwgciwgbik7XG4gICAgICAgIGlmIChcIm5vcm1hbFwiID09PSBwLnR5cGUpIHtcbiAgICAgICAgICBpZiAobyA9IG4uZG9uZSA/IHMgOiBsLCBwLmFyZyA9PT0geSkgY29udGludWU7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiBwLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IG4uZG9uZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXCJ0aHJvd1wiID09PSBwLnR5cGUgJiYgKG8gPSBzLCBuLm1ldGhvZCA9IFwidGhyb3dcIiwgbi5hcmcgPSBwLmFyZyk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpIHtcbiAgICB2YXIgbiA9IHIubWV0aG9kLFxuICAgICAgbyA9IGUuaXRlcmF0b3Jbbl07XG4gICAgaWYgKG8gPT09IHQpIHJldHVybiByLmRlbGVnYXRlID0gbnVsbCwgXCJ0aHJvd1wiID09PSBuICYmIGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0gJiYgKHIubWV0aG9kID0gXCJyZXR1cm5cIiwgci5hcmcgPSB0LCBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpLCBcInRocm93XCIgPT09IHIubWV0aG9kKSB8fCBcInJldHVyblwiICE9PSBuICYmIChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnXCIgKyBuICsgXCInIG1ldGhvZFwiKSksIHk7XG4gICAgdmFyIGkgPSB0cnlDYXRjaChvLCBlLml0ZXJhdG9yLCByLmFyZyk7XG4gICAgaWYgKFwidGhyb3dcIiA9PT0gaS50eXBlKSByZXR1cm4gci5tZXRob2QgPSBcInRocm93XCIsIHIuYXJnID0gaS5hcmcsIHIuZGVsZWdhdGUgPSBudWxsLCB5O1xuICAgIHZhciBhID0gaS5hcmc7XG4gICAgcmV0dXJuIGEgPyBhLmRvbmUgPyAocltlLnJlc3VsdE5hbWVdID0gYS52YWx1ZSwgci5uZXh0ID0gZS5uZXh0TG9jLCBcInJldHVyblwiICE9PSByLm1ldGhvZCAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpIDogYSA6IChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksIHIuZGVsZWdhdGUgPSBudWxsLCB5KTtcbiAgfVxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkodCkge1xuICAgIHZhciBlID0ge1xuICAgICAgdHJ5TG9jOiB0WzBdXG4gICAgfTtcbiAgICAxIGluIHQgJiYgKGUuY2F0Y2hMb2MgPSB0WzFdKSwgMiBpbiB0ICYmIChlLmZpbmFsbHlMb2MgPSB0WzJdLCBlLmFmdGVyTG9jID0gdFszXSksIHRoaXMudHJ5RW50cmllcy5wdXNoKGUpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkodCkge1xuICAgIHZhciBlID0gdC5jb21wbGV0aW9uIHx8IHt9O1xuICAgIGUudHlwZSA9IFwibm9ybWFsXCIsIGRlbGV0ZSBlLmFyZywgdC5jb21wbGV0aW9uID0gZTtcbiAgfVxuICBmdW5jdGlvbiBDb250ZXh0KHQpIHtcbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbe1xuICAgICAgdHJ5TG9jOiBcInJvb3RcIlxuICAgIH1dLCB0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7XG4gIH1cbiAgZnVuY3Rpb24gdmFsdWVzKGUpIHtcbiAgICBpZiAoZSB8fCBcIlwiID09PSBlKSB7XG4gICAgICB2YXIgciA9IGVbYV07XG4gICAgICBpZiAocikgcmV0dXJuIHIuY2FsbChlKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUubmV4dCkgcmV0dXJuIGU7XG4gICAgICBpZiAoIWlzTmFOKGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgbyA9IC0xLFxuICAgICAgICAgIGkgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgICAgZm9yICg7ICsrbyA8IGUubGVuZ3RoOykgaWYgKG4uY2FsbChlLCBvKSkgcmV0dXJuIG5leHQudmFsdWUgPSBlW29dLCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlID0gdCwgbmV4dC5kb25lID0gITAsIG5leHQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGkubmV4dCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoX3R5cGVvZihlKSArIFwiIGlzIG5vdCBpdGVyYWJsZVwiKTtcbiAgfVxuICByZXR1cm4gR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIG8oZywgXCJjb25zdHJ1Y3RvclwiLCB7XG4gICAgdmFsdWU6IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLFxuICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgfSksIG8oR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwge1xuICAgIHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvbixcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgdSwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKSwgZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCAmJiB0LmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiAhIWUgJiYgKGUgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8IFwiR2VuZXJhdG9yRnVuY3Rpb25cIiA9PT0gKGUuZGlzcGxheU5hbWUgfHwgZS5uYW1lKSk7XG4gIH0sIGUubWFyayA9IGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZih0LCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSkgOiAodC5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgZGVmaW5lKHQsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIikpLCB0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoZyksIHQ7XG4gIH0sIGUuYXdyYXAgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB7XG4gICAgICBfX2F3YWl0OiB0XG4gICAgfTtcbiAgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSwgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBjLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBlLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yLCBlLmFzeW5jID0gZnVuY3Rpb24gKHQsIHIsIG4sIG8sIGkpIHtcbiAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSBQcm9taXNlKTtcbiAgICB2YXIgYSA9IG5ldyBBc3luY0l0ZXJhdG9yKHdyYXAodCwgciwgbiwgbyksIGkpO1xuICAgIHJldHVybiBlLmlzR2VuZXJhdG9yRnVuY3Rpb24ocikgPyBhIDogYS5uZXh0KCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIHQuZG9uZSA/IHQudmFsdWUgOiBhLm5leHQoKTtcbiAgICB9KTtcbiAgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKGcpLCBkZWZpbmUoZywgdSwgXCJHZW5lcmF0b3JcIiksIGRlZmluZShnLCBhLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBkZWZpbmUoZywgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH0pLCBlLmtleXMgPSBmdW5jdGlvbiAodCkge1xuICAgIHZhciBlID0gT2JqZWN0KHQpLFxuICAgICAgciA9IFtdO1xuICAgIGZvciAodmFyIG4gaW4gZSkgci5wdXNoKG4pO1xuICAgIHJldHVybiByLnJldmVyc2UoKSwgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGZvciAoOyByLmxlbmd0aDspIHtcbiAgICAgICAgdmFyIHQgPSByLnBvcCgpO1xuICAgICAgICBpZiAodCBpbiBlKSByZXR1cm4gbmV4dC52YWx1ZSA9IHQsIG5leHQuZG9uZSA9ICExLCBuZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHQuZG9uZSA9ICEwLCBuZXh0O1xuICAgIH07XG4gIH0sIGUudmFsdWVzID0gdmFsdWVzLCBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcbiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoZSkge1xuICAgICAgaWYgKHRoaXMucHJldiA9IDAsIHRoaXMubmV4dCA9IDAsIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB0LCB0aGlzLmRvbmUgPSAhMSwgdGhpcy5kZWxlZ2F0ZSA9IG51bGwsIHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMuYXJnID0gdCwgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSksICFlKSBmb3IgKHZhciByIGluIHRoaXMpIFwidFwiID09PSByLmNoYXJBdCgwKSAmJiBuLmNhbGwodGhpcywgcikgJiYgIWlzTmFOKCtyLnNsaWNlKDEpKSAmJiAodGhpc1tyXSA9IHQpO1xuICAgIH0sXG4gICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgIHRoaXMuZG9uZSA9ICEwO1xuICAgICAgdmFyIHQgPSB0aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtcbiAgICAgIGlmIChcInRocm93XCIgPT09IHQudHlwZSkgdGhyb3cgdC5hcmc7XG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uIGRpc3BhdGNoRXhjZXB0aW9uKGUpIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHRocm93IGU7XG4gICAgICB2YXIgciA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobiwgbykge1xuICAgICAgICByZXR1cm4gYS50eXBlID0gXCJ0aHJvd1wiLCBhLmFyZyA9IGUsIHIubmV4dCA9IG4sIG8gJiYgKHIubWV0aG9kID0gXCJuZXh0XCIsIHIuYXJnID0gdCksICEhbztcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIG8gPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgbyA+PSAwOyAtLW8pIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLnRyeUVudHJpZXNbb10sXG4gICAgICAgICAgYSA9IGkuY29tcGxldGlvbjtcbiAgICAgICAgaWYgKFwicm9vdFwiID09PSBpLnRyeUxvYykgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgaWYgKGkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBjID0gbi5jYWxsKGksIFwiY2F0Y2hMb2NcIiksXG4gICAgICAgICAgICB1ID0gbi5jYWxsKGksIFwiZmluYWxseUxvY1wiKTtcbiAgICAgICAgICBpZiAoYyAmJiB1KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgaS5jYXRjaExvYykgcmV0dXJuIGhhbmRsZShpLmNhdGNoTG9jLCAhMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgaS5maW5hbGx5TG9jKSByZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgaS5jYXRjaExvYykgcmV0dXJuIGhhbmRsZShpLmNhdGNoTG9jLCAhMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdSkgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgaS5maW5hbGx5TG9jKSByZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uIGFicnVwdCh0LCBlKSB7XG4gICAgICBmb3IgKHZhciByID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHIgPj0gMDsgLS1yKSB7XG4gICAgICAgIHZhciBvID0gdGhpcy50cnlFbnRyaWVzW3JdO1xuICAgICAgICBpZiAoby50cnlMb2MgPD0gdGhpcy5wcmV2ICYmIG4uY2FsbChvLCBcImZpbmFsbHlMb2NcIikgJiYgdGhpcy5wcmV2IDwgby5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGkgPSBvO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpICYmIChcImJyZWFrXCIgPT09IHQgfHwgXCJjb250aW51ZVwiID09PSB0KSAmJiBpLnRyeUxvYyA8PSBlICYmIGUgPD0gaS5maW5hbGx5TG9jICYmIChpID0gbnVsbCk7XG4gICAgICB2YXIgYSA9IGkgPyBpLmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJldHVybiBhLnR5cGUgPSB0LCBhLmFyZyA9IGUsIGkgPyAodGhpcy5tZXRob2QgPSBcIm5leHRcIiwgdGhpcy5uZXh0ID0gaS5maW5hbGx5TG9jLCB5KSA6IHRoaXMuY29tcGxldGUoYSk7XG4gICAgfSxcbiAgICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodCwgZSkge1xuICAgICAgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZztcbiAgICAgIHJldHVybiBcImJyZWFrXCIgPT09IHQudHlwZSB8fCBcImNvbnRpbnVlXCIgPT09IHQudHlwZSA/IHRoaXMubmV4dCA9IHQuYXJnIDogXCJyZXR1cm5cIiA9PT0gdC50eXBlID8gKHRoaXMucnZhbCA9IHRoaXMuYXJnID0gdC5hcmcsIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIiwgdGhpcy5uZXh0ID0gXCJlbmRcIikgOiBcIm5vcm1hbFwiID09PSB0LnR5cGUgJiYgZSAmJiAodGhpcy5uZXh0ID0gZSksIHk7XG4gICAgfSxcbiAgICBmaW5pc2g6IGZ1bmN0aW9uIGZpbmlzaCh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci5maW5hbGx5TG9jID09PSB0KSByZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sIHIuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KHIpLCB5O1xuICAgICAgfVxuICAgIH0sXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbiBfY2F0Y2godCkge1xuICAgICAgZm9yICh2YXIgZSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkge1xuICAgICAgICB2YXIgciA9IHRoaXMudHJ5RW50cmllc1tlXTtcbiAgICAgICAgaWYgKHIudHJ5TG9jID09PSB0KSB7XG4gICAgICAgICAgdmFyIG4gPSByLmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKFwidGhyb3dcIiA9PT0gbi50eXBlKSB7XG4gICAgICAgICAgICB2YXIgbyA9IG4uYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uIGRlbGVnYXRlWWllbGQoZSwgciwgbikge1xuICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHIsXG4gICAgICAgIG5leHRMb2M6IG5cbiAgICAgIH0sIFwibmV4dFwiID09PSB0aGlzLm1ldGhvZCAmJiAodGhpcy5hcmcgPSB0KSwgeTtcbiAgICB9XG4gIH0sIGU7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF9yZWdlbmVyYXRvclJ1bnRpbWUsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJ2YXIgYXJyYXlXaXRoSG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhIb2xlcy5qc1wiKTtcbnZhciBpdGVyYWJsZVRvQXJyYXlMaW1pdCA9IHJlcXVpcmUoXCIuL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzXCIpO1xudmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanNcIik7XG52YXIgbm9uSXRlcmFibGVSZXN0ID0gcmVxdWlyZShcIi4vbm9uSXRlcmFibGVSZXN0LmpzXCIpO1xuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gX3NsaWNlZFRvQXJyYXksIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJ2YXIgYXJyYXlXaXRob3V0SG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhvdXRIb2xlcy5qc1wiKTtcbnZhciBpdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXkuanNcIik7XG52YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qc1wiKTtcbnZhciBub25JdGVyYWJsZVNwcmVhZCA9IHJlcXVpcmUoXCIuL25vbkl0ZXJhYmxlU3ByZWFkLmpzXCIpO1xuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF90b0NvbnN1bWFibGVBcnJheSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIi4vdHlwZW9mLmpzXCIpW1wiZGVmYXVsdFwiXTtcbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkge1xuICBpZiAoX3R5cGVvZihpbnB1dCkgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKF90eXBlb2YocmVzKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlcztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF90b1ByaW1pdGl2ZSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIi4vdHlwZW9mLmpzXCIpW1wiZGVmYXVsdFwiXTtcbnZhciB0b1ByaW1pdGl2ZSA9IHJlcXVpcmUoXCIuL3RvUHJpbWl0aXZlLmpzXCIpO1xuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSB0b1ByaW1pdGl2ZShhcmcsIFwic3RyaW5nXCIpO1xuICByZXR1cm4gX3R5cGVvZihrZXkpID09PSBcInN5bWJvbFwiID8ga2V5IDogU3RyaW5nKGtleSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF90b1Byb3BlcnR5S2V5LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7IiwiZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gKG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzKSwgX3R5cGVvZihvKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheS5qc1wiKTtcbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5tb2R1bGUuZXhwb3J0cyA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyIsIi8vIFRPRE8oQmFiZWwgOCk6IFJlbW92ZSB0aGlzIGZpbGUuXG5cbnZhciBydW50aW1lID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvcmVnZW5lcmF0b3JSdW50aW1lXCIpKCk7XG5tb2R1bGUuZXhwb3J0cyA9IHJ1bnRpbWU7XG5cbi8vIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vcGFja2FnZXMvcnVudGltZS9ydW50aW1lLmpzI0w3MzY9XG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSB7XG4gICAgZ2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xuICB9IGVsc2Uge1xuICAgIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG4gIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuY2xhc3MgaGxwIHtcbiAgc3RhdGljIHgoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpbnB1dCA9IGlucHV0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLngoaW5wdXQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gZmFsc2UgfHwgdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dC50cmltKCkgPT0gJycgfHwgdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhpbnB1dCkubGVuZ3RoID09PSAwICYmIGlucHV0LmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyB8fCBBcnJheS5pc0FycmF5KGlucHV0KSAmJiBpbnB1dC5sZW5ndGggPT09IDAgfHwgQXJyYXkuaXNBcnJheShpbnB1dCkgJiYgaW5wdXQubGVuZ3RoID09PSAxICYmIGlucHV0WzBdID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBzdGF0aWMgbngoaW5wdXQpIHtcbiAgICByZXR1cm4gIXRoaXMueChpbnB1dCk7XG4gIH1cbiAgc3RhdGljIHRydWUoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpbnB1dCA9IGlucHV0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRydWUoaW5wdXQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSAmJiBpbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpICYmIGhscC5maXJzdChpbnB1dCkgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGggPT09IDAgJiYgaW5wdXQuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlucHV0ID09PSAnMCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlucHV0ID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQgPT09ICcgJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQgPT09ICdudWxsJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQgPT09ICdmYWxzZScpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgc3RhdGljIGZhbHNlKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaW5wdXQgPSBpbnB1dCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5mYWxzZShpbnB1dCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlucHV0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkgJiYgaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSAmJiBobHAuZmlyc3QoaW5wdXQpID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhpbnB1dCkubGVuZ3RoID09PSAwICYmIGlucHV0LmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlucHV0ID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGlucHV0ID09PSAnMCcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gJyAnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gJ251bGwnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dCA9PT0gJ2ZhbHNlJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdGF0aWMgdigpIHtcbiAgICBpZiAodGhpcy5ueChhcmd1bWVudHMpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy54KGFyZ3VtZW50c1tpXSkpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1tpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHN0YXRpYyBsb29wKGlucHV0LCBmdW4pIHtcbiAgICBpZiAodGhpcy5ueChpbnB1dCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgIGlucHV0LmZvckVhY2goKGlucHV0X192YWx1ZSwgaW5wdXRfX2tleSkgPT4ge1xuICAgICAgICBmdW4oaW5wdXRfX3ZhbHVlLCBpbnB1dF9fa2V5KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuICAgICAgT2JqZWN0LmVudHJpZXMoaW5wdXQpLmZvckVhY2goX3JlZiA9PiB7XG4gICAgICAgIGxldCBbaW5wdXRfX2tleSwgaW5wdXRfX3ZhbHVlXSA9IF9yZWY7XG4gICAgICAgIGZ1bihpbnB1dF9fdmFsdWUsIGlucHV0X19rZXkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBtYXAob2JqLCBmbiwgY3R4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICBhW2JdID0gZm4uY2FsbChjdHggfHwgbnVsbCwgYiwgb2JqW2JdKTtcbiAgICAgIHJldHVybiBhO1xuICAgIH0sIHt9KTtcbiAgfVxuICBzdGF0aWMgZmlyc3QoaW5wdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgIHZhciByZXQgPSBudWxsO1xuICAgICAgaW5wdXQuZm9yRWFjaCgoaW5wdXRfX3ZhbHVlLCBpbnB1dF9fa2V5KSA9PiB7XG4gICAgICAgIGlmIChyZXQgPT09IG51bGwpIHtcbiAgICAgICAgICByZXQgPSBpbnB1dF9fdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciByZXQgPSBudWxsO1xuICAgICAgT2JqZWN0LmVudHJpZXMoaW5wdXQpLmZvckVhY2goX3JlZjIgPT4ge1xuICAgICAgICBsZXQgW2lucHV0X19rZXksIGlucHV0X192YWx1ZV0gPSBfcmVmMjtcbiAgICAgICAgaWYgKHJldCA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldCA9IGlucHV0X192YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBzdGF0aWMgbGFzdChpbnB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgbGV0IHJldCA9IG51bGw7XG4gICAgICBpbnB1dC5mb3JFYWNoKChpbnB1dF9fdmFsdWUsIGlucHV0X19rZXkpID0+IHtcbiAgICAgICAgcmV0ID0gaW5wdXRfX3ZhbHVlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuICAgICAgbGV0IHJldCA9IG51bGw7XG4gICAgICBPYmplY3QuZW50cmllcyhpbnB1dCkuZm9yRWFjaChfcmVmMyA9PiB7XG4gICAgICAgIGxldCBbaW5wdXRfX2tleSwgaW5wdXRfX3ZhbHVlXSA9IF9yZWYzO1xuICAgICAgICByZXQgPSBpbnB1dF9fdmFsdWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHN0YXRpYyByYW5kKGlucHV0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICByZXR1cm4gaW5wdXRbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaW5wdXQubGVuZ3RoKV07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgaW5wdXQgPSBPYmplY3QudmFsdWVzKGlucHV0KTtcbiAgICAgIHJldHVybiBpbnB1dFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpbnB1dC5sZW5ndGgpXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc3RhdGljIHJhbmRvbV9zdHJpbmcoKSB7XG4gICAgbGV0IGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogODtcbiAgICBsZXQgY2hhcnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG4gICAgaWYgKGNoYXJzID09PSBudWxsKSB7XG4gICAgICBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gICAgfVxuICAgIGxldCBjaGFyc19sZW5ndGggPSBjaGFycy5sZW5ndGgsXG4gICAgICByYW5kb21fc3RyaW5nID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcmFuZG9tX3N0cmluZyArPSBjaGFyc1t+fihNYXRoLnJhbmRvbSgpICogKGNoYXJzX2xlbmd0aCAtIDEgLSAwICsgMSkpICsgMF07XG4gICAgfVxuICAgIHJldHVybiByYW5kb21fc3RyaW5nO1xuICB9XG4gIHN0YXRpYyByb3VuZCgpIHtcbiAgICBsZXQgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG4gICAgbGV0IGRlY2ltYWxzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAgIHJldHVybiBOdW1iZXIoTWF0aC5yb3VuZCh2YWx1ZSArICdlJyArIGRlY2ltYWxzKSArICdlLScgKyBkZWNpbWFscyk7XG4gIH1cbiAgc3RhdGljIGlzSW50ZWdlcih2YWx1ZSkge1xuICAgIHJldHVybiAhaXNOYU4odmFsdWUpICYmIHBhcnNlSW50KE51bWJlcih2YWx1ZSkpID09IHZhbHVlICYmICFpc05hTihwYXJzZUludCh2YWx1ZSwgMTApKTtcbiAgfVxuICBzdGF0aWMgcmFuZG9tX2ludCgpIHtcbiAgICBsZXQgbWluID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgIGxldCBtYXggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDk5OTk5O1xuICAgIGlmICghdGhpcy5pc0ludGVnZXIobWluKSB8fCAhdGhpcy5pc0ludGVnZXIobWF4KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAobWluID4gbWF4KSB7XG4gICAgICBbbWluLCBtYXhdID0gW21heCwgbWluXTtcbiAgICB9XG4gICAgcmV0dXJuIH5+KE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICB9XG4gIHN0YXRpYyBjYXBpdGFsaXplKCkge1xuICAgIGxldCBzdHJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7XG4gICAgaWYgKHN0cmluZyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG4gICAgaWYgKHN0cmluZyA9PT0gJycpIHtcbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG4gIH1cbiAgc3RhdGljIGNvb2tpZUV4aXN0cyhjb29raWVfbmFtZSkge1xuICAgIGlmIChkb2N1bWVudC5jb29raWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmNvb2tpZUdldChjb29raWVfbmFtZSkgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhdGljIGNvb2tpZUdldChjb29raWVfbmFtZSkge1xuICAgIHZhciBjb29raWVfbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cChjb29raWVfbmFtZSArICc9KFteO10rKScpKTtcbiAgICBpZiAoY29va2llX21hdGNoKSB7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZV9tYXRjaFsxXSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHN0YXRpYyBjb29raWVTZXQoY29va2llX25hbWUsIGNvb2tpZV92YWx1ZSwgZGF5cykge1xuICAgIGxldCBmdWxsX2RvbWFpbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogdHJ1ZTtcbiAgICBsZXQgc2FtZXNpdGUgPSAnJztcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHBzJykgPiAtMSkge1xuICAgICAgc2FtZXNpdGUgPSAnOyBTYW1lU2l0ZT1Ob25lOyBTZWN1cmUnO1xuICAgIH1cbiAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVfbmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChjb29raWVfdmFsdWUpICsgJzsgJyArICdleHBpcmVzPScgKyBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b1VUQ1N0cmluZygpICsgJzsgcGF0aD0vJyArIHNhbWVzaXRlICsgJzsgZG9tYWluPScgKyAoZnVsbF9kb21haW4gPT09IHRydWUgPyB0aGlzLnVybEhvc3RUb3BMZXZlbCgpIDogJycpO1xuICB9XG4gIHN0YXRpYyBjb29raWVEZWxldGUoY29va2llX25hbWUpIHtcbiAgICBsZXQgZnVsbF9kb21haW4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7XG4gICAgbGV0IHNhbWVzaXRlID0gJyc7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwcycpID4gLTEpIHtcbiAgICAgIHNhbWVzaXRlID0gJzsgU2FtZVNpdGU9Tm9uZTsgU2VjdXJlJztcbiAgICB9XG4gICAgZG9jdW1lbnQuY29va2llID0gY29va2llX25hbWUgKyAnPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQzsgcGF0aD0vJyArIHNhbWVzaXRlICsgJzsgZG9tYWluPScgKyAoZnVsbF9kb21haW4gPT09IHRydWUgPyB0aGlzLnVybEhvc3RUb3BMZXZlbCgpIDogJycpO1xuICB9XG4gIHN0YXRpYyBsb2NhbFN0b3JhZ2VTZXQoa2V5LCB2YWx1ZSkge1xuICAgIGxldCB0dGwgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7XG4gICAgdHRsID0gdHRsICogKDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLFxuICAgICAgaXRlbSA9IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBleHBpcnk6IG5vdy5nZXRUaW1lKCkgKyB0dGxcbiAgICAgIH07XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShpdGVtKSk7XG4gIH1cbiAgc3RhdGljIGxvY2FsU3RvcmFnZUdldChrZXkpIHtcbiAgICBsZXQgaXRlbVN0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaWYgKCFpdGVtU3RyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGl0ZW0gPSBKU09OLnBhcnNlKGl0ZW1TdHIpLFxuICAgICAgbm93ID0gbmV3IERhdGUoKTtcbiAgICBpZiAobm93LmdldFRpbWUoKSA+IGl0ZW0uZXhwaXJ5KSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpdGVtLnZhbHVlO1xuICB9XG4gIHN0YXRpYyBsb2NhbFN0b3JhZ2VEZWxldGUoa2V5KSB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgfVxuICBzdGF0aWMgbG9jYWxTdG9yYWdlRXhpc3RzKGtleSkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmFnZUdldChrZXkpICE9PSBudWxsO1xuICB9XG4gIHN0YXRpYyBnZXRQYXJhbSh2YXJpYWJsZSkge1xuICAgIGxldCB1cmwgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuICAgIGlmICh0aGlzLm54KHVybCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgcXVlcnkgPSB1cmwuc3Vic3RyaW5nKDEpLFxuICAgICAgdmFycyA9IHF1ZXJ5LnNwbGl0KCcmJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoJz0nKTtcbiAgICAgIGlmIChwYWlyWzBdID09IHZhcmlhYmxlICYmIHRoaXMueChwYWlyWzFdKSkge1xuICAgICAgICByZXR1cm4gcGFpclsxXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc3RhdGljIGdldERldmljZSgpIHtcbiAgICBpZiAodGhpcy5pc1Bob25lKCkpIHtcbiAgICAgIHJldHVybiAncGhvbmUnO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc1RhYmxldCgpKSB7XG4gICAgICByZXR1cm4gJ3RhYmxldCc7XG4gICAgfVxuICAgIHJldHVybiAnZGVza3RvcCc7XG4gIH1cbiAgc3RhdGljIGlzUGhvbmUoKSB7XG4gICAgLy8gYmFzZWQgb24gZGV0ZWN0bW9iaWxlYnJvd3NlcnMuY29tXG4gICAgbGV0IGEgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xuICAgIHJldHVybiAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2kudGVzdChhKSB8fCAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsIDQpKTtcbiAgfVxuICBzdGF0aWMgaXNUYWJsZXQoKSB7XG4gICAgLy8gYmFzZWQgb24gZGV0ZWN0bW9iaWxlYnJvd3NlcnMuY29tXG4gICAgbGV0IGEgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xuICAgIHJldHVybiAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2kudGVzdChhKSB8fCAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsIDQpKTtcbiAgfVxuICBzdGF0aWMgaXNEZXNrdG9wKCkge1xuICAgIHJldHVybiAhdGhpcy5pc1Bob25lKCkgJiYgIXRoaXMuaXNUYWJsZXQoKTtcbiAgfVxuICBzdGF0aWMgaXNNb2JpbGUoKSB7XG4gICAgLy8gdmlld3BvcnQgd2lkdGggYmFzZWQgT1IgcGhvbmUgYmFzZWRcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3NTAgfHwgdGhpcy5pc1Bob25lKCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhdGljIGlzVG91Y2goKSB7XG4gICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgfHwgZmFsc2U7XG4gIH1cbiAgc3RhdGljIGlzTWFjKCkge1xuICAgIHJldHVybiBobHAuZ2V0T3MoKSA9PT0gJ21hYyc7XG4gIH1cbiAgc3RhdGljIGlzTGludXgoKSB7XG4gICAgcmV0dXJuIGhscC5nZXRPcygpID09PSAnbGludXgnO1xuICB9XG4gIHN0YXRpYyBpc1dpbmRvd3MoKSB7XG4gICAgcmV0dXJuIGhscC5nZXRPcygpID09PSAnd2luZG93cyc7XG4gIH1cbiAgc3RhdGljIGdldE9zKCkge1xuICAgIGxldCB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgIHBsYXRmb3JtID0gd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSxcbiAgICAgIG1hY29zUGxhdGZvcm1zID0gWydNYWNpbnRvc2gnLCAnTWFjSW50ZWwnLCAnTWFjUFBDJywgJ01hYzY4SyddLFxuICAgICAgd2luZG93c1BsYXRmb3JtcyA9IFsnV2luMzInLCAnV2luNjQnLCAnV2luZG93cycsICdXaW5DRSddLFxuICAgICAgaW9zUGxhdGZvcm1zID0gWydpUGhvbmUnLCAnaVBhZCcsICdpUG9kJ10sXG4gICAgICBvcyA9ICd1bmtub3duJztcbiAgICBpZiAobWFjb3NQbGF0Zm9ybXMuaW5kZXhPZihwbGF0Zm9ybSkgIT09IC0xKSB7XG4gICAgICBvcyA9ICdtYWMnO1xuICAgIH0gZWxzZSBpZiAoaW9zUGxhdGZvcm1zLmluZGV4T2YocGxhdGZvcm0pICE9PSAtMSkge1xuICAgICAgb3MgPSAnbWFjJztcbiAgICB9IGVsc2UgaWYgKHdpbmRvd3NQbGF0Zm9ybXMuaW5kZXhPZihwbGF0Zm9ybSkgIT09IC0xKSB7XG4gICAgICBvcyA9ICd3aW5kb3dzJztcbiAgICB9IGVsc2UgaWYgKC9BbmRyb2lkLy50ZXN0KHVzZXJBZ2VudCkpIHtcbiAgICAgIG9zID0gJ2xpbnV4JztcbiAgICB9IGVsc2UgaWYgKC9MaW51eC8udGVzdChwbGF0Zm9ybSkpIHtcbiAgICAgIG9zID0gJ2xpbnV4JztcbiAgICB9XG4gICAgcmV0dXJuIG9zO1xuICB9XG4gIHN0YXRpYyBnZXRCcm93c2VyKCkge1xuICAgIGxldCBicm93c2VyX25hbWUgPSAnJyxcbiAgICAgIGlzSUUgPSAvKkBjY19vbiFAKi9mYWxzZSB8fCAhIWRvY3VtZW50LmRvY3VtZW50TW9kZSxcbiAgICAgIGlzRWRnZSA9ICFpc0lFICYmICEhd2luZG93LlN0eWxlTWVkaWE7XG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignT3BlcmEnKSAhPSAtMSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ09QUicpICE9IC0xKSB7XG4gICAgICBicm93c2VyX25hbWUgPSAnb3BlcmEnO1xuICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSAhPSAtMSAmJiAhaXNFZGdlKSB7XG4gICAgICBicm93c2VyX25hbWUgPSAnY2hyb21lJztcbiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgIT0gLTEgJiYgIWlzRWRnZSkge1xuICAgICAgYnJvd3Nlcl9uYW1lID0gJ3NhZmFyaSc7XG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSAhPSAtMSkge1xuICAgICAgYnJvd3Nlcl9uYW1lID0gJ2ZpcmVmb3gnO1xuICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgIT0gLTEgfHwgISFkb2N1bWVudC5kb2N1bWVudE1vZGUgPT0gdHJ1ZSkge1xuICAgICAgLy9JRiBJRSA+IDEwXG4gICAgICBicm93c2VyX25hbWUgPSAnaWUnO1xuICAgIH0gZWxzZSBpZiAoaXNFZGdlKSB7XG4gICAgICBicm93c2VyX25hbWUgPSAnZWRnZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyb3dzZXJfbmFtZSA9ICd1bmtub3duJztcbiAgICB9XG4gICAgcmV0dXJuIGJyb3dzZXJfbmFtZTtcbiAgfVxuICBzdGF0aWMgaXNPYmplY3QoYSkge1xuICAgIHJldHVybiAhIWEgJiYgYS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xuICB9XG4gIHN0YXRpYyBpc0FycmF5KGEpIHtcbiAgICByZXR1cm4gISFhICYmIGEuY29uc3RydWN0b3IgPT09IEFycmF5O1xuICB9XG4gIHN0YXRpYyBpc1N0cmluZyhzdHJpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHN0cmluZyA9PT0gJ3N0cmluZycgfHwgc3RyaW5nIGluc3RhbmNlb2YgU3RyaW5nO1xuICB9XG4gIHN0YXRpYyBpc0RhdGUoc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMubngoc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBpZiBzdHJpbmcgaXMgb2Ygb2JqZWN0IGRhdGVcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHN0cmluZykgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGlmIHRoaXMgaXMgbm90IGEgc3RyaW5nXG4gICAgaWYgKCF0aGlzLmlzU3RyaW5nKHN0cmluZykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gc3Ryb25nIGNoZWNrXG4gICAgaWYgKHN0cmluZy5zcGxpdCgnLScpLmxlbmd0aCAhPT0gMykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgZGF5ID0gcGFyc2VJbnQoc3RyaW5nLnNwbGl0KCctJylbMl0pLFxuICAgICAgbW9udGggPSBwYXJzZUludChzdHJpbmcuc3BsaXQoJy0nKVsxXSksXG4gICAgICB5ZWFyID0gcGFyc2VJbnQoc3RyaW5nLnNwbGl0KCctJylbMF0pLFxuICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgZGF0ZS5zZXRGdWxsWWVhcih5ZWFyLCBtb250aCAtIDEsIGRheSk7XG4gICAgaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSA9PSB5ZWFyICYmIGRhdGUuZ2V0TW9udGgoKSArIDEgPT0gbW9udGggJiYgZGF0ZS5nZXREYXRlKCkgPT0gZGF5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YXRpYyBmb3JtYXREYXRlKGZvcm1hdCkge1xuICAgIGxldCBkYXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuICAgIGlmIChkYXRlID09PSBmYWxzZSB8fCBkYXRlID09PSB0cnVlIHx8IGRhdGUgPT09IG51bGwgfHwgZGF0ZSA9PT0gJycpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGUgIT09ICdvYmplY3QnKSB7XG4gICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5yZXBsYWNlKC8tL2csICcvJykpO1xuICAgIH1cbiAgICBsZXQgc3RyaW5nID0gJycsXG4gICAgICBtbyA9IGRhdGUuZ2V0TW9udGgoKSxcbiAgICAgIG0xID0gbW8gKyAxLFxuICAgICAgZG93ID0gZGF0ZS5nZXREYXkoKSxcbiAgICAgIGQgPSBkYXRlLmdldERhdGUoKSxcbiAgICAgIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBoID0gZGF0ZS5nZXRIb3VycygpLFxuICAgICAgbWkgPSBkYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgIHMgPSBkYXRlLmdldFNlY29uZHMoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gZm9ybWF0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKGZvcm1hdFtpXSkge1xuICAgICAgICBjYXNlICdqJzpcbiAgICAgICAgICBzdHJpbmcgKz0gZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgc3RyaW5nICs9IGQgPCAxMCA/ICcwJyArIGQgOiBkO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICBsZXQgZGF5cyA9IEFycmF5KCdTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheScpO1xuICAgICAgICAgIHN0cmluZyArPSBkYXlzW2Rvd107XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3cnOlxuICAgICAgICAgIHN0cmluZyArPSBkb3c7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0QnOlxuICAgICAgICAgIGRheXMgPSBBcnJheSgnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RocicsICdGcmknLCAnU2F0Jyk7XG4gICAgICAgICAgc3RyaW5nICs9IGRheXNbZG93XTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgICAgc3RyaW5nICs9IG0xIDwgMTAgPyAnMCcgKyBtMSA6IG0xO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICduJzpcbiAgICAgICAgICBzdHJpbmcgKz0gbTE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0YnOlxuICAgICAgICAgIGxldCBtb250aHMgPSBBcnJheSgnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlcicpO1xuICAgICAgICAgIHN0cmluZyArPSBtb250aHNbbW9dO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgICBtb250aHMgPSBBcnJheSgnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnKTtcbiAgICAgICAgICBzdHJpbmcgKz0gbW9udGhzW21vXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWSc6XG4gICAgICAgICAgc3RyaW5nICs9IHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3knOlxuICAgICAgICAgIHN0cmluZyArPSB5LnRvU3RyaW5nKCkuc2xpY2UoLTIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICBzdHJpbmcgKz0gaCA8IDEwID8gJzAnICsgaCA6IGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2cnOlxuICAgICAgICAgIGxldCBob3VyID0gaCA9PT0gMCA/IDEyIDogaDtcbiAgICAgICAgICBzdHJpbmcgKz0gaG91ciA+IDEyID8gaG91ciAtIDEyIDogaG91cjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgaG91ciA9IGggPT09IDAgPyAxMiA6IGg7XG4gICAgICAgICAgaG91ciA9IGhvdXIgPiAxMiA/IGhvdXIgLSAxMiA6IGhvdXI7XG4gICAgICAgICAgc3RyaW5nICs9IGhvdXIgPCAxMCA/ICcwJyArIGhvdXIgOiBob3VyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICBzdHJpbmcgKz0gaCA8IDEyID8gJ2FtJyA6ICdwbSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgIHN0cmluZyArPSBtaSA8IDEwID8gJzAnICsgbWkgOiBtaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgc3RyaW5nICs9IHMgPCAxMCA/ICcwJyArIHMgOiBzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICBzdHJpbmcgKz0gZGF0ZS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN0cmluZyArPSBmb3JtYXRbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cbiAgc3RhdGljIGRlZXBDb3B5KG9iaikge1xuICAgIGxldCBoYXNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBuZXcgV2Vha01hcCgpO1xuICAgIGlmIChPYmplY3Qob2JqKSAhPT0gb2JqKSByZXR1cm4gb2JqOyAvLyBwcmltaXRpdmVzXG4gICAgaWYgKGhhc2guaGFzKG9iaikpIHJldHVybiBoYXNoLmdldChvYmopOyAvLyBjeWNsaWMgcmVmZXJlbmNlXG4gICAgY29uc3QgcmVzdWx0ID0gb2JqIGluc3RhbmNlb2YgRGF0ZSA/IG5ldyBEYXRlKG9iaikgOiBvYmogaW5zdGFuY2VvZiBSZWdFeHAgPyBuZXcgUmVnRXhwKG9iai5zb3VyY2UsIG9iai5mbGFncykgOiBvYmouY29uc3RydWN0b3IgPyBuZXcgb2JqLmNvbnN0cnVjdG9yKCkgOiBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGhhc2guc2V0KG9iaiwgcmVzdWx0KTtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgTWFwKSBBcnJheS5mcm9tKG9iaiwgX3JlZjQgPT4ge1xuICAgICAgbGV0IFtrZXksIHZhbF0gPSBfcmVmNDtcbiAgICAgIHJldHVybiByZXN1bHQuc2V0KGtleSwgaGxwLmRlZXBDb3B5KHZhbCwgaGFzaCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHJlc3VsdCwgLi4uT2JqZWN0LmtleXMob2JqKS5tYXAoa2V5ID0+ICh7XG4gICAgICBba2V5XTogaGxwLmRlZXBDb3B5KG9ialtrZXldLCBoYXNoKVxuICAgIH0pKSk7XG4gIH1cbiAgc3RhdGljIGpzb25TdHJpbmdUb09iamVjdChzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5ueChzdHJpbmcpIHx8ICF0aGlzLmlzU3RyaW5nKHN0cmluZykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBpc0pzb25TdHJpbmcoc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMubngoc3RyaW5nKSB8fCAhdGhpcy5pc1N0cmluZyhzdHJpbmcpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBsZXQganNvbiA9IEpTT04ucGFyc2Uoc3RyaW5nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBqc29uT2JqZWN0VG9TdHJpbmcob2JqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmplY3QpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgc3RhdGljIHV1aWQoKSB7XG4gICAgZnVuY3Rpb24gczQoKSB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuICB9XG4gIHN0YXRpYyBndWlkKCkge1xuICAgIHJldHVybiB0aGlzLnV1aWQoKTtcbiAgfVxuICBzdGF0aWMgcmVwbGFjZUFsbChzdHJpbmcsIHNlYXJjaCwgcmVwbGFjZSkge1xuICAgIHJldHVybiBzdHJpbmcuc3BsaXQoc2VhcmNoKS5qb2luKHJlcGxhY2UpO1xuICB9XG4gIHN0YXRpYyByZXBsYWNlTGFzdChzdHJpbmcsIHNlYXJjaCwgcmVwbGFjZSkge1xuICAgIGxldCBuID0gc3RyaW5nLmxhc3RJbmRleE9mKHNlYXJjaCk7XG4gICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKDAsIG4pICsgc3RyaW5nLnNsaWNlKG4pLnJlcGxhY2Uoc2VhcmNoLCByZXBsYWNlKTtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9XG4gIHN0YXRpYyByZXBsYWNlRmlyc3Qoc3RyaW5nLCBzZWFyY2gsIHJlcGxhY2UpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uoc2VhcmNoLCByZXBsYWNlKTtcbiAgfVxuICBzdGF0aWMgZmluZEFsbFBvc2l0aW9ucyhzZWFyY2hTdHIsIHN0cikge1xuICAgIGxldCBzZWFyY2hTdHJMZW4gPSBzZWFyY2hTdHIubGVuZ3RoLFxuICAgICAgc3RhcnRJbmRleCA9IDAsXG4gICAgICBpbmRleCxcbiAgICAgIGluZGljZXMgPSBbXTtcbiAgICBpZiAoc2VhcmNoU3RyTGVuID09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgd2hpbGUgKChpbmRleCA9IHN0ci5pbmRleE9mKHNlYXJjaFN0ciwgc3RhcnRJbmRleCkpID4gLTEpIHtcbiAgICAgIGluZGljZXMucHVzaChpbmRleCk7XG4gICAgICBzdGFydEluZGV4ID0gaW5kZXggKyBzZWFyY2hTdHJMZW47XG4gICAgfVxuICAgIHJldHVybiBpbmRpY2VzO1xuICB9XG4gIHN0YXRpYyBmaW5kQWxsUG9zaXRpb25zQ2FzZUluc2Vuc2l0aXZlKHNlYXJjaFN0ciwgc3RyKSB7XG4gICAgbGV0IHNlYXJjaFN0ckxlbiA9IHNlYXJjaFN0ci5sZW5ndGgsXG4gICAgICBzdGFydEluZGV4ID0gMCxcbiAgICAgIGluZGV4LFxuICAgICAgaW5kaWNlcyA9IFtdO1xuICAgIGlmIChzZWFyY2hTdHJMZW4gPT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB3aGlsZSAoKGluZGV4ID0gdGhpcy5pbmRleE9mQ2FzZUluc2Vuc2l0aXZlKHNlYXJjaFN0ciwgc3RyLCBzdGFydEluZGV4KSkgPiAtMSkge1xuICAgICAgaW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgIHN0YXJ0SW5kZXggPSBpbmRleCArIHNlYXJjaFN0ckxlbjtcbiAgICB9XG4gICAgcmV0dXJuIGluZGljZXM7XG4gIH1cbiAgc3RhdGljIGNvdW50QWxsT2NjdXJlbmNlcyh2YWx1ZSwgc3RyKSB7XG4gICAgbGV0IHJlZ0V4cCA9IG5ldyBSZWdFeHAodmFsdWUsICdnJyk7XG4gICAgcmV0dXJuIChzdHIubWF0Y2gocmVnRXhwKSB8fCBbXSkubGVuZ3RoO1xuICB9XG4gIHN0YXRpYyBjb3VudEFsbE9jY3VyZW5jZXNDYXNlSW5zZW5zaXRpdmUodmFsdWUsIHN0cikge1xuICAgIGxldCByZWdFeHAgPSBuZXcgUmVnRXhwKHZhbHVlLCAnZ2knKTtcbiAgICByZXR1cm4gKHN0ci5tYXRjaChyZWdFeHApIHx8IFtdKS5sZW5ndGg7XG4gIH1cbiAgc3RhdGljIGluZGV4T2ZDYXNlSW5zZW5zaXRpdmUoc2VhcmNoU3RyLCBzdHIsIG9mZnNldCkge1xuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFN0ci50b0xvd2VyQ2FzZSgpLCBvZmZzZXQpO1xuICB9XG4gIHN0YXRpYyBoaWdobGlnaHQoc3RyaW5nLCBxdWVyeSkge1xuICAgIGxldCBzdHJpcCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7XG4gICAgbGV0IHN0cmlwX2xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogNTAwO1xuICAgIGlmICh0aGlzLm54KHN0cmluZykgfHwgdGhpcy5ueChxdWVyeSkpIHtcbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICAgIGlmIChzdHJpcCA9PT0gdHJ1ZSkge1xuICAgICAgbGV0IGRvdHMgPSAnLi4uJztcbiAgICAgIC8vIGdldCBhbGwgcXVlcnkgYmVnaW4gcG9zaXRpb25zIGluIHNwb3RcbiAgICAgIGxldCBwb3NpdGlvbnMgPSB0aGlzLmZpbmRBbGxQb3NpdGlvbnNDYXNlSW5zZW5zaXRpdmUocXVlcnksIHN0cmluZyk7XG4gICAgICAvLyBzdHJpcCBhd2F5IHBhcnRzXG4gICAgICBsZXQgd29yZHMgPSBzdHJpbmcuc3BsaXQoJyAnKTtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIHdvcmRzLmZvckVhY2goKHdvcmRzX192YWx1ZSwgd29yZHNfX2tleSkgPT4ge1xuICAgICAgICBsZXQgc3RyaXBfbm93ID0gdHJ1ZTtcbiAgICAgICAgcG9zaXRpb25zLmZvckVhY2gocG9zaXRpb25zX192YWx1ZSA9PiB7XG4gICAgICAgICAgaWYgKGkgPj0gcG9zaXRpb25zX192YWx1ZSAtIHN0cmlwX2xlbmd0aCAmJiBpIDw9IHBvc2l0aW9uc19fdmFsdWUgKyBxdWVyeS5sZW5ndGggKyBzdHJpcF9sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBzdHJpcF9ub3cgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3RyaXBfbm93ID09PSB0cnVlKSB7XG4gICAgICAgICAgd29yZHNbd29yZHNfX2tleV0gPSBkb3RzO1xuICAgICAgICB9XG4gICAgICAgIGkgKz0gd29yZHNfX3ZhbHVlLmxlbmd0aCArIDE7XG4gICAgICB9KTtcbiAgICAgIHN0cmluZyA9IHdvcmRzLmpvaW4oJyAnKTtcbiAgICAgIHdoaWxlIChzdHJpbmcuaW5kZXhPZihkb3RzICsgJyAnICsgZG90cykgPiAtMSkge1xuICAgICAgICBzdHJpbmcgPSB0aGlzLnJlcGxhY2VBbGwoc3RyaW5nLCBkb3RzICsgJyAnICsgZG90cywgZG90cyk7XG4gICAgICB9XG4gICAgICBzdHJpbmcgPSBzdHJpbmcudHJpbSgpO1xuICAgIH1cbiAgICAvLyBhZ2FpbjogZ2V0IGFsbCBxdWVyeSBiZWdpbiBwb3NpdGlvbnMgaW4gc3BvdFxuICAgIGxldCBwb3NpdGlvbnMgPSB0aGlzLmZpbmRBbGxQb3NpdGlvbnNDYXNlSW5zZW5zaXRpdmUocXVlcnksIHN0cmluZyk7XG4gICAgLy8gd3JhcCBzcGFuIGVsZW1lbnQgYXJvdW5kIHRoZW1cbiAgICBsZXQgd3JhcF9iZWdpbiA9ICc8c3Ryb25nIGNsYXNzPVwiaGlnaGxpZ2h0XCI+JztcbiAgICBsZXQgd3JhcF9lbmQgPSAnPC9zdHJvbmc+JztcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHBvc2l0aW9ucy5sZW5ndGg7IHgrKykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3NpdGlvbnNbeF0pICsgd3JhcF9iZWdpbiArIHN0cmluZy5zdWJzdHJpbmcocG9zaXRpb25zW3hdLCBwb3NpdGlvbnNbeF0gKyBxdWVyeS5sZW5ndGgpICsgd3JhcF9lbmQgKyBzdHJpbmcuc3Vic3RyaW5nKHBvc2l0aW9uc1t4XSArIHF1ZXJ5Lmxlbmd0aCk7XG4gICAgICAvLyBzaGlmdCBvdGhlciBwb3NpdGlvbnNcbiAgICAgIGZvciAobGV0IHkgPSB4ICsgMTsgeSA8IHBvc2l0aW9ucy5sZW5ndGg7IHkrKykge1xuICAgICAgICBwb3NpdGlvbnNbeV0gPSBwb3NpdGlvbnNbeV0gKyB3cmFwX2JlZ2luLmxlbmd0aCArIHdyYXBfZW5kLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfVxuICBzdGF0aWMgZ2V0KHVybCkge1xuICAgIGxldCBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuICAgIHJldHVybiB0aGlzLmNhbGwoJ0dFVCcsIHVybCwgYXJncyk7XG4gIH1cbiAgc3RhdGljIHBvc3QodXJsKSB7XG4gICAgbGV0IGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG4gICAgcmV0dXJuIHRoaXMuY2FsbCgnUE9TVCcsIHVybCwgYXJncyk7XG4gIH1cbiAgc3RhdGljIGNhbGwobWV0aG9kLCB1cmwpIHtcbiAgICBsZXQgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcbiAgICBpZiAoYXJncyA9PT0gbnVsbCkge1xuICAgICAgYXJncyA9IHt9O1xuICAgIH1cbiAgICBpZiAoISgnZGF0YScgaW4gYXJncykpIHtcbiAgICAgIGFyZ3MuZGF0YSA9IHt9O1xuICAgIH1cbiAgICBpZiAoISgnaGVhZGVycycgaW4gYXJncykpIHtcbiAgICAgIGFyZ3MuaGVhZGVycyA9IG51bGw7XG4gICAgfVxuICAgIGlmICghKCd0aHJvdHRsZScgaW4gYXJncykpIHtcbiAgICAgIGFyZ3MudGhyb3R0bGUgPSAwO1xuICAgIH1cbiAgICBpZiAoISgnYWxsb3dfZXJyb3JzJyBpbiBhcmdzKSkge1xuICAgICAgYXJncy5hbGxvd19lcnJvcnMgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignaHR0cCcpICE9PSAwKSB7XG4gICAgICAgICAgdXJsID0gaGxwLmJhc2VVcmwoKSArICcvJyArIHVybDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAgICAgaWYgKCdkYXRhJyBpbiBhcmdzICYmIGFyZ3MuZGF0YSAhPT0gbnVsbCAmJiB0eXBlb2YgYXJncy5kYXRhID09PSAnb2JqZWN0JyAmJiAhKGFyZ3MuZGF0YSBpbnN0YW5jZW9mIEZvcm1EYXRhKSkge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgICAgIGFyZ3MuZGF0YSA9IEpTT04uc3RyaW5naWZ5KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMueChhcmdzLmhlYWRlcnMpKSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoYXJncy5oZWFkZXJzKS5mb3JFYWNoKF9yZWY1ID0+IHtcbiAgICAgICAgICAgIGxldCBbaGVhZGVyc19fa2V5LCBoZWFkZXJzX192YWx1ZV0gPSBfcmVmNTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlcnNfX2tleSwgaGVhZGVyc19fdmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlICE9IDQgfHwgYXJncy5hbGxvd19lcnJvcnMgIT09IHRydWUgJiYgeGhyLnN0YXR1cyAhPSAyMDAgJiYgeGhyLnN0YXR1cyAhPSAzMDQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSnNvblN0cmluZyh4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgICAgICAgICByZWplY3QodGhpcy5qc29uU3RyaW5nVG9PYmplY3QoeGhyLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5pc0pzb25TdHJpbmcoeGhyLnJlc3BvbnNlVGV4dCkpIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5qc29uU3RyaW5nVG9PYmplY3QoeGhyLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KFt4aHIucmVhZHlTdGF0ZSwgeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHRdKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgICAgICB4aHIuc2VuZChudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICB4aHIuc2VuZChhcmdzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9LCBhcmdzLnRocm90dGxlKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgb25SZXNpemVIb3Jpem9udGFsKGZ1bikge1xuICAgIGxldCB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgd2luZG93V2lkdGhOZXcsXG4gICAgICB0aW1lb3V0O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICB3aW5kb3dXaWR0aE5ldyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgaWYgKHdpbmRvd1dpZHRoTmV3ICE9IHdpbmRvd1dpZHRoKSB7XG4gICAgICAgIHdpbmRvd1dpZHRoID0gd2luZG93V2lkdGhOZXc7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZnVuKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBmdW4oKTtcbiAgfVxuICBzdGF0aWMgb25SZXNpemVWZXJ0aWNhbChmdW4pIHtcbiAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgd2luZG93SGVpZ2h0TmV3LFxuICAgICAgdGltZW91dDtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgd2luZG93SGVpZ2h0TmV3ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgaWYgKHdpbmRvd0hlaWdodE5ldyAhPSB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgd2luZG93SGVpZ2h0ID0gd2luZG93SGVpZ2h0TmV3O1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGZ1bigpO1xuICAgICAgICB9LCA1MCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZnVuKCk7XG4gIH1cbiAgc3RhdGljIHJlbW92ZUVtcHR5KGFycmF5KSB7XG4gICAgaWYgKHRoaXMubngoYXJyYXkpIHx8ICFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cbiAgICBhcnJheSA9IGFycmF5LmZpbHRlcihhcnJheV9fdmFsdWUgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMueChhcnJheV9fdmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxuICBzdGF0aWMgdW5pcXVlQXJyYXkoYXJyYXkpIHtcbiAgICBsZXQgc2VlbiA9IHt9LFxuICAgICAgcmV0X2FyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghKGFycmF5W2ldIGluIHNlZW4pKSB7XG4gICAgICAgIHJldF9hcnIucHVzaChhcnJheVtpXSk7XG4gICAgICAgIHNlZW5bYXJyYXlbaV1dID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldF9hcnI7XG4gIH1cbiAgc3RhdGljIHBvd2Vyc2V0KGFycmF5KSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChzdWJzZXRzLCB2YWx1ZSkgPT4gc3Vic2V0cy5jb25jYXQoc3Vic2V0cy5tYXAoc2V0ID0+IFsuLi5zZXQsIHZhbHVlXSkpLCBbW11dKTtcbiAgfVxuICBzdGF0aWMgY2hhclRvSW50KHZhbCkge1xuICAgIHZhbCA9IHZhbC50b1VwcGVyQ2FzZSgpO1xuICAgIGxldCBiYXNlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyxcbiAgICAgIGksXG4gICAgICBqLFxuICAgICAgcmVzdWx0ID0gMDtcbiAgICBmb3IgKGkgPSAwLCBqID0gdmFsLmxlbmd0aCAtIDE7IGkgPCB2YWwubGVuZ3RoOyBpICs9IDEsIGogLT0gMSkge1xuICAgICAgcmVzdWx0ICs9IE1hdGgucG93KGJhc2UubGVuZ3RoLCBqKSAqIChiYXNlLmluZGV4T2YodmFsW2ldKSArIDEpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHN0YXRpYyBpbnRUb0NoYXIobnVtKSB7XG4gICAgZm9yICh2YXIgcmV0ID0gJycsIGEgPSAxLCBiID0gMjY7IChudW0gLT0gYSkgPj0gMDsgYSA9IGIsIGIgKj0gMjYpIHtcbiAgICAgIHJldCA9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobnVtICUgYiAvIGEpICsgNjUpICsgcmV0O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG4gIHN0YXRpYyBzbHVnaWZ5KHRleHQpIHtcbiAgICByZXR1cm4gdGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkudHJpbSgpLnNwbGl0KCfDpCcpLmpvaW4oJ2FlJykuc3BsaXQoJ8O2Jykuam9pbignb2UnKS5zcGxpdCgnw7wnKS5qb2luKCd1ZScpLnNwbGl0KCfDnycpLmpvaW4oJ3NzJykucmVwbGFjZSgvW15cXHdcXHMtXS9nLCAnJykgLy8gcmVtb3ZlIG5vbi13b3JkIFthLXowLTlfXSwgbm9uLXdoaXRlc3BhY2UsIG5vbi1oeXBoZW4gY2hhcmFjdGVyc1xuICAgIC5yZXBsYWNlKC9bXFxzXy1dKy9nLCAnLScpIC8vIHN3YXAgYW55IGxlbmd0aCBvZiB3aGl0ZXNwYWNlLCB1bmRlcnNjb3JlLCBoeXBoZW4gY2hhcmFjdGVycyB3aXRoIGEgc2luZ2xlIC1cbiAgICAucmVwbGFjZSgvXi0rfC0rJC9nLCAnJyk7IC8vIHJlbW92ZSBsZWFkaW5nLCB0cmFpbGluZyAtXG4gIH1cblxuICBzdGF0aWMgaW5jQ2hhcihjaGFyKSB7XG4gICAgbGV0IHNoaWZ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxO1xuICAgIHJldHVybiB0aGlzLmludFRvQ2hhcih0aGlzLmNoYXJUb0ludChjaGFyKSArIHNoaWZ0KTtcbiAgfVxuICBzdGF0aWMgZGVjQ2hhcihjaGFyKSB7XG4gICAgbGV0IHNoaWZ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxO1xuICAgIHJldHVybiB0aGlzLmludFRvQ2hhcih0aGlzLmNoYXJUb0ludChjaGFyKSAtIHNoaWZ0KTtcbiAgfVxuICBzdGF0aWMgcmFuZ2Uoc3RhcnQsIGVuZCkge1xuICAgIGxldCByYW5nZSA9IFtdLFxuICAgICAgdHlwZW9mU3RhcnQgPSB0eXBlb2Ygc3RhcnQsXG4gICAgICB0eXBlb2ZFbmQgPSB0eXBlb2YgZW5kLFxuICAgICAgc3RlcCA9IDE7XG4gICAgaWYgKHR5cGVvZlN0YXJ0ID09ICd1bmRlZmluZWQnIHx8IHR5cGVvZkVuZCA9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2ZTdGFydCAhPSB0eXBlb2ZFbmQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICAgIHN0ZXAgPSAtc3RlcDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZlN0YXJ0ID09ICdudW1iZXInKSB7XG4gICAgICB3aGlsZSAoc3RlcCA+IDAgPyBlbmQgPj0gc3RhcnQgOiBlbmQgPD0gc3RhcnQpIHtcbiAgICAgICAgcmFuZ2UucHVzaChzdGFydCk7XG4gICAgICAgIHN0YXJ0ICs9IHN0ZXA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2ZTdGFydCA9PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHN0YXJ0Lmxlbmd0aCAhPSAxIHx8IGVuZC5sZW5ndGggIT0gMSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXJ0ID0gc3RhcnQuY2hhckNvZGVBdCgwKTtcbiAgICAgIGVuZCA9IGVuZC5jaGFyQ29kZUF0KDApO1xuICAgICAgd2hpbGUgKHN0ZXAgPiAwID8gZW5kID49IHN0YXJ0IDogZW5kIDw9IHN0YXJ0KSB7XG4gICAgICAgIHJhbmdlLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShzdGFydCkpO1xuICAgICAgICBzdGFydCArPSBzdGVwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlO1xuICB9XG4gIHN0YXRpYyBkYXRlVG9XZWVrKCkge1xuICAgIGxldCBkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsO1xuICAgIGlmIChkID09PSBudWxsKSB7XG4gICAgICBkID0gbmV3IERhdGUoKTtcbiAgICB9XG4gICAgZCA9IG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSkpO1xuICAgIGQuc2V0VVRDRGF0ZShkLmdldFVUQ0RhdGUoKSArIDQgLSAoZC5nZXRVVENEYXkoKSB8fCA3KSk7XG4gICAgbGV0IHllYXJTdGFydCA9IG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0VVRDRnVsbFllYXIoKSwgMCwgMSkpLFxuICAgICAgd2Vla05vID0gTWF0aC5jZWlsKCgoZCAtIHllYXJTdGFydCkgLyA4NjQwMDAwMCArIDEpIC8gNyk7XG4gICAgcmV0dXJuIHdlZWtObztcbiAgfVxuICBzdGF0aWMgd2Vla1RvRGF0ZSh3ZWVrLCB5ZWFyKSB7XG4gICAgaWYgKHllYXIgPT0gbnVsbCkge1xuICAgICAgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgICB9XG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGRhdGUuc2V0WWVhcih5ZWFyKTtcbiAgICBkYXRlLnNldERhdGUoMSk7XG4gICAgZGF0ZS5zZXRNb250aCgwKTtcbiAgICBkYXRlLnNldEhvdXJzKDApO1xuICAgIGRhdGUuc2V0TWludXRlcygwKTtcbiAgICBkYXRlLnNldFNlY29uZHMoMCk7XG4gICAgZGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgbGV0IEZJUlNUX0RBWV9PRl9XRUVLID0gMTtcbiAgICBsZXQgV0VFS19MRU5HVEggPSA3O1xuICAgIGxldCBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgIGRheSA9IGRheSA9PT0gMCA/IDcgOiBkYXk7XG4gICAgbGV0IGRheU9mZnNldCA9IC1kYXkgKyBGSVJTVF9EQVlfT0ZfV0VFSztcbiAgICBpZiAoV0VFS19MRU5HVEggLSBkYXkgKyAxIDwgNCkge1xuICAgICAgZGF5T2Zmc2V0ICs9IFdFRUtfTEVOR1RIO1xuICAgIH1cbiAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyBkYXlPZmZzZXQgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICBsZXQgd2Vla1RpbWUgPSAxMDAwICogNjAgKiA2MCAqIDI0ICogNyAqICh3ZWVrIC0gMSk7XG4gICAgbGV0IHRhcmdldFRpbWUgPSBkYXRlLmdldFRpbWUoKSArIHdlZWtUaW1lO1xuICAgIGRhdGUuc2V0VGltZSh0YXJnZXRUaW1lKTtcbiAgICBkYXRlLnNldEhvdXJzKDApO1xuICAgIGRhdGUuc2V0TWludXRlcygwKTtcbiAgICBkYXRlLnNldFNlY29uZHMoMCk7XG4gICAgZGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cbiAgc3RhdGljIGFkZERheXMoZGF0ZSwgZGF5cykge1xuICAgIHZhciByZXN1bHQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICByZXN1bHQuc2V0RGF0ZShyZXN1bHQuZ2V0RGF0ZSgpICsgZGF5cyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBzdGF0aWMgb2JqZWN0c0FyZUVxdWFsKHgsIHkpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmICh4ID09PSBudWxsIHx8IHggPT09IHVuZGVmaW5lZCB8fCB5ID09PSBudWxsIHx8IHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHggPT09IHk7XG4gICAgfVxuICAgIGlmICh4LmNvbnN0cnVjdG9yICE9PSB5LmNvbnN0cnVjdG9yKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh4IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiB4ID09PSB5O1xuICAgIH1cbiAgICBpZiAoeCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIHggPT09IHk7XG4gICAgfVxuICAgIGlmICh4ID09PSB5IHx8IHgudmFsdWVPZigpID09PSB5LnZhbHVlT2YoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHgpICYmIHgubGVuZ3RoICE9PSB5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoeCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCEoeCBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCEoeSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHAgPSBPYmplY3Qua2V5cyh4KTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoeSkuZXZlcnkoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBwLmluZGV4T2YoaSkgIT09IC0xO1xuICAgIH0pICYmIHAuZXZlcnkoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBfdGhpcy5vYmplY3RzQXJlRXF1YWwoeFtpXSwgeVtpXSk7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIGNvbnRhaW5zT2JqZWN0KG9iaiwgbGlzdCkge1xuICAgIHZhciB4O1xuICAgIGZvciAoeCBpbiBsaXN0KSB7XG4gICAgICBpZiAobGlzdC5oYXNPd25Qcm9wZXJ0eSh4KSAmJiB0aGlzLm9iamVjdHNBcmVFcXVhbChsaXN0W3hdLCBvYmopKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhdGljIGZhZGVPdXQoZWwpIHtcbiAgICBsZXQgc3BlZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDEwMDA7XG4gICAgaWYgKHNwZWVkIDw9IDI1KSB7XG4gICAgICBzcGVlZCA9IDI1O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgIChmdW5jdGlvbiBmYWRlKCkge1xuICAgICAgICBpZiAoKGVsLnN0eWxlLm9wYWNpdHkgLT0gMjUgLyBzcGVlZCkgPCAwKSB7XG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZhZGUpO1xuICAgICAgICB9XG4gICAgICB9KSgpO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBmYWRlSW4oZWwpIHtcbiAgICBsZXQgc3BlZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDEwMDA7XG4gICAgaWYgKHNwZWVkIDw9IDI1KSB7XG4gICAgICBzcGVlZCA9IDI1O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgKGZ1bmN0aW9uIGZhZGUoKSB7XG4gICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KGVsLnN0eWxlLm9wYWNpdHkpO1xuICAgICAgICBpZiAoISgodmFsICs9IDI1IC8gc3BlZWQpID4gMSkpIHtcbiAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gdmFsO1xuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmYWRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIHNjcm9sbFRvcCgpIHtcbiAgICBsZXQgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHJldHVybiAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvYy5zY3JvbGxUb3ApIC0gKGRvYy5jbGllbnRUb3AgfHwgMCk7XG4gIH1cbiAgc3RhdGljIHNjcm9sbExlZnQoKSB7XG4gICAgbGV0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICByZXR1cm4gKHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2Muc2Nyb2xsTGVmdCkgLSAoZG9jLmNsaWVudExlZnQgfHwgMCk7XG4gIH1cbiAgc3RhdGljIGNsb3Nlc3RTY3JvbGxhYmxlKG5vZGUpIHtcbiAgICBsZXQgaXNFbGVtZW50ID0gbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50LFxuICAgICAgb3ZlcmZsb3dZID0gaXNFbGVtZW50ICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLm92ZXJmbG93WSxcbiAgICAgIGlzU2Nyb2xsYWJsZSA9IG92ZXJmbG93WSAmJiAhKG92ZXJmbG93WS5pbmNsdWRlcygnaGlkZGVuJykgfHwgb3ZlcmZsb3dZLmluY2x1ZGVzKCd2aXNpYmxlJykpO1xuICAgIGlmICghbm9kZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChpc1Njcm9sbGFibGUgJiYgbm9kZS5zY3JvbGxIZWlnaHQgPj0gbm9kZS5jbGllbnRIZWlnaHQpIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jbG9zZXN0U2Nyb2xsYWJsZShub2RlLnBhcmVudE5vZGUpIHx8IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTtcbiAgfVxuICBzdGF0aWMgb2Zmc2V0VG9wKGVsKSB7XG4gICAgcmV0dXJuIGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3A7XG4gIH1cbiAgc3RhdGljIG9mZnNldExlZnQoZWwpIHtcbiAgICByZXR1cm4gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0O1xuICB9XG4gIHN0YXRpYyBvZmZzZXRSaWdodChlbCkge1xuICAgIHJldHVybiBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudExlZnQgKyBlbC5vZmZzZXRXaWR0aDtcbiAgfVxuICBzdGF0aWMgb2Zmc2V0Qm90dG9tKGVsKSB7XG4gICAgcmV0dXJuIGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3AgKyBlbC5vZmZzZXRIZWlnaHQ7XG4gIH1cbiAgc3RhdGljIG9mZnNldFRvcFdpdGhNYXJnaW4oZWwpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXRUb3AoZWwpIC0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShlbCkubWFyZ2luVG9wKTtcbiAgfVxuICBzdGF0aWMgb2Zmc2V0TGVmdFdpdGhNYXJnaW4oZWwpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXRMZWZ0KGVsKSAtIHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZWwpLm1hcmdpbkxlZnQpO1xuICB9XG4gIHN0YXRpYyBvZmZzZXRSaWdodFdpdGhNYXJnaW4oZWwpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXRSaWdodChlbCkgKyBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGVsKS5tYXJnaW5SaWdodCk7XG4gIH1cbiAgc3RhdGljIG9mZnNldEJvdHRvbVdpdGhNYXJnaW4oZWwpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXRCb3R0b20oZWwpICsgcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShlbCkubWFyZ2luQm90dG9tKTtcbiAgfVxuICBzdGF0aWMgZG9jdW1lbnRIZWlnaHQoKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCk7XG4gIH1cbiAgc3RhdGljIGRvY3VtZW50V2lkdGgoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICB9XG4gIHN0YXRpYyB3aW5kb3dXaWR0aCgpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGg7XG4gIH1cbiAgc3RhdGljIHdpbmRvd0hlaWdodCgpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xuICB9XG4gIHN0YXRpYyB3aW5kb3dXaWR0aFdpdGhvdXRTY3JvbGxiYXIoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICB9XG4gIHN0YXRpYyB3aW5kb3dIZWlnaHRXaXRob3V0U2Nyb2xsYmFyKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuICB9XG4gIHN0YXRpYyBvdXRlcldpZHRoV2l0aE1hcmdpbihlbCkge1xuICAgIHJldHVybiBlbC5vZmZzZXRXaWR0aCArIHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZWwpLm1hcmdpbkxlZnQpICsgcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShlbCkubWFyZ2luUmlnaHQpO1xuICB9XG4gIHN0YXRpYyBvdXRlckhlaWdodFdpdGhNYXJnaW4oZWwpIHtcbiAgICByZXR1cm4gZWwub2Zmc2V0SGVpZ2h0ICsgcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShlbCkubWFyZ2luVG9wKSArIHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZWwpLm1hcmdpbkJvdHRvbSk7XG4gIH1cbiAgc3RhdGljIHNjcm9sbFRvKHRvKSB7XG4gICAgbGV0IGR1cmF0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxMDAwO1xuICAgIGxldCBlbGVtZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICAgIGxldCBvZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7XG4gICAgbGV0IG9ubHlfdXAgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGlmIChlbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIH1cbiAgICAgIGlmICghaGxwLmlzTnVtZXJpYyh0bykpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IChkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50RWxlbWVudCkpIHtcbiAgICAgICAgICB0byA9IHRoaXMub2Zmc2V0VG9wV2l0aE1hcmdpbih0byk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG8gPSB0by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRvKS5tYXJnaW5Ub3ApIC0gKGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gZWxlbWVudC5zY3JvbGxUb3AgLSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLm1hcmdpblRvcCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgb2Zmc2V0X2NhbGMgPSAwO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9mZnNldCkpIHtcbiAgICAgICAgb2Zmc2V0ID0gW29mZnNldF07XG4gICAgICB9XG4gICAgICBvZmZzZXQuZm9yRWFjaChvZmZzZXRfX3ZhbHVlID0+IHtcbiAgICAgICAgaWYgKGhscC5pc051bWVyaWMob2Zmc2V0X192YWx1ZSkpIHtcbiAgICAgICAgICBvZmZzZXRfY2FsYyArPSBvZmZzZXRfX3ZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChvZmZzZXRfX3ZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUob2Zmc2V0X192YWx1ZSkucG9zaXRpb24gPT09ICdmaXhlZCcpIHtcbiAgICAgICAgICAgICAgb2Zmc2V0X2NhbGMgKz0gLTEgKiBvZmZzZXRfX3ZhbHVlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdG8gKz0gb2Zmc2V0X2NhbGM7XG4gICAgICBjb25zdCBzdGFydCA9IGVsZW1lbnQuc2Nyb2xsVG9wLFxuICAgICAgICBjaGFuZ2UgPSB0byAtIHN0YXJ0LFxuICAgICAgICBzdGFydERhdGUgPSArbmV3IERhdGUoKSxcbiAgICAgICAgLy8gdCA9IGN1cnJlbnQgdGltZVxuICAgICAgICAvLyBiID0gc3RhcnQgdmFsdWVcbiAgICAgICAgLy8gYyA9IGNoYW5nZSBpbiB2YWx1ZVxuICAgICAgICAvLyBkID0gZHVyYXRpb25cbiAgICAgICAgZWFzZUluT3V0UXVhZCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG4gICAgICAgICAgdCAvPSBkIC8gMjtcbiAgICAgICAgICBpZiAodCA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcbiAgICAgICAgICB0LS07XG4gICAgICAgICAgcmV0dXJuIC1jIC8gMiAqICh0ICogKHQgLSAyKSAtIDEpICsgYjtcbiAgICAgICAgfSxcbiAgICAgICAgZWFzZUluT3V0Q2lyYyA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG4gICAgICAgICAgdCAvPSBkIC8gMjtcbiAgICAgICAgICBpZiAodCA8IDEpIHJldHVybiAtYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSArIGI7XG4gICAgICAgICAgdCAtPSAyO1xuICAgICAgICAgIHJldHVybiBjIC8gMiAqIChNYXRoLnNxcnQoMSAtIHQgKiB0KSArIDEpICsgYjtcbiAgICAgICAgfSxcbiAgICAgICAgYW5pbWF0ZVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9ICtuZXcgRGF0ZSgpO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gY3VycmVudERhdGUgLSBzdGFydERhdGU7XG4gICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBwYXJzZUludChlYXNlSW5PdXRDaXJjKGN1cnJlbnRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbikpO1xuICAgICAgICAgIGlmIChjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZVNjcm9sbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdG87XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgaWYgKG9ubHlfdXAgPT09IHRydWUgJiYgY2hhbmdlID4gMCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFuaW1hdGVTY3JvbGwoKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgbG9hZEpzKHVybHMpIHtcbiAgICBpZiAoIWhscC5pc0FycmF5KHVybHMpKSB7XG4gICAgICB1cmxzID0gW3VybHNdO1xuICAgIH1cbiAgICBsZXQgcHJvbWlzZXMgPSBbXTtcbiAgICBobHAubG9vcCh1cmxzLCAodXJsc19fdmFsdWUsIHVybHNfX2tleSkgPT4ge1xuICAgICAgcHJvbWlzZXMucHVzaChuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9IHVybHNfX3ZhbHVlO1xuICAgICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH1cbiAgc3RhdGljIGFzeW5jIGxvYWRKc1NlcXVlbnRpYWxseSh1cmxzKSB7XG4gICAgaWYgKCFobHAuaXNBcnJheSh1cmxzKSkge1xuICAgICAgdXJscyA9IFt1cmxzXTtcbiAgICB9XG4gICAgZm9yIChsZXQgdXJsc19fdmFsdWUgb2YgdXJscykge1xuICAgICAgYXdhaXQgaGxwLmxvYWRKcyh1cmxzX192YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBzdGF0aWMgdHJpZ2dlckFmdGVyQWxsSW1hZ2VzTG9hZGVkKHNlbGVjdG9yQ29udGFpbmVyLCBzZWxlY3RvckltYWdlLCBmbikge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZSA9PiB7XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckNvbnRhaW5lciArICcgJyArIHNlbGVjdG9ySW1hZ2UpICE9PSBudWxsKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JDb250YWluZXIgKyAnICcgKyBzZWxlY3RvckltYWdlKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXJBZnRlckFsbEltYWdlc0xvYWRlZEJpbmRMb2FkRXZlbnQoZWwsIHNlbGVjdG9yQ29udGFpbmVyLCBzZWxlY3RvckltYWdlLCBmbik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckNvbnRhaW5lcikgIT09IG51bGwpIHtcbiAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcgJiYgbXV0YXRpb24uYWRkZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQWZ0ZXJBbGxJbWFnZXNMb2FkZWRIYW5kbGVFbChlbCwgc2VsZWN0b3JDb250YWluZXIsIHNlbGVjdG9ySW1hZ2UsIGZuKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnc3JjJyAmJiBtdXRhdGlvbi50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9ySW1hZ2UucmVwbGFjZSgnLicsICcnKSkgJiYgbXV0YXRpb24ub2xkVmFsdWUgIT09IG11dGF0aW9uLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3NyYycpKSB7XG4gICAgICAgICAgICAgIHRoaXMudHJpZ2dlckFmdGVyQWxsSW1hZ2VzTG9hZGVkSGFuZGxlRWwobXV0YXRpb24udGFyZ2V0LCBzZWxlY3RvckNvbnRhaW5lciwgc2VsZWN0b3JJbWFnZSwgZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KS5vYnNlcnZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JDb250YWluZXIpLCB7XG4gICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgY2hhcmFjdGVyRGF0YTogZmFsc2UsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZSxcbiAgICAgICAgICBjaGFyYWN0ZXJEYXRhT2xkVmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHN0YXRpYyB0cmlnZ2VyQWZ0ZXJBbGxJbWFnZXNMb2FkZWRIYW5kbGVFbChlbCwgc2VsZWN0b3JDb250YWluZXIsIHNlbGVjdG9ySW1hZ2UsIGZuKSB7XG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGVkLWltZycpO1xuICAgICAgZWwuY2xvc2VzdChzZWxlY3RvckNvbnRhaW5lcikuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGVkLWFsbCcpO1xuICAgICAgLy8gb25seSBiaW5kIGlmIG5vdCB5ZXQgYmluZGVkXG4gICAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygnYmluZGVkLXRyaWdnZXInKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdiaW5kZWQtdHJpZ2dlcicpO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMudHJpZ2dlckFmdGVyQWxsSW1hZ2VzTG9hZGVkQmluZExvYWRFdmVudChlbCwgc2VsZWN0b3JDb250YWluZXIsIHNlbGVjdG9ySW1hZ2UsIGZuKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHN0YXRpYyB0cmlnZ2VyQWZ0ZXJBbGxJbWFnZXNMb2FkZWRCaW5kTG9hZEV2ZW50KGVsLCBzZWxlY3RvckNvbnRhaW5lciwgc2VsZWN0b3JJbWFnZSwgZm4pIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdsb2FkZWQtaW1nJyk7XG4gICAgaWYgKGVsLmNsb3Nlc3Qoc2VsZWN0b3JDb250YWluZXIpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2FkZWQtaW1nJykubGVuZ3RoID09PSBlbC5jbG9zZXN0KHNlbGVjdG9yQ29udGFpbmVyKS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ySW1hZ2UpLmxlbmd0aCkge1xuICAgICAgZWwuY2xvc2VzdChzZWxlY3RvckNvbnRhaW5lcikuY2xhc3NMaXN0LmFkZCgnbG9hZGVkLWFsbCcpO1xuICAgICAgZm4oKTtcbiAgICB9XG4gIH1cbiAgc3RhdGljIGlzVmlzaWJsZShlbCkge1xuICAgIHJldHVybiAhIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xuICB9XG4gIHN0YXRpYyBpc1Zpc2libGVJblZpZXdwb3J0KGVsKSB7XG4gICAgaWYgKCF0aGlzLmlzVmlzaWJsZShlbCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gIShyZWN0LmJvdHRvbSA8IDAgfHwgcmVjdC5yaWdodCA8IDAgfHwgcmVjdC5sZWZ0ID4gd2luZG93LmlubmVyV2lkdGggfHwgcmVjdC50b3AgPiB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICB9XG4gIHN0YXRpYyB0ZXh0YXJlYUF1dG9IZWlnaHQoKSB7XG4gICAgbGV0IHNlbGVjdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAndGV4dGFyZWEnO1xuICAgIHRoaXMudGV4dGFyZWFTZXRIZWlnaHRzKHNlbGVjdG9yKTtcbiAgICB0aGlzLm9uUmVzaXplSG9yaXpvbnRhbCgoKSA9PiB7XG4gICAgICB0aGlzLnRleHRhcmVhU2V0SGVpZ2h0cyhzZWxlY3Rvcik7XG4gICAgfSk7XG4gICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBlbCA9PiB7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT4ge1xuICAgICAgICB0aGlzLnRleHRhcmVhU2V0SGVpZ2h0KGUudGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyB0ZXh0YXJlYVNldEhlaWdodHMoKSB7XG4gICAgbGV0IHNlbGVjdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAndGV4dGFyZWEnO1xuICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgZWwgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGVsKSkge1xuICAgICAgICB0aGlzLnRleHRhcmVhU2V0SGVpZ2h0KGVsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgdGV4dGFyZWFTZXRIZWlnaHQoZWwpIHtcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSAnNXB4JztcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBlbC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICB9XG4gIHN0YXRpYyByZWFsMTAwdmgoKSB7XG4gICAgbGV0IHNlbGVjdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsO1xuICAgIGxldCBwZXJjZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxMDA7XG4gICAgaWYgKHNlbGVjdG9yID09PSBudWxsKSB7XG4gICAgICAvLyBhcHBseSB0cmljayBmcm9tIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vdGhlLXRyaWNrLXRvLXZpZXdwb3J0LXVuaXRzLW9uLW1vYmlsZS9cbiAgICAgIGxldCBmbiA9ICgpID0+IHtcbiAgICAgICAgbGV0IHZoID0gd2luZG93LmlubmVySGVpZ2h0ICogMC4wMTtcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgXCJcIi5jb25jYXQodmgsIFwicHhcIikpO1xuICAgICAgfTtcbiAgICAgIGZuKCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICBmbigpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBmbiA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coc2VsZWN0b3IpO1xuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgIT09IG51bGwpIHtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKHNlbGVjdG9yX192YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZWxlY3Rvcl9fdmFsdWUuc3R5bGUuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogKHBlcmNlbnQgLyAxMDApICsgJ3B4JztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGZuKCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICBmbigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBpT3NSZW1vdmVIb3ZlcigpIHtcbiAgICBpZiAoaGxwLmdldEJyb3dzZXIoKSA9PT0gJ3NhZmFyaScgJiYgaGxwLmdldERldmljZSgpICE9PSAnZGVza3RvcCcpIHtcbiAgICAgIGhscC5vbigndG91Y2hlbmQnLCAnYScsIChlLCBlbCkgPT4ge1xuICAgICAgICBlbC5jbGljaygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBpc051bWVyaWMobikge1xuICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XG4gIH1cbiAgc3RhdGljIGFuaW1hdGUoZWwsIGZyb20sIHRvLCBlYXNpbmcsIGR1cmF0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgLy8gb24gZHVyYXRpb25zIHNtYWxsZXIgdGhhbiA1MCwgdGhlIGVuZCBldmVudCBkb2VzIG5vdCB0cmlnZ2VyIVxuICAgICAgaWYgKGR1cmF0aW9uIDw9IDUwKSB7XG4gICAgICAgIGR1cmF0aW9uID0gNTA7XG4gICAgICB9XG4gICAgICBsZXQgcHJvcGVydGllcyA9IFtdO1xuICAgICAgZnJvbS5zcGxpdCgnOycpLmZvckVhY2goZnJvbV9fdmFsdWUgPT4ge1xuICAgICAgICBwcm9wZXJ0aWVzLnB1c2goZnJvbV9fdmFsdWUuc3BsaXQoJzonKVswXS50cmltKCkpO1xuICAgICAgfSk7XG4gICAgICBsZXQgdHJhbnNpdGlvbiA9IFtdO1xuICAgICAgcHJvcGVydGllcy5mb3JFYWNoKHByb3BlcnRpZXNfX3ZhbHVlID0+IHtcbiAgICAgICAgdHJhbnNpdGlvbi5wdXNoKHByb3BlcnRpZXNfX3ZhbHVlICsgJyAnICsgTWF0aC5yb3VuZChkdXJhdGlvbiAvIDEwMDAgKiAxMCkgLyAxMCArICdzICcgKyBlYXNpbmcpO1xuICAgICAgfSk7XG4gICAgICB0cmFuc2l0aW9uID0gJ3RyYW5zaXRpb246ICcgKyB0cmFuc2l0aW9uLmpvaW4oJywgJykgKyAnICFpbXBvcnRhbnQ7JztcbiAgICAgIGxldCBlbHMgPSBudWxsO1xuICAgICAgaWYgKE5vZGVMaXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGVsKSkge1xuICAgICAgICBlbHMgPSBBcnJheS5mcm9tKGVsKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Nhbm5vdCBhbmltYXRlIGVsZW1lbnQgZnJvbSAnICsgZnJvbSArICcgdG8gJyArIHRvICsgJyBiZWNhdXNlIGl0IGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVscyA9IFtlbF07XG4gICAgICB9XG4gICAgICBsZXQgdG9GaW5pc2ggPSBlbHMubGVuZ3RoO1xuICAgICAgZWxzLmZvckVhY2goKGVsc19fdmFsdWUsIGVsc19fa2V5KSA9PiB7XG4gICAgICAgIC8vIGFkZCByYW5kb20gY2xhc3NcbiAgICAgICAgbGV0IHJhbmRvbV9jbGFzcyA9IGhscC5yYW5kb21fc3RyaW5nKDEwLCAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonKTtcbiAgICAgICAgZWxzX192YWx1ZS5jbGFzc0xpc3QuYWRkKHJhbmRvbV9jbGFzcyk7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIC8vIHNldCBmcm9tIHN0eWxlIGlubGluZSAoZG9uJ3QgZnVsbHkgcmVtb3ZlIHByZXZpb3VzIHN0eWxlKVxuICAgICAgICAgIGxldCBuZXdfc3R5bGUgPSBbXTtcbiAgICAgICAgICBsZXQgcHJldl9zdHlsZSA9IGVsc19fdmFsdWUuZ2V0QXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgIGlmIChwcmV2X3N0eWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwcmV2X3N0eWxlLnNwbGl0KCc7JykuZm9yRWFjaChwcmV2X3N0eWxlX192YWx1ZSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcHJvcGVydGllcy5pbmNsdWRlcyhwcmV2X3N0eWxlX192YWx1ZS5zcGxpdCgnOicpWzBdLnRyaW0oKSkpIHtcbiAgICAgICAgICAgICAgICBuZXdfc3R5bGUucHVzaChwcmV2X3N0eWxlX192YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdfc3R5bGUgPSBuZXdfc3R5bGUuam9pbignOycpICsgZnJvbSArICc7JztcbiAgICAgICAgICBlbHNfX3ZhbHVlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBuZXdfc3R5bGUpO1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgLy8gYWRkIHRyYW5zaXRpb24gcHJvcGVydHlcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSAnLicgKyByYW5kb21fY2xhc3MgKyAnIHsgJyArIHRyYW5zaXRpb24gKyAnIH0nO1xuICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gc2V0IGxhc3Qgc3R5bGUgaW5saW5lXG4gICAgICAgICAgICAgIGVsc19fdmFsdWUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGVsc19fdmFsdWUuZ2V0QXR0cmlidXRlKCdzdHlsZScpLnJlcGxhY2UoZnJvbSArICc7JywgJycpICsgdG8gKyAnOycpO1xuICAgICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUoZWxzX192YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBobHAuYWRkRXZlbnRMaXN0ZW5lck9uY2UoZWxzX192YWx1ZSwgJ3RyYW5zaXRpb25lbmQnLCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICBmaXJlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb25lbmQgZmlyZXMgYWxzbywgd2hlbiBhbmltYXRpbmcgY2hpbGQgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgbGluZSBlbnN1cmVzLCB0aGF0IHRob3NlIGV2ZW50cyBkbyBub3QgYnViYmxlIHVwXG4gICAgICAgICAgICAgICAgICAvLyBpbiB0aGF0IGNhc2UsIHdlIHJldHVybiBmYWxzZSBhbmQgZW5zdXJlLCB0aGUgZXZlbnQgbGlzdGVuZXIgaXMgc3RpbGwgYWxpdmVcbiAgICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyByZW1vdmUgcHJldmlvdXMgc3R5bGVzIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHJhbmRvbSBjbGFzc1xuICAgICAgICAgICAgICAgICAgZWxzX192YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKHJhbmRvbV9jbGFzcyk7XG5cbiAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmUgcHJvbWlzZSB3aGVuIGxhc3QgaXMgZmluaXNoZWRcbiAgICAgICAgICAgICAgICAgIHRvRmluaXNoLS07XG4gICAgICAgICAgICAgICAgICBpZiAodG9GaW5pc2ggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gc2FmZWd1YXJkXG4gICAgICAgICAgICAgICAgLy8gaW4gc29tZSBlZGdlIGNhc2VzLCB0cmFuc2l0aW9uZW5kIGRvZXMgbm90IGZpcmVcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChmaXJlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc19fdmFsdWUuY2xhc3NMaXN0LnJlbW92ZShyYW5kb21fY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICB0b0ZpbmlzaC0tO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9GaW5pc2ggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGR1cmF0aW9uICogMS41KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgICAgICBlbHNfX3ZhbHVlLmNsYXNzTGlzdC5yZW1vdmUocmFuZG9tX2NsYXNzKTtcbiAgICAgICAgICAgICAgICB0b0ZpbmlzaC0tO1xuICAgICAgICAgICAgICAgIGlmICh0b0ZpbmlzaCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgYWRkRXZlbnRMaXN0ZW5lck9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgYWRkT3B0aW9ucywgcmVtb3ZlT3B0aW9ucykge1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uIGZuKGV2ZW50KSB7XG4gICAgICBsZXQgcmVzdWx0ID0gbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzLCBhZGRPcHRpb25zKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCByZW1vdmVPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgaHRtbERlY29kZSh2YWx1ZSkge1xuICAgIGxldCB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHRtcC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICByZXR1cm4gdG1wLnZhbHVlO1xuICB9XG4gIHN0YXRpYyBodG1sRW5jb2RlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JykucmVwbGFjZSgvJy9nLCAnJiN4Mjc7JykucmVwbGFjZSgvYC9nLCAnJiM5NjsnKTtcbiAgfVxuICBzdGF0aWMgbmwyYnIoc3RyKSB7XG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICd1bmRlZmluZWQnIHx8IHN0ciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBsZXQgYnJlYWtUYWcgPSAnPGJyLz4nLFxuICAgICAgcmVwbGFjZVN0ciA9ICckMScgKyBicmVha1RhZztcbiAgICByZXR1cm4gKHN0ciArICcnKS5yZXBsYWNlKC8oW14+XFxyXFxuXT8pKFxcclxcbnxcXG5cXHJ8XFxyfFxcbikvZywgcmVwbGFjZVN0cik7XG4gIH1cbiAgc3RhdGljIGJyMm5sKHN0cikge1xuICAgIGlmICh0eXBlb2Ygc3RyID09PSAndW5kZWZpbmVkJyB8fCBzdHIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgbGV0IHJlcGxhY2VTdHIgPSAnXFxuJztcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLzxcXHMqXFwvP2JyXFxzKltcXC9dPz4vZ2ksIHJlcGxhY2VTdHIpO1xuICB9XG4gIHN0YXRpYyBjbG9zZXN0KGVsLCBzZWxlY3Rvcikge1xuICAgIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGVsKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRvIHtcbiAgICAgIGlmICh0aGlzLm1hdGNoZXMoZWwsIHNlbGVjdG9yKSkge1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgICB9XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZTtcbiAgICB9IHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc3RhdGljIG1hdGNoZXMoZWwsIHNlbGVjdG9yKSB7XG4gICAgbGV0IG5vZGUgPSBlbCxcbiAgICAgIG5vZGVzID0gKG5vZGUucGFyZW50Tm9kZSB8fCBub2RlLmRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSxcbiAgICAgIGkgPSAtMTtcbiAgICB3aGlsZSAobm9kZXNbKytpXSAmJiBub2Rlc1tpXSAhPSBub2RlKTtcbiAgICByZXR1cm4gISFub2Rlc1tpXTtcbiAgfVxuICBzdGF0aWMgd3JhcChlbCwgaHRtbCkge1xuICAgIGlmIChlbCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgd3JhcHBlciA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpLmJvZHkuY2hpbGROb2Rlc1swXTtcbiAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBlbC5uZXh0U2libGluZyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgc3RhdGljIHdyYXBUZXh0Tm9kZXMoZWwsIHRhZykge1xuICAgIGlmIChlbCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBBcnJheS5mcm9tKGVsLmNoaWxkTm9kZXMpLmZpbHRlcihub2RlID0+IG5vZGUubm9kZVR5cGUgPT09IDMgJiYgbm9kZS50ZXh0Q29udGVudC50cmltKCkubGVuZ3RoID4gMSkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICBub2RlLmFmdGVyKHdyYXBwZXIpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgaHRtbDJkb20oaHRtbCkge1xuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgaHRtbCA9IGh0bWwudHJpbSgpO1xuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgaWYgKHRlbXBsYXRlLmNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuaHRtbDJkb21MZWdhY3koaHRtbCk7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmZpcnN0Q2hpbGQ7XG4gIH1cbiAgc3RhdGljIGh0bWwyZG9tTGVnYWN5KGh0bWwpIHtcbiAgICAvKiBzb3VyY2U6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL011bmF3d2FyLzZlNjM2MmRiZGY3N2M3ODY1YTk5ICovXG4gICAgdmFyIHJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxcbiAgICAgIHJ0YWdOYW1lID0gLzwoW1xcdzpdKykvLFxuICAgICAgcmh0bWwgPSAvPHwmIz9cXHcrOy8sXG4gICAgICB3cmFwTWFwID0ge1xuICAgICAgICBvcHRpb246IFsxLCBcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIiwgJzwvc2VsZWN0PiddLFxuICAgICAgICB0aGVhZDogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXG4gICAgICAgIGNvbDogWzIsICc8dGFibGU+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J10sXG4gICAgICAgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgICAgICAgdGQ6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxuICAgICAgICBfZGVmYXVsdDogWzAsICcnLCAnJ11cbiAgICAgIH0sXG4gICAgICBjb250ZXh0ID0gZG9jdW1lbnQ7XG4gICAgdmFyIHRtcCxcbiAgICAgIHRhZyxcbiAgICAgIHdyYXAsXG4gICAgICBqLFxuICAgICAgZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBpZiAoIXJodG1sLnRlc3QoaHRtbCkpIHtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoaHRtbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0bXAgPSBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICAgIHRhZyA9IChydGFnTmFtZS5leGVjKGh0bWwpIHx8IFsnJywgJyddKVsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgd3JhcCA9IHdyYXBNYXBbdGFnXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuICAgICAgdG1wLmlubmVySFRNTCA9IHdyYXBbMV0gKyBodG1sLnJlcGxhY2UocnhodG1sVGFnLCAnPCQxPjwvJDI+JykgKyB3cmFwWzJdO1xuICAgICAgaiA9IHdyYXBbMF07XG4gICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgIHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG4gICAgICB9XG4gICAgICBmcmFnbWVudC5yZW1vdmVDaGlsZChmcmFnbWVudC5maXJzdENoaWxkKTtcbiAgICAgIHdoaWxlICh0bXAuZmlyc3RDaGlsZCkge1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0bXAuZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcmFnbWVudC5xdWVyeVNlbGVjdG9yKCcqJyk7XG4gIH1cbiAgc3RhdGljIHByZXYoZWxlbSwgZmlsdGVyKSB7XG4gICAgbGV0IHByZXYgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKHByZXYgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyID09PSB1bmRlZmluZWQgfHwgdGhpcy5tYXRjaGVzKHByZXYsIGZpbHRlcikpIHtcbiAgICAgIHJldHVybiBwcmV2O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBzdGF0aWMgbmV4dChlbGVtLCBmaWx0ZXIpIHtcbiAgICBsZXQgbmV4dCA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChuZXh0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGZpbHRlciA9PT0gdW5kZWZpbmVkIHx8IHRoaXMubWF0Y2hlcyhuZXh0LCBmaWx0ZXIpKSB7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc3RhdGljIHByZXZBbGwoZWxlbSwgZmlsdGVyKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICB3aGlsZSAoZWxlbSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgaWYgKGZpbHRlciA9PT0gdW5kZWZpbmVkIHx8IHRoaXMubWF0Y2hlcyhlbGVtLCBmaWx0ZXIpKSB7XG4gICAgICAgIHNpYnMucHVzaChlbGVtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpYnM7XG4gIH1cbiAgc3RhdGljIG5leHRBbGwoZWxlbSwgZmlsdGVyKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICB3aGlsZSAoZWxlbSA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICBpZiAoZmlsdGVyID09PSB1bmRlZmluZWQgfHwgdGhpcy5tYXRjaGVzKGVsZW0sIGZpbHRlcikpIHtcbiAgICAgICAgc2licy5wdXNoKGVsZW0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2licztcbiAgfVxuICBzdGF0aWMgcHJldlVudGlsKGVsZW0sIGZpbHRlcikge1xuICAgIGxldCBzaWJzID0gW107XG4gICAgd2hpbGUgKGVsZW0gPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgIGlmICghdGhpcy5tYXRjaGVzKGVsZW0sIGZpbHRlcikpIHtcbiAgICAgICAgc2licy5wdXNoKGVsZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaWJzO1xuICB9XG4gIHN0YXRpYyBuZXh0VW50aWwoZWxlbSwgZmlsdGVyKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICB3aGlsZSAoZWxlbSA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgICBpZiAoIXRoaXMubWF0Y2hlcyhlbGVtLCBmaWx0ZXIpKSB7XG4gICAgICAgIHNpYnMucHVzaChlbGVtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2licztcbiAgfVxuICBzdGF0aWMgc2libGluZ3MoZWxlbSwgZmlsdGVyKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICBsZXQgc2VsZiA9IGVsZW07XG4gICAgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICAgIHdoaWxlIChlbGVtID0gZWxlbS5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgIGlmIChmaWx0ZXIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm1hdGNoZXMoZWxlbSwgZmlsdGVyKSkge1xuICAgICAgICBpZiAoc2VsZiAhPT0gZWxlbSkge1xuICAgICAgICAgIHNpYnMucHVzaChlbGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2licztcbiAgfVxuICBzdGF0aWMgcGFyZW50cyhlbGVtLCBzZWxlY3Rvcikge1xuICAgIGxldCBlbGVtZW50cyA9IFtdO1xuICAgIGxldCBpc2hhdmVzZWxlY3RvciA9IHNlbGVjdG9yICE9PSB1bmRlZmluZWQ7XG4gICAgd2hpbGUgKChlbGVtID0gZWxlbS5wYXJlbnRFbGVtZW50KSAhPT0gbnVsbCkge1xuICAgICAgaWYgKGVsZW0ubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFpc2hhdmVzZWxlY3RvciB8fCB0aGlzLm1hdGNoZXMoZWxlbSwgc2VsZWN0b3IpKSB7XG4gICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50cztcbiAgfVxuICBzdGF0aWMgY3NzKGVsKSB7XG4gICAgbGV0IHNoZWV0cyA9IGRvY3VtZW50LnN0eWxlU2hlZXRzLFxuICAgICAgbyA9IHt9O1xuICAgIGZvciAobGV0IHNoZWV0c19fa2V5IGluIHNoZWV0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IHJ1bGVzID0gc2hlZXRzW3NoZWV0c19fa2V5XS5ydWxlcyB8fCBzaGVldHNbc2hlZXRzX19rZXldLmNzc1J1bGVzO1xuICAgICAgICBmb3IgKGxldCBydWxlc19fa2V5IGluIHJ1bGVzKSB7XG4gICAgICAgICAgaWYgKHRoaXMubWF0Y2hlcyhlbCwgcnVsZXNbcnVsZXNfX2tleV0uc2VsZWN0b3JUZXh0KSkge1xuICAgICAgICAgICAgbyA9IE9iamVjdC5hc3NpZ24obywgdGhpcy5jc3MyanNvbihydWxlc1tydWxlc19fa2V5XS5zdHlsZSksIHRoaXMuY3NzMmpzb24oZWwuZ2V0QXR0cmlidXRlKCdzdHlsZScpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgICByZXR1cm4gbztcbiAgfVxuICBzdGF0aWMgY3NzMmpzb24oY3NzKSB7XG4gICAgbGV0IG9iaiA9IHt9O1xuICAgIGlmICghY3NzKSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICBpZiAoY3NzIGluc3RhbmNlb2YgQ1NTU3R5bGVEZWNsYXJhdGlvbikge1xuICAgICAgZm9yIChsZXQgY3NzX19rZXkgaW4gY3NzKSB7XG4gICAgICAgIGlmIChjc3NbY3NzX19rZXldLnRvTG93ZXJDYXNlICYmIGNzc1tjc3NbY3NzX19rZXldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgb2JqW2Nzc1tjc3NfX2tleV0udG9Mb3dlckNhc2UoKV0gPSBjc3NbY3NzW2Nzc19fa2V5XV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjc3MgPT0gJ3N0cmluZycpIHtcbiAgICAgIGNzcyA9IGNzcy5zcGxpdCgnOycpO1xuICAgICAgZm9yIChsZXQgY3NzX19rZXkgaW4gY3NzKSB7XG4gICAgICAgIGlmIChjc3NbY3NzX19rZXldLmluZGV4T2YoJzonKSA+IC0xKSB7XG4gICAgICAgICAgbGV0IHZhbCA9IGNzc1tjc3NfX2tleV0uc3BsaXQoJzonKTtcbiAgICAgICAgICBvYmpbdmFsWzBdLnRvTG93ZXJDYXNlKCkudHJpbSgpXSA9IHZhbFsxXS50cmltKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBzdGF0aWMgY29tcGFyZURhdGVzKGQxLCBkMikge1xuICAgIC8vIHNhZmFyaSBoYXMgcHJvYmxlbXMgaW4gcGFyc2luZyBcIjIwMTktMDEtMDEgMDA6MDA6MDBcIlxuICAgIGlmICh0eXBlb2YgZDEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBkMSA9IGQxLnNwbGl0KCcgJykuam9pbignVCcpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGQyID09PSAnc3RyaW5nJykge1xuICAgICAgZDIgPSBkMi5zcGxpdCgnICcpLmpvaW4oJ1QnKTtcbiAgICB9XG4gICAgZDEgPSBuZXcgRGF0ZShkMSk7XG4gICAgZDIgPSBuZXcgRGF0ZShkMik7XG4gICAgZDEuc2V0SG91cnMoMCk7XG4gICAgZDEuc2V0TWludXRlcygwKTtcbiAgICBkMS5zZXRTZWNvbmRzKDApO1xuICAgIGQxLnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICBkMi5zZXRIb3VycygwKTtcbiAgICBkMi5zZXRNaW51dGVzKDApO1xuICAgIGQyLnNldFNlY29uZHMoMCk7XG4gICAgZDIuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgIGlmIChkMS5nZXRGdWxsWWVhcigpID09PSBkMi5nZXRGdWxsWWVhcigpICYmIGQxLmdldE1vbnRoKCkgPT09IGQyLmdldE1vbnRoKCkgJiYgZDEuZ2V0RGF0ZSgpID09PSBkMi5nZXREYXRlKCkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAoZDEgPCBkMikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gMTtcbiAgfVxuICBzdGF0aWMgc3BhY2VzaGlwKHZhbDEsIHZhbDIpIHtcbiAgICBpZiAodmFsMSA9PT0gbnVsbCB8fCB2YWwyID09PSBudWxsIHx8IHR5cGVvZiB2YWwxICE9IHR5cGVvZiB2YWwyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWwxID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbDEubG9jYWxlQ29tcGFyZSh2YWwyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHZhbDEgPiB2YWwyKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSBlbHNlIGlmICh2YWwxIDwgdmFsMikge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cbiAgc3RhdGljIGZvY3VzKHNlbGVjdG9yKSB7XG4gICAgaGxwLnVuZm9jdXMoKTtcbiAgICBsZXQgZWwgPSBudWxsO1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnIHx8IHNlbGVjdG9yIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbCA9IHNlbGVjdG9yO1xuICAgIH1cbiAgICBpZiAoZWwgIT09IG51bGwpIHtcbiAgICAgIGxldCBtYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBtYXNrLmNsYXNzTGlzdC5hZGQoJ2hscC1mb2N1cy1tYXNrJyk7XG4gICAgICBtYXNrLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgIG1hc2suc3R5bGUudG9wID0gMDtcbiAgICAgIG1hc2suc3R5bGUuYm90dG9tID0gMDtcbiAgICAgIG1hc2suc3R5bGUubGVmdCA9IDA7XG4gICAgICBtYXNrLnN0eWxlLnJpZ2h0ID0gMDtcbiAgICAgIG1hc2suc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMC44KSc7XG4gICAgICBtYXNrLnN0eWxlLnpJbmRleCA9IDIxNDc0ODM2NDY7XG4gICAgICBlbC5iZWZvcmUobWFzayk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXNzZWQnLCAxKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1mb2N1c3NlZC1vcmlnLXotaW5kZXgnLCBlbC5zdHlsZS56SW5kZXgpO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLWZvY3Vzc2VkLW9yaWctcG9zaXRpb24nLCBlbC5zdHlsZS5wb3NpdGlvbik7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXNzZWQtb3JpZy1iYWNrZ3JvdW5kLWNvbG9yJywgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1mb2N1c3NlZC1vcmlnLWJveC1zaGFkb3cnLCBlbC5zdHlsZS5ib3hTaGFkb3cpO1xuICAgICAgZWwuc3R5bGUuekluZGV4ID0gMjE0NzQ4MzY0NztcbiAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZmZmZmZmJztcbiAgICAgIGVsLnN0eWxlLmJveFNoYWRvdyA9ICcwcHggMHB4IDBweCAyMHB4ICNmZmYnO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgdW5mb2N1cygpIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhscC1mb2N1cy1tYXNrJykgIT09IG51bGwpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5obHAtZm9jdXMtbWFzaycpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBobHAucmVtb3ZlKGVsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZm9jdXNzZWRdJykgIT09IG51bGwpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWZvY3Vzc2VkXScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBlbC5zdHlsZS56SW5kZXggPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXNzZWQtb3JpZy16LWluZGV4Jyk7XG4gICAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWZvY3Vzc2VkLW9yaWctcG9zaXRpb24nKTtcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWZvY3Vzc2VkLW9yaWctYmFja2dyb3VuZC1jb2xvcicpO1xuICAgICAgICBlbC5zdHlsZS5ib3hTaGFkb3cgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXNzZWQtb3JpZy1ib3gtc2hhZG93Jyk7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1mb2N1c3NlZCcpO1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZm9jdXNzZWQtb3JpZy16LWluZGV4Jyk7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1mb2N1c3NlZC1vcmlnLXBvc2l0aW9uJyk7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1mb2N1c3NlZC1vcmlnLWJhY2tncm91bmQtY29sb3InKTtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWZvY3Vzc2VkLW9yaWctYm94LXNoYWRvdycpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHN0YXRpYyByZW1vdmUoZWwpIHtcbiAgICBpZiAoZWwgIT09IG51bGwpIHtcbiAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgb24oZXZlbnQsIHNlbGVjdG9yLCBzY29wZSkge1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogbnVsbDtcbiAgICBpZiAoY2FsbGJhY2sgPT09IG51bGwpIHtcbiAgICAgIGNhbGxiYWNrID0gc2NvcGU7XG4gICAgICBzY29wZSA9IGRvY3VtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBzY29wZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcGUpO1xuICAgIH1cbiAgICBzY29wZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBlID0+IHtcbiAgICAgIHZhciBlbCA9IGhscC5jbG9zZXN0KGUudGFyZ2V0LCBzZWxlY3Rvcik7XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgY2FsbGJhY2soZSwgZWwpO1xuICAgICAgfVxuICAgIH0sIGZhbHNlKTtcbiAgfVxuICBzdGF0aWMgdXJsKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG4gIH1cbiAgc3RhdGljIHVybFdpdGhIYXNoKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uaGFzaDtcbiAgfVxuICBzdGF0aWMgZnVsbFVybCgpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIH1cbiAgc3RhdGljIHVybFdpdGhBcmdzKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdO1xuICB9XG4gIHN0YXRpYyBiYXNlVXJsKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gIH1cbiAgc3RhdGljIHVybFByb3RvY29sKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nO1xuICB9XG4gIHN0YXRpYyB1cmxIb3N0KCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgfVxuICBzdGF0aWMgdXJsSG9zdFRvcExldmVsKCkge1xuICAgIGxldCBob3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgLy8gaXB2NFxuICAgIGlmIChob3N0Lm1hdGNoKC9eWzAtOV0rXFwuWzAtOV0rXFwuWzAtOV0rXFwuWzAtOV0rJC8pKSB7XG4gICAgICByZXR1cm4gaG9zdDtcbiAgICB9XG4gICAgaG9zdCA9IGhvc3Quc3BsaXQoJy4nKTtcbiAgICB3aGlsZSAoaG9zdC5sZW5ndGggPiAyKSB7XG4gICAgICBob3N0LnNoaWZ0KCk7XG4gICAgfVxuICAgIGhvc3QgPSBob3N0LmpvaW4oJy4nKTtcbiAgICByZXR1cm4gaG9zdDtcbiAgfVxuICBzdGF0aWMgdXJsUGF0aCgpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICB9XG4gIHN0YXRpYyB1cmxIYXNoKCkge1xuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaDtcbiAgfVxuICBzdGF0aWMgdXJsQXJncygpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgfVxuICBzdGF0aWMgdXJsT2ZTY3JpcHQoKSB7XG4gICAgaWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gICAgICByZXR1cm4gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyYztcbiAgICB9XG4gIH1cbiAgc3RhdGljIHBhdGhPZlNjcmlwdCgpIHtcbiAgICBsZXQgc2NyaXB0ID0gdGhpcy51cmxPZlNjcmlwdCgpLFxuICAgICAgcGF0aCA9IHNjcmlwdC5zdWJzdHJpbmcoMCwgc2NyaXB0Lmxhc3RJbmRleE9mKCcvJykpO1xuICAgIHJldHVybiBwYXRoO1xuICB9XG4gIHN0YXRpYyB3YWl0VW50aWwoc2VsZWN0b3IpIHtcbiAgICBsZXQgY3NzX29wdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcbiAgICBsZXQgY3NzX3ZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgdGltZW91dCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpICE9PSBudWxsICYmIChjc3Nfb3B0aW9uID09PSBudWxsIHx8IGNzc192YWx1ZSA9PT0gbnVsbCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSlbY3NzX29wdGlvbl0gIT09IHVuZGVmaW5lZCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSlbY3NzX29wdGlvbl0gIT0gJycgfHwgY3NzX3ZhbHVlICE9PSBudWxsICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKVtjc3Nfb3B0aW9uXSA9PT0gY3NzX3ZhbHVlKSkge1xuICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVvdXQpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgMzApO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyB3YWl0VW50aWxWYXIoKSB7XG4gICAgbGV0IGFyZzEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7XG4gICAgbGV0IGFyZzIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG4gICAgbGV0IHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICAgIGxldCB2YXJOYW1lID0gbnVsbCxcbiAgICAgIHBhcmVudENvbnRhaW5lciA9IG51bGw7XG4gICAgaWYgKGFyZzIgPT09IG51bGwpIHtcbiAgICAgIHZhck5hbWUgPSBhcmcxO1xuICAgICAgcGFyZW50Q29udGFpbmVyID0gd2luZG93O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXJOYW1lID0gYXJnMjtcbiAgICAgIHBhcmVudENvbnRhaW5lciA9IGFyZzE7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgdGltZW91dCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKHBhcmVudENvbnRhaW5lclt2YXJOYW1lXSAhPT0gdW5kZWZpbmVkICYmIHBhcmVudENvbnRhaW5lclt2YXJOYW1lXSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBwYXJlbnRDb250YWluZXJbdmFyTmFtZV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIDMwKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgcmVhZHkoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdsb2FkaW5nJykge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgbG9hZCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIHJ1bkZvckVsKHNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgIGhscC5yZWFkeSgpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gYWRkIHVuaXF1ZSBpZFxuICAgICAgbGV0IGlkID0gaGxwLnB1c2hJZCgpO1xuXG4gICAgICAvLyBhbHNvIHJ1biBmb3IgZXhpc3RpbmdcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSAhPT0gbnVsbCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICBpZiAoZWwucnVuRm9yRWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZWwucnVuRm9yRWwgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFlbC5ydW5Gb3JFbC5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIGVsLnJ1bkZvckVsLnB1c2goaWQpO1xuICAgICAgICAgICAgY2FsbGJhY2soZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBzZXR1cCBxdWV1ZVxuICAgICAgaWYgKHdpbmRvdy5ydW5Gb3JFbF9xdWV1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHdpbmRvdy5ydW5Gb3JFbF9xdWV1ZSA9IFtdO1xuICAgICAgfVxuICAgICAgLy8gc2V0dXAgb2JzZXJ2ZXJcbiAgICAgIGlmICh3aW5kb3cucnVuRm9yRWxfb2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3aW5kb3cucnVuRm9yRWxfb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKG11dGF0aW9uc19fdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCFtdXRhdGlvbnNfX3ZhbHVlLmFkZGVkTm9kZXMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXRhdGlvbnNfX3ZhbHVlLmFkZGVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgbGV0IG5vZGUgPSBtdXRhdGlvbnNfX3ZhbHVlLmFkZGVkTm9kZXNbaV07XG4gICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5ydW5Gb3JFbF9xdWV1ZS5mb3JFYWNoKHF1ZXVlX192YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAobm9kZS5tYXRjaGVzKHF1ZXVlX192YWx1ZS5zZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucnVuRm9yRWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIG5vZGUucnVuRm9yRWwgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUucnVuRm9yRWwuaW5jbHVkZXMocXVldWVfX3ZhbHVlLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgIG5vZGUucnVuRm9yRWwucHVzaChxdWV1ZV9fdmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlX192YWx1ZS5jYWxsYmFjayhub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLy8gaWYgeW91IG1vZGlmeSBsb3RzIG9mIGh0bWwgKGUuZy4gd2l0aCBpbm5lckhUTUwpLCBhbHNvIGNoZWNrIGNoaWxkc1xuICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucXVlcnlTZWxlY3RvcihxdWV1ZV9fdmFsdWUuc2VsZWN0b3IpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWV1ZV9fdmFsdWUuc2VsZWN0b3IpLmZvckVhY2gobm9kZXNfX3ZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXNfX3ZhbHVlLnJ1bkZvckVsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzX192YWx1ZS5ydW5Gb3JFbCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGVzX192YWx1ZS5ydW5Gb3JFbC5pbmNsdWRlcyhxdWV1ZV9fdmFsdWUuaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc19fdmFsdWUucnVuRm9yRWwucHVzaChxdWV1ZV9fdmFsdWUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVfX3ZhbHVlLmNhbGxiYWNrKG5vZGVzX192YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBmYWxzZSxcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgY2hhcmFjdGVyRGF0YTogZmFsc2UsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGVPbGRWYWx1ZTogZmFsc2UsXG4gICAgICAgICAgY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIHB1c2ggdG8gcXVldWVcbiAgICAgIHdpbmRvdy5ydW5Gb3JFbF9xdWV1ZS5wdXNoKHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIGZtYXRoKG9wLCB4LCB5KSB7XG4gICAgbGV0IHByZWNpc2lvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogODtcbiAgICBsZXQgbiA9IHtcbiAgICAgICcqJzogeCAqIHksXG4gICAgICAnLSc6IHggLSB5LFxuICAgICAgJysnOiB4ICsgeSxcbiAgICAgICcvJzogeCAvIHlcbiAgICB9W29wXTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChuICogMTAgKiBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKSkgLyAoMTAgKiBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKSk7XG4gIH1cbiAgc3RhdGljIHRyaW0oc3RyLCBjaGFybGlzdCkge1xuICAgIGxldCB3aGl0ZXNwYWNlID0gWycgJywgJ1xcbicsICdcXHInLCAnXFx0JywgJ1xcZicsICdcXHgwYicsICdcXHhhMCcsICdcXHUyMDAwJywgJ1xcdTIwMDEnLCAnXFx1MjAwMicsICdcXHUyMDAzJywgJ1xcdTIwMDQnLCAnXFx1MjAwNScsICdcXHUyMDA2JywgJ1xcdTIwMDcnLCAnXFx1MjAwOCcsICdcXHUyMDA5JywgJ1xcdTIwMGEnLCAnXFx1MjAwYicsICdcXHUyMDI4JywgJ1xcdTIwMjknLCAnXFx1MzAwMCddLmpvaW4oJycpO1xuICAgIGxldCBsID0gMDtcbiAgICBsZXQgaSA9IDA7XG4gICAgc3RyICs9ICcnO1xuICAgIGlmIChjaGFybGlzdCkge1xuICAgICAgd2hpdGVzcGFjZSA9IChjaGFybGlzdCArICcnKS5yZXBsYWNlKC8oW1tcXF0oKS4/Lyp7fSskXjpdKS9nLCAnJDEnKTtcbiAgICB9XG4gICAgbCA9IHN0ci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKHdoaXRlc3BhY2UuaW5kZXhPZihzdHIuY2hhckF0KGkpKSA9PT0gLTEpIHtcbiAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZyhpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGwgPSBzdHIubGVuZ3RoO1xuICAgIGZvciAoaSA9IGwgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKHdoaXRlc3BhY2UuaW5kZXhPZihzdHIuY2hhckF0KGkpKSA9PT0gLTEpIHtcbiAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCBpICsgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gd2hpdGVzcGFjZS5pbmRleE9mKHN0ci5jaGFyQXQoMCkpID09PSAtMSA/IHN0ciA6ICcnO1xuICB9XG4gIHN0YXRpYyBsdHJpbShzdHIsIGNoYXJsaXN0KSB7XG4gICAgY2hhcmxpc3QgPSAhY2hhcmxpc3QgPyAnIFxcXFxzXFx1MDBBMCcgOiAoY2hhcmxpc3QgKyAnJykucmVwbGFjZSgvKFtbXFxdKCkuPy8qe30rJF46XSkvZywgJyQxJyk7XG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKCdeWycgKyBjaGFybGlzdCArICddKycsICdnJyk7XG4gICAgcmV0dXJuIChzdHIgKyAnJykucmVwbGFjZShyZSwgJycpO1xuICB9XG4gIHN0YXRpYyBydHJpbShzdHIsIGNoYXJsaXN0KSB7XG4gICAgY2hhcmxpc3QgPSAhY2hhcmxpc3QgPyAnIFxcXFxzXFx1MDBBMCcgOiAoY2hhcmxpc3QgKyAnJykucmVwbGFjZSgvKFtbXFxdKCkuPy8qe30rJF46XSkvZywgJ1xcXFwkMScpO1xuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cCgnWycgKyBjaGFybGlzdCArICddKyQnLCAnZycpO1xuICAgIHJldHVybiAoc3RyICsgJycpLnJlcGxhY2UocmUsICcnKTtcbiAgfVxuICBzdGF0aWMgdHJ1bmNhdGVfc3RyaW5nKHN0cikge1xuICAgIGxldCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDUwO1xuICAgIGxldCBjaGFycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJy4uLic7XG4gICAgaWYgKHRoaXMubngoc3RyKSB8fCAhKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnIHx8IHN0ciBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIGlmICh0aGlzLnRyaW0oc3RyKS5sZW5ndGggPiBsZW4pIHtcbiAgICAgIHN0ciA9IHRoaXMudHJpbShzdHIpO1xuICAgICAgaWYgKHN0ci5pbmRleE9mKCcgJykgPT09IC0xKSB7XG4gICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgbGVuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgbGVuKTtcbiAgICAgICAgc3RyID0gdGhpcy50cmltKHN0cik7XG4gICAgICAgIGlmIChzdHIubGFzdEluZGV4T2YoJyAnKSA+IC0xKSB7XG4gICAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCBzdHIubGFzdEluZGV4T2YoJyAnKSk7XG4gICAgICAgICAgc3RyID0gdGhpcy50cmltKHN0cik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0ciArPSAnICcgKyBjaGFycztcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICBzdGF0aWMgcHVzaElkKCkge1xuICAgIC8qIHNvdXJjZSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9taWtlbGVoZW4vMzU5NmEzMGJkNjkzODQ2MjRjMTEgKi9cbiAgICBsZXQgcHVzaElkRGF0YSA9IG51bGw7XG4gICAgLy8gYnJvd3NlclxuICAgIGlmICh3aW5kb3cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHdpbmRvdy5wdXNoSWREYXRhR2xvYmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd2luZG93LnB1c2hJZERhdGFHbG9iYWwgPSB7fTtcbiAgICAgIH1cbiAgICAgIHB1c2hJZERhdGEgPSB3aW5kb3cucHVzaElkRGF0YUdsb2JhbDtcbiAgICB9XG4gICAgLy8gbm9kZS5qc1xuICAgIGlmIChnbG9iYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGdsb2JhbC5wdXNoSWREYXRhR2xvYmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZ2xvYmFsLnB1c2hJZERhdGFHbG9iYWwgPSB7fTtcbiAgICAgIH1cbiAgICAgIHB1c2hJZERhdGEgPSBnbG9iYWwucHVzaElkRGF0YUdsb2JhbDtcbiAgICB9XG4gICAgLy8gZmlyc3QgcnVuXG4gICAgaWYgKGhscC5vYmplY3RzQXJlRXF1YWwocHVzaElkRGF0YSwge30pKSB7XG4gICAgICBwdXNoSWREYXRhLmxhc3RQdXNoVGltZSA9IDA7XG4gICAgICBwdXNoSWREYXRhLmxhc3RSYW5kQ2hhcnMgPSBbXTtcbiAgICAgIHB1c2hJZERhdGEuUFVTSF9DSEFSUyA9ICctMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaX2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JztcbiAgICB9XG4gICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgZHVwbGljYXRlVGltZSA9IG5vdyA9PT0gcHVzaElkRGF0YS5sYXN0UHVzaFRpbWU7XG4gICAgcHVzaElkRGF0YS5sYXN0UHVzaFRpbWUgPSBub3c7XG4gICAgbGV0IHRpbWVTdGFtcENoYXJzID0gbmV3IEFycmF5KDgpO1xuICAgIGZvciAodmFyIGkgPSA3OyBpID49IDA7IGktLSkge1xuICAgICAgdGltZVN0YW1wQ2hhcnNbaV0gPSBwdXNoSWREYXRhLlBVU0hfQ0hBUlMuY2hhckF0KG5vdyAlIDY0KTtcbiAgICAgIG5vdyA9IE1hdGguZmxvb3Iobm93IC8gNjQpO1xuICAgIH1cbiAgICBpZiAobm93ICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgbGV0IGlkID0gdGltZVN0YW1wQ2hhcnMuam9pbignJyk7XG4gICAgaWYgKCFkdXBsaWNhdGVUaW1lKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICBwdXNoSWREYXRhLmxhc3RSYW5kQ2hhcnNbaV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2NCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoaSA9IDExOyBpID49IDAgJiYgcHVzaElkRGF0YS5sYXN0UmFuZENoYXJzW2ldID09PSA2MzsgaS0tKSB7XG4gICAgICAgIHB1c2hJZERhdGEubGFzdFJhbmRDaGFyc1tpXSA9IDA7XG4gICAgICB9XG4gICAgICBwdXNoSWREYXRhLmxhc3RSYW5kQ2hhcnNbaV0rKztcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgIGlkICs9IHB1c2hJZERhdGEuUFVTSF9DSEFSUy5jaGFyQXQocHVzaElkRGF0YS5sYXN0UmFuZENoYXJzW2ldKTtcbiAgICB9XG4gICAgaWYgKGlkLmxlbmd0aCAhPSAyMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbiAgfVxuICBzdGF0aWMgZ2V0UHJvcChvYmosIGRlc2MpIHtcbiAgICBsZXQgYXJyID0gZGVzYy5zcGxpdCgnLicpO1xuICAgIHdoaWxlIChhcnIubGVuZ3RoICYmIChvYmogPSBvYmpbYXJyLnNoaWZ0KCldKSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBzdGF0aWMgYmFzZTY0dG9ibG9iKGJhc2U2NCkge1xuICAgIGxldCBjb250ZW50VHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gICAgbGV0IHNsaWNlU2l6ZSA9IDUxMixcbiAgICAgIGJ5dGVDaGFyYWN0ZXJzID0gYXRvYihiYXNlNjQpLFxuICAgICAgYnl0ZUFycmF5cyA9IFtdO1xuICAgIGZvciAobGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgb2Zmc2V0ICs9IHNsaWNlU2l6ZSkge1xuICAgICAgbGV0IHNsaWNlID0gYnl0ZUNoYXJhY3RlcnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzbGljZVNpemUpLFxuICAgICAgICBieXRlTnVtYmVycyA9IG5ldyBBcnJheShzbGljZS5sZW5ndGgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGljZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBieXRlTnVtYmVyc1tpXSA9IHNsaWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG4gICAgICBsZXQgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xuICAgICAgYnl0ZUFycmF5cy5wdXNoKGJ5dGVBcnJheSk7XG4gICAgfVxuICAgIGxldCBibG9iID0gbmV3IEJsb2IoYnl0ZUFycmF5cywge1xuICAgICAgdHlwZTogY29udGVudFR5cGVcbiAgICB9KTtcbiAgICByZXR1cm4gYmxvYjtcbiAgfVxuICBzdGF0aWMgYmxvYnRvYmFzZTY0KGJsb2IpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHZhciBkYXRhVXJsID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgdmFyIGJhc2U2NCA9IGRhdGFVcmwuc3BsaXQoJywnKVsxXTtcbiAgICAgICAgcmVzb2x2ZShiYXNlNjQpO1xuICAgICAgfTtcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBzdHJpbmd0b2Jsb2Ioc3RyaW5nKSB7XG4gICAgbGV0IGNvbnRlbnRUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtzdHJpbmddLCB7XG4gICAgICB0eXBlOiBjb250ZW50VHlwZVxuICAgIH0pO1xuICAgIHJldHVybiBibG9iO1xuICB9XG4gIHN0YXRpYyBibG9idG9zdHJpbmcoYmxvYikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KTtcbiAgICAgIH07XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgZmlsZXRvYmFzZTY0KGZpbGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdC5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIHJlYWRlci5vbmVycm9yID0gZXJyb3IgPT4gcmVqZWN0KGVycm9yKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgYmxvYnRvZmlsZShibG9iKSB7XG4gICAgbGV0IGZpbGVuYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnZmlsZS50eHQnO1xuICAgIGxldCBmaWxlID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgZmlsZW5hbWUpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gaWUgMTFcbiAgICAgIGZpbGUgPSBuZXcgQmxvYihbYmxvYl0sIGZpbGVuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGU7XG4gIH1cbiAgc3RhdGljIGZpbGV0b2Jsb2IoZmlsZSkge1xuICAgIHJldHVybiBuZXcgQmxvYihbZmlsZV0pO1xuICB9XG4gIHN0YXRpYyBiYXNlNjR0b2ZpbGUoYmFzZTY0KSB7XG4gICAgbGV0IGNvbnRlbnRUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgICBsZXQgZmlsZW5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICdmaWxlLnR4dCc7XG4gICAgcmV0dXJuIHRoaXMuYmxvYnRvZmlsZSh0aGlzLmJhc2U2NHRvYmxvYihiYXNlNjQsIGNvbnRlbnRUeXBlKSwgZmlsZW5hbWUpO1xuICB9XG4gIHN0YXRpYyBibG9idG91cmwoYmxvYikge1xuICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IsIHtcbiAgICAgIHR5cGU6ICd0ZXh0L3BsYWluJ1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBzdHJpbmd0b3VybChzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9idG91cmwodGhpcy5zdHJpbmd0b2Jsb2Ioc3RyaW5nKSk7XG4gIH1cbiAgc3RhdGljIGJhc2U2NHRvc3RyaW5nKGJhc2U2NCkge1xuICAgIHJldHVybiBhdG9iKGJhc2U2NCk7XG4gIH1cbiAgc3RhdGljIHN0cmluZ3RvYmFzZTY0KHN0cmluZykge1xuICAgIHJldHVybiBidG9hKHN0cmluZyk7XG4gIH1cbiAgc3RhdGljIGJhc2U2NHRvdXJsKGJhc2U2NCkge1xuICAgIHJldHVybiB0aGlzLmJsb2J0b3VybCh0aGlzLmJhc2U2NHRvYmxvYihiYXNlNjQpKTtcbiAgfVxuICBzdGF0aWMgZmlsZXRvdXJsKGZpbGUpIHtcbiAgICByZXR1cm4gdGhpcy5ibG9idG91cmwodGhpcy5maWxldG9ibG9iKGZpbGUpKTtcbiAgfVxuICBzdGF0aWMgZ2V0SW1hZ2VPcmllbnRhdGlvbihiYXNlNjQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgYmFzZTY0ID0gYmFzZTY0LnJlcGxhY2UoJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJywgJycpO1xuICAgICAgbGV0IGZpbGUgPSB0aGlzLmJhc2U2NHRvZmlsZShiYXNlNjQpLFxuICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4ge1xuICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICBpZiAodmlldy5nZXRVaW50MTYoMCwgZmFsc2UpICE9IDB4ZmZkOCkge1xuICAgICAgICAgIHJlc29sdmUoLTIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuZ3RoID0gdmlldy5ieXRlTGVuZ3RoLFxuICAgICAgICAgIG9mZnNldCA9IDI7XG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBsZW5ndGgpIHtcbiAgICAgICAgICBpZiAodmlldy5nZXRVaW50MTYob2Zmc2V0ICsgMiwgZmFsc2UpIDw9IDgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoLTEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgbWFya2VyID0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgaWYgKG1hcmtlciA9PSAweGZmZTEpIHtcbiAgICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQzMihvZmZzZXQgKz0gMiwgZmFsc2UpICE9IDB4NDU3ODY5NjYpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgtMSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsaXR0bGUgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQgKz0gNiwgZmFsc2UpID09IDB4NDk0OTtcbiAgICAgICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0LCBsaXR0bGUpO1xuICAgICAgICAgICAgdmFyIHRhZ3MgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGxpdHRsZSk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gMjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFnczsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQxNihvZmZzZXQgKyBpICogMTIsIGxpdHRsZSkgPT0gMHgwMTEyKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2aWV3LmdldFVpbnQxNihvZmZzZXQgKyBpICogMTIgKyA4LCBsaXR0bGUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKChtYXJrZXIgJiAweGZmMDApICE9IDB4ZmYwMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSgtMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH07XG4gICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIHJlc2V0SW1hZ2VPcmllbnRhdGlvbihzcmNCYXNlNjQsIHNyY09yaWVudGF0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHZhciB3aWR0aCA9IGltZy53aWR0aCxcbiAgICAgICAgICBoZWlnaHQgPSBpbWcuaGVpZ2h0LFxuICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLFxuICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoNCA8IHNyY09yaWVudGF0aW9uICYmIHNyY09yaWVudGF0aW9uIDwgOSkge1xuICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGhlaWdodDtcbiAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2lkdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHNyY09yaWVudGF0aW9uKSB7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgtMSwgMCwgMCwgMSwgd2lkdGgsIDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgtMSwgMCwgMCwgLTEsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgxLCAwLCAwLCAtMSwgMCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIGN0eC50cmFuc2Zvcm0oMCwgMSwgMSwgMCwgMCwgMCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBjdHgudHJhbnNmb3JtKDAsIDEsIC0xLCAwLCBoZWlnaHQsIDApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgwLCAtMSwgLTEsIDAsIGhlaWdodCwgd2lkdGgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgwLCAtMSwgMSwgMCwgMCwgd2lkdGgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgICAgbGV0IGJhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoKTtcbiAgICAgICAgYmFzZTY0ID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGJhc2U2NC5zcGxpdCgnLCcpWzFdO1xuICAgICAgICByZXNvbHZlKGJhc2U2NCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH07XG4gICAgICBpbWcuc3JjID0gc3JjQmFzZTY0O1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBmaXhJbWFnZU9yaWVudGF0aW9uKGJhc2U2NCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoYmFzZTY0LmluZGV4T2YoJ2RhdGE6JykgPT09IC0xKSB7XG4gICAgICAgIHJlc29sdmUoYmFzZTY0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2U2NC5pbmRleE9mKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcpID09PSAwKSB7XG4gICAgICAgIGJhc2U2NCA9IGJhc2U2NC5yZXBsYWNlKCdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcsICcnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2V0SW1hZ2VPcmllbnRhdGlvbihiYXNlNjQpLnRoZW4ob3JpZW50YXRpb24gPT4ge1xuICAgICAgICBiYXNlNjQgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwnICsgYmFzZTY0O1xuICAgICAgICBpZiAob3JpZW50YXRpb24gPD0gMSkge1xuICAgICAgICAgIHJlc29sdmUoYmFzZTY0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXNldEltYWdlT3JpZW50YXRpb24oYmFzZTY0LCBvcmllbnRhdGlvbikudGhlbihiYXNlNjRfbmV3ID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoYmFzZTY0X25ldyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9O1xuICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuICB9XG4gIHN0YXRpYyB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgdGltZW91dCA9IG51bGw7XG4gICAgdmFyIHByZXZpb3VzID0gMDtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH1cbiAgc3RhdGljIHNodWZmbGUoYXJyYXkpIHtcbiAgICBsZXQgY3VycmVudEluZGV4ID0gYXJyYXkubGVuZ3RoLFxuICAgICAgdGVtcG9yYXJ5VmFsdWUsXG4gICAgICByYW5kb21JbmRleDtcbiAgICB3aGlsZSAoMCAhPT0gY3VycmVudEluZGV4KSB7XG4gICAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGN1cnJlbnRJbmRleCk7XG4gICAgICBjdXJyZW50SW5kZXggLT0gMTtcbiAgICAgIHRlbXBvcmFyeVZhbHVlID0gYXJyYXlbY3VycmVudEluZGV4XTtcbiAgICAgIGFycmF5W2N1cnJlbnRJbmRleF0gPSBhcnJheVtyYW5kb21JbmRleF07XG4gICAgICBhcnJheVtyYW5kb21JbmRleF0gPSB0ZW1wb3JhcnlWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIHN0YXRpYyBmaW5kUmVjdXJzaXZlSW5PYmplY3Qob2JqZWN0KSB7XG4gICAgbGV0IGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcbiAgICBsZXQgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG4gICAgbGV0IHBhdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICcnO1xuICAgIGxldCBwYXRocyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogW107XG4gICAgaWYgKG9iamVjdCAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yIChjb25zdCBbb2JqZWN0X19rZXksIG9iamVjdF9fdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iamVjdCkpIHtcbiAgICAgICAgaWYgKG9iamVjdF9fdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIG9iamVjdF9fdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgdGhpcy5maW5kUmVjdXJzaXZlSW5PYmplY3Qob2JqZWN0X192YWx1ZSwga2V5LCB2YWx1ZSwgKHBhdGggPT09ICcnID8gJycgOiBwYXRoICsgJy4nKSArIG9iamVjdF9fa2V5LCBwYXRocyk7XG4gICAgICAgIH0gZWxzZSBpZiAoKGtleSA9PT0gbnVsbCB8fCBvYmplY3RfX2tleSA9PT0ga2V5KSAmJiAodmFsdWUgPT09IG51bGwgfHwgb2JqZWN0X192YWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgICAgcGF0aHMucHVzaChwYXRoKTtcbiAgICAgICAgICBicmVhazsgLy8gb25seSB0YWtlIGZpcnN0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aHM7XG4gIH1cbn1cblxuLyogZXhwb3NlIGFsbCBmdW5jdGlvbnMgdG8gd2luZG93ICovXG5leHBvcnRzLmRlZmF1bHQgPSBobHA7XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LmhscCA9IHt9O1xuICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhobHApLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICBpZiAodmFsdWUgPT09ICdsZW5ndGgnIHx8IHZhbHVlID09PSAnbmFtZScgfHwgdmFsdWUgPT09ICdwcm90b3R5cGUnIHx8IHZhbHVlID09PSAnY2FsbGVyJyB8fCB2YWx1ZSA9PT0gJ2FyZ3VtZW50cycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2luZG93LmhscFt2YWx1ZV0gPSBobHBbdmFsdWVdO1xuICB9KTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnJlcXVpcmUoXCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanNcIik7XG5cbnJlcXVpcmUoXCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzXCIpO1xuXG5yZXF1aXJlKFwiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qc1wiKTtcblxucmVxdWlyZShcImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzXCIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIikpO1xuXG52YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3NcIikpO1xuXG52YXIgaGVscGVycyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGhlbHBlcnMoKSB7XG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgaGVscGVycyk7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShoZWxwZXJzLCBudWxsLCBbe1xuICAgIGtleTogXCJjb29raWVFeGlzdHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29va2llRXhpc3RzKGNvb2tpZV9uYW1lKSB7XG4gICAgICBpZiAoZG9jdW1lbnQuY29va2llICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jb29raWVHZXQoY29va2llX25hbWUpICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvb2tpZUdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb29raWVHZXQoY29va2llX25hbWUpIHtcbiAgICAgIHZhciBjb29raWVfbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cChjb29raWVfbmFtZSArICc9KFteO10rKScpKTtcblxuICAgICAgaWYgKGNvb2tpZV9tYXRjaCkge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZV9tYXRjaFsxXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb29raWVTZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29va2llU2V0KGNvb2tpZV9uYW1lLCBjb29raWVfdmFsdWUsIGRheXMpIHtcbiAgICAgIHZhciBzYW1lc2l0ZSA9ICcnO1xuXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHBzJykgPiAtMSkge1xuICAgICAgICBzYW1lc2l0ZSA9ICc7IFNhbWVTaXRlPU5vbmU7IFNlY3VyZSc7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZV9uYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvb2tpZV92YWx1ZSkgKyAnOyAnICsgJ2V4cGlyZXM9JyArIG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvVVRDU3RyaW5nKCkgKyAnOyBwYXRoPS8nICsgc2FtZXNpdGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvb2tpZURlbGV0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb29raWVEZWxldGUoY29va2llX25hbWUpIHtcbiAgICAgIHZhciBzYW1lc2l0ZSA9ICcnO1xuXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHBzJykgPiAtMSkge1xuICAgICAgICBzYW1lc2l0ZSA9ICc7IFNhbWVTaXRlPU5vbmU7IFNlY3VyZSc7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZV9uYW1lICsgJz07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM7IHBhdGg9LycgKyBzYW1lc2l0ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShlbCkge1xuICAgICAgaWYgKGVsICE9PSBudWxsKSB7XG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gaGVscGVycztcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gaGVscGVyczsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnJlcXVpcmUoXCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN1Yi5qc1wiKTtcblxucmVxdWlyZShcImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qc1wiKTtcblxucmVxdWlyZShcImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanNcIik7XG5cbnJlcXVpcmUoXCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qc1wiKTtcblxucmVxdWlyZShcImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzXCIpO1xuXG5yZXF1aXJlKFwiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanNcIik7XG5cbnJlcXVpcmUoXCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qc1wiKTtcblxucmVxdWlyZShcImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanNcIik7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eVwiKSk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVja1wiKSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzc1wiKSk7XG5cbnJlcXVpcmUoXCJ3aGF0d2ctZmV0Y2hcIik7XG5cbnZhciBfaGVscGVycyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vX2hlbHBlcnNcIikpO1xuXG4vLyB1c2UgZmV0Y2hcbnZhciBqd3RidXRsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBqd3RidXRsZXIoY29uZmlnKSB7XG4gICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgand0YnV0bGVyKTtcblxuICAgIGlmICghKCdhdXRoX2xvZ2luJyBpbiBjb25maWcpKSB7XG4gICAgICBjb25maWcuYXV0aF9sb2dpbiA9ICdlbWFpbCc7XG4gICAgfVxuXG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShqd3RidXRsZXIsIFt7XG4gICAga2V5OiBcImlzTG9nZ2VkSW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcbiAgICAgIGlmICh0aGlzLmdldFBheWxvYWQoKSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRVc2VySWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlcklkKCkge1xuICAgICAgdmFyIHBheWxvYWQgPSB0aGlzLmdldFBheWxvYWQoKTtcblxuICAgICAgaWYgKHBheWxvYWQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXlsb2FkLnN1YjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UGF5bG9hZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXlsb2FkKCkge1xuICAgICAgaWYgKF9oZWxwZXJzLmRlZmF1bHQuY29va2llR2V0KCdhY2Nlc3NfdG9rZW4nKSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYXRvYihfaGVscGVycy5kZWZhdWx0LmNvb2tpZUdldCgnYWNjZXNzX3Rva2VuJykuc3BsaXQoJy4nKVsxXSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibG9nb3V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBfdGhpczIuYWRkTG9hZGluZ1N0YXRlKCdsb2dnaW5nLW91dCcpO1xuXG4gICAgICAgIGZldGNoKF90aGlzMi5jb25maWcuYXV0aF9zZXJ2ZXIgKyAnL2xvZ291dCcsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgX2hlbHBlcnMuZGVmYXVsdC5jb29raWVHZXQoJ2FjY2Vzc190b2tlbicpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgX3RoaXMyLnNldENvb2tpZXMobnVsbCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczIucmVtb3ZlTG9hZGluZ1N0YXRlcygpO1xuXG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsb2dpblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbigpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAoX2hlbHBlcnMuZGVmYXVsdC5jb29raWVHZXQoJ2FjY2Vzc190b2tlbicpICE9PSBudWxsKSB7XG4gICAgICAgICAgX3RoaXMzLmFkZExvYWRpbmdTdGF0ZSgnbG9nZ2luZy1pbicpO1xuXG4gICAgICAgICAgZmV0Y2goX3RoaXMzLmNvbmZpZy5hdXRoX3NlcnZlciArICcvY2hlY2snLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiBfaGVscGVycy5kZWZhdWx0LmNvb2tpZUdldCgnYWNjZXNzX3Rva2VuJylcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZSdcbiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5zZXRDb29raWVzKF9oZWxwZXJzLmRlZmF1bHQuY29va2llR2V0KCdhY2Nlc3NfdG9rZW4nKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMzLnJlbW92ZUxvYWRpbmdTdGF0ZXMoKTtcblxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmZXRjaChfdGhpczMuY29uZmlnLmF1dGhfc2VydmVyICsgJy9yZWZyZXNoJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBfaGVscGVycy5kZWZhdWx0LmNvb2tpZUdldCgnYWNjZXNzX3Rva2VuJylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnXG4gICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgX3RoaXMzLnNldENvb2tpZXMocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMucmVtb3ZlTG9hZGluZ1N0YXRlcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzMy5yZW5kZXJMb2dpbkZvcm1XaXRoUHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzMy5yZW5kZXJMb2dpbkZvcm1XaXRoUHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmV0Y2hcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKF9mZXRjaCkge1xuICAgICAgZnVuY3Rpb24gZmV0Y2goX3gpIHtcbiAgICAgICAgcmV0dXJuIF9mZXRjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICBmZXRjaC50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9mZXRjaC50b1N0cmluZygpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGZldGNoO1xuICAgIH0oZnVuY3Rpb24gKHVybCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmICghKCdoZWFkZXJzJyBpbiBhcmdzKSkge1xuICAgICAgICAgIGFyZ3MuaGVhZGVycyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEoJ3RyaWVzJyBpbiBhcmdzKSkge1xuICAgICAgICAgIGFyZ3MudHJpZXMgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgYXJncy50cmllcysrO1xuXG4gICAgICAgIGlmIChhcmdzLnRyaWVzID4gMykge1xuICAgICAgICAgIHJlamVjdChudWxsKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoX3RoaXM0LmlzTG9nZ2VkSW4oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBfdGhpczQubG9naW4oKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzNC5mZXRjaCh1cmwsIGFyZ3MpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXM0LmFkZExvYWRpbmdTdGF0ZSgnZmV0Y2hpbmcnKTtcblxuICAgICAgICAgIGFyZ3MuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgX2hlbHBlcnMuZGVmYXVsdC5jb29raWVHZXQoJ2FjY2Vzc190b2tlbicpO1xuICAgICAgICAgIGZldGNoKHVybCwgYXJncykudGhlbihmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBfdGhpczQucmVtb3ZlTG9hZGluZ1N0YXRlcygpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgX3RoaXM0LmFkZExvYWRpbmdTdGF0ZSgnbG9nZ2luZy1pbicpO1xuXG4gICAgICAgICAgICAgIGZldGNoKF90aGlzNC5jb25maWcuYXV0aF9zZXJ2ZXIgKyAnL3JlZnJlc2gnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIF9oZWxwZXJzLmRlZmF1bHQuY29va2llR2V0KCdhY2Nlc3NfdG9rZW4nKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZSdcbiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgX3RoaXM0LnNldENvb2tpZXMocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQucmVtb3ZlTG9hZGluZ1N0YXRlcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5mZXRjaCh1cmwsIGFyZ3MpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5yZW1vdmVMb2FkaW5nU3RhdGVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBfdGhpczQucmVtb3ZlTG9hZGluZ1N0YXRlcygpO1xuXG4gICAgICAgICAgICAgICAgICBfdGhpczQucmVuZGVyTG9naW5Gb3JtV2l0aFByb21pc2UoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmZldGNoKHVybCwgYXJncykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbiAgfSwge1xuICAgIGtleTogXCJzZXRDb29raWVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvb2tpZXMoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdmFyIGFjY2Vzc190b2tlbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbnVsbDtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChfdGhpczUuc2V0Q29va2llTG9hZGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgX3RoaXM1LnNldENvb2tpZUxvYWRpbmcgPT09IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF90aGlzNS5zZXRDb29raWVMb2FkaW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzNS5zZXRDb29raWVMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICBpZiAoYWNjZXNzX3Rva2VuICE9PSBudWxsKSB7XG4gICAgICAgICAgX2hlbHBlcnMuZGVmYXVsdC5jb29raWVTZXQoJ2FjY2Vzc190b2tlbicsIGFjY2Vzc190b2tlbiwgMjgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9oZWxwZXJzLmRlZmF1bHQuY29va2llRGVsZXRlKCdhY2Nlc3NfdG9rZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfdGhpczUuY29uZmlnLnNzbyA9PT0gdW5kZWZpbmVkIHx8IF90aGlzNS5jb25maWcuc3NvLmxlbmd0aCA9PT0gMSAmJiBfdGhpczUuY29uZmlnLnNzb1swXSA9PT0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0KSB7XG4gICAgICAgICAgX3RoaXM1LnNldENvb2tpZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgX2hlbHBlcnMuZGVmYXVsdC5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlmcmFtZV93cmFwcGVyJykpO1xuXG4gICAgICAgIHZhciBpZnJhbWVfd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBpZnJhbWVfd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2lmcmFtZV93cmFwcGVyJyk7XG4gICAgICAgIGlmcmFtZV93cmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaWZyYW1lX3dyYXBwZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWVfd3JhcHBlcik7XG4gICAgICAgIHZhciB0aW1lb3V0ID0gbnVsbDtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfdGhpczUsXG4gICAgICAgICAgICB0b2RvID0gX3RoaXM1LmNvbmZpZy5zc28ubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIHdhaXRGb3JQb3N0TWVzc2FnZSA9IGZ1bmN0aW9uIHdhaXRGb3JQb3N0TWVzc2FnZShlKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5zc28uaW5kZXhPZihlLm9yaWdpbikgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGUuZGF0YSAhPT0gdW5kZWZpbmVkICYmIGUuZGF0YSAhPT0gbnVsbCAmJiAnc3VjY2VzcycgaW4gZS5kYXRhICYmIGUuZGF0YS5zdWNjZXNzID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0b2RvLS07XG4gICAgICAgICAgfSAvL2NvbnNvbGUubG9nKHRvZG8pO1xuXG5cbiAgICAgICAgICBpZiAodG9kbyA8PSAwKSB7XG4gICAgICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjbGVhcmVkIHRpbWVvdXQnKTtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHdhaXRGb3JQb3N0TWVzc2FnZSwgZmFsc2UpO1xuXG4gICAgICAgICAgICBfaGVscGVycy5kZWZhdWx0LnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaWZyYW1lX3dyYXBwZXInKSk7XG5cbiAgICAgICAgICAgIF90aGlzLnNldENvb2tpZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3YWl0Rm9yUG9zdE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChfdGhpczUuc2V0Q29va2llTG9hZGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndGltZW91dCcpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3YWl0Rm9yUG9zdE1lc3NhZ2UsIGZhbHNlKTtcblxuICAgICAgICAgICAgX2hlbHBlcnMuZGVmYXVsdC5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlmcmFtZV93cmFwcGVyJykpO1xuXG4gICAgICAgICAgICBfdGhpczUuc2V0Q29va2llTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwMDApO1xuXG4gICAgICAgIF90aGlzNS5jb25maWcuc3NvLmZvckVhY2goZnVuY3Rpb24gKHNzb19fdmFsdWUpIHtcbiAgICAgICAgICBpZiAoc3NvX192YWx1ZSA9PT0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNzb19fdmFsdWUgKyAnL3Nzby5odG1sJyk7XG4gICAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzFweCc7XG4gICAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xuICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiBhY2Nlc3NfdG9rZW5cbiAgICAgICAgICAgIH0sIHNzb19fdmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pZnJhbWVfd3JhcHBlcicpLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlckxvZ2luRm9ybVdpdGhQcm9taXNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckxvZ2luRm9ybVdpdGhQcm9taXNlKCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzNi5idWlsZFVwTG9naW5Gb3JtSHRtbCgpO1xuXG4gICAgICAgIF90aGlzNi5iaW5kTG9naW5Gb3JtU3VibWl0KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpczYudHJpZ2dlckxvZ2luRm9ybVJlbmRlcmVkRXZlbnQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJidWlsZFVwTG9naW5Gb3JtSHRtbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFVwTG9naW5Gb3JtSHRtbCgpIHtcbiAgICAgIGlmICghKCdsb2dpbl9mb3JtJyBpbiB0aGlzLmNvbmZpZykgfHwgdGhpcy5jb25maWcubG9naW5fZm9ybSA9PSAnJykge1xuICAgICAgICB0aGlzLmNvbmZpZy5sb2dpbl9mb3JtID0gXCI8ZGl2IGNsYXNzPVxcXCJsb2dpbi1mb3JtXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibG9naW4tZm9ybV9faW5uZXJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XFxcImxvZ2luLWZvcm1fX2Zvcm1cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cXFwibG9naW4tZm9ybV9faXRlbXNcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XFxcImxvZ2luLWZvcm1fX2l0ZW1cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJsb2dpbi1mb3JtX19sYWJlbCBsb2dpbi1mb3JtX19sYWJlbC0tXCIuY29uY2F0KHRoaXMuY29uZmlnLmF1dGhfbG9naW4sIFwiXFxcIiBmb3I9XFxcImxvZ2luLWZvcm1fX2xhYmVsLS1cIikuY29uY2F0KHRoaXMuY29uZmlnLmF1dGhfbG9naW4sIFwiXFxcIj5cIikuY29uY2F0KHRoaXMuY29uZmlnLmF1dGhfbG9naW4gPT09ICdlbWFpbCcgPyAnRS1NYWlsLUFkcmVzc2UnIDogdGhpcy5jb25maWcuYXV0aF9sb2dpbiA9PT0gJ3VzZXJuYW1lJyA/ICdCZW51dHplcm5hbWUnIDogdGhpcy5jb25maWcuYXV0aF9sb2dpbiwgXCI8L2xhYmVsPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJsb2dpbi1mb3JtX19pbnB1dCBsb2dpbi1mb3JtX19pbnB1dC0tXCIpLmNvbmNhdCh0aGlzLmNvbmZpZy5hdXRoX2xvZ2luLCBcIlxcXCIgaWQ9XFxcImxvZ2luLWZvcm1fX2xhYmVsLS1cIikuY29uY2F0KHRoaXMuY29uZmlnLmF1dGhfbG9naW4sIFwiXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIiByZXF1aXJlZD1cXFwicmVxdWlyZWRcXFwiIG5hbWU9XFxcIlwiKS5jb25jYXQodGhpcy5jb25maWcuYXV0aF9sb2dpbiwgXCJcXFwiIC8+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwibG9naW4tZm9ybV9faXRlbVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImxvZ2luLWZvcm1fX2xhYmVsIGxvZ2luLWZvcm1fX2xhYmVsLS1wYXNzd29yZFxcXCIgZm9yPVxcXCJsb2dpbi1mb3JtX19sYWJlbC0tcGFzc3dvcmRcXFwiPlBhc3N3b3J0PC9sYWJlbD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibG9naW4tZm9ybV9faW5wdXQgbG9naW4tZm9ybV9faW5wdXQtLXBhc3N3b3JkXFxcIiBpZD1cXFwibG9naW4tZm9ybV9fbGFiZWwtLXBhc3N3b3JkXFxcIiB0eXBlPVxcXCJwYXNzd29yZFxcXCIgcmVxdWlyZWQ9XFxcInJlcXVpcmVkXFxcIiBuYW1lPVxcXCJwYXNzd29yZFxcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJsb2dpbi1mb3JtX19pdGVtXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibG9naW4tZm9ybV9fc3VibWl0XFxcIiB0eXBlPVxcXCJzdWJtaXRcXFwiIHZhbHVlPVxcXCJBbm1lbGRlblxcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxcbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cIik7XG4gICAgICB9XG5cbiAgICAgIHZhciBkb20gPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHRoaXMuY29uZmlnLmxvZ2luX2Zvcm0sICd0ZXh0L2h0bWwnKS5ib2R5LmNoaWxkTm9kZXNbMF07XG4gICAgICB0aGlzLmNvbmZpZy5sb2dpbl9mb3JtX2NsYXNzID0gZG9tLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5zcGxpdCgnICcpWzBdO1xuXG4gICAgICBfaGVscGVycy5kZWZhdWx0LnJlbW92ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuY29uZmlnLmxvZ2luX2Zvcm1fY2xhc3MpKTtcblxuICAgICAgdGhpcy5hZGRMb2FkaW5nU3RhdGUoJ2xvZ2luLWZvcm0tdmlzaWJsZScpO1xuICAgICAgdmFyIHBhcmVudCA9IGRvY3VtZW50LmJvZHk7XG5cbiAgICAgIGlmICgnbG9naW5fZm9ybV9wYXJlbnQnIGluIHRoaXMuY29uZmlnICYmIHRoaXMuY29uZmlnLmxvZ2luX2Zvcm1fcGFyZW50ICE9ICcnICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jb25maWcubG9naW5fZm9ybV9wYXJlbnQpICE9PSBudWxsKSB7XG4gICAgICAgIHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jb25maWcubG9naW5fZm9ybV9wYXJlbnQpO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidHJpZ2dlckxvZ2luRm9ybVJlbmRlcmVkRXZlbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlckxvZ2luRm9ybVJlbmRlcmVkRXZlbnQoKSB7XG4gICAgICBpZiAoJ2xvZ2luX2Zvcm1fcmVuZGVyZWQnIGluIHRoaXMuY29uZmlnICYmIHRoaXMuY29uZmlnLmxvZ2luX2Zvcm1fcmVuZGVyZWQgIT0gJycgJiYgdHlwZW9mIHRoaXMuY29uZmlnLmxvZ2luX2Zvcm1fcmVuZGVyZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5jb25maWcubG9naW5fZm9ybV9yZW5kZXJlZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuY29uZmlnLmxvZ2luX2Zvcm1fY2xhc3MpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmluZExvZ2luRm9ybVN1Ym1pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kTG9naW5Gb3JtU3VibWl0KCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBkb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIF90aGlzNy5jb25maWcubG9naW5fZm9ybV9jbGFzcyksXG4gICAgICAgICAgICBmb3JtID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhciBfSlNPTiRzdHJpbmdpZnk7XG5cbiAgICAgICAgICBfdGhpczcuYWRkTG9hZGluZ1N0YXRlKCdsb2dnaW5nLWluJyk7XG5cbiAgICAgICAgICBpZiAoZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfaGVscGVycy5kZWZhdWx0LnJlbW92ZShkb20ucXVlcnlTZWxlY3RvcignLicgKyBfdGhpczcuY29uZmlnLmxvZ2luX2Zvcm1fY2xhc3MgKyAnX19lcnJvcicpKTtcblxuICAgICAgICAgIGZldGNoKF90aGlzNy5jb25maWcuYXV0aF9zZXJ2ZXIgKyAnL2xvZ2luJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSgoX0pTT04kc3RyaW5naWZ5ID0ge30sICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9KU09OJHN0cmluZ2lmeSwgX3RoaXM3LmNvbmZpZy5hdXRoX2xvZ2luLCBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCInICsgX3RoaXM3LmNvbmZpZy5hdXRoX2xvZ2luICsgJ1wiXScpLnZhbHVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoX0pTT04kc3RyaW5naWZ5LCBcInBhc3N3b3JkXCIsIGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInBhc3N3b3JkXCJdJykudmFsdWUpLCBfSlNPTiRzdHJpbmdpZnkpKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnXG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAoZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiYgcmVzcG9uc2UgIT09IG51bGwgJiYgJ3N1Y2Nlc3MnIGluIHJlc3BvbnNlICYmIHJlc3BvbnNlLnN1Y2Nlc3MgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgX2hlbHBlcnMuZGVmYXVsdC5yZW1vdmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBfdGhpczcuY29uZmlnLmxvZ2luX2Zvcm1fY2xhc3MpKTtcblxuICAgICAgICAgICAgICBfdGhpczcuc2V0Q29va2llcyhyZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM3LnJlbW92ZUxvYWRpbmdTdGF0ZXMoKTtcblxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3JtLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsICc8ZGl2IGNsYXNzPVwiJyArIF90aGlzNy5jb25maWcubG9naW5fZm9ybV9jbGFzcyArICdfX2Vycm9yXCI+JyArIHJlc3BvbnNlLnB1YmxpY19tZXNzYWdlICsgJzwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZExvYWRpbmdTdGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMb2FkaW5nU3RhdGUoc3RhdGUpIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdqd3RidXRsZXItJyArIHN0YXRlKTtcblxuICAgICAgaWYgKHN0YXRlID09PSAnbG9nZ2luZy1pbicgfHwgc3RhdGUgPT09ICdsb2dnaW5nLW91dCcpIHtcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2p3dGJ1dGxlci1sb2FkaW5nJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUxvYWRpbmdTdGF0ZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlTG9hZGluZ1N0YXRlcygpIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdqd3RidXRsZXItbG9nZ2luZy1pbicpO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2p3dGJ1dGxlci1sb2dnaW5nLW91dCcpO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2p3dGJ1dGxlci1sb2FkaW5nJyk7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnand0YnV0bGVyLWZldGNoaW5nJyk7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnand0YnV0bGVyLWxvZ2luLWZvcm0tdmlzaWJsZScpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gand0YnV0bGVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBqd3RidXRsZXI7XG53aW5kb3cuand0YnV0bGVyID0gand0YnV0bGVyOyIsIid1c2Ugc3RyaWN0JztcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgdHJ5VG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdHJ5LXRvLXN0cmluZycpO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYEFzc2VydDogSXNDYWxsYWJsZShhcmd1bWVudCkgaXMgdHJ1ZWBcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIGlmIChpc0NhbGxhYmxlKGFyZ3VtZW50KSkgcmV0dXJuIGFyZ3VtZW50O1xuICB0aHJvdyAkVHlwZUVycm9yKHRyeVRvU3RyaW5nKGFyZ3VtZW50KSArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgaXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jb25zdHJ1Y3RvcicpO1xudmFyIHRyeVRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RyeS10by1zdHJpbmcnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbi8vIGBBc3NlcnQ6IElzQ29uc3RydWN0b3IoYXJndW1lbnQpIGlzIHRydWVgXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoaXNDb25zdHJ1Y3Rvcihhcmd1bWVudCkpIHJldHVybiBhcmd1bWVudDtcbiAgdGhyb3cgJFR5cGVFcnJvcih0cnlUb1N0cmluZyhhcmd1bWVudCkgKyAnIGlzIG5vdCBhIGNvbnN0cnVjdG9yJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcblxudmFyICRTdHJpbmcgPSBTdHJpbmc7XG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgaWYgKHR5cGVvZiBhcmd1bWVudCA9PSAnb2JqZWN0JyB8fCBpc0NhbGxhYmxlKGFyZ3VtZW50KSkgcmV0dXJuIGFyZ3VtZW50O1xuICB0aHJvdyAkVHlwZUVycm9yKFwiQ2FuJ3Qgc2V0IFwiICsgJFN0cmluZyhhcmd1bWVudCkgKyAnIGFzIGEgcHJvdG90eXBlJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNoYXJBdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zdHJpbmctbXVsdGlieXRlJykuY2hhckF0O1xuXG4vLyBgQWR2YW5jZVN0cmluZ0luZGV4YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYWR2YW5jZXN0cmluZ2luZGV4XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTLCBpbmRleCwgdW5pY29kZSkge1xuICByZXR1cm4gaW5kZXggKyAodW5pY29kZSA/IGNoYXJBdChTLCBpbmRleCkubGVuZ3RoIDogMSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGlzUHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWlzLXByb3RvdHlwZS1vZicpO1xuXG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIFByb3RvdHlwZSkge1xuICBpZiAoaXNQcm90b3R5cGVPZihQcm90b3R5cGUsIGl0KSkgcmV0dXJuIGl0O1xuICB0aHJvdyAkVHlwZUVycm9yKCdJbmNvcnJlY3QgaW52b2NhdGlvbicpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxudmFyICRTdHJpbmcgPSBTdHJpbmc7XG52YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjtcblxuLy8gYEFzc2VydDogVHlwZShhcmd1bWVudCkgaXMgT2JqZWN0YFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgaWYgKGlzT2JqZWN0KGFyZ3VtZW50KSkgcmV0dXJuIGFyZ3VtZW50O1xuICB0aHJvdyAkVHlwZUVycm9yKCRTdHJpbmcoYXJndW1lbnQpICsgJyBpcyBub3QgYW4gb2JqZWN0Jyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRmb3JFYWNoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWl0ZXJhdGlvbicpLmZvckVhY2g7XG52YXIgYXJyYXlNZXRob2RJc1N0cmljdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1tZXRob2QtaXMtc3RyaWN0Jyk7XG5cbnZhciBTVFJJQ1RfTUVUSE9EID0gYXJyYXlNZXRob2RJc1N0cmljdCgnZm9yRWFjaCcpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLmZvckVhY2hgIG1ldGhvZCBpbXBsZW1lbnRhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZm9yZWFjaFxubW9kdWxlLmV4cG9ydHMgPSAhU1RSSUNUX01FVEhPRCA/IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pIHtcbiAgcmV0dXJuICRmb3JFYWNoKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1hcnJheS1wcm90b3R5cGUtZm9yZWFjaCAtLSBzYWZlXG59IDogW10uZm9yRWFjaDtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciB0b0Fic29sdXRlSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tYWJzb2x1dGUtaW5kZXgnKTtcbnZhciBsZW5ndGhPZkFycmF5TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9sZW5ndGgtb2YtYXJyYXktbGlrZScpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLnsgaW5kZXhPZiwgaW5jbHVkZXMgfWAgbWV0aG9kcyBpbXBsZW1lbnRhdGlvblxudmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChJU19JTkNMVURFUykge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBlbCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3QoJHRoaXMpO1xuICAgIHZhciBsZW5ndGggPSBsZW5ndGhPZkFycmF5TGlrZShPKTtcbiAgICB2YXIgaW5kZXggPSB0b0Fic29sdXRlSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpO1xuICAgIHZhciB2YWx1ZTtcbiAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZSAtLSBOYU4gY2hlY2tcbiAgICBpZiAoSVNfSU5DTFVERVMgJiYgZWwgIT09IGVsKSB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUgLS0gTmFOIGNoZWNrXG4gICAgICBpZiAodmFsdWUgIT09IHZhbHVlKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBBcnJheSNpbmRleE9mIGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG4gICAgfSBlbHNlIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7XG4gICAgICBpZiAoKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pICYmIE9baW5kZXhdID09PSBlbCkgcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG4gICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBBcnJheS5wcm90b3R5cGUuaW5jbHVkZXNgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmNsdWRlc1xuICBpbmNsdWRlczogY3JlYXRlTWV0aG9kKHRydWUpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmluZGV4T2ZgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5pbmRleG9mXG4gIGluZGV4T2Y6IGNyZWF0ZU1ldGhvZChmYWxzZSlcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBJbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luZGV4ZWQtb2JqZWN0Jyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG52YXIgbGVuZ3RoT2ZBcnJheUxpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbGVuZ3RoLW9mLWFycmF5LWxpa2UnKTtcbnZhciBhcnJheVNwZWNpZXNDcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktc3BlY2llcy1jcmVhdGUnKTtcblxudmFyIHB1c2ggPSB1bmN1cnJ5VGhpcyhbXS5wdXNoKTtcblxuLy8gYEFycmF5LnByb3RvdHlwZS57IGZvckVhY2gsIG1hcCwgZmlsdGVyLCBzb21lLCBldmVyeSwgZmluZCwgZmluZEluZGV4LCBmaWx0ZXJSZWplY3QgfWAgbWV0aG9kcyBpbXBsZW1lbnRhdGlvblxudmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChUWVBFKSB7XG4gIHZhciBJU19NQVAgPSBUWVBFID09PSAxO1xuICB2YXIgSVNfRklMVEVSID0gVFlQRSA9PT0gMjtcbiAgdmFyIElTX1NPTUUgPSBUWVBFID09PSAzO1xuICB2YXIgSVNfRVZFUlkgPSBUWVBFID09PSA0O1xuICB2YXIgSVNfRklORF9JTkRFWCA9IFRZUEUgPT09IDY7XG4gIHZhciBJU19GSUxURVJfUkVKRUNUID0gVFlQRSA9PT0gNztcbiAgdmFyIE5PX0hPTEVTID0gVFlQRSA9PT0gNSB8fCBJU19GSU5EX0lOREVYO1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBjYWxsYmFja2ZuLCB0aGF0LCBzcGVjaWZpY0NyZWF0ZSkge1xuICAgIHZhciBPID0gdG9PYmplY3QoJHRoaXMpO1xuICAgIHZhciBzZWxmID0gSW5kZXhlZE9iamVjdChPKTtcbiAgICB2YXIgYm91bmRGdW5jdGlvbiA9IGJpbmQoY2FsbGJhY2tmbiwgdGhhdCk7XG4gICAgdmFyIGxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlKHNlbGYpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGNyZWF0ZSA9IHNwZWNpZmljQ3JlYXRlIHx8IGFycmF5U3BlY2llc0NyZWF0ZTtcbiAgICB2YXIgdGFyZ2V0ID0gSVNfTUFQID8gY3JlYXRlKCR0aGlzLCBsZW5ndGgpIDogSVNfRklMVEVSIHx8IElTX0ZJTFRFUl9SRUpFQ1QgPyBjcmVhdGUoJHRoaXMsIDApIDogdW5kZWZpbmVkO1xuICAgIHZhciB2YWx1ZSwgcmVzdWx0O1xuICAgIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSBpZiAoTk9fSE9MRVMgfHwgaW5kZXggaW4gc2VsZikge1xuICAgICAgdmFsdWUgPSBzZWxmW2luZGV4XTtcbiAgICAgIHJlc3VsdCA9IGJvdW5kRnVuY3Rpb24odmFsdWUsIGluZGV4LCBPKTtcbiAgICAgIGlmIChUWVBFKSB7XG4gICAgICAgIGlmIChJU19NQVApIHRhcmdldFtpbmRleF0gPSByZXN1bHQ7IC8vIG1hcFxuICAgICAgICBlbHNlIGlmIChyZXN1bHQpIHN3aXRjaCAoVFlQRSkge1xuICAgICAgICAgIGNhc2UgMzogcmV0dXJuIHRydWU7ICAgICAgICAgICAgICAvLyBzb21lXG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gdmFsdWU7ICAgICAgICAgICAgIC8vIGZpbmRcbiAgICAgICAgICBjYXNlIDY6IHJldHVybiBpbmRleDsgICAgICAgICAgICAgLy8gZmluZEluZGV4XG4gICAgICAgICAgY2FzZSAyOiBwdXNoKHRhcmdldCwgdmFsdWUpOyAgICAgIC8vIGZpbHRlclxuICAgICAgICB9IGVsc2Ugc3dpdGNoIChUWVBFKSB7XG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgIC8vIGV2ZXJ5XG4gICAgICAgICAgY2FzZSA3OiBwdXNoKHRhcmdldCwgdmFsdWUpOyAgICAgIC8vIGZpbHRlclJlamVjdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBJU19GSU5EX0lOREVYID8gLTEgOiBJU19TT01FIHx8IElTX0VWRVJZID8gSVNfRVZFUlkgOiB0YXJnZXQ7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5mb3JFYWNoYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuZm9yZWFjaFxuICBmb3JFYWNoOiBjcmVhdGVNZXRob2QoMCksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUubWFwYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUubWFwXG4gIG1hcDogY3JlYXRlTWV0aG9kKDEpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbHRlcmAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbHRlclxuICBmaWx0ZXI6IGNyZWF0ZU1ldGhvZCgyKSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5zb21lYCBtZXRob2RcbiAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuc29tZVxuICBzb21lOiBjcmVhdGVNZXRob2QoMyksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZXZlcnlgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5ldmVyeVxuICBldmVyeTogY3JlYXRlTWV0aG9kKDQpLFxuICAvLyBgQXJyYXkucHJvdG90eXBlLmZpbmRgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maW5kXG4gIGZpbmQ6IGNyZWF0ZU1ldGhvZCg1KSxcbiAgLy8gYEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXhgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5maW5kSW5kZXhcbiAgZmluZEluZGV4OiBjcmVhdGVNZXRob2QoNiksXG4gIC8vIGBBcnJheS5wcm90b3R5cGUuZmlsdGVyUmVqZWN0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtYXJyYXktZmlsdGVyaW5nXG4gIGZpbHRlclJlamVjdDogY3JlYXRlTWV0aG9kKDcpXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgVjhfVkVSU0lPTiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtdjgtdmVyc2lvbicpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChNRVRIT0RfTkFNRSkge1xuICAvLyBXZSBjYW4ndCB1c2UgdGhpcyBmZWF0dXJlIGRldGVjdGlvbiBpbiBWOCBzaW5jZSBpdCBjYXVzZXNcbiAgLy8gZGVvcHRpbWl6YXRpb24gYW5kIHNlcmlvdXMgcGVyZm9ybWFuY2UgZGVncmFkYXRpb25cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzY3N1xuICByZXR1cm4gVjhfVkVSU0lPTiA+PSA1MSB8fCAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcnJheSA9IFtdO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IGFycmF5LmNvbnN0cnVjdG9yID0ge307XG4gICAgY29uc3RydWN0b3JbU1BFQ0lFU10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4geyBmb286IDEgfTtcbiAgICB9O1xuICAgIHJldHVybiBhcnJheVtNRVRIT0RfTkFNRV0oQm9vbGVhbikuZm9vICE9PSAxO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTUVUSE9EX05BTUUsIGFyZ3VtZW50KSB7XG4gIHZhciBtZXRob2QgPSBbXVtNRVRIT0RfTkFNRV07XG4gIHJldHVybiAhIW1ldGhvZCAmJiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICAgIG1ldGhvZC5jYWxsKG51bGwsIGFyZ3VtZW50IHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDE7IH0sIDEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdG9BYnNvbHV0ZUluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWFic29sdXRlLWluZGV4Jyk7XG52YXIgbGVuZ3RoT2ZBcnJheUxpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbGVuZ3RoLW9mLWFycmF5LWxpa2UnKTtcbnZhciBjcmVhdGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHknKTtcblxudmFyICRBcnJheSA9IEFycmF5O1xudmFyIG1heCA9IE1hdGgubWF4O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChPLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW5ndGggPSBsZW5ndGhPZkFycmF5TGlrZShPKTtcbiAgdmFyIGsgPSB0b0Fic29sdXRlSW5kZXgoc3RhcnQsIGxlbmd0aCk7XG4gIHZhciBmaW4gPSB0b0Fic29sdXRlSW5kZXgoZW5kID09PSB1bmRlZmluZWQgPyBsZW5ndGggOiBlbmQsIGxlbmd0aCk7XG4gIHZhciByZXN1bHQgPSAkQXJyYXkobWF4KGZpbiAtIGssIDApKTtcbiAgdmFyIG4gPSAwO1xuICBmb3IgKDsgayA8IGZpbjsgaysrLCBuKyspIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgbiwgT1trXSk7XG4gIHJlc3VsdC5sZW5ndGggPSBuO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB1bmN1cnJ5VGhpcyhbXS5zbGljZSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1hcnJheScpO1xudmFyIGlzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY29uc3RydWN0b3InKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcbnZhciAkQXJyYXkgPSBBcnJheTtcblxuLy8gYSBwYXJ0IG9mIGBBcnJheVNwZWNpZXNDcmVhdGVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1hcnJheXNwZWNpZXNjcmVhdGVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9yaWdpbmFsQXJyYXkpIHtcbiAgdmFyIEM7XG4gIGlmIChpc0FycmF5KG9yaWdpbmFsQXJyYXkpKSB7XG4gICAgQyA9IG9yaWdpbmFsQXJyYXkuY29uc3RydWN0b3I7XG4gICAgLy8gY3Jvc3MtcmVhbG0gZmFsbGJhY2tcbiAgICBpZiAoaXNDb25zdHJ1Y3RvcihDKSAmJiAoQyA9PT0gJEFycmF5IHx8IGlzQXJyYXkoQy5wcm90b3R5cGUpKSkgQyA9IHVuZGVmaW5lZDtcbiAgICBlbHNlIGlmIChpc09iamVjdChDKSkge1xuICAgICAgQyA9IENbU1BFQ0lFU107XG4gICAgICBpZiAoQyA9PT0gbnVsbCkgQyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gcmV0dXJuIEMgPT09IHVuZGVmaW5lZCA/ICRBcnJheSA6IEM7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFycmF5U3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3InKTtcblxuLy8gYEFycmF5U3BlY2llc0NyZWF0ZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5c3BlY2llc2NyZWF0ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3JpZ2luYWxBcnJheSwgbGVuZ3RoKSB7XG4gIHJldHVybiBuZXcgKGFycmF5U3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsQXJyYXkpKShsZW5ndGggPT09IDAgPyAwIDogbGVuZ3RoKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBJVEVSQVRPUiA9IHdlbGxLbm93blN5bWJvbCgnaXRlcmF0b3InKTtcbnZhciBTQUZFX0NMT1NJTkcgPSBmYWxzZTtcblxudHJ5IHtcbiAgdmFyIGNhbGxlZCA9IDA7XG4gIHZhciBpdGVyYXRvcldpdGhSZXR1cm4gPSB7XG4gICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHsgZG9uZTogISFjYWxsZWQrKyB9O1xuICAgIH0sXG4gICAgJ3JldHVybic6IGZ1bmN0aW9uICgpIHtcbiAgICAgIFNBRkVfQ0xPU0lORyA9IHRydWU7XG4gICAgfVxuICB9O1xuICBpdGVyYXRvcldpdGhSZXR1cm5bSVRFUkFUT1JdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tYXJyYXktZnJvbSwgbm8tdGhyb3ctbGl0ZXJhbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICBBcnJheS5mcm9tKGl0ZXJhdG9yV2l0aFJldHVybiwgZnVuY3Rpb24gKCkgeyB0aHJvdyAyOyB9KTtcbn0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYywgU0tJUF9DTE9TSU5HKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFTS0lQX0NMT1NJTkcgJiYgIVNBRkVfQ0xPU0lORykgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChlcnJvcikgeyByZXR1cm4gZmFsc2U7IH0gLy8gd29ya2Fyb3VuZCBvZiBvbGQgV2ViS2l0ICsgYGV2YWxgIGJ1Z1xuICB2YXIgSVRFUkFUSU9OX1NVUFBPUlQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgb2JqZWN0W0lURVJBVE9SXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4geyBkb25lOiBJVEVSQVRJT05fU1VQUE9SVCA9IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIGV4ZWMob2JqZWN0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gSVRFUkFUSU9OX1NVUFBPUlQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xuXG52YXIgdG9TdHJpbmcgPSB1bmN1cnJ5VGhpcyh7fS50b1N0cmluZyk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBzdHJpbmdTbGljZSh0b1N0cmluZyhpdCksIDgsIC0xKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgVE9fU1RSSU5HX1RBR19TVVBQT1JUID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZy10YWctc3VwcG9ydCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBjbGFzc29mUmF3ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sKCd0b1N0cmluZ1RhZycpO1xudmFyICRPYmplY3QgPSBPYmplY3Q7XG5cbi8vIEVTMyB3cm9uZyBoZXJlXG52YXIgQ09SUkVDVF9BUkdVTUVOVFMgPSBjbGFzc29mUmF3KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PT0gJ0FyZ3VtZW50cyc7XG5cbi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yXG52YXIgdHJ5R2V0ID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gaXRba2V5XTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxufTtcblxuLy8gZ2V0dGluZyB0YWcgZnJvbSBFUzYrIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYFxubW9kdWxlLmV4cG9ydHMgPSBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPyBjbGFzc29mUmF3IDogZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBPLCB0YWcsIHJlc3VsdDtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG4gICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlXG4gICAgOiB0eXBlb2YgKHRhZyA9IHRyeUdldChPID0gJE9iamVjdChpdCksIFRPX1NUUklOR19UQUcpKSA9PSAnc3RyaW5nJyA/IHRhZ1xuICAgIC8vIGJ1aWx0aW5UYWcgY2FzZVxuICAgIDogQ09SUkVDVF9BUkdVTUVOVFMgPyBjbGFzc29mUmF3KE8pXG4gICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFja1xuICAgIDogKHJlc3VsdCA9IGNsYXNzb2ZSYXcoTykpID09PSAnT2JqZWN0JyAmJiBpc0NhbGxhYmxlKE8uY2FsbGVlKSA/ICdBcmd1bWVudHMnIDogcmVzdWx0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBoYXNPd24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzLW93bi1wcm9wZXJ0eScpO1xudmFyIG93bktleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb3duLWtleXMnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UsIGV4Y2VwdGlvbnMpIHtcbiAgdmFyIGtleXMgPSBvd25LZXlzKHNvdXJjZSk7XG4gIHZhciBkZWZpbmVQcm9wZXJ0eSA9IGRlZmluZVByb3BlcnR5TW9kdWxlLmY7XG4gIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JNb2R1bGUuZjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgaWYgKCFoYXNPd24odGFyZ2V0LCBrZXkpICYmICEoZXhjZXB0aW9ucyAmJiBoYXNPd24oZXhjZXB0aW9ucywga2V5KSkpIHtcbiAgICAgIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICB9XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmcnKTtcblxudmFyIHF1b3QgPSAvXCIvZztcbnZhciByZXBsYWNlID0gdW5jdXJyeVRoaXMoJycucmVwbGFjZSk7XG5cbi8vIGBDcmVhdGVIVE1MYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtY3JlYXRlaHRtbFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyaW5nLCB0YWcsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgdmFyIFMgPSB0b1N0cmluZyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHN0cmluZykpO1xuICB2YXIgcDEgPSAnPCcgKyB0YWc7XG4gIGlmIChhdHRyaWJ1dGUgIT09ICcnKSBwMSArPSAnICcgKyBhdHRyaWJ1dGUgKyAnPVwiJyArIHJlcGxhY2UodG9TdHJpbmcodmFsdWUpLCBxdW90LCAnJnF1b3Q7JykgKyAnXCInO1xuICByZXR1cm4gcDEgKyAnPicgKyBTICsgJzwvJyArIHRhZyArICc+Jztcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gREVTQ1JJUFRPUlMgPyBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHJldHVybiBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mKG9iamVjdCwga2V5LCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoMSwgdmFsdWUpKTtcbn0gOiBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0bWFwLCB2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB0b1Byb3BlcnR5S2V5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXByb3BlcnR5LWtleScpO1xudmFyIGRlZmluZVByb3BlcnR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKTtcbnZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHZhciBwcm9wZXJ0eUtleSA9IHRvUHJvcGVydHlLZXkoa2V5KTtcbiAgaWYgKHByb3BlcnR5S2V5IGluIG9iamVjdCkgZGVmaW5lUHJvcGVydHlNb2R1bGUuZihvYmplY3QsIHByb3BlcnR5S2V5LCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoMCwgdmFsdWUpKTtcbiAgZWxzZSBvYmplY3RbcHJvcGVydHlLZXldID0gdmFsdWU7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIG1ha2VCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL21ha2UtYnVpbHQtaW4nKTtcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldCwgbmFtZSwgZGVzY3JpcHRvcikge1xuICBpZiAoZGVzY3JpcHRvci5nZXQpIG1ha2VCdWlsdEluKGRlc2NyaXB0b3IuZ2V0LCBuYW1lLCB7IGdldHRlcjogdHJ1ZSB9KTtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSBtYWtlQnVpbHRJbihkZXNjcmlwdG9yLnNldCwgbmFtZSwgeyBzZXR0ZXI6IHRydWUgfSk7XG4gIHJldHVybiBkZWZpbmVQcm9wZXJ0eS5mKHRhcmdldCwgbmFtZSwgZGVzY3JpcHRvcik7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBkZWZpbmVQcm9wZXJ0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgbWFrZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbWFrZS1idWlsdC1pbicpO1xudmFyIGRlZmluZUdsb2JhbFByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1nbG9iYWwtcHJvcGVydHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywga2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgdmFyIHNpbXBsZSA9IG9wdGlvbnMuZW51bWVyYWJsZTtcbiAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubmFtZSA6IGtleTtcbiAgaWYgKGlzQ2FsbGFibGUodmFsdWUpKSBtYWtlQnVpbHRJbih2YWx1ZSwgbmFtZSwgb3B0aW9ucyk7XG4gIGlmIChvcHRpb25zLmdsb2JhbCkge1xuICAgIGlmIChzaW1wbGUpIE9ba2V5XSA9IHZhbHVlO1xuICAgIGVsc2UgZGVmaW5lR2xvYmFsUHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghb3B0aW9ucy51bnNhZmUpIGRlbGV0ZSBPW2tleV07XG4gICAgICBlbHNlIGlmIChPW2tleV0pIHNpbXBsZSA9IHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICAgIGlmIChzaW1wbGUpIE9ba2V5XSA9IHZhbHVlO1xuICAgIGVsc2UgZGVmaW5lUHJvcGVydHlNb2R1bGUuZihPLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiAhb3B0aW9ucy5ub25Db25maWd1cmFibGUsXG4gICAgICB3cml0YWJsZTogIW9wdGlvbnMubm9uV3JpdGFibGVcbiAgICB9KTtcbiAgfSByZXR1cm4gTztcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWRlZmluZXByb3BlcnR5IC0tIHNhZmVcbnZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICB0cnkge1xuICAgIGRlZmluZVByb3BlcnR5KGdsb2JhbCwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBnbG9iYWxba2V5XSA9IHZhbHVlO1xuICB9IHJldHVybiB2YWx1ZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxuLy8gRGV0ZWN0IElFOCdzIGluY29tcGxldGUgZGVmaW5lUHJvcGVydHkgaW1wbGVtZW50YXRpb25cbm1vZHVsZS5leHBvcnRzID0gIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1kZWZpbmVwcm9wZXJ0eSAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAxLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfSB9KVsxXSAhPT0gNztcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGRvY3VtZW50QWxsID0gdHlwZW9mIGRvY3VtZW50ID09ICdvYmplY3QnICYmIGRvY3VtZW50LmFsbDtcblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1Jc0hUTUxEREEtaW50ZXJuYWwtc2xvdFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vbm8tdHlwZW9mLXVuZGVmaW5lZCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xudmFyIElTX0hUTUxEREEgPSB0eXBlb2YgZG9jdW1lbnRBbGwgPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnRBbGwgIT09IHVuZGVmaW5lZDtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFsbDogZG9jdW1lbnRBbGwsXG4gIElTX0hUTUxEREE6IElTX0hUTUxEREFcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xuXG52YXIgZG9jdW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQ7XG4vLyB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JyBpbiBvbGQgSUVcbnZhciBFWElTVFMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBFWElTVFMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSAweDFGRkZGRkZGRkZGRkZGOyAvLyAyICoqIDUzIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpdCA+IE1BWF9TQUZFX0lOVEVHRVIpIHRocm93ICRUeXBlRXJyb3IoJ01heGltdW0gYWxsb3dlZCBpbmRleCBleGNlZWRlZCcpO1xuICByZXR1cm4gaXQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gaXRlcmFibGUgRE9NIGNvbGxlY3Rpb25zXG4vLyBmbGFnIC0gYGl0ZXJhYmxlYCBpbnRlcmZhY2UgLSAnZW50cmllcycsICdrZXlzJywgJ3ZhbHVlcycsICdmb3JFYWNoJyBtZXRob2RzXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ1NTUnVsZUxpc3Q6IDAsXG4gIENTU1N0eWxlRGVjbGFyYXRpb246IDAsXG4gIENTU1ZhbHVlTGlzdDogMCxcbiAgQ2xpZW50UmVjdExpc3Q6IDAsXG4gIERPTVJlY3RMaXN0OiAwLFxuICBET01TdHJpbmdMaXN0OiAwLFxuICBET01Ub2tlbkxpc3Q6IDEsXG4gIERhdGFUcmFuc2Zlckl0ZW1MaXN0OiAwLFxuICBGaWxlTGlzdDogMCxcbiAgSFRNTEFsbENvbGxlY3Rpb246IDAsXG4gIEhUTUxDb2xsZWN0aW9uOiAwLFxuICBIVE1MRm9ybUVsZW1lbnQ6IDAsXG4gIEhUTUxTZWxlY3RFbGVtZW50OiAwLFxuICBNZWRpYUxpc3Q6IDAsXG4gIE1pbWVUeXBlQXJyYXk6IDAsXG4gIE5hbWVkTm9kZU1hcDogMCxcbiAgTm9kZUxpc3Q6IDEsXG4gIFBhaW50UmVxdWVzdExpc3Q6IDAsXG4gIFBsdWdpbjogMCxcbiAgUGx1Z2luQXJyYXk6IDAsXG4gIFNWR0xlbmd0aExpc3Q6IDAsXG4gIFNWR051bWJlckxpc3Q6IDAsXG4gIFNWR1BhdGhTZWdMaXN0OiAwLFxuICBTVkdQb2ludExpc3Q6IDAsXG4gIFNWR1N0cmluZ0xpc3Q6IDAsXG4gIFNWR1RyYW5zZm9ybUxpc3Q6IDAsXG4gIFNvdXJjZUJ1ZmZlckxpc3Q6IDAsXG4gIFN0eWxlU2hlZXRMaXN0OiAwLFxuICBUZXh0VHJhY2tDdWVMaXN0OiAwLFxuICBUZXh0VHJhY2tMaXN0OiAwLFxuICBUb3VjaExpc3Q6IDBcbn07XG4iLCIndXNlIHN0cmljdCc7XG4vLyBpbiBvbGQgV2ViS2l0IHZlcnNpb25zLCBgZWxlbWVudC5jbGFzc0xpc3RgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBnbG9iYWwgYERPTVRva2VuTGlzdGBcbnZhciBkb2N1bWVudENyZWF0ZUVsZW1lbnQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZG9jdW1lbnQtY3JlYXRlLWVsZW1lbnQnKTtcblxudmFyIGNsYXNzTGlzdCA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCgnc3BhbicpLmNsYXNzTGlzdDtcbnZhciBET01Ub2tlbkxpc3RQcm90b3R5cGUgPSBjbGFzc0xpc3QgJiYgY2xhc3NMaXN0LmNvbnN0cnVjdG9yICYmIGNsYXNzTGlzdC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NVG9rZW5MaXN0UHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlID8gdW5kZWZpbmVkIDogRE9NVG9rZW5MaXN0UHJvdG90eXBlO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIElTX0RFTk8gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLWRlbm8nKTtcbnZhciBJU19OT0RFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS1pcy1ub2RlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gIUlTX0RFTk8gJiYgIUlTX05PREVcbiAgJiYgdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0J1xuICAmJiB0eXBlb2YgZG9jdW1lbnQgPT0gJ29iamVjdCc7XG4iLCIndXNlIHN0cmljdCc7XG4vKiBnbG9iYWwgRGVubyAtLSBEZW5vIGNhc2UgKi9cbm1vZHVsZS5leHBvcnRzID0gdHlwZW9mIERlbm8gPT0gJ29iamVjdCcgJiYgRGVubyAmJiB0eXBlb2YgRGVuby52ZXJzaW9uID09ICdvYmplY3QnO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVzZXJBZ2VudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtdXNlci1hZ2VudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IC9pcGFkfGlwaG9uZXxpcG9kL2kudGVzdCh1c2VyQWdlbnQpICYmIHR5cGVvZiBQZWJibGUgIT0gJ3VuZGVmaW5lZCc7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdXNlckFnZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS11c2VyLWFnZW50Jyk7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWRvcy9uby12dWxuZXJhYmxlIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gLyg/OmlwYWR8aXBob25lfGlwb2QpLiphcHBsZXdlYmtpdC9pLnRlc3QodXNlckFnZW50KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mLXJhdycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzb2YoZ2xvYmFsLnByb2Nlc3MpID09PSAncHJvY2Vzcyc7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdXNlckFnZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS11c2VyLWFnZW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gL3dlYjBzKD8hLipjaHJvbWUpL2kudGVzdCh1c2VyQWdlbnQpO1xuIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgbmF2aWdhdG9yICE9ICd1bmRlZmluZWQnICYmIFN0cmluZyhuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAnJztcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgdXNlckFnZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS11c2VyLWFnZW50Jyk7XG5cbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgRGVubyA9IGdsb2JhbC5EZW5vO1xudmFyIHZlcnNpb25zID0gcHJvY2VzcyAmJiBwcm9jZXNzLnZlcnNpb25zIHx8IERlbm8gJiYgRGVuby52ZXJzaW9uO1xudmFyIHY4ID0gdmVyc2lvbnMgJiYgdmVyc2lvbnMudjg7XG52YXIgbWF0Y2gsIHZlcnNpb247XG5cbmlmICh2OCkge1xuICBtYXRjaCA9IHY4LnNwbGl0KCcuJyk7XG4gIC8vIGluIG9sZCBDaHJvbWUsIHZlcnNpb25zIG9mIFY4IGlzbid0IFY4ID0gQ2hyb21lIC8gMTBcbiAgLy8gYnV0IHRoZWlyIGNvcnJlY3QgdmVyc2lvbnMgYXJlIG5vdCBpbnRlcmVzdGluZyBmb3IgdXNcbiAgdmVyc2lvbiA9IG1hdGNoWzBdID4gMCAmJiBtYXRjaFswXSA8IDQgPyAxIDogKyhtYXRjaFswXSArIG1hdGNoWzFdKTtcbn1cblxuLy8gQnJvd3NlckZTIE5vZGVKUyBgcHJvY2Vzc2AgcG9seWZpbGwgaW5jb3JyZWN0bHkgc2V0IGAudjhgIHRvIGAwLjBgXG4vLyBzbyBjaGVjayBgdXNlckFnZW50YCBldmVuIGlmIGAudjhgIGV4aXN0cywgYnV0IDBcbmlmICghdmVyc2lvbiAmJiB1c2VyQWdlbnQpIHtcbiAgbWF0Y2ggPSB1c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8oXFxkKykvKTtcbiAgaWYgKCFtYXRjaCB8fCBtYXRjaFsxXSA+PSA3NCkge1xuICAgIG1hdGNoID0gdXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtcbiAgICBpZiAobWF0Y2gpIHZlcnNpb24gPSArbWF0Y2hbMV07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2ZXJzaW9uO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gSUU4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXG5tb2R1bGUuZXhwb3J0cyA9IFtcbiAgJ2NvbnN0cnVjdG9yJyxcbiAgJ2hhc093blByb3BlcnR5JyxcbiAgJ2lzUHJvdG90eXBlT2YnLFxuICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuICAndG9Mb2NhbGVTdHJpbmcnLFxuICAndG9TdHJpbmcnLFxuICAndmFsdWVPZidcbl07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJykuZjtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgZGVmaW5lQnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtYnVpbHQtaW4nKTtcbnZhciBkZWZpbmVHbG9iYWxQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtZ2xvYmFsLXByb3BlcnR5Jyk7XG52YXIgY29weUNvbnN0cnVjdG9yUHJvcGVydGllcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jb3B5LWNvbnN0cnVjdG9yLXByb3BlcnRpZXMnKTtcbnZhciBpc0ZvcmNlZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1mb3JjZWQnKTtcblxuLypcbiAgb3B0aW9ucy50YXJnZXQgICAgICAgICAtIG5hbWUgb2YgdGhlIHRhcmdldCBvYmplY3RcbiAgb3B0aW9ucy5nbG9iYWwgICAgICAgICAtIHRhcmdldCBpcyB0aGUgZ2xvYmFsIG9iamVjdFxuICBvcHRpb25zLnN0YXQgICAgICAgICAgIC0gZXhwb3J0IGFzIHN0YXRpYyBtZXRob2RzIG9mIHRhcmdldFxuICBvcHRpb25zLnByb3RvICAgICAgICAgIC0gZXhwb3J0IGFzIHByb3RvdHlwZSBtZXRob2RzIG9mIHRhcmdldFxuICBvcHRpb25zLnJlYWwgICAgICAgICAgIC0gcmVhbCBwcm90b3R5cGUgbWV0aG9kIGZvciB0aGUgYHB1cmVgIHZlcnNpb25cbiAgb3B0aW9ucy5mb3JjZWQgICAgICAgICAtIGV4cG9ydCBldmVuIGlmIHRoZSBuYXRpdmUgZmVhdHVyZSBpcyBhdmFpbGFibGVcbiAgb3B0aW9ucy5iaW5kICAgICAgICAgICAtIGJpbmQgbWV0aG9kcyB0byB0aGUgdGFyZ2V0LCByZXF1aXJlZCBmb3IgdGhlIGBwdXJlYCB2ZXJzaW9uXG4gIG9wdGlvbnMud3JhcCAgICAgICAgICAgLSB3cmFwIGNvbnN0cnVjdG9ycyB0byBwcmV2ZW50aW5nIGdsb2JhbCBwb2xsdXRpb24sIHJlcXVpcmVkIGZvciB0aGUgYHB1cmVgIHZlcnNpb25cbiAgb3B0aW9ucy51bnNhZmUgICAgICAgICAtIHVzZSB0aGUgc2ltcGxlIGFzc2lnbm1lbnQgb2YgcHJvcGVydHkgaW5zdGVhZCBvZiBkZWxldGUgKyBkZWZpbmVQcm9wZXJ0eVxuICBvcHRpb25zLnNoYW0gICAgICAgICAgIC0gYWRkIGEgZmxhZyB0byBub3QgY29tcGxldGVseSBmdWxsIHBvbHlmaWxsc1xuICBvcHRpb25zLmVudW1lcmFibGUgICAgIC0gZXhwb3J0IGFzIGVudW1lcmFibGUgcHJvcGVydHlcbiAgb3B0aW9ucy5kb250Q2FsbEdldFNldCAtIHByZXZlbnQgY2FsbGluZyBhIGdldHRlciBvbiB0YXJnZXRcbiAgb3B0aW9ucy5uYW1lICAgICAgICAgICAtIHRoZSAubmFtZSBvZiB0aGUgZnVuY3Rpb24gaWYgaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGtleVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9wdGlvbnMsIHNvdXJjZSkge1xuICB2YXIgVEFSR0VUID0gb3B0aW9ucy50YXJnZXQ7XG4gIHZhciBHTE9CQUwgPSBvcHRpb25zLmdsb2JhbDtcbiAgdmFyIFNUQVRJQyA9IG9wdGlvbnMuc3RhdDtcbiAgdmFyIEZPUkNFRCwgdGFyZ2V0LCBrZXksIHRhcmdldFByb3BlcnR5LCBzb3VyY2VQcm9wZXJ0eSwgZGVzY3JpcHRvcjtcbiAgaWYgKEdMT0JBTCkge1xuICAgIHRhcmdldCA9IGdsb2JhbDtcbiAgfSBlbHNlIGlmIChTVEFUSUMpIHtcbiAgICB0YXJnZXQgPSBnbG9iYWxbVEFSR0VUXSB8fCBkZWZpbmVHbG9iYWxQcm9wZXJ0eShUQVJHRVQsIHt9KTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQgPSAoZ2xvYmFsW1RBUkdFVF0gfHwge30pLnByb3RvdHlwZTtcbiAgfVxuICBpZiAodGFyZ2V0KSBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICBzb3VyY2VQcm9wZXJ0eSA9IHNvdXJjZVtrZXldO1xuICAgIGlmIChvcHRpb25zLmRvbnRDYWxsR2V0U2V0KSB7XG4gICAgICBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KTtcbiAgICAgIHRhcmdldFByb3BlcnR5ID0gZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLnZhbHVlO1xuICAgIH0gZWxzZSB0YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFtrZXldO1xuICAgIEZPUkNFRCA9IGlzRm9yY2VkKEdMT0JBTCA/IGtleSA6IFRBUkdFVCArIChTVEFUSUMgPyAnLicgOiAnIycpICsga2V5LCBvcHRpb25zLmZvcmNlZCk7XG4gICAgLy8gY29udGFpbmVkIGluIHRhcmdldFxuICAgIGlmICghRk9SQ0VEICYmIHRhcmdldFByb3BlcnR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlUHJvcGVydHkgPT0gdHlwZW9mIHRhcmdldFByb3BlcnR5KSBjb250aW51ZTtcbiAgICAgIGNvcHlDb25zdHJ1Y3RvclByb3BlcnRpZXMoc291cmNlUHJvcGVydHksIHRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgLy8gYWRkIGEgZmxhZyB0byBub3QgY29tcGxldGVseSBmdWxsIHBvbHlmaWxsc1xuICAgIGlmIChvcHRpb25zLnNoYW0gfHwgKHRhcmdldFByb3BlcnR5ICYmIHRhcmdldFByb3BlcnR5LnNoYW0pKSB7XG4gICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkoc291cmNlUHJvcGVydHksICdzaGFtJywgdHJ1ZSk7XG4gICAgfVxuICAgIGRlZmluZUJ1aWx0SW4odGFyZ2V0LCBrZXksIHNvdXJjZVByb3BlcnR5LCBvcHRpb25zKTtcbiAgfVxufTtcbiIsIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG4vLyBUT0RPOiBSZW1vdmUgZnJvbSBgY29yZS1qc0A0YCBzaW5jZSBpdCdzIG1vdmVkIHRvIGVudHJ5IHBvaW50c1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lcy5yZWdleHAuZXhlYycpO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcy1jbGF1c2UnKTtcbnZhciBkZWZpbmVCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbicpO1xudmFyIHJlZ2V4cEV4ZWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xudmFyIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtbm9uLWVudW1lcmFibGUtcHJvcGVydHknKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcbnZhciBSZWdFeHBQcm90b3R5cGUgPSBSZWdFeHAucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVksIGV4ZWMsIEZPUkNFRCwgU0hBTSkge1xuICB2YXIgU1lNQk9MID0gd2VsbEtub3duU3ltYm9sKEtFWSk7XG5cbiAgdmFyIERFTEVHQVRFU19UT19TWU1CT0wgPSAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIC8vIFN0cmluZyBtZXRob2RzIGNhbGwgc3ltYm9sLW5hbWVkIFJlZ0VwIG1ldGhvZHNcbiAgICB2YXIgTyA9IHt9O1xuICAgIE9bU1lNQk9MXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDc7IH07XG4gICAgcmV0dXJuICcnW0tFWV0oTykgIT09IDc7XG4gIH0pO1xuXG4gIHZhciBERUxFR0FURVNfVE9fRVhFQyA9IERFTEVHQVRFU19UT19TWU1CT0wgJiYgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBTeW1ib2wtbmFtZWQgUmVnRXhwIG1ldGhvZHMgY2FsbCAuZXhlY1xuICAgIHZhciBleGVjQ2FsbGVkID0gZmFsc2U7XG4gICAgdmFyIHJlID0gL2EvO1xuXG4gICAgaWYgKEtFWSA9PT0gJ3NwbGl0Jykge1xuICAgICAgLy8gV2UgY2FuJ3QgdXNlIHJlYWwgcmVnZXggaGVyZSBzaW5jZSBpdCBjYXVzZXMgZGVvcHRpbWl6YXRpb25cbiAgICAgIC8vIGFuZCBzZXJpb3VzIHBlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uIGluIFY4XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMzA2XG4gICAgICByZSA9IHt9O1xuICAgICAgLy8gUmVnRXhwW0BAc3BsaXRdIGRvZXNuJ3QgY2FsbCB0aGUgcmVnZXgncyBleGVjIG1ldGhvZCwgYnV0IGZpcnN0IGNyZWF0ZXNcbiAgICAgIC8vIGEgbmV3IG9uZS4gV2UgbmVlZCB0byByZXR1cm4gdGhlIHBhdGNoZWQgcmVnZXggd2hlbiBjcmVhdGluZyB0aGUgbmV3IG9uZS5cbiAgICAgIHJlLmNvbnN0cnVjdG9yID0ge307XG4gICAgICByZS5jb25zdHJ1Y3RvcltTUEVDSUVTXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlOyB9O1xuICAgICAgcmUuZmxhZ3MgPSAnJztcbiAgICAgIHJlW1NZTUJPTF0gPSAvLi9bU1lNQk9MXTtcbiAgICB9XG5cbiAgICByZS5leGVjID0gZnVuY3Rpb24gKCkge1xuICAgICAgZXhlY0NhbGxlZCA9IHRydWU7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgcmVbU1lNQk9MXSgnJyk7XG4gICAgcmV0dXJuICFleGVjQ2FsbGVkO1xuICB9KTtcblxuICBpZiAoXG4gICAgIURFTEVHQVRFU19UT19TWU1CT0wgfHxcbiAgICAhREVMRUdBVEVTX1RPX0VYRUMgfHxcbiAgICBGT1JDRURcbiAgKSB7XG4gICAgdmFyIHVuY3VycmllZE5hdGl2ZVJlZ0V4cE1ldGhvZCA9IHVuY3VycnlUaGlzKC8uL1tTWU1CT0xdKTtcbiAgICB2YXIgbWV0aG9kcyA9IGV4ZWMoU1lNQk9MLCAnJ1tLRVldLCBmdW5jdGlvbiAobmF0aXZlTWV0aG9kLCByZWdleHAsIHN0ciwgYXJnMiwgZm9yY2VTdHJpbmdNZXRob2QpIHtcbiAgICAgIHZhciB1bmN1cnJpZWROYXRpdmVNZXRob2QgPSB1bmN1cnJ5VGhpcyhuYXRpdmVNZXRob2QpO1xuICAgICAgdmFyICRleGVjID0gcmVnZXhwLmV4ZWM7XG4gICAgICBpZiAoJGV4ZWMgPT09IHJlZ2V4cEV4ZWMgfHwgJGV4ZWMgPT09IFJlZ0V4cFByb3RvdHlwZS5leGVjKSB7XG4gICAgICAgIGlmIChERUxFR0FURVNfVE9fU1lNQk9MICYmICFmb3JjZVN0cmluZ01ldGhvZCkge1xuICAgICAgICAgIC8vIFRoZSBuYXRpdmUgU3RyaW5nIG1ldGhvZCBhbHJlYWR5IGRlbGVnYXRlcyB0byBAQG1ldGhvZCAodGhpc1xuICAgICAgICAgIC8vIHBvbHlmaWxsZWQgZnVuY3Rpb24pLCBsZWFzaW5nIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cbiAgICAgICAgICAvLyBXZSBhdm9pZCBpdCBieSBkaXJlY3RseSBjYWxsaW5nIHRoZSBuYXRpdmUgQEBtZXRob2QgbWV0aG9kLlxuICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmN1cnJpZWROYXRpdmVSZWdFeHBNZXRob2QocmVnZXhwLCBzdHIsIGFyZzIpIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuY3VycmllZE5hdGl2ZU1ldGhvZChzdHIsIHJlZ2V4cCwgYXJnMikgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlIH07XG4gICAgfSk7XG5cbiAgICBkZWZpbmVCdWlsdEluKFN0cmluZy5wcm90b3R5cGUsIEtFWSwgbWV0aG9kc1swXSk7XG4gICAgZGVmaW5lQnVpbHRJbihSZWdFeHBQcm90b3R5cGUsIFNZTUJPTCwgbWV0aG9kc1sxXSk7XG4gIH1cblxuICBpZiAoU0hBTSkgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KFJlZ0V4cFByb3RvdHlwZVtTWU1CT0xdLCAnc2hhbScsIHRydWUpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBOQVRJVkVfQklORCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLW5hdGl2ZScpO1xuXG52YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG52YXIgYXBwbHkgPSBGdW5jdGlvblByb3RvdHlwZS5hcHBseTtcbnZhciBjYWxsID0gRnVuY3Rpb25Qcm90b3R5cGUuY2FsbDtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLXJlZmxlY3QgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgUmVmbGVjdCA9PSAnb2JqZWN0JyAmJiBSZWZsZWN0LmFwcGx5IHx8IChOQVRJVkVfQklORCA/IGNhbGwuYmluZChhcHBseSkgOiBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBjYWxsLmFwcGx5KGFwcGx5LCBhcmd1bWVudHMpO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzLWNsYXVzZScpO1xudmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG52YXIgTkFUSVZFX0JJTkQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUnKTtcblxudmFyIGJpbmQgPSB1bmN1cnJ5VGhpcyh1bmN1cnJ5VGhpcy5iaW5kKTtcblxuLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbiwgdGhhdCkge1xuICBhQ2FsbGFibGUoZm4pO1xuICByZXR1cm4gdGhhdCA9PT0gdW5kZWZpbmVkID8gZm4gOiBOQVRJVkVfQklORCA/IGJpbmQoZm4sIHRoYXQpIDogZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tZnVuY3Rpb24tcHJvdG90eXBlLWJpbmQgLS0gc2FmZVxuICB2YXIgdGVzdCA9IChmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH0pLmJpbmQoKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucyAtLSBzYWZlXG4gIHJldHVybiB0eXBlb2YgdGVzdCAhPSAnZnVuY3Rpb24nIHx8IHRlc3QuaGFzT3duUHJvcGVydHkoJ3Byb3RvdHlwZScpO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgTkFUSVZFX0JJTkQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tYmluZC1uYXRpdmUnKTtcblxudmFyIGNhbGwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDtcblxubW9kdWxlLmV4cG9ydHMgPSBOQVRJVkVfQklORCA/IGNhbGwuYmluZChjYWxsKSA6IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGNhbGwuYXBwbHkoY2FsbCwgYXJndW1lbnRzKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBoYXNPd24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzLW93bi1wcm9wZXJ0eScpO1xuXG52YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvciAtLSBzYWZlXG52YXIgZ2V0RGVzY3JpcHRvciA9IERFU0NSSVBUT1JTICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbnZhciBFWElTVFMgPSBoYXNPd24oRnVuY3Rpb25Qcm90b3R5cGUsICduYW1lJyk7XG4vLyBhZGRpdGlvbmFsIHByb3RlY3Rpb24gZnJvbSBtaW5pZmllZCAvIG1hbmdsZWQgLyBkcm9wcGVkIGZ1bmN0aW9uIG5hbWVzXG52YXIgUFJPUEVSID0gRVhJU1RTICYmIChmdW5jdGlvbiBzb21ldGhpbmcoKSB7IC8qIGVtcHR5ICovIH0pLm5hbWUgPT09ICdzb21ldGhpbmcnO1xudmFyIENPTkZJR1VSQUJMRSA9IEVYSVNUUyAmJiAoIURFU0NSSVBUT1JTIHx8IChERVNDUklQVE9SUyAmJiBnZXREZXNjcmlwdG9yKEZ1bmN0aW9uUHJvdG90eXBlLCAnbmFtZScpLmNvbmZpZ3VyYWJsZSkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgRVhJU1RTOiBFWElTVFMsXG4gIFBST1BFUjogUFJPUEVSLFxuICBDT05GSUdVUkFCTEU6IENPTkZJR1VSQUJMRVxufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBhQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYS1jYWxsYWJsZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgbWV0aG9kKSB7XG4gIHRyeSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3IgLS0gc2FmZVxuICAgIHJldHVybiB1bmN1cnJ5VGhpcyhhQ2FsbGFibGUoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIGtleSlbbWV0aG9kXSkpO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNsYXNzb2ZSYXcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4pIHtcbiAgLy8gTmFzaG9ybiBidWc6XG4gIC8vICAgaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzExMjhcbiAgLy8gICBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTEzMFxuICBpZiAoY2xhc3NvZlJhdyhmbikgPT09ICdGdW5jdGlvbicpIHJldHVybiB1bmN1cnJ5VGhpcyhmbik7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIE5BVElWRV9CSU5EID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWJpbmQtbmF0aXZlJyk7XG5cbnZhciBGdW5jdGlvblByb3RvdHlwZSA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbnZhciBjYWxsID0gRnVuY3Rpb25Qcm90b3R5cGUuY2FsbDtcbnZhciB1bmN1cnJ5VGhpc1dpdGhCaW5kID0gTkFUSVZFX0JJTkQgJiYgRnVuY3Rpb25Qcm90b3R5cGUuYmluZC5iaW5kKGNhbGwsIGNhbGwpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5BVElWRV9CSU5EID8gdW5jdXJyeVRoaXNXaXRoQmluZCA6IGZ1bmN0aW9uIChmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjYWxsLmFwcGx5KGZuLCBhcmd1bWVudHMpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xuXG52YXIgYUZ1bmN0aW9uID0gZnVuY3Rpb24gKGFyZ3VtZW50KSB7XG4gIHJldHVybiBpc0NhbGxhYmxlKGFyZ3VtZW50KSA/IGFyZ3VtZW50IDogdW5kZWZpbmVkO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBtZXRob2QpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gYUZ1bmN0aW9uKGdsb2JhbFtuYW1lc3BhY2VdKSA6IGdsb2JhbFtuYW1lc3BhY2VdICYmIGdsb2JhbFtuYW1lc3BhY2VdW21ldGhvZF07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xudmFyIGdldE1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtbWV0aG9kJyk7XG52YXIgaXNOdWxsT3JVbmRlZmluZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtbnVsbC1vci11bmRlZmluZWQnKTtcbnZhciBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3JzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBJVEVSQVRPUiA9IHdlbGxLbm93blN5bWJvbCgnaXRlcmF0b3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHtcbiAgaWYgKCFpc051bGxPclVuZGVmaW5lZChpdCkpIHJldHVybiBnZXRNZXRob2QoaXQsIElURVJBVE9SKVxuICAgIHx8IGdldE1ldGhvZChpdCwgJ0BAaXRlcmF0b3InKVxuICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgdHJ5VG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdHJ5LXRvLXN0cmluZycpO1xudmFyIGdldEl0ZXJhdG9yTWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1pdGVyYXRvci1tZXRob2QnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyZ3VtZW50LCB1c2luZ0l0ZXJhdG9yKSB7XG4gIHZhciBpdGVyYXRvck1ldGhvZCA9IGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZ2V0SXRlcmF0b3JNZXRob2QoYXJndW1lbnQpIDogdXNpbmdJdGVyYXRvcjtcbiAgaWYgKGFDYWxsYWJsZShpdGVyYXRvck1ldGhvZCkpIHJldHVybiBhbk9iamVjdChjYWxsKGl0ZXJhdG9yTWV0aG9kLCBhcmd1bWVudCkpO1xuICB0aHJvdyAkVHlwZUVycm9yKHRyeVRvU3RyaW5nKGFyZ3VtZW50KSArICcgaXMgbm90IGl0ZXJhYmxlJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG52YXIgaXNOdWxsT3JVbmRlZmluZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtbnVsbC1vci11bmRlZmluZWQnKTtcblxuLy8gYEdldE1ldGhvZGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWdldG1ldGhvZFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoViwgUCkge1xuICB2YXIgZnVuYyA9IFZbUF07XG4gIHJldHVybiBpc051bGxPclVuZGVmaW5lZChmdW5jKSA/IHVuZGVmaW5lZCA6IGFDYWxsYWJsZShmdW5jKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgY2hlY2sgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGl0ICYmIGl0Lk1hdGggPT09IE1hdGggJiYgaXQ7XG59O1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxubW9kdWxlLmV4cG9ydHMgPVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tZ2xvYmFsLXRoaXMgLS0gc2FmZVxuICBjaGVjayh0eXBlb2YgZ2xvYmFsVGhpcyA9PSAnb2JqZWN0JyAmJiBnbG9iYWxUaGlzKSB8fFxuICBjaGVjayh0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdykgfHxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAtLSBzYWZlXG4gIGNoZWNrKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpIHx8XG4gIGNoZWNrKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKSB8fFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMgLS0gZmFsbGJhY2tcbiAgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pKCkgfHwgdGhpcyB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLW9iamVjdCcpO1xuXG52YXIgaGFzT3duUHJvcGVydHkgPSB1bmN1cnJ5VGhpcyh7fS5oYXNPd25Qcm9wZXJ0eSk7XG5cbi8vIGBIYXNPd25Qcm9wZXJ0eWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWhhc293bnByb3BlcnR5XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWhhc293biAtLSBzYWZlXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5oYXNPd24gfHwgZnVuY3Rpb24gaGFzT3duKGl0LCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5KHRvT2JqZWN0KGl0KSwga2V5KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IHt9O1xuIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYSwgYikge1xuICB0cnkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlIC0tIHNhZmVcbiAgICBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gY29uc29sZS5lcnJvcihhKSA6IGNvbnNvbGUuZXJyb3IoYSwgYik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRCdWlsdEluKCdkb2N1bWVudCcsICdkb2N1bWVudEVsZW1lbnQnKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudCcpO1xuXG4vLyBUaGFua3MgdG8gSUU4IGZvciBpdHMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIURFU0NSSVBUT1JTICYmICFmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjcmVhdGVFbGVtZW50KCdkaXYnKSwgJ2EnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9XG4gIH0pLmEgIT09IDc7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZi1yYXcnKTtcblxudmFyICRPYmplY3QgPSBPYmplY3Q7XG52YXIgc3BsaXQgPSB1bmN1cnJ5VGhpcygnJy5zcGxpdCk7XG5cbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gdGhyb3dzIGFuIGVycm9yIGluIHJoaW5vLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvcmhpbm8vaXNzdWVzLzM0NlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zIC0tIHNhZmVcbiAgcmV0dXJuICEkT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCk7XG59KSA/IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gY2xhc3NvZihpdCkgPT09ICdTdHJpbmcnID8gc3BsaXQoaXQsICcnKSA6ICRPYmplY3QoaXQpO1xufSA6ICRPYmplY3Q7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1zZXQtcHJvdG90eXBlLW9mJyk7XG5cbi8vIG1ha2VzIHN1YmNsYXNzaW5nIHdvcmsgY29ycmVjdCBmb3Igd3JhcHBlZCBidWlsdC1pbnNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCR0aGlzLCBkdW1teSwgV3JhcHBlcikge1xuICB2YXIgTmV3VGFyZ2V0LCBOZXdUYXJnZXRQcm90b3R5cGU7XG4gIGlmIChcbiAgICAvLyBpdCBjYW4gd29yayBvbmx5IHdpdGggbmF0aXZlIGBzZXRQcm90b3R5cGVPZmBcbiAgICBzZXRQcm90b3R5cGVPZiAmJlxuICAgIC8vIHdlIGhhdmVuJ3QgY29tcGxldGVseSBjb3JyZWN0IHByZS1FUzYgd2F5IGZvciBnZXR0aW5nIGBuZXcudGFyZ2V0YCwgc28gdXNlIHRoaXNcbiAgICBpc0NhbGxhYmxlKE5ld1RhcmdldCA9IGR1bW15LmNvbnN0cnVjdG9yKSAmJlxuICAgIE5ld1RhcmdldCAhPT0gV3JhcHBlciAmJlxuICAgIGlzT2JqZWN0KE5ld1RhcmdldFByb3RvdHlwZSA9IE5ld1RhcmdldC5wcm90b3R5cGUpICYmXG4gICAgTmV3VGFyZ2V0UHJvdG90eXBlICE9PSBXcmFwcGVyLnByb3RvdHlwZVxuICApIHNldFByb3RvdHlwZU9mKCR0aGlzLCBOZXdUYXJnZXRQcm90b3R5cGUpO1xuICByZXR1cm4gJHRoaXM7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBzdG9yZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQtc3RvcmUnKTtcblxudmFyIGZ1bmN0aW9uVG9TdHJpbmcgPSB1bmN1cnJ5VGhpcyhGdW5jdGlvbi50b1N0cmluZyk7XG5cbi8vIHRoaXMgaGVscGVyIGJyb2tlbiBpbiBgY29yZS1qc0AzLjQuMS0zLjQuNGAsIHNvIHdlIGNhbid0IHVzZSBgc2hhcmVkYCBoZWxwZXJcbmlmICghaXNDYWxsYWJsZShzdG9yZS5pbnNwZWN0U291cmNlKSkge1xuICBzdG9yZS5pbnNwZWN0U291cmNlID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uVG9TdHJpbmcoaXQpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0b3JlLmluc3BlY3RTb3VyY2U7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgTkFUSVZFX1dFQUtfTUFQID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlYWstbWFwLWJhc2ljLWRldGVjdGlvbicpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBzaGFyZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLXN0b3JlJyk7XG52YXIgc2hhcmVkS2V5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZC1rZXknKTtcbnZhciBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGRlbi1rZXlzJyk7XG5cbnZhciBPQkpFQ1RfQUxSRUFEWV9JTklUSUFMSVpFRCA9ICdPYmplY3QgYWxyZWFkeSBpbml0aWFsaXplZCc7XG52YXIgVHlwZUVycm9yID0gZ2xvYmFsLlR5cGVFcnJvcjtcbnZhciBXZWFrTWFwID0gZ2xvYmFsLldlYWtNYXA7XG52YXIgc2V0LCBnZXQsIGhhcztcblxudmFyIGVuZm9yY2UgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGhhcyhpdCkgPyBnZXQoaXQpIDogc2V0KGl0LCB7fSk7XG59O1xuXG52YXIgZ2V0dGVyRm9yID0gZnVuY3Rpb24gKFRZUEUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpdCkge1xuICAgIHZhciBzdGF0ZTtcbiAgICBpZiAoIWlzT2JqZWN0KGl0KSB8fCAoc3RhdGUgPSBnZXQoaXQpKS50eXBlICE9PSBUWVBFKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ0luY29tcGF0aWJsZSByZWNlaXZlciwgJyArIFRZUEUgKyAnIHJlcXVpcmVkJyk7XG4gICAgfSByZXR1cm4gc3RhdGU7XG4gIH07XG59O1xuXG5pZiAoTkFUSVZFX1dFQUtfTUFQIHx8IHNoYXJlZC5zdGF0ZSkge1xuICB2YXIgc3RvcmUgPSBzaGFyZWQuc3RhdGUgfHwgKHNoYXJlZC5zdGF0ZSA9IG5ldyBXZWFrTWFwKCkpO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZWxmLWFzc2lnbiAtLSBwcm90b3R5cGUgbWV0aG9kcyBwcm90ZWN0aW9uICovXG4gIHN0b3JlLmdldCA9IHN0b3JlLmdldDtcbiAgc3RvcmUuaGFzID0gc3RvcmUuaGFzO1xuICBzdG9yZS5zZXQgPSBzdG9yZS5zZXQ7XG4gIC8qIGVzbGludC1lbmFibGUgbm8tc2VsZi1hc3NpZ24gLS0gcHJvdG90eXBlIG1ldGhvZHMgcHJvdGVjdGlvbiAqL1xuICBzZXQgPSBmdW5jdGlvbiAoaXQsIG1ldGFkYXRhKSB7XG4gICAgaWYgKHN0b3JlLmhhcyhpdCkpIHRocm93IFR5cGVFcnJvcihPQkpFQ1RfQUxSRUFEWV9JTklUSUFMSVpFRCk7XG4gICAgbWV0YWRhdGEuZmFjYWRlID0gaXQ7XG4gICAgc3RvcmUuc2V0KGl0LCBtZXRhZGF0YSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9O1xuICBnZXQgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0KGl0KSB8fCB7fTtcbiAgfTtcbiAgaGFzID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIHN0b3JlLmhhcyhpdCk7XG4gIH07XG59IGVsc2Uge1xuICB2YXIgU1RBVEUgPSBzaGFyZWRLZXkoJ3N0YXRlJyk7XG4gIGhpZGRlbktleXNbU1RBVEVdID0gdHJ1ZTtcbiAgc2V0ID0gZnVuY3Rpb24gKGl0LCBtZXRhZGF0YSkge1xuICAgIGlmIChoYXNPd24oaXQsIFNUQVRFKSkgdGhyb3cgVHlwZUVycm9yKE9CSkVDVF9BTFJFQURZX0lOSVRJQUxJWkVEKTtcbiAgICBtZXRhZGF0YS5mYWNhZGUgPSBpdDtcbiAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkoaXQsIFNUQVRFLCBtZXRhZGF0YSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9O1xuICBnZXQgPSBmdW5jdGlvbiAoaXQpIHtcbiAgICByZXR1cm4gaGFzT3duKGl0LCBTVEFURSkgPyBpdFtTVEFURV0gOiB7fTtcbiAgfTtcbiAgaGFzID0gZnVuY3Rpb24gKGl0KSB7XG4gICAgcmV0dXJuIGhhc093bihpdCwgU1RBVEUpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBzZXQsXG4gIGdldDogZ2V0LFxuICBoYXM6IGhhcyxcbiAgZW5mb3JjZTogZW5mb3JjZSxcbiAgZ2V0dGVyRm9yOiBnZXR0ZXJGb3Jcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgSXRlcmF0b3JzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2l0ZXJhdG9ycycpO1xuXG52YXIgSVRFUkFUT1IgPSB3ZWxsS25vd25TeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgQXJyYXlQcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGU7XG5cbi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3Jcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG90eXBlW0lURVJBVE9SXSA9PT0gaXQpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG5cbi8vIGBJc0FycmF5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaXNhcnJheVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLWFycmF5LWlzYXJyYXkgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJndW1lbnQpIHtcbiAgcmV0dXJuIGNsYXNzb2YoYXJndW1lbnQpID09PSAnQXJyYXknO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkZG9jdW1lbnRBbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZG9jdW1lbnQtYWxsJyk7XG5cbnZhciBkb2N1bWVudEFsbCA9ICRkb2N1bWVudEFsbC5hbGw7XG5cbi8vIGBJc0NhbGxhYmxlYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaXNjYWxsYWJsZVxubW9kdWxlLmV4cG9ydHMgPSAkZG9jdW1lbnRBbGwuSVNfSFRNTEREQSA/IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gdHlwZW9mIGFyZ3VtZW50ID09ICdmdW5jdGlvbicgfHwgYXJndW1lbnQgPT09IGRvY3VtZW50QWxsO1xufSA6IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gdHlwZW9mIGFyZ3VtZW50ID09ICdmdW5jdGlvbic7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2xhc3NvZicpO1xudmFyIGdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWJ1aWx0LWluJyk7XG52YXIgaW5zcGVjdFNvdXJjZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pbnNwZWN0LXNvdXJjZScpO1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfTtcbnZhciBlbXB0eSA9IFtdO1xudmFyIGNvbnN0cnVjdCA9IGdldEJ1aWx0SW4oJ1JlZmxlY3QnLCAnY29uc3RydWN0Jyk7XG52YXIgY29uc3RydWN0b3JSZWdFeHAgPSAvXlxccyooPzpjbGFzc3xmdW5jdGlvbilcXGIvO1xudmFyIGV4ZWMgPSB1bmN1cnJ5VGhpcyhjb25zdHJ1Y3RvclJlZ0V4cC5leGVjKTtcbnZhciBJTkNPUlJFQ1RfVE9fU1RSSU5HID0gIWNvbnN0cnVjdG9yUmVnRXhwLmV4ZWMobm9vcCk7XG5cbnZhciBpc0NvbnN0cnVjdG9yTW9kZXJuID0gZnVuY3Rpb24gaXNDb25zdHJ1Y3Rvcihhcmd1bWVudCkge1xuICBpZiAoIWlzQ2FsbGFibGUoYXJndW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gIHRyeSB7XG4gICAgY29uc3RydWN0KG5vb3AsIGVtcHR5LCBhcmd1bWVudCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG52YXIgaXNDb25zdHJ1Y3RvckxlZ2FjeSA9IGZ1bmN0aW9uIGlzQ29uc3RydWN0b3IoYXJndW1lbnQpIHtcbiAgaWYgKCFpc0NhbGxhYmxlKGFyZ3VtZW50KSkgcmV0dXJuIGZhbHNlO1xuICBzd2l0Y2ggKGNsYXNzb2YoYXJndW1lbnQpKSB7XG4gICAgY2FzZSAnQXN5bmNGdW5jdGlvbic6XG4gICAgY2FzZSAnR2VuZXJhdG9yRnVuY3Rpb24nOlxuICAgIGNhc2UgJ0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24nOiByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyB3ZSBjYW4ndCBjaGVjayAucHJvdG90eXBlIHNpbmNlIGNvbnN0cnVjdG9ycyBwcm9kdWNlZCBieSAuYmluZCBoYXZlbid0IGl0XG4gICAgLy8gYEZ1bmN0aW9uI3RvU3RyaW5nYCB0aHJvd3Mgb24gc29tZSBidWlsdC1pdCBmdW5jdGlvbiBpbiBzb21lIGxlZ2FjeSBlbmdpbmVzXG4gICAgLy8gKGZvciBleGFtcGxlLCBgRE9NUXVhZGAgYW5kIHNpbWlsYXIgaW4gRkY0MS0pXG4gICAgcmV0dXJuIElOQ09SUkVDVF9UT19TVFJJTkcgfHwgISFleGVjKGNvbnN0cnVjdG9yUmVnRXhwLCBpbnNwZWN0U291cmNlKGFyZ3VtZW50KSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbmlzQ29uc3RydWN0b3JMZWdhY3kuc2hhbSA9IHRydWU7XG5cbi8vIGBJc0NvbnN0cnVjdG9yYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaXNjb25zdHJ1Y3RvclxubW9kdWxlLmV4cG9ydHMgPSAhY29uc3RydWN0IHx8IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbGxlZDtcbiAgcmV0dXJuIGlzQ29uc3RydWN0b3JNb2Rlcm4oaXNDb25zdHJ1Y3Rvck1vZGVybi5jYWxsKVxuICAgIHx8ICFpc0NvbnN0cnVjdG9yTW9kZXJuKE9iamVjdClcbiAgICB8fCAhaXNDb25zdHJ1Y3Rvck1vZGVybihmdW5jdGlvbiAoKSB7IGNhbGxlZCA9IHRydWU7IH0pXG4gICAgfHwgY2FsbGVkO1xufSkgPyBpc0NvbnN0cnVjdG9yTGVnYWN5IDogaXNDb25zdHJ1Y3Rvck1vZGVybjtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcblxudmFyIHJlcGxhY2VtZW50ID0gLyN8XFwucHJvdG90eXBlXFwuLztcblxudmFyIGlzRm9yY2VkID0gZnVuY3Rpb24gKGZlYXR1cmUsIGRldGVjdGlvbikge1xuICB2YXIgdmFsdWUgPSBkYXRhW25vcm1hbGl6ZShmZWF0dXJlKV07XG4gIHJldHVybiB2YWx1ZSA9PT0gUE9MWUZJTEwgPyB0cnVlXG4gICAgOiB2YWx1ZSA9PT0gTkFUSVZFID8gZmFsc2VcbiAgICA6IGlzQ2FsbGFibGUoZGV0ZWN0aW9uKSA/IGZhaWxzKGRldGVjdGlvbilcbiAgICA6ICEhZGV0ZWN0aW9uO1xufTtcblxudmFyIG5vcm1hbGl6ZSA9IGlzRm9yY2VkLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVwbGFjZW1lbnQsICcuJykudG9Mb3dlckNhc2UoKTtcbn07XG5cbnZhciBkYXRhID0gaXNGb3JjZWQuZGF0YSA9IHt9O1xudmFyIE5BVElWRSA9IGlzRm9yY2VkLk5BVElWRSA9ICdOJztcbnZhciBQT0xZRklMTCA9IGlzRm9yY2VkLlBPTFlGSUxMID0gJ1AnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRm9yY2VkO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gd2UgY2FuJ3QgdXNlIGp1c3QgYGl0ID09IG51bGxgIHNpbmNlIG9mIGBkb2N1bWVudC5hbGxgIHNwZWNpYWwgY2FzZVxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1Jc0hUTUxEREEtaW50ZXJuYWwtc2xvdC1hZWNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpdCA9PT0gbnVsbCB8fCBpdCA9PT0gdW5kZWZpbmVkO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgJGRvY3VtZW50QWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvY3VtZW50LWFsbCcpO1xuXG52YXIgZG9jdW1lbnRBbGwgPSAkZG9jdW1lbnRBbGwuYWxsO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICRkb2N1bWVudEFsbC5JU19IVE1MRERBID8gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IGlzQ2FsbGFibGUoaXQpIHx8IGl0ID09PSBkb2N1bWVudEFsbDtcbn0gOiBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogaXNDYWxsYWJsZShpdCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NsYXNzb2YtcmF3Jyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG5cbnZhciBNQVRDSCA9IHdlbGxLbm93blN5bWJvbCgnbWF0Y2gnKTtcblxuLy8gYElzUmVnRXhwYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtaXNyZWdleHBcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIHZhciBpc1JlZ0V4cDtcbiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiAoKGlzUmVnRXhwID0gaXRbTUFUQ0hdKSAhPT0gdW5kZWZpbmVkID8gISFpc1JlZ0V4cCA6IGNsYXNzb2YoaXQpID09PSAnUmVnRXhwJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWJ1aWx0LWluJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGlzUHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWlzLXByb3RvdHlwZS1vZicpO1xudmFyIFVTRV9TWU1CT0xfQVNfVUlEID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3VzZS1zeW1ib2wtYXMtdWlkJyk7XG5cbnZhciAkT2JqZWN0ID0gT2JqZWN0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFVTRV9TWU1CT0xfQVNfVUlEID8gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG59IDogZnVuY3Rpb24gKGl0KSB7XG4gIHZhciAkU3ltYm9sID0gZ2V0QnVpbHRJbignU3ltYm9sJyk7XG4gIHJldHVybiBpc0NhbGxhYmxlKCRTeW1ib2wpICYmIGlzUHJvdG90eXBlT2YoJFN5bWJvbC5wcm90b3R5cGUsICRPYmplY3QoaXQpKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciB0cnlUb1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90cnktdG8tc3RyaW5nJyk7XG52YXIgaXNBcnJheUl0ZXJhdG9yTWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWFycmF5LWl0ZXJhdG9yLW1ldGhvZCcpO1xudmFyIGxlbmd0aE9mQXJyYXlMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2xlbmd0aC1vZi1hcnJheS1saWtlJyk7XG52YXIgaXNQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtaXMtcHJvdG90eXBlLW9mJyk7XG52YXIgZ2V0SXRlcmF0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWl0ZXJhdG9yJyk7XG52YXIgZ2V0SXRlcmF0b3JNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWl0ZXJhdG9yLW1ldGhvZCcpO1xudmFyIGl0ZXJhdG9yQ2xvc2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0b3ItY2xvc2UnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbnZhciBSZXN1bHQgPSBmdW5jdGlvbiAoc3RvcHBlZCwgcmVzdWx0KSB7XG4gIHRoaXMuc3RvcHBlZCA9IHN0b3BwZWQ7XG4gIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xufTtcblxudmFyIFJlc3VsdFByb3RvdHlwZSA9IFJlc3VsdC5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCB1bmJvdW5kRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgdmFyIHRoYXQgPSBvcHRpb25zICYmIG9wdGlvbnMudGhhdDtcbiAgdmFyIEFTX0VOVFJJRVMgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuQVNfRU5UUklFUyk7XG4gIHZhciBJU19SRUNPUkQgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuSVNfUkVDT1JEKTtcbiAgdmFyIElTX0lURVJBVE9SID0gISEob3B0aW9ucyAmJiBvcHRpb25zLklTX0lURVJBVE9SKTtcbiAgdmFyIElOVEVSUlVQVEVEID0gISEob3B0aW9ucyAmJiBvcHRpb25zLklOVEVSUlVQVEVEKTtcbiAgdmFyIGZuID0gYmluZCh1bmJvdW5kRnVuY3Rpb24sIHRoYXQpO1xuICB2YXIgaXRlcmF0b3IsIGl0ZXJGbiwgaW5kZXgsIGxlbmd0aCwgcmVzdWx0LCBuZXh0LCBzdGVwO1xuXG4gIHZhciBzdG9wID0gZnVuY3Rpb24gKGNvbmRpdGlvbikge1xuICAgIGlmIChpdGVyYXRvcikgaXRlcmF0b3JDbG9zZShpdGVyYXRvciwgJ25vcm1hbCcsIGNvbmRpdGlvbik7XG4gICAgcmV0dXJuIG5ldyBSZXN1bHQodHJ1ZSwgY29uZGl0aW9uKTtcbiAgfTtcblxuICB2YXIgY2FsbEZuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKEFTX0VOVFJJRVMpIHtcbiAgICAgIGFuT2JqZWN0KHZhbHVlKTtcbiAgICAgIHJldHVybiBJTlRFUlJVUFRFRCA/IGZuKHZhbHVlWzBdLCB2YWx1ZVsxXSwgc3RvcCkgOiBmbih2YWx1ZVswXSwgdmFsdWVbMV0pO1xuICAgIH0gcmV0dXJuIElOVEVSUlVQVEVEID8gZm4odmFsdWUsIHN0b3ApIDogZm4odmFsdWUpO1xuICB9O1xuXG4gIGlmIChJU19SRUNPUkQpIHtcbiAgICBpdGVyYXRvciA9IGl0ZXJhYmxlLml0ZXJhdG9yO1xuICB9IGVsc2UgaWYgKElTX0lURVJBVE9SKSB7XG4gICAgaXRlcmF0b3IgPSBpdGVyYWJsZTtcbiAgfSBlbHNlIHtcbiAgICBpdGVyRm4gPSBnZXRJdGVyYXRvck1ldGhvZChpdGVyYWJsZSk7XG4gICAgaWYgKCFpdGVyRm4pIHRocm93ICRUeXBlRXJyb3IodHJ5VG9TdHJpbmcoaXRlcmFibGUpICsgJyBpcyBub3QgaXRlcmFibGUnKTtcbiAgICAvLyBvcHRpbWlzYXRpb24gZm9yIGFycmF5IGl0ZXJhdG9yc1xuICAgIGlmIChpc0FycmF5SXRlcmF0b3JNZXRob2QoaXRlckZuKSkge1xuICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGxlbmd0aE9mQXJyYXlMaWtlKGl0ZXJhYmxlKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHtcbiAgICAgICAgcmVzdWx0ID0gY2FsbEZuKGl0ZXJhYmxlW2luZGV4XSk7XG4gICAgICAgIGlmIChyZXN1bHQgJiYgaXNQcm90b3R5cGVPZihSZXN1bHRQcm90b3R5cGUsIHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgICB9IHJldHVybiBuZXcgUmVzdWx0KGZhbHNlKTtcbiAgICB9XG4gICAgaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihpdGVyYWJsZSwgaXRlckZuKTtcbiAgfVxuXG4gIG5leHQgPSBJU19SRUNPUkQgPyBpdGVyYWJsZS5uZXh0IDogaXRlcmF0b3IubmV4dDtcbiAgd2hpbGUgKCEoc3RlcCA9IGNhbGwobmV4dCwgaXRlcmF0b3IpKS5kb25lKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGNhbGxGbihzdGVwLnZhbHVlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaXRlcmF0b3JDbG9zZShpdGVyYXRvciwgJ3Rocm93JywgZXJyb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnb2JqZWN0JyAmJiByZXN1bHQgJiYgaXNQcm90b3R5cGVPZihSZXN1bHRQcm90b3R5cGUsIHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gIH0gcmV0dXJuIG5ldyBSZXN1bHQoZmFsc2UpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBnZXRNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LW1ldGhvZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVyYXRvciwga2luZCwgdmFsdWUpIHtcbiAgdmFyIGlubmVyUmVzdWx0LCBpbm5lckVycm9yO1xuICBhbk9iamVjdChpdGVyYXRvcik7XG4gIHRyeSB7XG4gICAgaW5uZXJSZXN1bHQgPSBnZXRNZXRob2QoaXRlcmF0b3IsICdyZXR1cm4nKTtcbiAgICBpZiAoIWlubmVyUmVzdWx0KSB7XG4gICAgICBpZiAoa2luZCA9PT0gJ3Rocm93JykgdGhyb3cgdmFsdWU7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlubmVyUmVzdWx0ID0gY2FsbChpbm5lclJlc3VsdCwgaXRlcmF0b3IpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlubmVyRXJyb3IgPSB0cnVlO1xuICAgIGlubmVyUmVzdWx0ID0gZXJyb3I7XG4gIH1cbiAgaWYgKGtpbmQgPT09ICd0aHJvdycpIHRocm93IHZhbHVlO1xuICBpZiAoaW5uZXJFcnJvcikgdGhyb3cgaW5uZXJSZXN1bHQ7XG4gIGFuT2JqZWN0KGlubmVyUmVzdWx0KTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB0b0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1sZW5ndGgnKTtcblxuLy8gYExlbmd0aE9mQXJyYXlMaWtlYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtbGVuZ3Rob2ZhcnJheWxpa2Vcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdG9MZW5ndGgob2JqLmxlbmd0aCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGhhc093biA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oYXMtb3duLXByb3BlcnR5Jyk7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBDT05GSUdVUkFCTEVfRlVOQ1RJT05fTkFNRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1uYW1lJykuQ09ORklHVVJBQkxFO1xudmFyIGluc3BlY3RTb3VyY2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW5zcGVjdC1zb3VyY2UnKTtcbnZhciBJbnRlcm5hbFN0YXRlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJyk7XG5cbnZhciBlbmZvcmNlSW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuZW5mb3JjZTtcbnZhciBnZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXQ7XG52YXIgJFN0cmluZyA9IFN0cmluZztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZGVmaW5lcHJvcGVydHkgLS0gc2FmZVxudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIHN0cmluZ1NsaWNlID0gdW5jdXJyeVRoaXMoJycuc2xpY2UpO1xudmFyIHJlcGxhY2UgPSB1bmN1cnJ5VGhpcygnJy5yZXBsYWNlKTtcbnZhciBqb2luID0gdW5jdXJyeVRoaXMoW10uam9pbik7XG5cbnZhciBDT05GSUdVUkFCTEVfTEVOR1RIID0gREVTQ1JJUFRPUlMgJiYgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGRlZmluZVByb3BlcnR5KGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSwgJ2xlbmd0aCcsIHsgdmFsdWU6IDggfSkubGVuZ3RoICE9PSA4O1xufSk7XG5cbnZhciBURU1QTEFURSA9IFN0cmluZyhTdHJpbmcpLnNwbGl0KCdTdHJpbmcnKTtcblxudmFyIG1ha2VCdWlsdEluID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsdWUsIG5hbWUsIG9wdGlvbnMpIHtcbiAgaWYgKHN0cmluZ1NsaWNlKCRTdHJpbmcobmFtZSksIDAsIDcpID09PSAnU3ltYm9sKCcpIHtcbiAgICBuYW1lID0gJ1snICsgcmVwbGFjZSgkU3RyaW5nKG5hbWUpLCAvXlN5bWJvbFxcKChbXildKilcXCkvLCAnJDEnKSArICddJztcbiAgfVxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdldHRlcikgbmFtZSA9ICdnZXQgJyArIG5hbWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2V0dGVyKSBuYW1lID0gJ3NldCAnICsgbmFtZTtcbiAgaWYgKCFoYXNPd24odmFsdWUsICduYW1lJykgfHwgKENPTkZJR1VSQUJMRV9GVU5DVElPTl9OQU1FICYmIHZhbHVlLm5hbWUgIT09IG5hbWUpKSB7XG4gICAgaWYgKERFU0NSSVBUT1JTKSBkZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgJ25hbWUnLCB7IHZhbHVlOiBuYW1lLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG4gICAgZWxzZSB2YWx1ZS5uYW1lID0gbmFtZTtcbiAgfVxuICBpZiAoQ09ORklHVVJBQkxFX0xFTkdUSCAmJiBvcHRpb25zICYmIGhhc093bihvcHRpb25zLCAnYXJpdHknKSAmJiB2YWx1ZS5sZW5ndGggIT09IG9wdGlvbnMuYXJpdHkpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgJ2xlbmd0aCcsIHsgdmFsdWU6IG9wdGlvbnMuYXJpdHkgfSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgJ2NvbnN0cnVjdG9yJykgJiYgb3B0aW9ucy5jb25zdHJ1Y3Rvcikge1xuICAgICAgaWYgKERFU0NSSVBUT1JTKSBkZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgJ3Byb3RvdHlwZScsIHsgd3JpdGFibGU6IGZhbHNlIH0pO1xuICAgIC8vIGluIFY4IH4gQ2hyb21lIDUzLCBwcm90b3R5cGVzIG9mIHNvbWUgbWV0aG9kcywgbGlrZSBgQXJyYXkucHJvdG90eXBlLnZhbHVlc2AsIGFyZSBub24td3JpdGFibGVcbiAgICB9IGVsc2UgaWYgKHZhbHVlLnByb3RvdHlwZSkgdmFsdWUucHJvdG90eXBlID0gdW5kZWZpbmVkO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIHZhciBzdGF0ZSA9IGVuZm9yY2VJbnRlcm5hbFN0YXRlKHZhbHVlKTtcbiAgaWYgKCFoYXNPd24oc3RhdGUsICdzb3VyY2UnKSkge1xuICAgIHN0YXRlLnNvdXJjZSA9IGpvaW4oVEVNUExBVEUsIHR5cGVvZiBuYW1lID09ICdzdHJpbmcnID8gbmFtZSA6ICcnKTtcbiAgfSByZXR1cm4gdmFsdWU7XG59O1xuXG4vLyBhZGQgZmFrZSBGdW5jdGlvbiN0b1N0cmluZyBmb3IgY29ycmVjdCB3b3JrIHdyYXBwZWQgbWV0aG9kcyAvIGNvbnN0cnVjdG9ycyB3aXRoIG1ldGhvZHMgbGlrZSBMb0Rhc2ggaXNOYXRpdmVcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1leHRlbmQtbmF0aXZlIC0tIHJlcXVpcmVkXG5GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBtYWtlQnVpbHRJbihmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuIGlzQ2FsbGFibGUodGhpcykgJiYgZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKS5zb3VyY2UgfHwgaW5zcGVjdFNvdXJjZSh0aGlzKTtcbn0sICd0b1N0cmluZycpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNlaWwgPSBNYXRoLmNlaWw7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuXG4vLyBgTWF0aC50cnVuY2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW1hdGgudHJ1bmNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1tYXRoLXRydW5jIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gTWF0aC50cnVuYyB8fCBmdW5jdGlvbiB0cnVuYyh4KSB7XG4gIHZhciBuID0gK3g7XG4gIHJldHVybiAobiA+IDAgPyBmbG9vciA6IGNlaWwpKG4pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2xvYmFsJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpLmY7XG52YXIgbWFjcm90YXNrID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Rhc2snKS5zZXQ7XG52YXIgUXVldWUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcXVldWUnKTtcbnZhciBJU19JT1MgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLWlvcycpO1xudmFyIElTX0lPU19QRUJCTEUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLWlvcy1wZWJibGUnKTtcbnZhciBJU19XRUJPU19XRUJLSVQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLXdlYm9zLXdlYmtpdCcpO1xudmFyIElTX05PREUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLW5vZGUnKTtcblxudmFyIE11dGF0aW9uT2JzZXJ2ZXIgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBkb2N1bWVudCA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuLy8gTm9kZS5qcyAxMSBzaG93cyBFeHBlcmltZW50YWxXYXJuaW5nIG9uIGdldHRpbmcgYHF1ZXVlTWljcm90YXNrYFxudmFyIHF1ZXVlTWljcm90YXNrRGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihnbG9iYWwsICdxdWV1ZU1pY3JvdGFzaycpO1xudmFyIG1pY3JvdGFzayA9IHF1ZXVlTWljcm90YXNrRGVzY3JpcHRvciAmJiBxdWV1ZU1pY3JvdGFza0Rlc2NyaXB0b3IudmFsdWU7XG52YXIgbm90aWZ5LCB0b2dnbGUsIG5vZGUsIHByb21pc2UsIHRoZW47XG5cbi8vIG1vZGVybiBlbmdpbmVzIGhhdmUgcXVldWVNaWNyb3Rhc2sgbWV0aG9kXG5pZiAoIW1pY3JvdGFzaykge1xuICB2YXIgcXVldWUgPSBuZXcgUXVldWUoKTtcblxuICB2YXIgZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcmVudCwgZm47XG4gICAgaWYgKElTX05PREUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSkgcGFyZW50LmV4aXQoKTtcbiAgICB3aGlsZSAoZm4gPSBxdWV1ZS5nZXQoKSkgdHJ5IHtcbiAgICAgIGZuKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChxdWV1ZS5oZWFkKSBub3RpZnkoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBpZiAocGFyZW50KSBwYXJlbnQuZW50ZXIoKTtcbiAgfTtcblxuICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXIsIGV4Y2VwdCBpT1MgLSBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMzM5XG4gIC8vIGFsc28gZXhjZXB0IFdlYk9TIFdlYmtpdCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODk4XG4gIGlmICghSVNfSU9TICYmICFJU19OT0RFICYmICFJU19XRUJPU19XRUJLSVQgJiYgTXV0YXRpb25PYnNlcnZlciAmJiBkb2N1bWVudCkge1xuICAgIHRvZ2dsZSA9IHRydWU7XG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgbm9kZS5kYXRhID0gdG9nZ2xlID0gIXRvZ2dsZTtcbiAgICB9O1xuICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZVxuICB9IGVsc2UgaWYgKCFJU19JT1NfUEVCQkxFICYmIFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKSB7XG4gICAgLy8gUHJvbWlzZS5yZXNvbHZlIHdpdGhvdXQgYW4gYXJndW1lbnQgdGhyb3dzIGFuIGVycm9yIGluIExHIFdlYk9TIDJcbiAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgLy8gd29ya2Fyb3VuZCBvZiBXZWJLaXQgfiBpT1MgU2FmYXJpIDEwLjEgYnVnXG4gICAgcHJvbWlzZS5jb25zdHJ1Y3RvciA9IFByb21pc2U7XG4gICAgdGhlbiA9IGJpbmQocHJvbWlzZS50aGVuLCBwcm9taXNlKTtcbiAgICBub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVuKGZsdXNoKTtcbiAgICB9O1xuICAvLyBOb2RlLmpzIHdpdGhvdXQgcHJvbWlzZXNcbiAgfSBlbHNlIGlmIChJU19OT0RFKSB7XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gICAgfTtcbiAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjpcbiAgLy8gLSBzZXRJbW1lZGlhdGVcbiAgLy8gLSBNZXNzYWdlQ2hhbm5lbFxuICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnZVxuICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZVxuICAvLyAtIHNldFRpbWVvdXRcbiAgfSBlbHNlIHtcbiAgICAvLyBgd2VicGFja2AgZGV2IHNlcnZlciBidWcgb24gSUUgZ2xvYmFsIG1ldGhvZHMgLSB1c2UgYmluZChmbiwgZ2xvYmFsKVxuICAgIG1hY3JvdGFzayA9IGJpbmQobWFjcm90YXNrLCBnbG9iYWwpO1xuICAgIG5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIG1hY3JvdGFzayhmbHVzaCk7XG4gICAgfTtcbiAgfVxuXG4gIG1pY3JvdGFzayA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICghcXVldWUuaGVhZCkgbm90aWZ5KCk7XG4gICAgcXVldWUuYWRkKGZuKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtaWNyb3Rhc2s7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgYUNhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2EtY2FsbGFibGUnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbnZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIChDKSB7XG4gIHZhciByZXNvbHZlLCByZWplY3Q7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uICgkJHJlc29sdmUsICQkcmVqZWN0KSB7XG4gICAgaWYgKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCkgdGhyb3cgJFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTtcbiAgICByZXNvbHZlID0gJCRyZXNvbHZlO1xuICAgIHJlamVjdCA9ICQkcmVqZWN0O1xuICB9KTtcbiAgdGhpcy5yZXNvbHZlID0gYUNhbGxhYmxlKHJlc29sdmUpO1xuICB0aGlzLnJlamVjdCA9IGFDYWxsYWJsZShyZWplY3QpO1xufTtcblxuLy8gYE5ld1Byb21pc2VDYXBhYmlsaXR5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtbmV3cHJvbWlzZWNhcGFiaWxpdHlcbm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiAoQykge1xuICByZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qIGdsb2JhbCBBY3RpdmVYT2JqZWN0IC0tIG9sZCBJRSwgV1NIICovXG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgZGVmaW5lUHJvcGVydGllc01vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZGVmaW5lLXByb3BlcnRpZXMnKTtcbnZhciBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbnVtLWJ1Zy1rZXlzJyk7XG52YXIgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9oaWRkZW4ta2V5cycpO1xudmFyIGh0bWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaHRtbCcpO1xudmFyIGRvY3VtZW50Q3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb2N1bWVudC1jcmVhdGUtZWxlbWVudCcpO1xudmFyIHNoYXJlZEtleSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQta2V5Jyk7XG5cbnZhciBHVCA9ICc+JztcbnZhciBMVCA9ICc8JztcbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcbnZhciBTQ1JJUFQgPSAnc2NyaXB0JztcbnZhciBJRV9QUk9UTyA9IHNoYXJlZEtleSgnSUVfUFJPVE8nKTtcblxudmFyIEVtcHR5Q29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7IC8qIGVtcHR5ICovIH07XG5cbnZhciBzY3JpcHRUYWcgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICByZXR1cm4gTFQgKyBTQ1JJUFQgKyBHVCArIGNvbnRlbnQgKyBMVCArICcvJyArIFNDUklQVCArIEdUO1xufTtcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIEFjdGl2ZVggT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGVcbnZhciBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYID0gZnVuY3Rpb24gKGFjdGl2ZVhEb2N1bWVudCkge1xuICBhY3RpdmVYRG9jdW1lbnQud3JpdGUoc2NyaXB0VGFnKCcnKSk7XG4gIGFjdGl2ZVhEb2N1bWVudC5jbG9zZSgpO1xuICB2YXIgdGVtcCA9IGFjdGl2ZVhEb2N1bWVudC5wYXJlbnRXaW5kb3cuT2JqZWN0O1xuICBhY3RpdmVYRG9jdW1lbnQgPSBudWxsOyAvLyBhdm9pZCBtZW1vcnkgbGVha1xuICByZXR1cm4gdGVtcDtcbn07XG5cbi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGVcbnZhciBOdWxsUHJvdG9PYmplY3RWaWFJRnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnXG4gIHZhciBpZnJhbWUgPSBkb2N1bWVudENyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICB2YXIgSlMgPSAnamF2YScgKyBTQ1JJUFQgKyAnOic7XG4gIHZhciBpZnJhbWVEb2N1bWVudDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGh0bWwuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzQ3NVxuICBpZnJhbWUuc3JjID0gU3RyaW5nKEpTKTtcbiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgaWZyYW1lRG9jdW1lbnQub3BlbigpO1xuICBpZnJhbWVEb2N1bWVudC53cml0ZShzY3JpcHRUYWcoJ2RvY3VtZW50LkY9T2JqZWN0JykpO1xuICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpO1xuICByZXR1cm4gaWZyYW1lRG9jdW1lbnQuRjtcbn07XG5cbi8vIENoZWNrIGZvciBkb2N1bWVudC5kb21haW4gYW5kIGFjdGl2ZSB4IHN1cHBvcnRcbi8vIE5vIG5lZWQgdG8gdXNlIGFjdGl2ZSB4IGFwcHJvYWNoIHdoZW4gZG9jdW1lbnQuZG9tYWluIGlzIG5vdCBzZXRcbi8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXMtc2hpbXMvZXM1LXNoaW0vaXNzdWVzLzE1MFxuLy8gdmFyaWF0aW9uIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9raXRjYW1icmlkZ2UvZXM1LXNoaW0vY29tbWl0LzRmNzM4YWMwNjYzNDZcbi8vIGF2b2lkIElFIEdDIGJ1Z1xudmFyIGFjdGl2ZVhEb2N1bWVudDtcbnZhciBOdWxsUHJvdG9PYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgYWN0aXZlWERvY3VtZW50ID0gbmV3IEFjdGl2ZVhPYmplY3QoJ2h0bWxmaWxlJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGlnbm9yZSAqLyB9XG4gIE51bGxQcm90b09iamVjdCA9IHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJ1xuICAgID8gZG9jdW1lbnQuZG9tYWluICYmIGFjdGl2ZVhEb2N1bWVudFxuICAgICAgPyBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYKGFjdGl2ZVhEb2N1bWVudCkgLy8gb2xkIElFXG4gICAgICA6IE51bGxQcm90b09iamVjdFZpYUlGcmFtZSgpXG4gICAgOiBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYKGFjdGl2ZVhEb2N1bWVudCk7IC8vIFdTSFxuICB2YXIgbGVuZ3RoID0gZW51bUJ1Z0tleXMubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIGRlbGV0ZSBOdWxsUHJvdG9PYmplY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tsZW5ndGhdXTtcbiAgcmV0dXJuIE51bGxQcm90b09iamVjdCgpO1xufTtcblxuaGlkZGVuS2V5c1tJRV9QUk9UT10gPSB0cnVlO1xuXG4vLyBgT2JqZWN0LmNyZWF0ZWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5jcmVhdGVcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtY3JlYXRlIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcykge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoTyAhPT0gbnVsbCkge1xuICAgIEVtcHR5Q29uc3RydWN0b3JbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pO1xuICAgIHJlc3VsdCA9IG5ldyBFbXB0eUNvbnN0cnVjdG9yKCk7XG4gICAgRW1wdHlDb25zdHJ1Y3RvcltQUk9UT1RZUEVdID0gbnVsbDtcbiAgICAvLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXG4gICAgcmVzdWx0W0lFX1BST1RPXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBOdWxsUHJvdG9PYmplY3QoKTtcbiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRlZmluZVByb3BlcnRpZXNNb2R1bGUuZihyZXN1bHQsIFByb3BlcnRpZXMpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xudmFyIFY4X1BST1RPVFlQRV9ERUZJTkVfQlVHID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Y4LXByb3RvdHlwZS1kZWZpbmUtYnVnJyk7XG52YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIHRvSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleGVkLW9iamVjdCcpO1xudmFyIG9iamVjdEtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWtleXMnKTtcblxuLy8gYE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmRlZmluZXByb3BlcnRpZXNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZGVmaW5lcHJvcGVydGllcyAtLSBzYWZlXG5leHBvcnRzLmYgPSBERVNDUklQVE9SUyAmJiAhVjhfUFJPVE9UWVBFX0RFRklORV9CVUcgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykge1xuICBhbk9iamVjdChPKTtcbiAgdmFyIHByb3BzID0gdG9JbmRleGVkT2JqZWN0KFByb3BlcnRpZXMpO1xuICB2YXIga2V5cyA9IG9iamVjdEtleXMoUHJvcGVydGllcyk7XG4gIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGtleTtcbiAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSBkZWZpbmVQcm9wZXJ0eU1vZHVsZS5mKE8sIGtleSA9IGtleXNbaW5kZXgrK10sIHByb3BzW2tleV0pO1xuICByZXR1cm4gTztcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pZTgtZG9tLWRlZmluZScpO1xudmFyIFY4X1BST1RPVFlQRV9ERUZJTkVfQlVHID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Y4LXByb3RvdHlwZS1kZWZpbmUtYnVnJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgdG9Qcm9wZXJ0eUtleSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1wcm9wZXJ0eS1rZXknKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWRlZmluZXByb3BlcnR5IC0tIHNhZmVcbnZhciAkZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvciAtLSBzYWZlXG52YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgRU5VTUVSQUJMRSA9ICdlbnVtZXJhYmxlJztcbnZhciBDT05GSUdVUkFCTEUgPSAnY29uZmlndXJhYmxlJztcbnZhciBXUklUQUJMRSA9ICd3cml0YWJsZSc7XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydHlgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZGVmaW5lcHJvcGVydHlcbmV4cG9ydHMuZiA9IERFU0NSSVBUT1JTID8gVjhfUFJPVE9UWVBFX0RFRklORV9CVUcgPyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9Qcm9wZXJ0eUtleShQKTtcbiAgYW5PYmplY3QoQXR0cmlidXRlcyk7XG4gIGlmICh0eXBlb2YgTyA9PT0gJ2Z1bmN0aW9uJyAmJiBQID09PSAncHJvdG90eXBlJyAmJiAndmFsdWUnIGluIEF0dHJpYnV0ZXMgJiYgV1JJVEFCTEUgaW4gQXR0cmlidXRlcyAmJiAhQXR0cmlidXRlc1tXUklUQUJMRV0pIHtcbiAgICB2YXIgY3VycmVudCA9ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCk7XG4gICAgaWYgKGN1cnJlbnQgJiYgY3VycmVudFtXUklUQUJMRV0pIHtcbiAgICAgIE9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICAgICAgQXR0cmlidXRlcyA9IHtcbiAgICAgICAgY29uZmlndXJhYmxlOiBDT05GSUdVUkFCTEUgaW4gQXR0cmlidXRlcyA/IEF0dHJpYnV0ZXNbQ09ORklHVVJBQkxFXSA6IGN1cnJlbnRbQ09ORklHVVJBQkxFXSxcbiAgICAgICAgZW51bWVyYWJsZTogRU5VTUVSQUJMRSBpbiBBdHRyaWJ1dGVzID8gQXR0cmlidXRlc1tFTlVNRVJBQkxFXSA6IGN1cnJlbnRbRU5VTUVSQUJMRV0sXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH0gcmV0dXJuICRkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKTtcbn0gOiAkZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKSB7XG4gIGFuT2JqZWN0KE8pO1xuICBQID0gdG9Qcm9wZXJ0eUtleShQKTtcbiAgYW5PYmplY3QoQXR0cmlidXRlcyk7XG4gIGlmIChJRThfRE9NX0RFRklORSkgdHJ5IHtcbiAgICByZXR1cm4gJGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpO1xuICB9IGNhdGNoIChlcnJvcikgeyAvKiBlbXB0eSAqLyB9XG4gIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHRocm93ICRUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkJyk7XG4gIGlmICgndmFsdWUnIGluIEF0dHJpYnV0ZXMpIE9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlO1xuICByZXR1cm4gTztcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtcHJvcGVydHktaXMtZW51bWVyYWJsZScpO1xudmFyIGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtcHJvcGVydHktZGVzY3JpcHRvcicpO1xudmFyIHRvSW5kZXhlZE9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbmRleGVkLW9iamVjdCcpO1xudmFyIHRvUHJvcGVydHlLZXkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tcHJvcGVydHkta2V5Jyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pZTgtZG9tLWRlZmluZScpO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvciAtLSBzYWZlXG52YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbi8vIGBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmdldG93bnByb3BlcnR5ZGVzY3JpcHRvclxuZXhwb3J0cy5mID0gREVTQ1JJUFRPUlMgPyAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApIHtcbiAgTyA9IHRvSW5kZXhlZE9iamVjdChPKTtcbiAgUCA9IHRvUHJvcGVydHlLZXkoUCk7XG4gIGlmIChJRThfRE9NX0RFRklORSkgdHJ5IHtcbiAgICByZXR1cm4gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsgLyogZW1wdHkgKi8gfVxuICBpZiAoaGFzT3duKE8sIFApKSByZXR1cm4gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKCFjYWxsKHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlLmYsIE8sIFApLCBPW1BdKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgaW50ZXJuYWxPYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzLWludGVybmFsJyk7XG52YXIgZW51bUJ1Z0tleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW51bS1idWcta2V5cycpO1xuXG52YXIgaGlkZGVuS2V5cyA9IGVudW1CdWdLZXlzLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpO1xuXG4vLyBgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QuZ2V0b3ducHJvcGVydHluYW1lc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eW5hbWVzIC0tIHNhZmVcbmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTykge1xuICByZXR1cm4gaW50ZXJuYWxPYmplY3RLZXlzKE8sIGhpZGRlbktleXMpO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcy9uby1vYmplY3QtZ2V0b3ducHJvcGVydHlzeW1ib2xzIC0tIHNhZmVcbmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gdW5jdXJyeVRoaXMoe30uaXNQcm90b3R5cGVPZik7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciB0b0luZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW5kZXhlZC1vYmplY3QnKTtcbnZhciBpbmRleE9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FycmF5LWluY2x1ZGVzJykuaW5kZXhPZjtcbnZhciBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hpZGRlbi1rZXlzJyk7XG5cbnZhciBwdXNoID0gdW5jdXJyeVRoaXMoW10ucHVzaCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZXMpIHtcbiAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3Qob2JqZWN0KTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBrZXk7XG4gIGZvciAoa2V5IGluIE8pICFoYXNPd24oaGlkZGVuS2V5cywga2V5KSAmJiBoYXNPd24oTywga2V5KSAmJiBwdXNoKHJlc3VsdCwga2V5KTtcbiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5c1xuICB3aGlsZSAobmFtZXMubGVuZ3RoID4gaSkgaWYgKGhhc093bihPLCBrZXkgPSBuYW1lc1tpKytdKSkge1xuICAgIH5pbmRleE9mKHJlc3VsdCwga2V5KSB8fCBwdXNoKHJlc3VsdCwga2V5KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBpbnRlcm5hbE9iamVjdEtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWtleXMtaW50ZXJuYWwnKTtcbnZhciBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbnVtLWJ1Zy1rZXlzJyk7XG5cbi8vIGBPYmplY3Qua2V5c2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5rZXlzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWtleXMgLS0gc2FmZVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pIHtcbiAgcmV0dXJuIGludGVybmFsT2JqZWN0S2V5cyhPLCBlbnVtQnVnS2V5cyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3IgLS0gc2FmZVxudmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cbi8vIE5hc2hvcm4gfiBKREs4IGJ1Z1xudmFyIE5BU0hPUk5fQlVHID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmICEkcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh7IDE6IDIgfSwgMSk7XG5cbi8vIGBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eWlzZW51bWVyYWJsZVxuZXhwb3J0cy5mID0gTkFTSE9STl9CVUcgPyBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShWKSB7XG4gIHZhciBkZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRoaXMsIFYpO1xuICByZXR1cm4gISFkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IuZW51bWVyYWJsZTtcbn0gOiAkcHJvcGVydHlJc0VudW1lcmFibGU7XG4iLCIndXNlIHN0cmljdCc7XG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAtLSBzYWZlICovXG52YXIgdW5jdXJyeVRoaXNBY2Nlc3NvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMtYWNjZXNzb3InKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBhUG9zc2libGVQcm90b3R5cGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYS1wb3NzaWJsZS1wcm90b3R5cGUnKTtcblxuLy8gYE9iamVjdC5zZXRQcm90b3R5cGVPZmAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5zZXRwcm90b3R5cGVvZlxuLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LXNldHByb3RvdHlwZW9mIC0tIHNhZmVcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IGZ1bmN0aW9uICgpIHtcbiAgdmFyIENPUlJFQ1RfU0VUVEVSID0gZmFsc2U7XG4gIHZhciB0ZXN0ID0ge307XG4gIHZhciBzZXR0ZXI7XG4gIHRyeSB7XG4gICAgc2V0dGVyID0gdW5jdXJyeVRoaXNBY2Nlc3NvcihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJywgJ3NldCcpO1xuICAgIHNldHRlcih0ZXN0LCBbXSk7XG4gICAgQ09SUkVDVF9TRVRURVIgPSB0ZXN0IGluc3RhbmNlb2YgQXJyYXk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKSB7XG4gICAgYW5PYmplY3QoTyk7XG4gICAgYVBvc3NpYmxlUHJvdG90eXBlKHByb3RvKTtcbiAgICBpZiAoQ09SUkVDVF9TRVRURVIpIHNldHRlcihPLCBwcm90byk7XG4gICAgZWxzZSBPLl9fcHJvdG9fXyA9IHByb3RvO1xuICAgIHJldHVybiBPO1xuICB9O1xufSgpIDogdW5kZWZpbmVkKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nLXRhZy1zdXBwb3J0Jyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG5cbi8vIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2QgaW1wbGVtZW50YXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZ1xubW9kdWxlLmV4cG9ydHMgPSBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPyB7fS50b1N0cmluZyA6IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gJ1tvYmplY3QgJyArIGNsYXNzb2YodGhpcykgKyAnXSc7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbi8vIGBPcmRpbmFyeVRvUHJpbWl0aXZlYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb3JkaW5hcnl0b3ByaW1pdGl2ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5wdXQsIHByZWYpIHtcbiAgdmFyIGZuLCB2YWw7XG4gIGlmIChwcmVmID09PSAnc3RyaW5nJyAmJiBpc0NhbGxhYmxlKGZuID0gaW5wdXQudG9TdHJpbmcpICYmICFpc09iamVjdCh2YWwgPSBjYWxsKGZuLCBpbnB1dCkpKSByZXR1cm4gdmFsO1xuICBpZiAoaXNDYWxsYWJsZShmbiA9IGlucHV0LnZhbHVlT2YpICYmICFpc09iamVjdCh2YWwgPSBjYWxsKGZuLCBpbnB1dCkpKSByZXR1cm4gdmFsO1xuICBpZiAocHJlZiAhPT0gJ3N0cmluZycgJiYgaXNDYWxsYWJsZShmbiA9IGlucHV0LnRvU3RyaW5nKSAmJiAhaXNPYmplY3QodmFsID0gY2FsbChmbiwgaW5wdXQpKSkgcmV0dXJuIHZhbDtcbiAgdGhyb3cgJFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LW5hbWVzJyk7XG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1nZXQtb3duLXByb3BlcnR5LXN5bWJvbHMnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcblxudmFyIGNvbmNhdCA9IHVuY3VycnlUaGlzKFtdLmNvbmNhdCk7XG5cbi8vIGFsbCBvYmplY3Qga2V5cywgaW5jbHVkZXMgbm9uLWVudW1lcmFibGUgYW5kIHN5bWJvbHNcbm1vZHVsZS5leHBvcnRzID0gZ2V0QnVpbHRJbignUmVmbGVjdCcsICdvd25LZXlzJykgfHwgZnVuY3Rpb24gb3duS2V5cyhpdCkge1xuICB2YXIga2V5cyA9IGdldE93blByb3BlcnR5TmFtZXNNb2R1bGUuZihhbk9iamVjdChpdCkpO1xuICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlLmY7XG4gIHJldHVybiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPyBjb25jYXQoa2V5cywgZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KSkgOiBrZXlzO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4geyBlcnJvcjogZmFsc2UsIHZhbHVlOiBleGVjKCkgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgdmFsdWU6IGVycm9yIH07XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm9taXNlLW5hdGl2ZS1jb25zdHJ1Y3RvcicpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBpc0ZvcmNlZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1mb3JjZWQnKTtcbnZhciBpbnNwZWN0U291cmNlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luc3BlY3Qtc291cmNlJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgSVNfQlJPV1NFUiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtaXMtYnJvd3NlcicpO1xudmFyIElTX0RFTk8gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLWlzLWRlbm8nKTtcbnZhciBJU19QVVJFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXB1cmUnKTtcbnZhciBWOF9WRVJTSU9OID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS12OC12ZXJzaW9uJyk7XG5cbnZhciBOYXRpdmVQcm9taXNlUHJvdG90eXBlID0gTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yICYmIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xudmFyIFNVQkNMQVNTSU5HID0gZmFsc2U7XG52YXIgTkFUSVZFX1BST01JU0VfUkVKRUNUSU9OX0VWRU5UID0gaXNDYWxsYWJsZShnbG9iYWwuUHJvbWlzZVJlamVjdGlvbkV2ZW50KTtcblxudmFyIEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SID0gaXNGb3JjZWQoJ1Byb21pc2UnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBQUk9NSVNFX0NPTlNUUlVDVE9SX1NPVVJDRSA9IGluc3BlY3RTb3VyY2UoTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yKTtcbiAgdmFyIEdMT0JBTF9DT1JFX0pTX1BST01JU0UgPSBQUk9NSVNFX0NPTlNUUlVDVE9SX1NPVVJDRSAhPT0gU3RyaW5nKE5hdGl2ZVByb21pc2VDb25zdHJ1Y3Rvcik7XG4gIC8vIFY4IDYuNiAoTm9kZSAxMCBhbmQgQ2hyb21lIDY2KSBoYXZlIGEgYnVnIHdpdGggcmVzb2x2aW5nIGN1c3RvbSB0aGVuYWJsZXNcbiAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9ODMwNTY1XG4gIC8vIFdlIGNhbid0IGRldGVjdCBpdCBzeW5jaHJvbm91c2x5LCBzbyBqdXN0IGNoZWNrIHZlcnNpb25zXG4gIGlmICghR0xPQkFMX0NPUkVfSlNfUFJPTUlTRSAmJiBWOF9WRVJTSU9OID09PSA2NikgcmV0dXJuIHRydWU7XG4gIC8vIFdlIG5lZWQgUHJvbWlzZSN7IGNhdGNoLCBmaW5hbGx5IH0gaW4gdGhlIHB1cmUgdmVyc2lvbiBmb3IgcHJldmVudGluZyBwcm90b3R5cGUgcG9sbHV0aW9uXG4gIGlmIChJU19QVVJFICYmICEoTmF0aXZlUHJvbWlzZVByb3RvdHlwZVsnY2F0Y2gnXSAmJiBOYXRpdmVQcm9taXNlUHJvdG90eXBlWydmaW5hbGx5J10pKSByZXR1cm4gdHJ1ZTtcbiAgLy8gV2UgY2FuJ3QgdXNlIEBAc3BlY2llcyBmZWF0dXJlIGRldGVjdGlvbiBpbiBWOCBzaW5jZSBpdCBjYXVzZXNcbiAgLy8gZGVvcHRpbWl6YXRpb24gYW5kIHBlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy82NzlcbiAgaWYgKCFWOF9WRVJTSU9OIHx8IFY4X1ZFUlNJT04gPCA1MSB8fCAhL25hdGl2ZSBjb2RlLy50ZXN0KFBST01JU0VfQ09OU1RSVUNUT1JfU09VUkNFKSkge1xuICAgIC8vIERldGVjdCBjb3JyZWN0bmVzcyBvZiBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0XG4gICAgdmFyIHByb21pc2UgPSBuZXcgTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUoMSk7IH0pO1xuICAgIHZhciBGYWtlUHJvbWlzZSA9IGZ1bmN0aW9uIChleGVjKSB7XG4gICAgICBleGVjKGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSwgZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9KTtcbiAgICB9O1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IHByb21pc2UuY29uc3RydWN0b3IgPSB7fTtcbiAgICBjb25zdHJ1Y3RvcltTUEVDSUVTXSA9IEZha2VQcm9taXNlO1xuICAgIFNVQkNMQVNTSU5HID0gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTtcbiAgICBpZiAoIVNVQkNMQVNTSU5HKSByZXR1cm4gdHJ1ZTtcbiAgLy8gVW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdFxuICB9IHJldHVybiAhR0xPQkFMX0NPUkVfSlNfUFJPTUlTRSAmJiAoSVNfQlJPV1NFUiB8fCBJU19ERU5PKSAmJiAhTkFUSVZFX1BST01JU0VfUkVKRUNUSU9OX0VWRU5UO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBDT05TVFJVQ1RPUjogRk9SQ0VEX1BST01JU0VfQ09OU1RSVUNUT1IsXG4gIFJFSkVDVElPTl9FVkVOVDogTkFUSVZFX1BST01JU0VfUkVKRUNUSU9OX0VWRU5ULFxuICBTVUJDTEFTU0lORzogU1VCQ0xBU1NJTkdcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5Qcm9taXNlO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL25ldy1wcm9taXNlLWNhcGFiaWxpdHknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQywgeCkge1xuICBhbk9iamVjdChDKTtcbiAgaWYgKGlzT2JqZWN0KHgpICYmIHguY29uc3RydWN0b3IgPT09IEMpIHJldHVybiB4O1xuICB2YXIgcHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eS5mKEMpO1xuICB2YXIgcmVzb2x2ZSA9IHByb21pc2VDYXBhYmlsaXR5LnJlc29sdmU7XG4gIHJlc29sdmUoeCk7XG4gIHJldHVybiBwcm9taXNlQ2FwYWJpbGl0eS5wcm9taXNlO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcHJvbWlzZS1uYXRpdmUtY29uc3RydWN0b3InKTtcbnZhciBjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY2hlY2stY29ycmVjdG5lc3Mtb2YtaXRlcmF0aW9uJyk7XG52YXIgRk9SQ0VEX1BST01JU0VfQ09OU1RSVUNUT1IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcHJvbWlzZS1jb25zdHJ1Y3Rvci1kZXRlY3Rpb24nKS5DT05TVFJVQ1RPUjtcblxubW9kdWxlLmV4cG9ydHMgPSBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiB8fCAhY2hlY2tDb3JyZWN0bmVzc09mSXRlcmF0aW9uKGZ1bmN0aW9uIChpdGVyYWJsZSkge1xuICBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IuYWxsKGl0ZXJhYmxlKS50aGVuKHVuZGVmaW5lZCwgZnVuY3Rpb24gKCkgeyAvKiBlbXB0eSAqLyB9KTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1kZWZpbmUtcHJvcGVydHknKS5mO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChUYXJnZXQsIFNvdXJjZSwga2V5KSB7XG4gIGtleSBpbiBUYXJnZXQgfHwgZGVmaW5lUHJvcGVydHkoVGFyZ2V0LCBrZXksIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBTb3VyY2Vba2V5XTsgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIChpdCkgeyBTb3VyY2Vba2V5XSA9IGl0OyB9XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5oZWFkID0gbnVsbDtcbiAgdGhpcy50YWlsID0gbnVsbDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZSA9IHtcbiAgYWRkOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBlbnRyeSA9IHsgaXRlbTogaXRlbSwgbmV4dDogbnVsbCB9O1xuICAgIHZhciB0YWlsID0gdGhpcy50YWlsO1xuICAgIGlmICh0YWlsKSB0YWlsLm5leHQgPSBlbnRyeTtcbiAgICBlbHNlIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLmhlYWQ7XG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICB2YXIgbmV4dCA9IHRoaXMuaGVhZCA9IGVudHJ5Lm5leHQ7XG4gICAgICBpZiAobmV4dCA9PT0gbnVsbCkgdGhpcy50YWlsID0gbnVsbDtcbiAgICAgIHJldHVybiBlbnRyeS5pdGVtO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWV1ZTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mLXJhdycpO1xudmFyIHJlZ2V4cEV4ZWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG5cbi8vIGBSZWdFeHBFeGVjYCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcmVnZXhwZXhlY1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoUiwgUykge1xuICB2YXIgZXhlYyA9IFIuZXhlYztcbiAgaWYgKGlzQ2FsbGFibGUoZXhlYykpIHtcbiAgICB2YXIgcmVzdWx0ID0gY2FsbChleGVjLCBSLCBTKTtcbiAgICBpZiAocmVzdWx0ICE9PSBudWxsKSBhbk9iamVjdChyZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgaWYgKGNsYXNzb2YoUikgPT09ICdSZWdFeHAnKSByZXR1cm4gY2FsbChyZWdleHBFeGVjLCBSLCBTKTtcbiAgdGhyb3cgJFR5cGVFcnJvcignUmVnRXhwI2V4ZWMgY2FsbGVkIG9uIGluY29tcGF0aWJsZSByZWNlaXZlcicpO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIHJlZ2V4cC9uby1lbXB0eS1jYXB0dXJpbmctZ3JvdXAsIHJlZ2V4cC9uby1lbXB0eS1ncm91cCwgcmVnZXhwL25vLWxhenktZW5kcyAtLSB0ZXN0aW5nICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZWdleHAvbm8tdXNlbGVzcy1xdWFudGlmaWVyIC0tIHRlc3RpbmcgKi9cbnZhciBjYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWNhbGwnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmcnKTtcbnZhciByZWdleHBGbGFncyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZmxhZ3MnKTtcbnZhciBzdGlja3lIZWxwZXJzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1zdGlja3ktaGVscGVycycpO1xudmFyIHNoYXJlZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zaGFyZWQnKTtcbnZhciBjcmVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWNyZWF0ZScpO1xudmFyIGdldEludGVybmFsU3RhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUnKS5nZXQ7XG52YXIgVU5TVVBQT1JURURfRE9UX0FMTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtZG90LWFsbCcpO1xudmFyIFVOU1VQUE9SVEVEX05DRyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtbmNnJyk7XG5cbnZhciBuYXRpdmVSZXBsYWNlID0gc2hhcmVkKCduYXRpdmUtc3RyaW5nLXJlcGxhY2UnLCBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UpO1xudmFyIG5hdGl2ZUV4ZWMgPSBSZWdFeHAucHJvdG90eXBlLmV4ZWM7XG52YXIgcGF0Y2hlZEV4ZWMgPSBuYXRpdmVFeGVjO1xudmFyIGNoYXJBdCA9IHVuY3VycnlUaGlzKCcnLmNoYXJBdCk7XG52YXIgaW5kZXhPZiA9IHVuY3VycnlUaGlzKCcnLmluZGV4T2YpO1xudmFyIHJlcGxhY2UgPSB1bmN1cnJ5VGhpcygnJy5yZXBsYWNlKTtcbnZhciBzdHJpbmdTbGljZSA9IHVuY3VycnlUaGlzKCcnLnNsaWNlKTtcblxudmFyIFVQREFURVNfTEFTVF9JTkRFWF9XUk9ORyA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciByZTEgPSAvYS87XG4gIHZhciByZTIgPSAvYiovZztcbiAgY2FsbChuYXRpdmVFeGVjLCByZTEsICdhJyk7XG4gIGNhbGwobmF0aXZlRXhlYywgcmUyLCAnYScpO1xuICByZXR1cm4gcmUxLmxhc3RJbmRleCAhPT0gMCB8fCByZTIubGFzdEluZGV4ICE9PSAwO1xufSkoKTtcblxudmFyIFVOU1VQUE9SVEVEX1kgPSBzdGlja3lIZWxwZXJzLkJST0tFTl9DQVJFVDtcblxuLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXAsIGNvcGllZCBmcm9tIGVzNS1zaGltJ3MgU3RyaW5nI3NwbGl0IHBhdGNoLlxudmFyIE5QQ0dfSU5DTFVERUQgPSAvKCk/Py8uZXhlYygnJylbMV0gIT09IHVuZGVmaW5lZDtcblxudmFyIFBBVENIID0gVVBEQVRFU19MQVNUX0lOREVYX1dST05HIHx8IE5QQ0dfSU5DTFVERUQgfHwgVU5TVVBQT1JURURfWSB8fCBVTlNVUFBPUlRFRF9ET1RfQUxMIHx8IFVOU1VQUE9SVEVEX05DRztcblxuaWYgKFBBVENIKSB7XG4gIHBhdGNoZWRFeGVjID0gZnVuY3Rpb24gZXhlYyhzdHJpbmcpIHtcbiAgICB2YXIgcmUgPSB0aGlzO1xuICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsU3RhdGUocmUpO1xuICAgIHZhciBzdHIgPSB0b1N0cmluZyhzdHJpbmcpO1xuICAgIHZhciByYXcgPSBzdGF0ZS5yYXc7XG4gICAgdmFyIHJlc3VsdCwgcmVDb3B5LCBsYXN0SW5kZXgsIG1hdGNoLCBpLCBvYmplY3QsIGdyb3VwO1xuXG4gICAgaWYgKHJhdykge1xuICAgICAgcmF3Lmxhc3RJbmRleCA9IHJlLmxhc3RJbmRleDtcbiAgICAgIHJlc3VsdCA9IGNhbGwocGF0Y2hlZEV4ZWMsIHJhdywgc3RyKTtcbiAgICAgIHJlLmxhc3RJbmRleCA9IHJhdy5sYXN0SW5kZXg7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHZhciBncm91cHMgPSBzdGF0ZS5ncm91cHM7XG4gICAgdmFyIHN0aWNreSA9IFVOU1VQUE9SVEVEX1kgJiYgcmUuc3RpY2t5O1xuICAgIHZhciBmbGFncyA9IGNhbGwocmVnZXhwRmxhZ3MsIHJlKTtcbiAgICB2YXIgc291cmNlID0gcmUuc291cmNlO1xuICAgIHZhciBjaGFyc0FkZGVkID0gMDtcbiAgICB2YXIgc3RyQ29weSA9IHN0cjtcblxuICAgIGlmIChzdGlja3kpIHtcbiAgICAgIGZsYWdzID0gcmVwbGFjZShmbGFncywgJ3knLCAnJyk7XG4gICAgICBpZiAoaW5kZXhPZihmbGFncywgJ2cnKSA9PT0gLTEpIHtcbiAgICAgICAgZmxhZ3MgKz0gJ2cnO1xuICAgICAgfVxuXG4gICAgICBzdHJDb3B5ID0gc3RyaW5nU2xpY2Uoc3RyLCByZS5sYXN0SW5kZXgpO1xuICAgICAgLy8gU3VwcG9ydCBhbmNob3JlZCBzdGlja3kgYmVoYXZpb3IuXG4gICAgICBpZiAocmUubGFzdEluZGV4ID4gMCAmJiAoIXJlLm11bHRpbGluZSB8fCByZS5tdWx0aWxpbmUgJiYgY2hhckF0KHN0ciwgcmUubGFzdEluZGV4IC0gMSkgIT09ICdcXG4nKSkge1xuICAgICAgICBzb3VyY2UgPSAnKD86ICcgKyBzb3VyY2UgKyAnKSc7XG4gICAgICAgIHN0ckNvcHkgPSAnICcgKyBzdHJDb3B5O1xuICAgICAgICBjaGFyc0FkZGVkKys7XG4gICAgICB9XG4gICAgICAvLyBeKD8gKyByeCArICkgaXMgbmVlZGVkLCBpbiBjb21iaW5hdGlvbiB3aXRoIHNvbWUgc3RyIHNsaWNpbmcsIHRvXG4gICAgICAvLyBzaW11bGF0ZSB0aGUgJ3knIGZsYWcuXG4gICAgICByZUNvcHkgPSBuZXcgUmVnRXhwKCdeKD86JyArIHNvdXJjZSArICcpJywgZmxhZ3MpO1xuICAgIH1cblxuICAgIGlmIChOUENHX0lOQ0xVREVEKSB7XG4gICAgICByZUNvcHkgPSBuZXcgUmVnRXhwKCdeJyArIHNvdXJjZSArICckKD8hXFxcXHMpJywgZmxhZ3MpO1xuICAgIH1cbiAgICBpZiAoVVBEQVRFU19MQVNUX0lOREVYX1dST05HKSBsYXN0SW5kZXggPSByZS5sYXN0SW5kZXg7XG5cbiAgICBtYXRjaCA9IGNhbGwobmF0aXZlRXhlYywgc3RpY2t5ID8gcmVDb3B5IDogcmUsIHN0ckNvcHkpO1xuXG4gICAgaWYgKHN0aWNreSkge1xuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIG1hdGNoLmlucHV0ID0gc3RyaW5nU2xpY2UobWF0Y2guaW5wdXQsIGNoYXJzQWRkZWQpO1xuICAgICAgICBtYXRjaFswXSA9IHN0cmluZ1NsaWNlKG1hdGNoWzBdLCBjaGFyc0FkZGVkKTtcbiAgICAgICAgbWF0Y2guaW5kZXggPSByZS5sYXN0SW5kZXg7XG4gICAgICAgIHJlLmxhc3RJbmRleCArPSBtYXRjaFswXS5sZW5ndGg7XG4gICAgICB9IGVsc2UgcmUubGFzdEluZGV4ID0gMDtcbiAgICB9IGVsc2UgaWYgKFVQREFURVNfTEFTVF9JTkRFWF9XUk9ORyAmJiBtYXRjaCkge1xuICAgICAgcmUubGFzdEluZGV4ID0gcmUuZ2xvYmFsID8gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggOiBsYXN0SW5kZXg7XG4gICAgfVxuICAgIGlmIChOUENHX0lOQ0xVREVEICYmIG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vIEZpeCBicm93c2VycyB3aG9zZSBgZXhlY2AgbWV0aG9kcyBkb24ndCBjb25zaXN0ZW50bHkgcmV0dXJuIGB1bmRlZmluZWRgXG4gICAgICAvLyBmb3IgTlBDRywgbGlrZSBJRTguIE5PVEU6IFRoaXMgZG9lc24ndCB3b3JrIGZvciAvKC4/KT8vXG4gICAgICBjYWxsKG5hdGl2ZVJlcGxhY2UsIG1hdGNoWzBdLCByZUNvcHksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yIChpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldID09PSB1bmRlZmluZWQpIG1hdGNoW2ldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobWF0Y2ggJiYgZ3JvdXBzKSB7XG4gICAgICBtYXRjaC5ncm91cHMgPSBvYmplY3QgPSBjcmVhdGUobnVsbCk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2ldO1xuICAgICAgICBvYmplY3RbZ3JvdXBbMF1dID0gbWF0Y2hbZ3JvdXBbMV1dO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXRjaDtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXRjaGVkRXhlYztcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcblxuLy8gYFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3NgIGdldHRlciBpbXBsZW1lbnRhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1nZXQtcmVnZXhwLnByb3RvdHlwZS5mbGFnc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0aGF0ID0gYW5PYmplY3QodGhpcyk7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgaWYgKHRoYXQuaGFzSW5kaWNlcykgcmVzdWx0ICs9ICdkJztcbiAgaWYgKHRoYXQuZ2xvYmFsKSByZXN1bHQgKz0gJ2cnO1xuICBpZiAodGhhdC5pZ25vcmVDYXNlKSByZXN1bHQgKz0gJ2knO1xuICBpZiAodGhhdC5tdWx0aWxpbmUpIHJlc3VsdCArPSAnbSc7XG4gIGlmICh0aGF0LmRvdEFsbCkgcmVzdWx0ICs9ICdzJztcbiAgaWYgKHRoYXQudW5pY29kZSkgcmVzdWx0ICs9ICd1JztcbiAgaWYgKHRoYXQudW5pY29kZVNldHMpIHJlc3VsdCArPSAndic7XG4gIGlmICh0aGF0LnN0aWNreSkgcmVzdWx0ICs9ICd5JztcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBpc1Byb3RvdHlwZU9mID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1pcy1wcm90b3R5cGUtb2YnKTtcbnZhciByZWdFeHBGbGFncyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZmxhZ3MnKTtcblxudmFyIFJlZ0V4cFByb3RvdHlwZSA9IFJlZ0V4cC5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFIpIHtcbiAgdmFyIGZsYWdzID0gUi5mbGFncztcbiAgcmV0dXJuIGZsYWdzID09PSB1bmRlZmluZWQgJiYgISgnZmxhZ3MnIGluIFJlZ0V4cFByb3RvdHlwZSkgJiYgIWhhc093bihSLCAnZmxhZ3MnKSAmJiBpc1Byb3RvdHlwZU9mKFJlZ0V4cFByb3RvdHlwZSwgUilcbiAgICA/IGNhbGwocmVnRXhwRmxhZ3MsIFIpIDogZmxhZ3M7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG4vLyBiYWJlbC1taW5pZnkgYW5kIENsb3N1cmUgQ29tcGlsZXIgdHJhbnNwaWxlcyBSZWdFeHAoJ2EnLCAneScpIC0+IC9hL3kgYW5kIGl0IGNhdXNlcyBTeW50YXhFcnJvclxudmFyICRSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xuXG52YXIgVU5TVVBQT1JURURfWSA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlID0gJFJlZ0V4cCgnYScsICd5Jyk7XG4gIHJlLmxhc3RJbmRleCA9IDI7XG4gIHJldHVybiByZS5leGVjKCdhYmNkJykgIT09IG51bGw7XG59KTtcblxuLy8gVUMgQnJvd3NlciBidWdcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xMDA4XG52YXIgTUlTU0VEX1NUSUNLWSA9IFVOU1VQUE9SVEVEX1kgfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gISRSZWdFeHAoJ2EnLCAneScpLnN0aWNreTtcbn0pO1xuXG52YXIgQlJPS0VOX0NBUkVUID0gVU5TVVBQT1JURURfWSB8fCBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTc3MzY4N1xuICB2YXIgcmUgPSAkUmVnRXhwKCdecicsICdneScpO1xuICByZS5sYXN0SW5kZXggPSAyO1xuICByZXR1cm4gcmUuZXhlYygnc3RyJykgIT09IG51bGw7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEJST0tFTl9DQVJFVDogQlJPS0VOX0NBUkVULFxuICBNSVNTRURfU1RJQ0tZOiBNSVNTRURfU1RJQ0tZLFxuICBVTlNVUFBPUlRFRF9ZOiBVTlNVUFBPUlRFRF9ZXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG4vLyBiYWJlbC1taW5pZnkgYW5kIENsb3N1cmUgQ29tcGlsZXIgdHJhbnNwaWxlcyBSZWdFeHAoJy4nLCAncycpIC0+IC8uL3MgYW5kIGl0IGNhdXNlcyBTeW50YXhFcnJvclxudmFyICRSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlID0gJFJlZ0V4cCgnLicsICdzJyk7XG4gIHJldHVybiAhKHJlLmRvdEFsbCAmJiByZS5leGVjKCdcXG4nKSAmJiByZS5mbGFncyA9PT0gJ3MnKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xuXG4vLyBiYWJlbC1taW5pZnkgYW5kIENsb3N1cmUgQ29tcGlsZXIgdHJhbnNwaWxlcyBSZWdFeHAoJyg/PGE+YiknLCAnZycpIC0+IC8oPzxhPmIpL2cgYW5kIGl0IGNhdXNlcyBTeW50YXhFcnJvclxudmFyICRSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlID0gJFJlZ0V4cCgnKD88YT5iKScsICdnJyk7XG4gIHJldHVybiByZS5leGVjKCdiJykuZ3JvdXBzLmEgIT09ICdiJyB8fFxuICAgICdiJy5yZXBsYWNlKHJlLCAnJDxhPmMnKSAhPT0gJ2JjJztcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGlzTnVsbE9yVW5kZWZpbmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW51bGwtb3ItdW5kZWZpbmVkJyk7XG5cbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xuXG4vLyBgUmVxdWlyZU9iamVjdENvZXJjaWJsZWAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlcXVpcmVvYmplY3Rjb2VyY2libGVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmIChpc051bGxPclVuZGVmaW5lZChpdCkpIHRocm93ICRUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIGRlZmluZUJ1aWx0SW5BY2Nlc3NvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZWZpbmUtYnVpbHQtaW4tYWNjZXNzb3InKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kZXNjcmlwdG9ycycpO1xuXG52YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCgnc3BlY2llcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDT05TVFJVQ1RPUl9OQU1FKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IGdldEJ1aWx0SW4oQ09OU1RSVUNUT1JfTkFNRSk7XG5cbiAgaWYgKERFU0NSSVBUT1JTICYmIENvbnN0cnVjdG9yICYmICFDb25zdHJ1Y3RvcltTUEVDSUVTXSkge1xuICAgIGRlZmluZUJ1aWx0SW5BY2Nlc3NvcihDb25zdHJ1Y3RvciwgU1BFQ0lFUywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgfSk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LWRlZmluZS1wcm9wZXJ0eScpLmY7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFRPX1NUUklOR19UQUcgPSB3ZWxsS25vd25TeW1ib2woJ3RvU3RyaW5nVGFnJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldCwgVEFHLCBTVEFUSUMpIHtcbiAgaWYgKHRhcmdldCAmJiAhU1RBVElDKSB0YXJnZXQgPSB0YXJnZXQucHJvdG90eXBlO1xuICBpZiAodGFyZ2V0ICYmICFoYXNPd24odGFyZ2V0LCBUT19TVFJJTkdfVEFHKSkge1xuICAgIGRlZmluZVByb3BlcnR5KHRhcmdldCwgVE9fU1RSSU5HX1RBRywgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBUQUcgfSk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgc2hhcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NoYXJlZCcpO1xudmFyIHVpZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy91aWQnKTtcblxudmFyIGtleXMgPSBzaGFyZWQoJ2tleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXlzW2tleV0gfHwgKGtleXNba2V5XSA9IHVpZChrZXkpKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGRlZmluZUdsb2JhbFByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1nbG9iYWwtcHJvcGVydHknKTtcblxudmFyIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nO1xudmFyIHN0b3JlID0gZ2xvYmFsW1NIQVJFRF0gfHwgZGVmaW5lR2xvYmFsUHJvcGVydHkoU0hBUkVELCB7fSk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3RvcmU7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgSVNfUFVSRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1wdXJlJyk7XG52YXIgc3RvcmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkLXN0b3JlJyk7XG5cbihtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoge30pO1xufSkoJ3ZlcnNpb25zJywgW10pLnB1c2goe1xuICB2ZXJzaW9uOiAnMy4zMi4yJyxcbiAgbW9kZTogSVNfUFVSRSA/ICdwdXJlJyA6ICdnbG9iYWwnLFxuICBjb3B5cmlnaHQ6ICfCqSAyMDE0LTIwMjMgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSknLFxuICBsaWNlbnNlOiAnaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvYmxvYi92My4zMi4yL0xJQ0VOU0UnLFxuICBzb3VyY2U6ICdodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcydcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGFDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNvbnN0cnVjdG9yJyk7XG52YXIgaXNOdWxsT3JVbmRlZmluZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtbnVsbC1vci11bmRlZmluZWQnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyIFNQRUNJRVMgPSB3ZWxsS25vd25TeW1ib2woJ3NwZWNpZXMnKTtcblxuLy8gYFNwZWNpZXNDb25zdHJ1Y3RvcmAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXNwZWNpZXNjb25zdHJ1Y3RvclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywgZGVmYXVsdENvbnN0cnVjdG9yKSB7XG4gIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3I7XG4gIHZhciBTO1xuICByZXR1cm4gQyA9PT0gdW5kZWZpbmVkIHx8IGlzTnVsbE9yVW5kZWZpbmVkKFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXSkgPyBkZWZhdWx0Q29uc3RydWN0b3IgOiBhQ29uc3RydWN0b3IoUyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG5cbi8vIGNoZWNrIHRoZSBleGlzdGVuY2Ugb2YgYSBtZXRob2QsIGxvd2VyY2FzZVxuLy8gb2YgYSB0YWcgYW5kIGVzY2FwaW5nIHF1b3RlcyBpbiBhcmd1bWVudHNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE1FVEhPRF9OQU1FKSB7XG4gIHJldHVybiBmYWlscyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRlc3QgPSAnJ1tNRVRIT0RfTkFNRV0oJ1wiJyk7XG4gICAgcmV0dXJuIHRlc3QgIT09IHRlc3QudG9Mb3dlckNhc2UoKSB8fCB0ZXN0LnNwbGl0KCdcIicpLmxlbmd0aCA+IDM7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciB0b0ludGVnZXJPckluZmluaXR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWludGVnZXItb3ItaW5maW5pdHknKTtcbnZhciB0b1N0cmluZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmcnKTtcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZScpO1xuXG52YXIgY2hhckF0ID0gdW5jdXJyeVRoaXMoJycuY2hhckF0KTtcbnZhciBjaGFyQ29kZUF0ID0gdW5jdXJyeVRoaXMoJycuY2hhckNvZGVBdCk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG5cbnZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbiAoQ09OVkVSVF9UT19TVFJJTkcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcywgcG9zKSB7XG4gICAgdmFyIFMgPSB0b1N0cmluZyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKCR0aGlzKSk7XG4gICAgdmFyIHBvc2l0aW9uID0gdG9JbnRlZ2VyT3JJbmZpbml0eShwb3MpO1xuICAgIHZhciBzaXplID0gUy5sZW5ndGg7XG4gICAgdmFyIGZpcnN0LCBzZWNvbmQ7XG4gICAgaWYgKHBvc2l0aW9uIDwgMCB8fCBwb3NpdGlvbiA+PSBzaXplKSByZXR1cm4gQ09OVkVSVF9UT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDtcbiAgICBmaXJzdCA9IGNoYXJDb2RlQXQoUywgcG9zaXRpb24pO1xuICAgIHJldHVybiBmaXJzdCA8IDB4RDgwMCB8fCBmaXJzdCA+IDB4REJGRiB8fCBwb3NpdGlvbiArIDEgPT09IHNpemVcbiAgICAgIHx8IChzZWNvbmQgPSBjaGFyQ29kZUF0KFMsIHBvc2l0aW9uICsgMSkpIDwgMHhEQzAwIHx8IHNlY29uZCA+IDB4REZGRlxuICAgICAgICA/IENPTlZFUlRfVE9fU1RSSU5HXG4gICAgICAgICAgPyBjaGFyQXQoUywgcG9zaXRpb24pXG4gICAgICAgICAgOiBmaXJzdFxuICAgICAgICA6IENPTlZFUlRfVE9fU1RSSU5HXG4gICAgICAgICAgPyBzdHJpbmdTbGljZShTLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAyKVxuICAgICAgICAgIDogKGZpcnN0IC0gMHhEODAwIDw8IDEwKSArIChzZWNvbmQgLSAweERDMDApICsgMHgxMDAwMDtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBgU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdGAgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS5jb2RlcG9pbnRhdFxuICBjb2RlQXQ6IGNyZWF0ZU1ldGhvZChmYWxzZSksXG4gIC8vIGBTdHJpbmcucHJvdG90eXBlLmF0YCBtZXRob2RcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvU3RyaW5nLnByb3RvdHlwZS5hdFxuICBjaGFyQXQ6IGNyZWF0ZU1ldGhvZCh0cnVlKVxufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIGVzL25vLXN5bWJvbCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZyAqL1xudmFyIFY4X1ZFUlNJT04gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZW5naW5lLXY4LXZlcnNpb24nKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcblxudmFyICRTdHJpbmcgPSBnbG9iYWwuU3RyaW5nO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXMvbm8tb2JqZWN0LWdldG93bnByb3BlcnR5c3ltYm9scyAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xubW9kdWxlLmV4cG9ydHMgPSAhIU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYgIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN5bWJvbCA9IFN5bWJvbCgnc3ltYm9sIGRldGVjdGlvbicpO1xuICAvLyBDaHJvbWUgMzggU3ltYm9sIGhhcyBpbmNvcnJlY3QgdG9TdHJpbmcgY29udmVyc2lvblxuICAvLyBgZ2V0LW93bi1wcm9wZXJ0eS1zeW1ib2xzYCBwb2x5ZmlsbCBzeW1ib2xzIGNvbnZlcnRlZCB0byBvYmplY3QgYXJlIG5vdCBTeW1ib2wgaW5zdGFuY2VzXG4gIC8vIG5iOiBEbyBub3QgY2FsbCBgU3RyaW5nYCBkaXJlY3RseSB0byBhdm9pZCB0aGlzIGJlaW5nIG9wdGltaXplZCBvdXQgdG8gYHN5bWJvbCsnJ2Agd2hpY2ggd2lsbCxcbiAgLy8gb2YgY291cnNlLCBmYWlsLlxuICByZXR1cm4gISRTdHJpbmcoc3ltYm9sKSB8fCAhKE9iamVjdChzeW1ib2wpIGluc3RhbmNlb2YgU3ltYm9sKSB8fFxuICAgIC8vIENocm9tZSAzOC00MCBzeW1ib2xzIGFyZSBub3QgaW5oZXJpdGVkIGZyb20gRE9NIGNvbGxlY3Rpb25zIHByb3RvdHlwZXMgdG8gaW5zdGFuY2VzXG4gICAgIVN5bWJvbC5zaGFtICYmIFY4X1ZFUlNJT04gJiYgVjhfVkVSU0lPTiA8IDQxO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGFwcGx5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWFwcGx5Jyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1iaW5kLWNvbnRleHQnKTtcbnZhciBpc0NhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWNhbGxhYmxlJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xudmFyIGh0bWwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaHRtbCcpO1xudmFyIGFycmF5U2xpY2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktc2xpY2UnKTtcbnZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvY3VtZW50LWNyZWF0ZS1lbGVtZW50Jyk7XG52YXIgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdmFsaWRhdGUtYXJndW1lbnRzLWxlbmd0aCcpO1xudmFyIElTX0lPUyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtaXMtaW9zJyk7XG52YXIgSVNfTk9ERSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9lbmdpbmUtaXMtbm9kZScpO1xuXG52YXIgc2V0ID0gZ2xvYmFsLnNldEltbWVkaWF0ZTtcbnZhciBjbGVhciA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZTtcbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgRGlzcGF0Y2ggPSBnbG9iYWwuRGlzcGF0Y2g7XG52YXIgRnVuY3Rpb24gPSBnbG9iYWwuRnVuY3Rpb247XG52YXIgTWVzc2FnZUNoYW5uZWwgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWw7XG52YXIgU3RyaW5nID0gZ2xvYmFsLlN0cmluZztcbnZhciBjb3VudGVyID0gMDtcbnZhciBxdWV1ZSA9IHt9O1xudmFyIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xudmFyICRsb2NhdGlvbiwgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7XG5cbmZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gRGVubyB0aHJvd3MgYSBSZWZlcmVuY2VFcnJvciBvbiBgbG9jYXRpb25gIGFjY2VzcyB3aXRob3V0IGAtLWxvY2F0aW9uYCBmbGFnXG4gICRsb2NhdGlvbiA9IGdsb2JhbC5sb2NhdGlvbjtcbn0pO1xuXG52YXIgcnVuID0gZnVuY3Rpb24gKGlkKSB7XG4gIGlmIChoYXNPd24ocXVldWUsIGlkKSkge1xuICAgIHZhciBmbiA9IHF1ZXVlW2lkXTtcbiAgICBkZWxldGUgcXVldWVbaWRdO1xuICAgIGZuKCk7XG4gIH1cbn07XG5cbnZhciBydW5uZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBydW4oaWQpO1xuICB9O1xufTtcblxudmFyIGV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgcnVuKGV2ZW50LmRhdGEpO1xufTtcblxudmFyIGdsb2JhbFBvc3RNZXNzYWdlRGVmZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgLy8gb2xkIGVuZ2luZXMgaGF2ZSBub3QgbG9jYXRpb24ub3JpZ2luXG4gIGdsb2JhbC5wb3N0TWVzc2FnZShTdHJpbmcoaWQpLCAkbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgJGxvY2F0aW9uLmhvc3QpO1xufTtcblxuLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOlxuaWYgKCFzZXQgfHwgIWNsZWFyKSB7XG4gIHNldCA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShoYW5kbGVyKSB7XG4gICAgdmFsaWRhdGVBcmd1bWVudHNMZW5ndGgoYXJndW1lbnRzLmxlbmd0aCwgMSk7XG4gICAgdmFyIGZuID0gaXNDYWxsYWJsZShoYW5kbGVyKSA/IGhhbmRsZXIgOiBGdW5jdGlvbihoYW5kbGVyKTtcbiAgICB2YXIgYXJncyA9IGFycmF5U2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgYXBwbHkoZm4sIHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfTtcbiAgICBkZWZlcihjb3VudGVyKTtcbiAgICByZXR1cm4gY291bnRlcjtcbiAgfTtcbiAgY2xlYXIgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCkge1xuICAgIGRlbGV0ZSBxdWV1ZVtpZF07XG4gIH07XG4gIC8vIE5vZGUuanMgMC44LVxuICBpZiAoSVNfTk9ERSkge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKHJ1bm5lcihpZCkpO1xuICAgIH07XG4gIC8vIFNwaGVyZSAoSlMgZ2FtZSBlbmdpbmUpIERpc3BhdGNoIEFQSVxuICB9IGVsc2UgaWYgKERpc3BhdGNoICYmIERpc3BhdGNoLm5vdykge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBEaXNwYXRjaC5ub3cocnVubmVyKGlkKSk7XG4gICAgfTtcbiAgLy8gQnJvd3NlcnMgd2l0aCBNZXNzYWdlQ2hhbm5lbCwgaW5jbHVkZXMgV2ViV29ya2Vyc1xuICAvLyBleGNlcHQgaU9TIC0gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzYyNFxuICB9IGVsc2UgaWYgKE1lc3NhZ2VDaGFubmVsICYmICFJU19JT1MpIHtcbiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgcG9ydCA9IGNoYW5uZWwucG9ydDI7XG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBldmVudExpc3RlbmVyO1xuICAgIGRlZmVyID0gYmluZChwb3J0LnBvc3RNZXNzYWdlLCBwb3J0KTtcbiAgLy8gQnJvd3NlcnMgd2l0aCBwb3N0TWVzc2FnZSwgc2tpcCBXZWJXb3JrZXJzXG4gIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnXG4gIH0gZWxzZSBpZiAoXG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgJiZcbiAgICBpc0NhbGxhYmxlKGdsb2JhbC5wb3N0TWVzc2FnZSkgJiZcbiAgICAhZ2xvYmFsLmltcG9ydFNjcmlwdHMgJiZcbiAgICAkbG9jYXRpb24gJiYgJGxvY2F0aW9uLnByb3RvY29sICE9PSAnZmlsZTonICYmXG4gICAgIWZhaWxzKGdsb2JhbFBvc3RNZXNzYWdlRGVmZXIpXG4gICkge1xuICAgIGRlZmVyID0gZ2xvYmFsUG9zdE1lc3NhZ2VEZWZlcjtcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcbiAgLy8gSUU4LVxuICB9IGVsc2UgaWYgKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBodG1sLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICBydW4oaWQpO1xuICAgICAgfTtcbiAgICB9O1xuICAvLyBSZXN0IG9sZCBicm93c2Vyc1xuICB9IGVsc2Uge1xuICAgIGRlZmVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBzZXRUaW1lb3V0KHJ1bm5lcihpZCksIDApO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogc2V0LFxuICBjbGVhcjogY2xlYXJcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdG9JbnRlZ2VyT3JJbmZpbml0eSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1pbnRlZ2VyLW9yLWluZmluaXR5Jyk7XG5cbnZhciBtYXggPSBNYXRoLm1heDtcbnZhciBtaW4gPSBNYXRoLm1pbjtcblxuLy8gSGVscGVyIGZvciBhIHBvcHVsYXIgcmVwZWF0aW5nIGNhc2Ugb2YgdGhlIHNwZWM6XG4vLyBMZXQgaW50ZWdlciBiZSA/IFRvSW50ZWdlcihpbmRleCkuXG4vLyBJZiBpbnRlZ2VyIDwgMCwgbGV0IHJlc3VsdCBiZSBtYXgoKGxlbmd0aCArIGludGVnZXIpLCAwKTsgZWxzZSBsZXQgcmVzdWx0IGJlIG1pbihpbnRlZ2VyLCBsZW5ndGgpLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xuICB2YXIgaW50ZWdlciA9IHRvSW50ZWdlck9ySW5maW5pdHkoaW5kZXgpO1xuICByZXR1cm4gaW50ZWdlciA8IDAgPyBtYXgoaW50ZWdlciArIGxlbmd0aCwgMCkgOiBtaW4oaW50ZWdlciwgbGVuZ3RoKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG4vLyB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5nc1xudmFyIEluZGV4ZWRPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaW5kZXhlZC1vYmplY3QnKTtcbnZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlcXVpcmUtb2JqZWN0LWNvZXJjaWJsZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gSW5kZXhlZE9iamVjdChyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGl0KSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHRydW5jID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL21hdGgtdHJ1bmMnKTtcblxuLy8gYFRvSW50ZWdlck9ySW5maW5pdHlgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy10b2ludGVnZXJvcmluZmluaXR5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICB2YXIgbnVtYmVyID0gK2FyZ3VtZW50O1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlIC0tIE5hTiBjaGVja1xuICByZXR1cm4gbnVtYmVyICE9PSBudW1iZXIgfHwgbnVtYmVyID09PSAwID8gMCA6IHRydW5jKG51bWJlcik7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHRvSW50ZWdlck9ySW5maW5pdHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8taW50ZWdlci1vci1pbmZpbml0eScpO1xuXG52YXIgbWluID0gTWF0aC5taW47XG5cbi8vIGBUb0xlbmd0aGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXRvbGVuZ3RoXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gYXJndW1lbnQgPiAwID8gbWluKHRvSW50ZWdlck9ySW5maW5pdHkoYXJndW1lbnQpLCAweDFGRkZGRkZGRkZGRkZGKSA6IDA7IC8vIDIgKiogNTMgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcblxudmFyICRPYmplY3QgPSBPYmplY3Q7XG5cbi8vIGBUb09iamVjdGAgYWJzdHJhY3Qgb3BlcmF0aW9uXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXRvb2JqZWN0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICByZXR1cm4gJE9iamVjdChyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW9iamVjdCcpO1xudmFyIGlzU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXN5bWJvbCcpO1xudmFyIGdldE1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtbWV0aG9kJyk7XG52YXIgb3JkaW5hcnlUb1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vcmRpbmFyeS10by1wcmltaXRpdmUnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcblxudmFyICRUeXBlRXJyb3IgPSBUeXBlRXJyb3I7XG52YXIgVE9fUFJJTUlUSVZFID0gd2VsbEtub3duU3ltYm9sKCd0b1ByaW1pdGl2ZScpO1xuXG4vLyBgVG9QcmltaXRpdmVgIGFic3RyYWN0IG9wZXJhdGlvblxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy10b3ByaW1pdGl2ZVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5wdXQsIHByZWYpIHtcbiAgaWYgKCFpc09iamVjdChpbnB1dCkgfHwgaXNTeW1ib2woaW5wdXQpKSByZXR1cm4gaW5wdXQ7XG4gIHZhciBleG90aWNUb1ByaW0gPSBnZXRNZXRob2QoaW5wdXQsIFRPX1BSSU1JVElWRSk7XG4gIHZhciByZXN1bHQ7XG4gIGlmIChleG90aWNUb1ByaW0pIHtcbiAgICBpZiAocHJlZiA9PT0gdW5kZWZpbmVkKSBwcmVmID0gJ2RlZmF1bHQnO1xuICAgIHJlc3VsdCA9IGNhbGwoZXhvdGljVG9QcmltLCBpbnB1dCwgcHJlZik7XG4gICAgaWYgKCFpc09iamVjdChyZXN1bHQpIHx8IGlzU3ltYm9sKHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgdGhyb3cgJFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKTtcbiAgfVxuICBpZiAocHJlZiA9PT0gdW5kZWZpbmVkKSBwcmVmID0gJ251bWJlcic7XG4gIHJldHVybiBvcmRpbmFyeVRvUHJpbWl0aXZlKGlucHV0LCBwcmVmKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tcHJpbWl0aXZlJyk7XG52YXIgaXNTeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtc3ltYm9sJyk7XG5cbi8vIGBUb1Byb3BlcnR5S2V5YCBhYnN0cmFjdCBvcGVyYXRpb25cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtdG9wcm9wZXJ0eWtleVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgdmFyIGtleSA9IHRvUHJpbWl0aXZlKGFyZ3VtZW50LCAnc3RyaW5nJyk7XG4gIHJldHVybiBpc1N5bWJvbChrZXkpID8ga2V5IDoga2V5ICsgJyc7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHdlbGxLbm93blN5bWJvbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy93ZWxsLWtub3duLXN5bWJvbCcpO1xuXG52YXIgVE9fU1RSSU5HX1RBRyA9IHdlbGxLbm93blN5bWJvbCgndG9TdHJpbmdUYWcnKTtcbnZhciB0ZXN0ID0ge307XG5cbnRlc3RbVE9fU1RSSU5HX1RBR10gPSAneic7XG5cbm1vZHVsZS5leHBvcnRzID0gU3RyaW5nKHRlc3QpID09PSAnW29iamVjdCB6XSc7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jbGFzc29mJyk7XG5cbnZhciAkU3RyaW5nID0gU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICBpZiAoY2xhc3NvZihhcmd1bWVudCkgPT09ICdTeW1ib2wnKSB0aHJvdyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGEgU3ltYm9sIHZhbHVlIHRvIGEgc3RyaW5nJyk7XG4gIHJldHVybiAkU3RyaW5nKGFyZ3VtZW50KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJFN0cmluZyA9IFN0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gJFN0cmluZyhhcmd1bWVudCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuICdPYmplY3QnO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xuXG52YXIgaWQgPSAwO1xudmFyIHBvc3RmaXggPSBNYXRoLnJhbmRvbSgpO1xudmFyIHRvU3RyaW5nID0gdW5jdXJyeVRoaXMoMS4wLnRvU3RyaW5nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiAnU3ltYm9sKCcgKyAoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSkgKyAnKV8nICsgdG9TdHJpbmcoKytpZCArIHBvc3RmaXgsIDM2KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG4vKiBlc2xpbnQtZGlzYWJsZSBlcy9uby1zeW1ib2wgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmcgKi9cbnZhciBOQVRJVkVfU1lNQk9MID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3N5bWJvbC1jb25zdHJ1Y3Rvci1kZXRlY3Rpb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBOQVRJVkVfU1lNQk9MXG4gICYmICFTeW1ib2wuc2hhbVxuICAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09ICdzeW1ib2wnO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcblxuLy8gVjggfiBDaHJvbWUgMzYtXG4vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMzM0XG5tb2R1bGUuZXhwb3J0cyA9IERFU0NSSVBUT1JTICYmIGZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzL25vLW9iamVjdC1kZWZpbmVwcm9wZXJ0eSAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGZ1bmN0aW9uICgpIHsgLyogZW1wdHkgKi8gfSwgJ3Byb3RvdHlwZScsIHtcbiAgICB2YWx1ZTogNDIsXG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pLnByb3RvdHlwZSAhPT0gNDI7XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkVHlwZUVycm9yID0gVHlwZUVycm9yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwYXNzZWQsIHJlcXVpcmVkKSB7XG4gIGlmIChwYXNzZWQgPCByZXF1aXJlZCkgdGhyb3cgJFR5cGVFcnJvcignTm90IGVub3VnaCBhcmd1bWVudHMnKTtcbiAgcmV0dXJuIHBhc3NlZDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcblxudmFyIFdlYWtNYXAgPSBnbG9iYWwuV2Vha01hcDtcblxubW9kdWxlLmV4cG9ydHMgPSBpc0NhbGxhYmxlKFdlYWtNYXApICYmIC9uYXRpdmUgY29kZS8udGVzdChTdHJpbmcoV2Vha01hcCkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nbG9iYWwnKTtcbnZhciBzaGFyZWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2hhcmVkJyk7XG52YXIgaGFzT3duID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2hhcy1vd24tcHJvcGVydHknKTtcbnZhciB1aWQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdWlkJyk7XG52YXIgTkFUSVZFX1NZTUJPTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zeW1ib2wtY29uc3RydWN0b3ItZGV0ZWN0aW9uJyk7XG52YXIgVVNFX1NZTUJPTF9BU19VSUQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdXNlLXN5bWJvbC1hcy11aWQnKTtcblxudmFyIFN5bWJvbCA9IGdsb2JhbC5TeW1ib2w7XG52YXIgV2VsbEtub3duU3ltYm9sc1N0b3JlID0gc2hhcmVkKCd3a3MnKTtcbnZhciBjcmVhdGVXZWxsS25vd25TeW1ib2wgPSBVU0VfU1lNQk9MX0FTX1VJRCA/IFN5bWJvbFsnZm9yJ10gfHwgU3ltYm9sIDogU3ltYm9sICYmIFN5bWJvbC53aXRob3V0U2V0dGVyIHx8IHVpZDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobmFtZSkge1xuICBpZiAoIWhhc093bihXZWxsS25vd25TeW1ib2xzU3RvcmUsIG5hbWUpKSB7XG4gICAgV2VsbEtub3duU3ltYm9sc1N0b3JlW25hbWVdID0gTkFUSVZFX1NZTUJPTCAmJiBoYXNPd24oU3ltYm9sLCBuYW1lKVxuICAgICAgPyBTeW1ib2xbbmFtZV1cbiAgICAgIDogY3JlYXRlV2VsbEtub3duU3ltYm9sKCdTeW1ib2wuJyArIG5hbWUpO1xuICB9IHJldHVybiBXZWxsS25vd25TeW1ib2xzU3RvcmVbbmFtZV07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWFycmF5Jyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtb2JqZWN0Jyk7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tb2JqZWN0Jyk7XG52YXIgbGVuZ3RoT2ZBcnJheUxpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbGVuZ3RoLW9mLWFycmF5LWxpa2UnKTtcbnZhciBkb2VzTm90RXhjZWVkU2FmZUludGVnZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZG9lcy1ub3QtZXhjZWVkLXNhZmUtaW50ZWdlcicpO1xudmFyIGNyZWF0ZVByb3BlcnR5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2NyZWF0ZS1wcm9wZXJ0eScpO1xudmFyIGFycmF5U3BlY2llc0NyZWF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1zcGVjaWVzLWNyZWF0ZScpO1xudmFyIGFycmF5TWV0aG9kSGFzU3BlY2llc1N1cHBvcnQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktbWV0aG9kLWhhcy1zcGVjaWVzLXN1cHBvcnQnKTtcbnZhciB3ZWxsS25vd25TeW1ib2wgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvd2VsbC1rbm93bi1zeW1ib2wnKTtcbnZhciBWOF9WRVJTSU9OID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS12OC12ZXJzaW9uJyk7XG5cbnZhciBJU19DT05DQVRfU1BSRUFEQUJMRSA9IHdlbGxLbm93blN5bWJvbCgnaXNDb25jYXRTcHJlYWRhYmxlJyk7XG5cbi8vIFdlIGNhbid0IHVzZSB0aGlzIGZlYXR1cmUgZGV0ZWN0aW9uIGluIFY4IHNpbmNlIGl0IGNhdXNlc1xuLy8gZGVvcHRpbWl6YXRpb24gYW5kIHNlcmlvdXMgcGVyZm9ybWFuY2UgZGVncmFkYXRpb25cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy82NzlcbnZhciBJU19DT05DQVRfU1BSRUFEQUJMRV9TVVBQT1JUID0gVjhfVkVSU0lPTiA+PSA1MSB8fCAhZmFpbHMoZnVuY3Rpb24gKCkge1xuICB2YXIgYXJyYXkgPSBbXTtcbiAgYXJyYXlbSVNfQ09OQ0FUX1NQUkVBREFCTEVdID0gZmFsc2U7XG4gIHJldHVybiBhcnJheS5jb25jYXQoKVswXSAhPT0gYXJyYXk7XG59KTtcblxudmFyIGlzQ29uY2F0U3ByZWFkYWJsZSA9IGZ1bmN0aW9uIChPKSB7XG4gIGlmICghaXNPYmplY3QoTykpIHJldHVybiBmYWxzZTtcbiAgdmFyIHNwcmVhZGFibGUgPSBPW0lTX0NPTkNBVF9TUFJFQURBQkxFXTtcbiAgcmV0dXJuIHNwcmVhZGFibGUgIT09IHVuZGVmaW5lZCA/ICEhc3ByZWFkYWJsZSA6IGlzQXJyYXkoTyk7XG59O1xuXG52YXIgRk9SQ0VEID0gIUlTX0NPTkNBVF9TUFJFQURBQkxFX1NVUFBPUlQgfHwgIWFycmF5TWV0aG9kSGFzU3BlY2llc1N1cHBvcnQoJ2NvbmNhdCcpO1xuXG4vLyBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5jb25jYXRcbi8vIHdpdGggYWRkaW5nIHN1cHBvcnQgb2YgQEBpc0NvbmNhdFNwcmVhZGFibGUgYW5kIEBAc3BlY2llc1xuJCh7IHRhcmdldDogJ0FycmF5JywgcHJvdG86IHRydWUsIGFyaXR5OiAxLCBmb3JjZWQ6IEZPUkNFRCB9LCB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAtLSByZXF1aXJlZCBmb3IgYC5sZW5ndGhgXG4gIGNvbmNhdDogZnVuY3Rpb24gY29uY2F0KGFyZykge1xuICAgIHZhciBPID0gdG9PYmplY3QodGhpcyk7XG4gICAgdmFyIEEgPSBhcnJheVNwZWNpZXNDcmVhdGUoTywgMCk7XG4gICAgdmFyIG4gPSAwO1xuICAgIHZhciBpLCBrLCBsZW5ndGgsIGxlbiwgRTtcbiAgICBmb3IgKGkgPSAtMSwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBFID0gaSA9PT0gLTEgPyBPIDogYXJndW1lbnRzW2ldO1xuICAgICAgaWYgKGlzQ29uY2F0U3ByZWFkYWJsZShFKSkge1xuICAgICAgICBsZW4gPSBsZW5ndGhPZkFycmF5TGlrZShFKTtcbiAgICAgICAgZG9lc05vdEV4Y2VlZFNhZmVJbnRlZ2VyKG4gKyBsZW4pO1xuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbGVuOyBrKyssIG4rKykgaWYgKGsgaW4gRSkgY3JlYXRlUHJvcGVydHkoQSwgbiwgRVtrXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2VzTm90RXhjZWVkU2FmZUludGVnZXIobiArIDEpO1xuICAgICAgICBjcmVhdGVQcm9wZXJ0eShBLCBuKyssIEUpO1xuICAgICAgfVxuICAgIH1cbiAgICBBLmxlbmd0aCA9IG47XG4gICAgcmV0dXJuIEE7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIFRPX1NUUklOR19UQUdfU1VQUE9SVCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy90by1zdHJpbmctdGFnLXN1cHBvcnQnKTtcbnZhciBkZWZpbmVCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RlZmluZS1idWlsdC1pbicpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC10by1zdHJpbmcnKTtcblxuLy8gYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgIG1ldGhvZFxuLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nXG5pZiAoIVRPX1NUUklOR19UQUdfU1VQUE9SVCkge1xuICBkZWZpbmVCdWlsdEluKE9iamVjdC5wcm90b3R5cGUsICd0b1N0cmluZycsIHRvU3RyaW5nLCB7IHVuc2FmZTogdHJ1ZSB9KTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcbnZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGFDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hLWNhbGxhYmxlJyk7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmV3LXByb21pc2UtY2FwYWJpbGl0eScpO1xudmFyIHBlcmZvcm0gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcGVyZm9ybScpO1xudmFyIGl0ZXJhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXRlcmF0ZScpO1xudmFyIFBST01JU0VfU1RBVElDU19JTkNPUlJFQ1RfSVRFUkFUSU9OID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Byb21pc2Utc3RhdGljcy1pbmNvcnJlY3QtaXRlcmF0aW9uJyk7XG5cbi8vIGBQcm9taXNlLmFsbGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UuYWxsXG4kKHsgdGFyZ2V0OiAnUHJvbWlzZScsIHN0YXQ6IHRydWUsIGZvcmNlZDogUFJPTUlTRV9TVEFUSUNTX0lOQ09SUkVDVF9JVEVSQVRJT04gfSwge1xuICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSkge1xuICAgIHZhciBDID0gdGhpcztcbiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmYoQyk7XG4gICAgdmFyIHJlc29sdmUgPSBjYXBhYmlsaXR5LnJlc29sdmU7XG4gICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkcHJvbWlzZVJlc29sdmUgPSBhQ2FsbGFibGUoQy5yZXNvbHZlKTtcbiAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgIHZhciByZW1haW5pbmcgPSAxO1xuICAgICAgaXRlcmF0ZShpdGVyYWJsZSwgZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gY291bnRlcisrO1xuICAgICAgICB2YXIgYWxyZWFkeUNhbGxlZCA9IGZhbHNlO1xuICAgICAgICByZW1haW5pbmcrKztcbiAgICAgICAgY2FsbCgkcHJvbWlzZVJlc29sdmUsIEMsIHByb21pc2UpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKGFscmVhZHlDYWxsZWQpIHJldHVybjtcbiAgICAgICAgICBhbHJlYWR5Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7XG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5lcnJvcikgcmVqZWN0KHJlc3VsdC52YWx1ZSk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBJU19QVVJFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXB1cmUnKTtcbnZhciBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm9taXNlLWNvbnN0cnVjdG9yLWRldGVjdGlvbicpLkNPTlNUUlVDVE9SO1xudmFyIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm9taXNlLW5hdGl2ZS1jb25zdHJ1Y3RvcicpO1xudmFyIGdldEJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZ2V0LWJ1aWx0LWluJyk7XG52YXIgaXNDYWxsYWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1jYWxsYWJsZScpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG5cbnZhciBOYXRpdmVQcm9taXNlUHJvdG90eXBlID0gTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yICYmIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cbi8vIGBQcm9taXNlLnByb3RvdHlwZS5jYXRjaGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UucHJvdG90eXBlLmNhdGNoXG4kKHsgdGFyZ2V0OiAnUHJvbWlzZScsIHByb3RvOiB0cnVlLCBmb3JjZWQ6IEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SLCByZWFsOiB0cnVlIH0sIHtcbiAgJ2NhdGNoJzogZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7XG4gIH1cbn0pO1xuXG4vLyBtYWtlcyBzdXJlIHRoYXQgbmF0aXZlIHByb21pc2UtYmFzZWQgQVBJcyBgUHJvbWlzZSNjYXRjaGAgcHJvcGVybHkgd29ya3Mgd2l0aCBwYXRjaGVkIGBQcm9taXNlI3RoZW5gXG5pZiAoIUlTX1BVUkUgJiYgaXNDYWxsYWJsZShOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IpKSB7XG4gIHZhciBtZXRob2QgPSBnZXRCdWlsdEluKCdQcm9taXNlJykucHJvdG90eXBlWydjYXRjaCddO1xuICBpZiAoTmF0aXZlUHJvbWlzZVByb3RvdHlwZVsnY2F0Y2gnXSAhPT0gbWV0aG9kKSB7XG4gICAgZGVmaW5lQnVpbHRJbihOYXRpdmVQcm9taXNlUHJvdG90eXBlLCAnY2F0Y2gnLCBtZXRob2QsIHsgdW5zYWZlOiB0cnVlIH0pO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBJU19QVVJFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLXB1cmUnKTtcbnZhciBJU19OT0RFID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2VuZ2luZS1pcy1ub2RlJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvb2JqZWN0LXNldC1wcm90b3R5cGUtb2YnKTtcbnZhciBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9zZXQtdG8tc3RyaW5nLXRhZycpO1xudmFyIHNldFNwZWNpZXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc2V0LXNwZWNpZXMnKTtcbnZhciBhQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYS1jYWxsYWJsZScpO1xudmFyIGlzQ2FsbGFibGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtY2FsbGFibGUnKTtcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1vYmplY3QnKTtcbnZhciBhbkluc3RhbmNlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLWluc3RhbmNlJyk7XG52YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NwZWNpZXMtY29uc3RydWN0b3InKTtcbnZhciB0YXNrID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Rhc2snKS5zZXQ7XG52YXIgbWljcm90YXNrID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL21pY3JvdGFzaycpO1xudmFyIGhvc3RSZXBvcnRFcnJvcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaG9zdC1yZXBvcnQtZXJyb3JzJyk7XG52YXIgcGVyZm9ybSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wZXJmb3JtJyk7XG52YXIgUXVldWUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcXVldWUnKTtcbnZhciBJbnRlcm5hbFN0YXRlTW9kdWxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJyk7XG52YXIgTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Byb21pc2UtbmF0aXZlLWNvbnN0cnVjdG9yJyk7XG52YXIgUHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Byb21pc2UtY29uc3RydWN0b3ItZGV0ZWN0aW9uJyk7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmV3LXByb21pc2UtY2FwYWJpbGl0eScpO1xuXG52YXIgUFJPTUlTRSA9ICdQcm9taXNlJztcbnZhciBGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUiA9IFByb21pc2VDb25zdHJ1Y3RvckRldGVjdGlvbi5DT05TVFJVQ1RPUjtcbnZhciBOQVRJVkVfUFJPTUlTRV9SRUpFQ1RJT05fRVZFTlQgPSBQcm9taXNlQ29uc3RydWN0b3JEZXRlY3Rpb24uUkVKRUNUSU9OX0VWRU5UO1xudmFyIE5BVElWRV9QUk9NSVNFX1NVQkNMQVNTSU5HID0gUHJvbWlzZUNvbnN0cnVjdG9yRGV0ZWN0aW9uLlNVQkNMQVNTSU5HO1xudmFyIGdldEludGVybmFsUHJvbWlzZVN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5nZXR0ZXJGb3IoUFJPTUlTRSk7XG52YXIgc2V0SW50ZXJuYWxTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUuc2V0O1xudmFyIE5hdGl2ZVByb21pc2VQcm90b3R5cGUgPSBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3IgJiYgTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbnZhciBQcm9taXNlQ29uc3RydWN0b3IgPSBOYXRpdmVQcm9taXNlQ29uc3RydWN0b3I7XG52YXIgUHJvbWlzZVByb3RvdHlwZSA9IE5hdGl2ZVByb21pc2VQcm90b3R5cGU7XG52YXIgVHlwZUVycm9yID0gZ2xvYmFsLlR5cGVFcnJvcjtcbnZhciBkb2N1bWVudCA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZS5mO1xudmFyIG5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5O1xuXG52YXIgRElTUEFUQ0hfRVZFTlQgPSAhIShkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFdmVudCAmJiBnbG9iYWwuZGlzcGF0Y2hFdmVudCk7XG52YXIgVU5IQU5ETEVEX1JFSkVDVElPTiA9ICd1bmhhbmRsZWRyZWplY3Rpb24nO1xudmFyIFJFSkVDVElPTl9IQU5ETEVEID0gJ3JlamVjdGlvbmhhbmRsZWQnO1xudmFyIFBFTkRJTkcgPSAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xudmFyIEhBTkRMRUQgPSAxO1xudmFyIFVOSEFORExFRCA9IDI7XG5cbnZhciBJbnRlcm5hbCwgT3duUHJvbWlzZUNhcGFiaWxpdHksIFByb21pc2VXcmFwcGVyLCBuYXRpdmVUaGVuO1xuXG4vLyBoZWxwZXJzXG52YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uIChpdCkge1xuICB2YXIgdGhlbjtcbiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiBpc0NhbGxhYmxlKHRoZW4gPSBpdC50aGVuKSA/IHRoZW4gOiBmYWxzZTtcbn07XG5cbnZhciBjYWxsUmVhY3Rpb24gPSBmdW5jdGlvbiAocmVhY3Rpb24sIHN0YXRlKSB7XG4gIHZhciB2YWx1ZSA9IHN0YXRlLnZhbHVlO1xuICB2YXIgb2sgPSBzdGF0ZS5zdGF0ZSA9PT0gRlVMRklMTEVEO1xuICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsO1xuICB2YXIgcmVzb2x2ZSA9IHJlYWN0aW9uLnJlc29sdmU7XG4gIHZhciByZWplY3QgPSByZWFjdGlvbi5yZWplY3Q7XG4gIHZhciBkb21haW4gPSByZWFjdGlvbi5kb21haW47XG4gIHZhciByZXN1bHQsIHRoZW4sIGV4aXRlZDtcbiAgdHJ5IHtcbiAgICBpZiAoaGFuZGxlcikge1xuICAgICAgaWYgKCFvaykge1xuICAgICAgICBpZiAoc3RhdGUucmVqZWN0aW9uID09PSBVTkhBTkRMRUQpIG9uSGFuZGxlVW5oYW5kbGVkKHN0YXRlKTtcbiAgICAgICAgc3RhdGUucmVqZWN0aW9uID0gSEFORExFRDtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVyID09PSB0cnVlKSByZXN1bHQgPSB2YWx1ZTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoZG9tYWluKSBkb21haW4uZW50ZXIoKTtcbiAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7IC8vIGNhbiB0aHJvd1xuICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgZG9tYWluLmV4aXQoKTtcbiAgICAgICAgICBleGl0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKSB7XG4gICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7XG4gICAgICB9IGVsc2UgaWYgKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpIHtcbiAgICAgICAgY2FsbCh0aGVuLCByZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpO1xuICAgIH0gZWxzZSByZWplY3QodmFsdWUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChkb21haW4gJiYgIWV4aXRlZCkgZG9tYWluLmV4aXQoKTtcbiAgICByZWplY3QoZXJyb3IpO1xuICB9XG59O1xuXG52YXIgbm90aWZ5ID0gZnVuY3Rpb24gKHN0YXRlLCBpc1JlamVjdCkge1xuICBpZiAoc3RhdGUubm90aWZpZWQpIHJldHVybjtcbiAgc3RhdGUubm90aWZpZWQgPSB0cnVlO1xuICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgIHZhciByZWFjdGlvbnMgPSBzdGF0ZS5yZWFjdGlvbnM7XG4gICAgdmFyIHJlYWN0aW9uO1xuICAgIHdoaWxlIChyZWFjdGlvbiA9IHJlYWN0aW9ucy5nZXQoKSkge1xuICAgICAgY2FsbFJlYWN0aW9uKHJlYWN0aW9uLCBzdGF0ZSk7XG4gICAgfVxuICAgIHN0YXRlLm5vdGlmaWVkID0gZmFsc2U7XG4gICAgaWYgKGlzUmVqZWN0ICYmICFzdGF0ZS5yZWplY3Rpb24pIG9uVW5oYW5kbGVkKHN0YXRlKTtcbiAgfSk7XG59O1xuXG52YXIgZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChuYW1lLCBwcm9taXNlLCByZWFzb24pIHtcbiAgdmFyIGV2ZW50LCBoYW5kbGVyO1xuICBpZiAoRElTUEFUQ0hfRVZFTlQpIHtcbiAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGV2ZW50LnByb21pc2UgPSBwcm9taXNlO1xuICAgIGV2ZW50LnJlYXNvbiA9IHJlYXNvbjtcbiAgICBldmVudC5pbml0RXZlbnQobmFtZSwgZmFsc2UsIHRydWUpO1xuICAgIGdsb2JhbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSBlbHNlIGV2ZW50ID0geyBwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHJlYXNvbiB9O1xuICBpZiAoIU5BVElWRV9QUk9NSVNFX1JFSkVDVElPTl9FVkVOVCAmJiAoaGFuZGxlciA9IGdsb2JhbFsnb24nICsgbmFtZV0pKSBoYW5kbGVyKGV2ZW50KTtcbiAgZWxzZSBpZiAobmFtZSA9PT0gVU5IQU5ETEVEX1JFSkVDVElPTikgaG9zdFJlcG9ydEVycm9ycygnVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgcmVhc29uKTtcbn07XG5cbnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICBjYWxsKHRhc2ssIGdsb2JhbCwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9taXNlID0gc3RhdGUuZmFjYWRlO1xuICAgIHZhciB2YWx1ZSA9IHN0YXRlLnZhbHVlO1xuICAgIHZhciBJU19VTkhBTkRMRUQgPSBpc1VuaGFuZGxlZChzdGF0ZSk7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAoSVNfVU5IQU5ETEVEKSB7XG4gICAgICByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKElTX05PREUpIHtcbiAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIGRpc3BhdGNoRXZlbnQoVU5IQU5ETEVEX1JFSkVDVElPTiwgcHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSk7XG4gICAgICAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZFxuICAgICAgc3RhdGUucmVqZWN0aW9uID0gSVNfTk9ERSB8fCBpc1VuaGFuZGxlZChzdGF0ZSkgPyBVTkhBTkRMRUQgOiBIQU5ETEVEO1xuICAgICAgaWYgKHJlc3VsdC5lcnJvcikgdGhyb3cgcmVzdWx0LnZhbHVlO1xuICAgIH1cbiAgfSk7XG59O1xuXG52YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLnJlamVjdGlvbiAhPT0gSEFORExFRCAmJiAhc3RhdGUucGFyZW50O1xufTtcblxudmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gIGNhbGwodGFzaywgZ2xvYmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb21pc2UgPSBzdGF0ZS5mYWNhZGU7XG4gICAgaWYgKElTX05PREUpIHtcbiAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpO1xuICAgIH0gZWxzZSBkaXNwYXRjaEV2ZW50KFJFSkVDVElPTl9IQU5ETEVELCBwcm9taXNlLCBzdGF0ZS52YWx1ZSk7XG4gIH0pO1xufTtcblxudmFyIGJpbmQgPSBmdW5jdGlvbiAoZm4sIHN0YXRlLCB1bndyYXApIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGZuKHN0YXRlLCB2YWx1ZSwgdW53cmFwKTtcbiAgfTtcbn07XG5cbnZhciBpbnRlcm5hbFJlamVjdCA9IGZ1bmN0aW9uIChzdGF0ZSwgdmFsdWUsIHVud3JhcCkge1xuICBpZiAoc3RhdGUuZG9uZSkgcmV0dXJuO1xuICBzdGF0ZS5kb25lID0gdHJ1ZTtcbiAgaWYgKHVud3JhcCkgc3RhdGUgPSB1bndyYXA7XG4gIHN0YXRlLnZhbHVlID0gdmFsdWU7XG4gIHN0YXRlLnN0YXRlID0gUkVKRUNURUQ7XG4gIG5vdGlmeShzdGF0ZSwgdHJ1ZSk7XG59O1xuXG52YXIgaW50ZXJuYWxSZXNvbHZlID0gZnVuY3Rpb24gKHN0YXRlLCB2YWx1ZSwgdW53cmFwKSB7XG4gIGlmIChzdGF0ZS5kb25lKSByZXR1cm47XG4gIHN0YXRlLmRvbmUgPSB0cnVlO1xuICBpZiAodW53cmFwKSBzdGF0ZSA9IHVud3JhcDtcbiAgdHJ5IHtcbiAgICBpZiAoc3RhdGUuZmFjYWRlID09PSB2YWx1ZSkgdGhyb3cgVHlwZUVycm9yKFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7XG4gICAgdmFyIHRoZW4gPSBpc1RoZW5hYmxlKHZhbHVlKTtcbiAgICBpZiAodGhlbikge1xuICAgICAgbWljcm90YXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB7IGRvbmU6IGZhbHNlIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2FsbCh0aGVuLCB2YWx1ZSxcbiAgICAgICAgICAgIGJpbmQoaW50ZXJuYWxSZXNvbHZlLCB3cmFwcGVyLCBzdGF0ZSksXG4gICAgICAgICAgICBiaW5kKGludGVybmFsUmVqZWN0LCB3cmFwcGVyLCBzdGF0ZSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGludGVybmFsUmVqZWN0KHdyYXBwZXIsIGVycm9yLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgc3RhdGUuc3RhdGUgPSBGVUxGSUxMRUQ7XG4gICAgICBub3RpZnkoc3RhdGUsIGZhbHNlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaW50ZXJuYWxSZWplY3QoeyBkb25lOiBmYWxzZSB9LCBlcnJvciwgc3RhdGUpO1xuICB9XG59O1xuXG4vLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbFxuaWYgKEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SKSB7XG4gIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpXG4gIFByb21pc2VDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHtcbiAgICBhbkluc3RhbmNlKHRoaXMsIFByb21pc2VQcm90b3R5cGUpO1xuICAgIGFDYWxsYWJsZShleGVjdXRvcik7XG4gICAgY2FsbChJbnRlcm5hbCwgdGhpcyk7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxQcm9taXNlU3RhdGUodGhpcyk7XG4gICAgdHJ5IHtcbiAgICAgIGV4ZWN1dG9yKGJpbmQoaW50ZXJuYWxSZXNvbHZlLCBzdGF0ZSksIGJpbmQoaW50ZXJuYWxSZWplY3QsIHN0YXRlKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGludGVybmFsUmVqZWN0KHN0YXRlLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIFByb21pc2VQcm90b3R5cGUgPSBQcm9taXNlQ29uc3RydWN0b3IucHJvdG90eXBlO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycyAtLSByZXF1aXJlZCBmb3IgYC5sZW5ndGhgXG4gIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikge1xuICAgIHNldEludGVybmFsU3RhdGUodGhpcywge1xuICAgICAgdHlwZTogUFJPTUlTRSxcbiAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgbm90aWZpZWQ6IGZhbHNlLFxuICAgICAgcGFyZW50OiBmYWxzZSxcbiAgICAgIHJlYWN0aW9uczogbmV3IFF1ZXVlKCksXG4gICAgICByZWplY3Rpb246IGZhbHNlLFxuICAgICAgc3RhdGU6IFBFTkRJTkcsXG4gICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgfSk7XG4gIH07XG5cbiAgLy8gYFByb21pc2UucHJvdG90eXBlLnRoZW5gIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UucHJvdG90eXBlLnRoZW5cbiAgSW50ZXJuYWwucHJvdG90eXBlID0gZGVmaW5lQnVpbHRJbihQcm9taXNlUHJvdG90eXBlLCAndGhlbicsIGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFByb21pc2VTdGF0ZSh0aGlzKTtcbiAgICB2YXIgcmVhY3Rpb24gPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgUHJvbWlzZUNvbnN0cnVjdG9yKSk7XG4gICAgc3RhdGUucGFyZW50ID0gdHJ1ZTtcbiAgICByZWFjdGlvbi5vayA9IGlzQ2FsbGFibGUob25GdWxmaWxsZWQpID8gb25GdWxmaWxsZWQgOiB0cnVlO1xuICAgIHJlYWN0aW9uLmZhaWwgPSBpc0NhbGxhYmxlKG9uUmVqZWN0ZWQpICYmIG9uUmVqZWN0ZWQ7XG4gICAgcmVhY3Rpb24uZG9tYWluID0gSVNfTk9ERSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkO1xuICAgIGlmIChzdGF0ZS5zdGF0ZSA9PT0gUEVORElORykgc3RhdGUucmVhY3Rpb25zLmFkZChyZWFjdGlvbik7XG4gICAgZWxzZSBtaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbFJlYWN0aW9uKHJlYWN0aW9uLCBzdGF0ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7XG4gIH0pO1xuXG4gIE93blByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9taXNlID0gbmV3IEludGVybmFsKCk7XG4gICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxQcm9taXNlU3RhdGUocHJvbWlzZSk7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnJlc29sdmUgPSBiaW5kKGludGVybmFsUmVzb2x2ZSwgc3RhdGUpO1xuICAgIHRoaXMucmVqZWN0ID0gYmluZChpbnRlcm5hbFJlamVjdCwgc3RhdGUpO1xuICB9O1xuXG4gIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmYgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIChDKSB7XG4gICAgcmV0dXJuIEMgPT09IFByb21pc2VDb25zdHJ1Y3RvciB8fCBDID09PSBQcm9taXNlV3JhcHBlclxuICAgICAgPyBuZXcgT3duUHJvbWlzZUNhcGFiaWxpdHkoQylcbiAgICAgIDogbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpO1xuICB9O1xuXG4gIGlmICghSVNfUFVSRSAmJiBpc0NhbGxhYmxlKE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvcikgJiYgTmF0aXZlUHJvbWlzZVByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgIG5hdGl2ZVRoZW4gPSBOYXRpdmVQcm9taXNlUHJvdG90eXBlLnRoZW47XG5cbiAgICBpZiAoIU5BVElWRV9QUk9NSVNFX1NVQkNMQVNTSU5HKSB7XG4gICAgICAvLyBtYWtlIGBQcm9taXNlI3RoZW5gIHJldHVybiBhIHBvbHlmaWxsZWQgYFByb21pc2VgIGZvciBuYXRpdmUgcHJvbWlzZS1iYXNlZCBBUElzXG4gICAgICBkZWZpbmVCdWlsdEluKE5hdGl2ZVByb21pc2VQcm90b3R5cGUsICd0aGVuJywgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUNvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBjYWxsKG5hdGl2ZVRoZW4sIHRoYXQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzY0MFxuICAgICAgfSwgeyB1bnNhZmU6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBgLmNvbnN0cnVjdG9yID09PSBQcm9taXNlYCB3b3JrIGZvciBuYXRpdmUgcHJvbWlzZS1iYXNlZCBBUElzXG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSBOYXRpdmVQcm9taXNlUHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxuICAgIC8vIG1ha2UgYGluc3RhbmNlb2YgUHJvbWlzZWAgd29yayBmb3IgbmF0aXZlIHByb21pc2UtYmFzZWQgQVBJc1xuICAgIGlmIChzZXRQcm90b3R5cGVPZikge1xuICAgICAgc2V0UHJvdG90eXBlT2YoTmF0aXZlUHJvbWlzZVByb3RvdHlwZSwgUHJvbWlzZVByb3RvdHlwZSk7XG4gICAgfVxuICB9XG59XG5cbiQoeyBnbG9iYWw6IHRydWUsIGNvbnN0cnVjdG9yOiB0cnVlLCB3cmFwOiB0cnVlLCBmb3JjZWQ6IEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SIH0sIHtcbiAgUHJvbWlzZTogUHJvbWlzZUNvbnN0cnVjdG9yXG59KTtcblxuc2V0VG9TdHJpbmdUYWcoUHJvbWlzZUNvbnN0cnVjdG9yLCBQUk9NSVNFLCBmYWxzZSwgdHJ1ZSk7XG5zZXRTcGVjaWVzKFBST01JU0UpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gVE9ETzogUmVtb3ZlIHRoaXMgbW9kdWxlIGZyb20gYGNvcmUtanNANGAgc2luY2UgaXQncyBzcGxpdCB0byBtb2R1bGVzIGxpc3RlZCBiZWxvd1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lcy5wcm9taXNlLmNvbnN0cnVjdG9yJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzLnByb21pc2UuYWxsJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzLnByb21pc2UuY2F0Y2gnKTtcbnJlcXVpcmUoJy4uL21vZHVsZXMvZXMucHJvbWlzZS5yYWNlJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzLnByb21pc2UucmVqZWN0Jyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzLnByb21pc2UucmVzb2x2ZScpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgYUNhbGxhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2EtY2FsbGFibGUnKTtcbnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9uZXctcHJvbWlzZS1jYXBhYmlsaXR5Jyk7XG52YXIgcGVyZm9ybSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wZXJmb3JtJyk7XG52YXIgaXRlcmF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pdGVyYXRlJyk7XG52YXIgUFJPTUlTRV9TVEFUSUNTX0lOQ09SUkVDVF9JVEVSQVRJT04gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcHJvbWlzZS1zdGF0aWNzLWluY29ycmVjdC1pdGVyYXRpb24nKTtcblxuLy8gYFByb21pc2UucmFjZWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UucmFjZVxuJCh7IHRhcmdldDogJ1Byb21pc2UnLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IFBST01JU0VfU1RBVElDU19JTkNPUlJFQ1RfSVRFUkFUSU9OIH0sIHtcbiAgcmFjZTogZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xuICAgIHZhciBDID0gdGhpcztcbiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmYoQyk7XG4gICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkcHJvbWlzZVJlc29sdmUgPSBhQ2FsbGFibGUoQy5yZXNvbHZlKTtcbiAgICAgIGl0ZXJhdGUoaXRlcmFibGUsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgIGNhbGwoJHByb21pc2VSZXNvbHZlLCBDLCBwcm9taXNlKS50aGVuKGNhcGFiaWxpdHkucmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGlmIChyZXN1bHQuZXJyb3IpIHJlamVjdChyZXN1bHQudmFsdWUpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvbmV3LXByb21pc2UtY2FwYWJpbGl0eScpO1xudmFyIEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Byb21pc2UtY29uc3RydWN0b3ItZGV0ZWN0aW9uJykuQ09OU1RSVUNUT1I7XG5cbi8vIGBQcm9taXNlLnJlamVjdGAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UucmVqZWN0XG4kKHsgdGFyZ2V0OiAnUHJvbWlzZScsIHN0YXQ6IHRydWUsIGZvcmNlZDogRk9SQ0VEX1BST01JU0VfQ09OU1RSVUNUT1IgfSwge1xuICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKSB7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZS5mKHRoaXMpO1xuICAgIGNhbGwoY2FwYWJpbGl0eS5yZWplY3QsIHVuZGVmaW5lZCwgcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9leHBvcnQnKTtcbnZhciBnZXRCdWlsdEluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1idWlsdC1pbicpO1xudmFyIElTX1BVUkUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcHVyZScpO1xudmFyIE5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm9taXNlLW5hdGl2ZS1jb25zdHJ1Y3RvcicpO1xudmFyIEZPUkNFRF9QUk9NSVNFX0NPTlNUUlVDVE9SID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3Byb21pc2UtY29uc3RydWN0b3ItZGV0ZWN0aW9uJykuQ09OU1RSVUNUT1I7XG52YXIgcHJvbWlzZVJlc29sdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcHJvbWlzZS1yZXNvbHZlJyk7XG5cbnZhciBQcm9taXNlQ29uc3RydWN0b3JXcmFwcGVyID0gZ2V0QnVpbHRJbignUHJvbWlzZScpO1xudmFyIENIRUNLX1dSQVBQRVIgPSBJU19QVVJFICYmICFGT1JDRURfUFJPTUlTRV9DT05TVFJVQ1RPUjtcblxuLy8gYFByb21pc2UucmVzb2x2ZWAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXByb21pc2UucmVzb2x2ZVxuJCh7IHRhcmdldDogJ1Byb21pc2UnLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IElTX1BVUkUgfHwgRk9SQ0VEX1BST01JU0VfQ09OU1RSVUNUT1IgfSwge1xuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpIHtcbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmUoQ0hFQ0tfV1JBUFBFUiAmJiB0aGlzID09PSBQcm9taXNlQ29uc3RydWN0b3JXcmFwcGVyID8gTmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yIDogdGhpcywgeCk7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Rlc2NyaXB0b3JzJyk7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIHVuY3VycnlUaGlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLXVuY3VycnktdGhpcycpO1xudmFyIGlzRm9yY2VkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLWZvcmNlZCcpO1xudmFyIGluaGVyaXRJZlJlcXVpcmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2luaGVyaXQtaWYtcmVxdWlyZWQnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcycpLmY7XG52YXIgaXNQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtaXMtcHJvdG90eXBlLW9mJyk7XG52YXIgaXNSZWdFeHAgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcmVnZXhwJyk7XG52YXIgdG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvdG8tc3RyaW5nJyk7XG52YXIgZ2V0UmVnRXhwRmxhZ3MgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWdldC1mbGFncycpO1xudmFyIHN0aWNreUhlbHBlcnMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLXN0aWNreS1oZWxwZXJzJyk7XG52YXIgcHJveHlBY2Nlc3NvciA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9wcm94eS1hY2Nlc3NvcicpO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgZmFpbHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZmFpbHMnKTtcbnZhciBoYXNPd24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaGFzLW93bi1wcm9wZXJ0eScpO1xudmFyIGVuZm9yY2VJbnRlcm5hbFN0YXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ludGVybmFsLXN0YXRlJykuZW5mb3JjZTtcbnZhciBzZXRTcGVjaWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3NldC1zcGVjaWVzJyk7XG52YXIgd2VsbEtub3duU3ltYm9sID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3dlbGwta25vd24tc3ltYm9sJyk7XG52YXIgVU5TVVBQT1JURURfRE9UX0FMTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtZG90LWFsbCcpO1xudmFyIFVOU1VQUE9SVEVEX05DRyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtdW5zdXBwb3J0ZWQtbmNnJyk7XG5cbnZhciBNQVRDSCA9IHdlbGxLbm93blN5bWJvbCgnbWF0Y2gnKTtcbnZhciBOYXRpdmVSZWdFeHAgPSBnbG9iYWwuUmVnRXhwO1xudmFyIFJlZ0V4cFByb3RvdHlwZSA9IE5hdGl2ZVJlZ0V4cC5wcm90b3R5cGU7XG52YXIgU3ludGF4RXJyb3IgPSBnbG9iYWwuU3ludGF4RXJyb3I7XG52YXIgZXhlYyA9IHVuY3VycnlUaGlzKFJlZ0V4cFByb3RvdHlwZS5leGVjKTtcbnZhciBjaGFyQXQgPSB1bmN1cnJ5VGhpcygnJy5jaGFyQXQpO1xudmFyIHJlcGxhY2UgPSB1bmN1cnJ5VGhpcygnJy5yZXBsYWNlKTtcbnZhciBzdHJpbmdJbmRleE9mID0gdW5jdXJyeVRoaXMoJycuaW5kZXhPZik7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG4vLyBUT0RPOiBVc2Ugb25seSBwcm9wZXIgUmVnRXhwSWRlbnRpZmllck5hbWVcbnZhciBJU19OQ0cgPSAvXlxcPzxbXlxcc1xcZCEjJSYqKzw9PkBeXVteXFxzISMlJiorPD0+QF5dKj4vO1xudmFyIHJlMSA9IC9hL2c7XG52YXIgcmUyID0gL2EvZztcblxuLy8gXCJuZXdcIiBzaG91bGQgY3JlYXRlIGEgbmV3IG9iamVjdCwgb2xkIHdlYmtpdCBidWdcbnZhciBDT1JSRUNUX05FVyA9IG5ldyBOYXRpdmVSZWdFeHAocmUxKSAhPT0gcmUxO1xuXG52YXIgTUlTU0VEX1NUSUNLWSA9IHN0aWNreUhlbHBlcnMuTUlTU0VEX1NUSUNLWTtcbnZhciBVTlNVUFBPUlRFRF9ZID0gc3RpY2t5SGVscGVycy5VTlNVUFBPUlRFRF9ZO1xuXG52YXIgQkFTRV9GT1JDRUQgPSBERVNDUklQVE9SUyAmJlxuICAoIUNPUlJFQ1RfTkVXIHx8IE1JU1NFRF9TVElDS1kgfHwgVU5TVVBQT1JURURfRE9UX0FMTCB8fCBVTlNVUFBPUlRFRF9OQ0cgfHwgZmFpbHMoZnVuY3Rpb24gKCkge1xuICAgIHJlMltNQVRDSF0gPSBmYWxzZTtcbiAgICAvLyBSZWdFeHAgY29uc3RydWN0b3IgY2FuIGFsdGVyIGZsYWdzIGFuZCBJc1JlZ0V4cCB3b3JrcyBjb3JyZWN0IHdpdGggQEBtYXRjaFxuICAgIHJldHVybiBOYXRpdmVSZWdFeHAocmUxKSAhPT0gcmUxIHx8IE5hdGl2ZVJlZ0V4cChyZTIpID09PSByZTIgfHwgU3RyaW5nKE5hdGl2ZVJlZ0V4cChyZTEsICdpJykpICE9PSAnL2EvaSc7XG4gIH0pKTtcblxudmFyIGhhbmRsZURvdEFsbCA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGJyYWNrZXRzID0gZmFsc2U7XG4gIHZhciBjaHI7XG4gIGZvciAoOyBpbmRleCA8PSBsZW5ndGg7IGluZGV4KyspIHtcbiAgICBjaHIgPSBjaGFyQXQoc3RyaW5nLCBpbmRleCk7XG4gICAgaWYgKGNociA9PT0gJ1xcXFwnKSB7XG4gICAgICByZXN1bHQgKz0gY2hyICsgY2hhckF0KHN0cmluZywgKytpbmRleCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKCFicmFja2V0cyAmJiBjaHIgPT09ICcuJykge1xuICAgICAgcmVzdWx0ICs9ICdbXFxcXHNcXFxcU10nO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2hyID09PSAnWycpIHtcbiAgICAgICAgYnJhY2tldHMgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaHIgPT09ICddJykge1xuICAgICAgICBicmFja2V0cyA9IGZhbHNlO1xuICAgICAgfSByZXN1bHQgKz0gY2hyO1xuICAgIH1cbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIGhhbmRsZU5DRyA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIG5hbWVkID0gW107XG4gIHZhciBuYW1lcyA9IHt9O1xuICB2YXIgYnJhY2tldHMgPSBmYWxzZTtcbiAgdmFyIG5jZyA9IGZhbHNlO1xuICB2YXIgZ3JvdXBpZCA9IDA7XG4gIHZhciBncm91cG5hbWUgPSAnJztcbiAgdmFyIGNocjtcbiAgZm9yICg7IGluZGV4IDw9IGxlbmd0aDsgaW5kZXgrKykge1xuICAgIGNociA9IGNoYXJBdChzdHJpbmcsIGluZGV4KTtcbiAgICBpZiAoY2hyID09PSAnXFxcXCcpIHtcbiAgICAgIGNociArPSBjaGFyQXQoc3RyaW5nLCArK2luZGV4KTtcbiAgICB9IGVsc2UgaWYgKGNociA9PT0gJ10nKSB7XG4gICAgICBicmFja2V0cyA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoIWJyYWNrZXRzKSBzd2l0Y2ggKHRydWUpIHtcbiAgICAgIGNhc2UgY2hyID09PSAnWyc6XG4gICAgICAgIGJyYWNrZXRzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGNociA9PT0gJygnOlxuICAgICAgICBpZiAoZXhlYyhJU19OQ0csIHN0cmluZ1NsaWNlKHN0cmluZywgaW5kZXggKyAxKSkpIHtcbiAgICAgICAgICBpbmRleCArPSAyO1xuICAgICAgICAgIG5jZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IGNocjtcbiAgICAgICAgZ3JvdXBpZCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIGNhc2UgY2hyID09PSAnPicgJiYgbmNnOlxuICAgICAgICBpZiAoZ3JvdXBuYW1lID09PSAnJyB8fCBoYXNPd24obmFtZXMsIGdyb3VwbmFtZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0ludmFsaWQgY2FwdHVyZSBncm91cCBuYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgbmFtZXNbZ3JvdXBuYW1lXSA9IHRydWU7XG4gICAgICAgIG5hbWVkW25hbWVkLmxlbmd0aF0gPSBbZ3JvdXBuYW1lLCBncm91cGlkXTtcbiAgICAgICAgbmNnID0gZmFsc2U7XG4gICAgICAgIGdyb3VwbmFtZSA9ICcnO1xuICAgICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG5jZykgZ3JvdXBuYW1lICs9IGNocjtcbiAgICBlbHNlIHJlc3VsdCArPSBjaHI7XG4gIH0gcmV0dXJuIFtyZXN1bHQsIG5hbWVkXTtcbn07XG5cbi8vIGBSZWdFeHBgIGNvbnN0cnVjdG9yXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXJlZ2V4cC1jb25zdHJ1Y3RvclxuaWYgKGlzRm9yY2VkKCdSZWdFeHAnLCBCQVNFX0ZPUkNFRCkpIHtcbiAgdmFyIFJlZ0V4cFdyYXBwZXIgPSBmdW5jdGlvbiBSZWdFeHAocGF0dGVybiwgZmxhZ3MpIHtcbiAgICB2YXIgdGhpc0lzUmVnRXhwID0gaXNQcm90b3R5cGVPZihSZWdFeHBQcm90b3R5cGUsIHRoaXMpO1xuICAgIHZhciBwYXR0ZXJuSXNSZWdFeHAgPSBpc1JlZ0V4cChwYXR0ZXJuKTtcbiAgICB2YXIgZmxhZ3NBcmVVbmRlZmluZWQgPSBmbGFncyA9PT0gdW5kZWZpbmVkO1xuICAgIHZhciBncm91cHMgPSBbXTtcbiAgICB2YXIgcmF3UGF0dGVybiA9IHBhdHRlcm47XG4gICAgdmFyIHJhd0ZsYWdzLCBkb3RBbGwsIHN0aWNreSwgaGFuZGxlZCwgcmVzdWx0LCBzdGF0ZTtcblxuICAgIGlmICghdGhpc0lzUmVnRXhwICYmIHBhdHRlcm5Jc1JlZ0V4cCAmJiBmbGFnc0FyZVVuZGVmaW5lZCAmJiBwYXR0ZXJuLmNvbnN0cnVjdG9yID09PSBSZWdFeHBXcmFwcGVyKSB7XG4gICAgICByZXR1cm4gcGF0dGVybjtcbiAgICB9XG5cbiAgICBpZiAocGF0dGVybklzUmVnRXhwIHx8IGlzUHJvdG90eXBlT2YoUmVnRXhwUHJvdG90eXBlLCBwYXR0ZXJuKSkge1xuICAgICAgcGF0dGVybiA9IHBhdHRlcm4uc291cmNlO1xuICAgICAgaWYgKGZsYWdzQXJlVW5kZWZpbmVkKSBmbGFncyA9IGdldFJlZ0V4cEZsYWdzKHJhd1BhdHRlcm4pO1xuICAgIH1cblxuICAgIHBhdHRlcm4gPSBwYXR0ZXJuID09PSB1bmRlZmluZWQgPyAnJyA6IHRvU3RyaW5nKHBhdHRlcm4pO1xuICAgIGZsYWdzID0gZmxhZ3MgPT09IHVuZGVmaW5lZCA/ICcnIDogdG9TdHJpbmcoZmxhZ3MpO1xuICAgIHJhd1BhdHRlcm4gPSBwYXR0ZXJuO1xuXG4gICAgaWYgKFVOU1VQUE9SVEVEX0RPVF9BTEwgJiYgJ2RvdEFsbCcgaW4gcmUxKSB7XG4gICAgICBkb3RBbGwgPSAhIWZsYWdzICYmIHN0cmluZ0luZGV4T2YoZmxhZ3MsICdzJykgPiAtMTtcbiAgICAgIGlmIChkb3RBbGwpIGZsYWdzID0gcmVwbGFjZShmbGFncywgL3MvZywgJycpO1xuICAgIH1cblxuICAgIHJhd0ZsYWdzID0gZmxhZ3M7XG5cbiAgICBpZiAoTUlTU0VEX1NUSUNLWSAmJiAnc3RpY2t5JyBpbiByZTEpIHtcbiAgICAgIHN0aWNreSA9ICEhZmxhZ3MgJiYgc3RyaW5nSW5kZXhPZihmbGFncywgJ3knKSA+IC0xO1xuICAgICAgaWYgKHN0aWNreSAmJiBVTlNVUFBPUlRFRF9ZKSBmbGFncyA9IHJlcGxhY2UoZmxhZ3MsIC95L2csICcnKTtcbiAgICB9XG5cbiAgICBpZiAoVU5TVVBQT1JURURfTkNHKSB7XG4gICAgICBoYW5kbGVkID0gaGFuZGxlTkNHKHBhdHRlcm4pO1xuICAgICAgcGF0dGVybiA9IGhhbmRsZWRbMF07XG4gICAgICBncm91cHMgPSBoYW5kbGVkWzFdO1xuICAgIH1cblxuICAgIHJlc3VsdCA9IGluaGVyaXRJZlJlcXVpcmVkKE5hdGl2ZVJlZ0V4cChwYXR0ZXJuLCBmbGFncyksIHRoaXNJc1JlZ0V4cCA/IHRoaXMgOiBSZWdFeHBQcm90b3R5cGUsIFJlZ0V4cFdyYXBwZXIpO1xuXG4gICAgaWYgKGRvdEFsbCB8fCBzdGlja3kgfHwgZ3JvdXBzLmxlbmd0aCkge1xuICAgICAgc3RhdGUgPSBlbmZvcmNlSW50ZXJuYWxTdGF0ZShyZXN1bHQpO1xuICAgICAgaWYgKGRvdEFsbCkge1xuICAgICAgICBzdGF0ZS5kb3RBbGwgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5yYXcgPSBSZWdFeHBXcmFwcGVyKGhhbmRsZURvdEFsbChwYXR0ZXJuKSwgcmF3RmxhZ3MpO1xuICAgICAgfVxuICAgICAgaWYgKHN0aWNreSkgc3RhdGUuc3RpY2t5ID0gdHJ1ZTtcbiAgICAgIGlmIChncm91cHMubGVuZ3RoKSBzdGF0ZS5ncm91cHMgPSBncm91cHM7XG4gICAgfVxuXG4gICAgaWYgKHBhdHRlcm4gIT09IHJhd1BhdHRlcm4pIHRyeSB7XG4gICAgICAvLyBmYWlscyBpbiBvbGQgZW5naW5lcywgYnV0IHdlIGhhdmUgbm8gYWx0ZXJuYXRpdmVzIGZvciB1bnN1cHBvcnRlZCByZWdleCBzeW50YXhcbiAgICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShyZXN1bHQsICdzb3VyY2UnLCByYXdQYXR0ZXJuID09PSAnJyA/ICcoPzopJyA6IHJhd1BhdHRlcm4pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGVtcHR5ICovIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZm9yICh2YXIga2V5cyA9IGdldE93blByb3BlcnR5TmFtZXMoTmF0aXZlUmVnRXhwKSwgaW5kZXggPSAwOyBrZXlzLmxlbmd0aCA+IGluZGV4Oykge1xuICAgIHByb3h5QWNjZXNzb3IoUmVnRXhwV3JhcHBlciwgTmF0aXZlUmVnRXhwLCBrZXlzW2luZGV4KytdKTtcbiAgfVxuXG4gIFJlZ0V4cFByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlZ0V4cFdyYXBwZXI7XG4gIFJlZ0V4cFdyYXBwZXIucHJvdG90eXBlID0gUmVnRXhwUHJvdG90eXBlO1xuICBkZWZpbmVCdWlsdEluKGdsb2JhbCwgJ1JlZ0V4cCcsIFJlZ0V4cFdyYXBwZXIsIHsgY29uc3RydWN0b3I6IHRydWUgfSk7XG59XG5cbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtZ2V0LXJlZ2V4cC1AQHNwZWNpZXNcbnNldFNwZWNpZXMoJ1JlZ0V4cCcpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgZXhlYyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZXhlYycpO1xuXG4vLyBgUmVnRXhwLnByb3RvdHlwZS5leGVjYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcmVnZXhwLnByb3RvdHlwZS5leGVjXG4kKHsgdGFyZ2V0OiAnUmVnRXhwJywgcHJvdG86IHRydWUsIGZvcmNlZDogLy4vLmV4ZWMgIT09IGV4ZWMgfSwge1xuICBleGVjOiBleGVjXG59KTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBQUk9QRVJfRlVOQ1RJT05fTkFNRSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1uYW1lJykuUFJPUEVSO1xudmFyIGRlZmluZUJ1aWx0SW4gPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVmaW5lLWJ1aWx0LWluJyk7XG52YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYW4tb2JqZWN0Jyk7XG52YXIgJHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG52YXIgZ2V0UmVnRXhwRmxhZ3MgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWdldC1mbGFncycpO1xuXG52YXIgVE9fU1RSSU5HID0gJ3RvU3RyaW5nJztcbnZhciBSZWdFeHBQcm90b3R5cGUgPSBSZWdFeHAucHJvdG90eXBlO1xudmFyIG5hdGl2ZVRvU3RyaW5nID0gUmVnRXhwUHJvdG90eXBlW1RPX1NUUklOR107XG5cbnZhciBOT1RfR0VORVJJQyA9IGZhaWxzKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwoeyBzb3VyY2U6ICdhJywgZmxhZ3M6ICdiJyB9KSAhPT0gJy9hL2InOyB9KTtcbi8vIEZGNDQtIFJlZ0V4cCN0b1N0cmluZyBoYXMgYSB3cm9uZyBuYW1lXG52YXIgSU5DT1JSRUNUX05BTUUgPSBQUk9QRVJfRlVOQ1RJT05fTkFNRSAmJiBuYXRpdmVUb1N0cmluZy5uYW1lICE9PSBUT19TVFJJTkc7XG5cbi8vIGBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcmVnZXhwLnByb3RvdHlwZS50b3N0cmluZ1xuaWYgKE5PVF9HRU5FUklDIHx8IElOQ09SUkVDVF9OQU1FKSB7XG4gIGRlZmluZUJ1aWx0SW4oUmVnRXhwLnByb3RvdHlwZSwgVE9fU1RSSU5HLCBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICB2YXIgUiA9IGFuT2JqZWN0KHRoaXMpO1xuICAgIHZhciBwYXR0ZXJuID0gJHRvU3RyaW5nKFIuc291cmNlKTtcbiAgICB2YXIgZmxhZ3MgPSAkdG9TdHJpbmcoZ2V0UmVnRXhwRmxhZ3MoUikpO1xuICAgIHJldHVybiAnLycgKyBwYXR0ZXJuICsgJy8nICsgZmxhZ3M7XG4gIH0sIHsgdW5zYWZlOiB0cnVlIH0pO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tY2FsbCcpO1xudmFyIGZpeFJlZ0V4cFdlbGxLbm93blN5bWJvbExvZ2ljID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZpeC1yZWdleHAtd2VsbC1rbm93bi1zeW1ib2wtbG9naWMnKTtcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hbi1vYmplY3QnKTtcbnZhciBpc051bGxPclVuZGVmaW5lZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9pcy1udWxsLW9yLXVuZGVmaW5lZCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVxdWlyZS1vYmplY3QtY29lcmNpYmxlJyk7XG52YXIgZ2V0TWV0aG9kID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dldC1tZXRob2QnKTtcbnZhciBhZHZhbmNlU3RyaW5nSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYWR2YW5jZS1zdHJpbmctaW5kZXgnKTtcbnZhciByZWdFeHBFeGVjID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1leGVjLWFic3RyYWN0Jyk7XG5cbi8vIEBAbWF0Y2ggbG9naWNcbmZpeFJlZ0V4cFdlbGxLbm93blN5bWJvbExvZ2ljKCdtYXRjaCcsIGZ1bmN0aW9uIChNQVRDSCwgbmF0aXZlTWF0Y2gsIG1heWJlQ2FsbE5hdGl2ZSkge1xuICByZXR1cm4gW1xuICAgIC8vIGBTdHJpbmcucHJvdG90eXBlLm1hdGNoYCBtZXRob2RcbiAgICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUubWF0Y2hcbiAgICBmdW5jdGlvbiBtYXRjaChyZWdleHApIHtcbiAgICAgIHZhciBPID0gcmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKTtcbiAgICAgIHZhciBtYXRjaGVyID0gaXNOdWxsT3JVbmRlZmluZWQocmVnZXhwKSA/IHVuZGVmaW5lZCA6IGdldE1ldGhvZChyZWdleHAsIE1BVENIKTtcbiAgICAgIHJldHVybiBtYXRjaGVyID8gY2FsbChtYXRjaGVyLCByZWdleHAsIE8pIDogbmV3IFJlZ0V4cChyZWdleHApW01BVENIXSh0b1N0cmluZyhPKSk7XG4gICAgfSxcbiAgICAvLyBgUmVnRXhwLnByb3RvdHlwZVtAQG1hdGNoXWAgbWV0aG9kXG4gICAgLy8gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1yZWdleHAucHJvdG90eXBlLUBAbWF0Y2hcbiAgICBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICB2YXIgcnggPSBhbk9iamVjdCh0aGlzKTtcbiAgICAgIHZhciBTID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHZhciByZXMgPSBtYXliZUNhbGxOYXRpdmUobmF0aXZlTWF0Y2gsIHJ4LCBTKTtcblxuICAgICAgaWYgKHJlcy5kb25lKSByZXR1cm4gcmVzLnZhbHVlO1xuXG4gICAgICBpZiAoIXJ4Lmdsb2JhbCkgcmV0dXJuIHJlZ0V4cEV4ZWMocngsIFMpO1xuXG4gICAgICB2YXIgZnVsbFVuaWNvZGUgPSByeC51bmljb2RlO1xuICAgICAgcngubGFzdEluZGV4ID0gMDtcbiAgICAgIHZhciBBID0gW107XG4gICAgICB2YXIgbiA9IDA7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgd2hpbGUgKChyZXN1bHQgPSByZWdFeHBFeGVjKHJ4LCBTKSkgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIG1hdGNoU3RyID0gdG9TdHJpbmcocmVzdWx0WzBdKTtcbiAgICAgICAgQVtuXSA9IG1hdGNoU3RyO1xuICAgICAgICBpZiAobWF0Y2hTdHIgPT09ICcnKSByeC5sYXN0SW5kZXggPSBhZHZhbmNlU3RyaW5nSW5kZXgoUywgdG9MZW5ndGgocngubGFzdEluZGV4KSwgZnVsbFVuaWNvZGUpO1xuICAgICAgICBuKys7XG4gICAgICB9XG4gICAgICByZXR1cm4gbiA9PT0gMCA/IG51bGwgOiBBO1xuICAgIH1cbiAgXTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFwcGx5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2Z1bmN0aW9uLWFwcGx5Jyk7XG52YXIgY2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi1jYWxsJyk7XG52YXIgdW5jdXJyeVRoaXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZnVuY3Rpb24tdW5jdXJyeS10aGlzJyk7XG52YXIgZml4UmVnRXhwV2VsbEtub3duU3ltYm9sTG9naWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZml4LXJlZ2V4cC13ZWxsLWtub3duLXN5bWJvbC1sb2dpYycpO1xudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2FuLW9iamVjdCcpO1xudmFyIGlzTnVsbE9yVW5kZWZpbmVkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2lzLW51bGwtb3ItdW5kZWZpbmVkJyk7XG52YXIgaXNSZWdFeHAgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvaXMtcmVnZXhwJyk7XG52YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZXF1aXJlLW9iamVjdC1jb2VyY2libGUnKTtcbnZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3BlY2llcy1jb25zdHJ1Y3RvcicpO1xudmFyIGFkdmFuY2VTdHJpbmdJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hZHZhbmNlLXN0cmluZy1pbmRleCcpO1xudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWxlbmd0aCcpO1xudmFyIHRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLXN0cmluZycpO1xudmFyIGdldE1ldGhvZCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtbWV0aG9kJyk7XG52YXIgYXJyYXlTbGljZSA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9hcnJheS1zbGljZS1zaW1wbGUnKTtcbnZhciBjYWxsUmVnRXhwRXhlYyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9yZWdleHAtZXhlYy1hYnN0cmFjdCcpO1xudmFyIHJlZ2V4cEV4ZWMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvcmVnZXhwLWV4ZWMnKTtcbnZhciBzdGlja3lIZWxwZXJzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3JlZ2V4cC1zdGlja3ktaGVscGVycycpO1xudmFyIGZhaWxzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2ZhaWxzJyk7XG5cbnZhciBVTlNVUFBPUlRFRF9ZID0gc3RpY2t5SGVscGVycy5VTlNVUFBPUlRFRF9ZO1xudmFyIE1BWF9VSU5UMzIgPSAweEZGRkZGRkZGO1xudmFyIG1pbiA9IE1hdGgubWluO1xudmFyICRwdXNoID0gW10ucHVzaDtcbnZhciBleGVjID0gdW5jdXJyeVRoaXMoLy4vLmV4ZWMpO1xudmFyIHB1c2ggPSB1bmN1cnJ5VGhpcygkcHVzaCk7XG52YXIgc3RyaW5nU2xpY2UgPSB1bmN1cnJ5VGhpcygnJy5zbGljZSk7XG5cbi8vIENocm9tZSA1MSBoYXMgYSBidWdneSBcInNwbGl0XCIgaW1wbGVtZW50YXRpb24gd2hlbiBSZWdFeHAjZXhlYyAhPT0gbmF0aXZlRXhlY1xuLy8gV2VleCBKUyBoYXMgZnJvemVuIGJ1aWx0LWluIHByb3RvdHlwZXMsIHNvIHVzZSB0cnkgLyBjYXRjaCB3cmFwcGVyXG52YXIgU1BMSVRfV09SS1NfV0lUSF9PVkVSV1JJVFRFTl9FWEVDID0gIWZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9uby1lbXB0eS1ncm91cCAtLSByZXF1aXJlZCBmb3IgdGVzdGluZ1xuICB2YXIgcmUgPSAvKD86KS87XG4gIHZhciBvcmlnaW5hbEV4ZWMgPSByZS5leGVjO1xuICByZS5leGVjID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gb3JpZ2luYWxFeGVjLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gIHZhciByZXN1bHQgPSAnYWInLnNwbGl0KHJlKTtcbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggIT09IDIgfHwgcmVzdWx0WzBdICE9PSAnYScgfHwgcmVzdWx0WzFdICE9PSAnYic7XG59KTtcblxuLy8gQEBzcGxpdCBsb2dpY1xuZml4UmVnRXhwV2VsbEtub3duU3ltYm9sTG9naWMoJ3NwbGl0JywgZnVuY3Rpb24gKFNQTElULCBuYXRpdmVTcGxpdCwgbWF5YmVDYWxsTmF0aXZlKSB7XG4gIHZhciBpbnRlcm5hbFNwbGl0O1xuICBpZiAoXG4gICAgJ2FiYmMnLnNwbGl0KC8oYikqLylbMV0gPT09ICdjJyB8fFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWdleHAvbm8tZW1wdHktZ3JvdXAgLS0gcmVxdWlyZWQgZm9yIHRlc3RpbmdcbiAgICAndGVzdCcuc3BsaXQoLyg/OikvLCAtMSkubGVuZ3RoICE9PSA0IHx8XG4gICAgJ2FiJy5zcGxpdCgvKD86YWIpKi8pLmxlbmd0aCAhPT0gMiB8fFxuICAgICcuJy5zcGxpdCgvKC4/KSguPykvKS5sZW5ndGggIT09IDQgfHxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVnZXhwL25vLWVtcHR5LWNhcHR1cmluZy1ncm91cCwgcmVnZXhwL25vLWVtcHR5LWdyb3VwIC0tIHJlcXVpcmVkIGZvciB0ZXN0aW5nXG4gICAgJy4nLnNwbGl0KC8oKSgpLykubGVuZ3RoID4gMSB8fFxuICAgICcnLnNwbGl0KC8uPy8pLmxlbmd0aFxuICApIHtcbiAgICAvLyBiYXNlZCBvbiBlczUtc2hpbSBpbXBsZW1lbnRhdGlvbiwgbmVlZCB0byByZXdvcmsgaXRcbiAgICBpbnRlcm5hbFNwbGl0ID0gZnVuY3Rpb24gKHNlcGFyYXRvciwgbGltaXQpIHtcbiAgICAgIHZhciBzdHJpbmcgPSB0b1N0cmluZyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHRoaXMpKTtcbiAgICAgIHZhciBsaW0gPSBsaW1pdCA9PT0gdW5kZWZpbmVkID8gTUFYX1VJTlQzMiA6IGxpbWl0ID4+PiAwO1xuICAgICAgaWYgKGxpbSA9PT0gMCkgcmV0dXJuIFtdO1xuICAgICAgaWYgKHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gW3N0cmluZ107XG4gICAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdFxuICAgICAgaWYgKCFpc1JlZ0V4cChzZXBhcmF0b3IpKSB7XG4gICAgICAgIHJldHVybiBjYWxsKG5hdGl2ZVNwbGl0LCBzdHJpbmcsIHNlcGFyYXRvciwgbGltKTtcbiAgICAgIH1cbiAgICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICAgIHZhciBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/ICdpJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLm11bHRpbGluZSA/ICdtJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLnVuaWNvZGUgPyAndScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5zdGlja3kgPyAneScgOiAnJyk7XG4gICAgICB2YXIgbGFzdExhc3RJbmRleCA9IDA7XG4gICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weVxuICAgICAgdmFyIHNlcGFyYXRvckNvcHkgPSBuZXcgUmVnRXhwKHNlcGFyYXRvci5zb3VyY2UsIGZsYWdzICsgJ2cnKTtcbiAgICAgIHZhciBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoO1xuICAgICAgd2hpbGUgKG1hdGNoID0gY2FsbChyZWdleHBFeGVjLCBzZXBhcmF0b3JDb3B5LCBzdHJpbmcpKSB7XG4gICAgICAgIGxhc3RJbmRleCA9IHNlcGFyYXRvckNvcHkubGFzdEluZGV4O1xuICAgICAgICBpZiAobGFzdEluZGV4ID4gbGFzdExhc3RJbmRleCkge1xuICAgICAgICAgIHB1c2gob3V0cHV0LCBzdHJpbmdTbGljZShzdHJpbmcsIGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG4gICAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2guaW5kZXggPCBzdHJpbmcubGVuZ3RoKSBhcHBseSgkcHVzaCwgb3V0cHV0LCBhcnJheVNsaWNlKG1hdGNoLCAxKSk7XG4gICAgICAgICAgbGFzdExlbmd0aCA9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoID49IGxpbSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlcGFyYXRvckNvcHkubGFzdEluZGV4ID09PSBtYXRjaC5pbmRleCkgc2VwYXJhdG9yQ29weS5sYXN0SW5kZXgrKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgfVxuICAgICAgaWYgKGxhc3RMYXN0SW5kZXggPT09IHN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGxhc3RMZW5ndGggfHwgIWV4ZWMoc2VwYXJhdG9yQ29weSwgJycpKSBwdXNoKG91dHB1dCwgJycpO1xuICAgICAgfSBlbHNlIHB1c2gob3V0cHV0LCBzdHJpbmdTbGljZShzdHJpbmcsIGxhc3RMYXN0SW5kZXgpKTtcbiAgICAgIHJldHVybiBvdXRwdXQubGVuZ3RoID4gbGltID8gYXJyYXlTbGljZShvdXRwdXQsIDAsIGxpbSkgOiBvdXRwdXQ7XG4gICAgfTtcbiAgLy8gQ2hha3JhLCBWOFxuICB9IGVsc2UgaWYgKCcwJy5zcGxpdCh1bmRlZmluZWQsIDApLmxlbmd0aCkge1xuICAgIGludGVybmFsU3BsaXQgPSBmdW5jdGlvbiAoc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgcmV0dXJuIHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkICYmIGxpbWl0ID09PSAwID8gW10gOiBjYWxsKG5hdGl2ZVNwbGl0LCB0aGlzLCBzZXBhcmF0b3IsIGxpbWl0KTtcbiAgICB9O1xuICB9IGVsc2UgaW50ZXJuYWxTcGxpdCA9IG5hdGl2ZVNwbGl0O1xuXG4gIHJldHVybiBbXG4gICAgLy8gYFN0cmluZy5wcm90b3R5cGUuc3BsaXRgIG1ldGhvZFxuICAgIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtc3RyaW5nLnByb3RvdHlwZS5zcGxpdFxuICAgIGZ1bmN0aW9uIHNwbGl0KHNlcGFyYXRvciwgbGltaXQpIHtcbiAgICAgIHZhciBPID0gcmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKTtcbiAgICAgIHZhciBzcGxpdHRlciA9IGlzTnVsbE9yVW5kZWZpbmVkKHNlcGFyYXRvcikgPyB1bmRlZmluZWQgOiBnZXRNZXRob2Qoc2VwYXJhdG9yLCBTUExJVCk7XG4gICAgICByZXR1cm4gc3BsaXR0ZXJcbiAgICAgICAgPyBjYWxsKHNwbGl0dGVyLCBzZXBhcmF0b3IsIE8sIGxpbWl0KVxuICAgICAgICA6IGNhbGwoaW50ZXJuYWxTcGxpdCwgdG9TdHJpbmcoTyksIHNlcGFyYXRvciwgbGltaXQpO1xuICAgIH0sXG4gICAgLy8gYFJlZ0V4cC5wcm90b3R5cGVbQEBzcGxpdF1gIG1ldGhvZFxuICAgIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtcmVnZXhwLnByb3RvdHlwZS1AQHNwbGl0XG4gICAgLy9cbiAgICAvLyBOT1RFOiBUaGlzIGNhbm5vdCBiZSBwcm9wZXJseSBwb2x5ZmlsbGVkIGluIGVuZ2luZXMgdGhhdCBkb24ndCBzdXBwb3J0XG4gICAgLy8gdGhlICd5JyBmbGFnLlxuICAgIGZ1bmN0aW9uIChzdHJpbmcsIGxpbWl0KSB7XG4gICAgICB2YXIgcnggPSBhbk9iamVjdCh0aGlzKTtcbiAgICAgIHZhciBTID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgICAgIHZhciByZXMgPSBtYXliZUNhbGxOYXRpdmUoaW50ZXJuYWxTcGxpdCwgcngsIFMsIGxpbWl0LCBpbnRlcm5hbFNwbGl0ICE9PSBuYXRpdmVTcGxpdCk7XG5cbiAgICAgIGlmIChyZXMuZG9uZSkgcmV0dXJuIHJlcy52YWx1ZTtcblxuICAgICAgdmFyIEMgPSBzcGVjaWVzQ29uc3RydWN0b3IocngsIFJlZ0V4cCk7XG5cbiAgICAgIHZhciB1bmljb2RlTWF0Y2hpbmcgPSByeC51bmljb2RlO1xuICAgICAgdmFyIGZsYWdzID0gKHJ4Lmlnbm9yZUNhc2UgPyAnaScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHJ4Lm11bHRpbGluZSA/ICdtJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAocngudW5pY29kZSA/ICd1JyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAoVU5TVVBQT1JURURfWSA/ICdnJyA6ICd5Jyk7XG5cbiAgICAgIC8vIF4oPyArIHJ4ICsgKSBpcyBuZWVkZWQsIGluIGNvbWJpbmF0aW9uIHdpdGggc29tZSBTIHNsaWNpbmcsIHRvXG4gICAgICAvLyBzaW11bGF0ZSB0aGUgJ3knIGZsYWcuXG4gICAgICB2YXIgc3BsaXR0ZXIgPSBuZXcgQyhVTlNVUFBPUlRFRF9ZID8gJ14oPzonICsgcnguc291cmNlICsgJyknIDogcngsIGZsYWdzKTtcbiAgICAgIHZhciBsaW0gPSBsaW1pdCA9PT0gdW5kZWZpbmVkID8gTUFYX1VJTlQzMiA6IGxpbWl0ID4+PiAwO1xuICAgICAgaWYgKGxpbSA9PT0gMCkgcmV0dXJuIFtdO1xuICAgICAgaWYgKFMubGVuZ3RoID09PSAwKSByZXR1cm4gY2FsbFJlZ0V4cEV4ZWMoc3BsaXR0ZXIsIFMpID09PSBudWxsID8gW1NdIDogW107XG4gICAgICB2YXIgcCA9IDA7XG4gICAgICB2YXIgcSA9IDA7XG4gICAgICB2YXIgQSA9IFtdO1xuICAgICAgd2hpbGUgKHEgPCBTLmxlbmd0aCkge1xuICAgICAgICBzcGxpdHRlci5sYXN0SW5kZXggPSBVTlNVUFBPUlRFRF9ZID8gMCA6IHE7XG4gICAgICAgIHZhciB6ID0gY2FsbFJlZ0V4cEV4ZWMoc3BsaXR0ZXIsIFVOU1VQUE9SVEVEX1kgPyBzdHJpbmdTbGljZShTLCBxKSA6IFMpO1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHogPT09IG51bGwgfHxcbiAgICAgICAgICAoZSA9IG1pbih0b0xlbmd0aChzcGxpdHRlci5sYXN0SW5kZXggKyAoVU5TVVBQT1JURURfWSA/IHEgOiAwKSksIFMubGVuZ3RoKSkgPT09IHBcbiAgICAgICAgKSB7XG4gICAgICAgICAgcSA9IGFkdmFuY2VTdHJpbmdJbmRleChTLCBxLCB1bmljb2RlTWF0Y2hpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHB1c2goQSwgc3RyaW5nU2xpY2UoUywgcCwgcSkpO1xuICAgICAgICAgIGlmIChBLmxlbmd0aCA9PT0gbGltKSByZXR1cm4gQTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSB6Lmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgcHVzaChBLCB6W2ldKTtcbiAgICAgICAgICAgIGlmIChBLmxlbmd0aCA9PT0gbGltKSByZXR1cm4gQTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcSA9IHAgPSBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwdXNoKEEsIHN0cmluZ1NsaWNlKFMsIHApKTtcbiAgICAgIHJldHVybiBBO1xuICAgIH1cbiAgXTtcbn0sICFTUExJVF9XT1JLU19XSVRIX09WRVJXUklUVEVOX0VYRUMsIFVOU1VQUE9SVEVEX1kpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgY3JlYXRlSFRNTCA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9jcmVhdGUtaHRtbCcpO1xudmFyIGZvcmNlZFN0cmluZ0hUTUxNZXRob2QgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvc3RyaW5nLWh0bWwtZm9yY2VkJyk7XG5cbi8vIGBTdHJpbmcucHJvdG90eXBlLnN1YmAgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLXN0cmluZy5wcm90b3R5cGUuc3ViXG4kKHsgdGFyZ2V0OiAnU3RyaW5nJywgcHJvdG86IHRydWUsIGZvcmNlZDogZm9yY2VkU3RyaW5nSFRNTE1ldGhvZCgnc3ViJykgfSwge1xuICBzdWI6IGZ1bmN0aW9uIHN1YigpIHtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc3ViJywgJycsICcnKTtcbiAgfVxufSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2dsb2JhbCcpO1xudmFyIERPTUl0ZXJhYmxlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9kb20taXRlcmFibGVzJyk7XG52YXIgRE9NVG9rZW5MaXN0UHJvdG90eXBlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2RvbS10b2tlbi1saXN0LXByb3RvdHlwZScpO1xudmFyIGZvckVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvYXJyYXktZm9yLWVhY2gnKTtcbnZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvY3JlYXRlLW5vbi1lbnVtZXJhYmxlLXByb3BlcnR5Jyk7XG5cbnZhciBoYW5kbGVQcm90b3R5cGUgPSBmdW5jdGlvbiAoQ29sbGVjdGlvblByb3RvdHlwZSkge1xuICAvLyBzb21lIENocm9tZSB2ZXJzaW9ucyBoYXZlIG5vbi1jb25maWd1cmFibGUgbWV0aG9kcyBvbiBET01Ub2tlbkxpc3RcbiAgaWYgKENvbGxlY3Rpb25Qcm90b3R5cGUgJiYgQ29sbGVjdGlvblByb3RvdHlwZS5mb3JFYWNoICE9PSBmb3JFYWNoKSB0cnkge1xuICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eShDb2xsZWN0aW9uUHJvdG90eXBlLCAnZm9yRWFjaCcsIGZvckVhY2gpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIENvbGxlY3Rpb25Qcm90b3R5cGUuZm9yRWFjaCA9IGZvckVhY2g7XG4gIH1cbn07XG5cbmZvciAodmFyIENPTExFQ1RJT05fTkFNRSBpbiBET01JdGVyYWJsZXMpIHtcbiAgaWYgKERPTUl0ZXJhYmxlc1tDT0xMRUNUSU9OX05BTUVdKSB7XG4gICAgaGFuZGxlUHJvdG90eXBlKGdsb2JhbFtDT0xMRUNUSU9OX05BTUVdICYmIGdsb2JhbFtDT0xMRUNUSU9OX05BTUVdLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuaGFuZGxlUHJvdG90eXBlKERPTVRva2VuTGlzdFByb3RvdHlwZSk7XG4iLCIvKiFcbiAqIHB1bGx0b3JlZnJlc2hqcyB2MC4xLjIyXG4gKiAoYykgUmFmYWVsIFNvdG9cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5QdWxsVG9SZWZyZXNoID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9zaGFyZWQgPSB7XG4gICAgcHVsbFN0YXJ0WTogbnVsbCxcbiAgICBwdWxsTW92ZVk6IG51bGwsXG4gICAgaGFuZGxlcnM6IFtdLFxuICAgIHN0eWxlRWw6IG51bGwsXG4gICAgZXZlbnRzOiBudWxsLFxuICAgIGRpc3Q6IDAsXG4gICAgc3RhdGU6ICdwZW5kaW5nJyxcbiAgICB0aW1lb3V0OiBudWxsLFxuICAgIGRpc3RSZXNpc3RlZDogMCxcbiAgICBzdXBwb3J0c1Bhc3NpdmU6IGZhbHNlLFxuICAgIHN1cHBvcnRzUG9pbnRlckV2ZW50czogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgISF3aW5kb3cuUG9pbnRlckV2ZW50XG4gIH07XG5cbiAgdHJ5IHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIHtcbiAgICAgIGdldCBwYXNzaXZlKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGdldHRlci1yZXR1cm5cbiAgICAgICAgX3NoYXJlZC5zdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHsvLyBkbyBub3RoaW5nXG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cERPTShoYW5kbGVyKSB7XG4gICAgaWYgKCFoYW5kbGVyLnB0ckVsZW1lbnQpIHtcbiAgICAgIHZhciBwdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgaWYgKGhhbmRsZXIubWFpbkVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgaGFuZGxlci5tYWluRWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwdHIsIGhhbmRsZXIubWFpbkVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUocHRyLCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICBwdHIuY2xhc3NMaXN0LmFkZCgoKGhhbmRsZXIuY2xhc3NQcmVmaXgpICsgXCJwdHJcIikpO1xuICAgICAgcHRyLmlubmVySFRNTCA9IGhhbmRsZXIuZ2V0TWFya3VwKCkucmVwbGFjZSgvX19QUkVGSVhfXy9nLCBoYW5kbGVyLmNsYXNzUHJlZml4KTtcbiAgICAgIGhhbmRsZXIucHRyRWxlbWVudCA9IHB0cjtcblxuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyLm9uSW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBoYW5kbGVyLm9uSW5pdChoYW5kbGVyKTtcbiAgICAgIH0gLy8gQWRkIHRoZSBjc3Mgc3R5bGVzIHRvIHRoZSBzdHlsZSBub2RlLCBhbmQgdGhlblxuICAgICAgLy8gaW5zZXJ0IGl0IGludG8gdGhlIGRvbVxuXG5cbiAgICAgIGlmICghX3NoYXJlZC5zdHlsZUVsKSB7XG4gICAgICAgIF9zaGFyZWQuc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgICAgX3NoYXJlZC5zdHlsZUVsLnNldEF0dHJpYnV0ZSgnaWQnLCAncHVsbC10by1yZWZyZXNoLWpzLXN0eWxlJyk7XG5cbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChfc2hhcmVkLnN0eWxlRWwpO1xuICAgICAgfVxuXG4gICAgICBfc2hhcmVkLnN0eWxlRWwudGV4dENvbnRlbnQgPSBoYW5kbGVyLmdldFN0eWxlcygpLnJlcGxhY2UoL19fUFJFRklYX18vZywgaGFuZGxlci5jbGFzc1ByZWZpeCkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVyO1xuICB9XG5cbiAgZnVuY3Rpb24gb25SZXNldChoYW5kbGVyKSB7XG4gICAgaWYgKCFoYW5kbGVyLnB0ckVsZW1lbnQpIHsgcmV0dXJuOyB9XG4gICAgaGFuZGxlci5wdHJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoKChoYW5kbGVyLmNsYXNzUHJlZml4KSArIFwicmVmcmVzaFwiKSk7XG4gICAgaGFuZGxlci5wdHJFbGVtZW50LnN0eWxlW2hhbmRsZXIuY3NzUHJvcF0gPSAnMHB4JztcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHJlbW92ZSBwcmV2aW91cyBwdHItZWxlbWVudCBmcm9tIERPTVxuICAgICAgaWYgKGhhbmRsZXIucHRyRWxlbWVudCAmJiBoYW5kbGVyLnB0ckVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICBoYW5kbGVyLnB0ckVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoYW5kbGVyLnB0ckVsZW1lbnQpO1xuICAgICAgICBoYW5kbGVyLnB0ckVsZW1lbnQgPSBudWxsO1xuICAgICAgfSAvLyByZXNldCBzdGF0ZVxuXG5cbiAgICAgIF9zaGFyZWQuc3RhdGUgPSAncGVuZGluZyc7XG4gICAgfSwgaGFuZGxlci5yZWZyZXNoVGltZW91dCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoaGFuZGxlcikge1xuICAgIHZhciBpY29uRWwgPSBoYW5kbGVyLnB0ckVsZW1lbnQucXVlcnlTZWxlY3RvcigoXCIuXCIgKyAoaGFuZGxlci5jbGFzc1ByZWZpeCkgKyBcImljb25cIikpO1xuICAgIHZhciB0ZXh0RWwgPSBoYW5kbGVyLnB0ckVsZW1lbnQucXVlcnlTZWxlY3RvcigoXCIuXCIgKyAoaGFuZGxlci5jbGFzc1ByZWZpeCkgKyBcInRleHRcIikpO1xuXG4gICAgaWYgKGljb25FbCkge1xuICAgICAgaWYgKF9zaGFyZWQuc3RhdGUgPT09ICdyZWZyZXNoaW5nJykge1xuICAgICAgICBpY29uRWwuaW5uZXJIVE1MID0gaGFuZGxlci5pY29uUmVmcmVzaGluZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGljb25FbC5pbm5lckhUTUwgPSBoYW5kbGVyLmljb25BcnJvdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGV4dEVsKSB7XG4gICAgICBpZiAoX3NoYXJlZC5zdGF0ZSA9PT0gJ3JlbGVhc2luZycpIHtcbiAgICAgICAgdGV4dEVsLmlubmVySFRNTCA9IGhhbmRsZXIuaW5zdHJ1Y3Rpb25zUmVsZWFzZVRvUmVmcmVzaDtcbiAgICAgIH1cblxuICAgICAgaWYgKF9zaGFyZWQuc3RhdGUgPT09ICdwdWxsaW5nJyB8fCBfc2hhcmVkLnN0YXRlID09PSAncGVuZGluZycpIHtcbiAgICAgICAgdGV4dEVsLmlubmVySFRNTCA9IGhhbmRsZXIuaW5zdHJ1Y3Rpb25zUHVsbFRvUmVmcmVzaDtcbiAgICAgIH1cblxuICAgICAgaWYgKF9zaGFyZWQuc3RhdGUgPT09ICdyZWZyZXNoaW5nJykge1xuICAgICAgICB0ZXh0RWwuaW5uZXJIVE1MID0gaGFuZGxlci5pbnN0cnVjdGlvbnNSZWZyZXNoaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBfcHRyID0ge1xuICAgIHNldHVwRE9NOiBzZXR1cERPTSxcbiAgICBvblJlc2V0OiBvblJlc2V0LFxuICAgIHVwZGF0ZTogdXBkYXRlXG4gIH07XG5cbiAgdmFyIF90aW1lb3V0O1xuXG4gIHZhciBzY3JlZW5ZID0gZnVuY3Rpb24gc2NyZWVuWShldmVudCkge1xuICAgIGlmIChfc2hhcmVkLnBvaW50ZXJFdmVudHNFbmFibGVkICYmIF9zaGFyZWQuc3VwcG9ydHNQb2ludGVyRXZlbnRzKSB7XG4gICAgICByZXR1cm4gZXZlbnQuc2NyZWVuWTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXZlbnQudG91Y2hlc1swXS5zY3JlZW5ZO1xuICB9O1xuXG4gIHZhciBfc2V0dXBFdmVudHMgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZWw7XG5cbiAgICBmdW5jdGlvbiBfb25Ub3VjaFN0YXJ0KGUpIHtcbiAgICAgIC8vIGhlcmUsIHdlIG11c3QgcGljayBhIGhhbmRsZXIgZmlyc3QsIGFuZCB0aGVuIGFwcGVuZCB0aGVpciBodG1sL2NzcyBvbiB0aGUgRE9NXG4gICAgICB2YXIgdGFyZ2V0ID0gX3NoYXJlZC5oYW5kbGVycy5maWx0ZXIoZnVuY3Rpb24gKGgpIHsgcmV0dXJuIGguY29udGFpbnMoZS50YXJnZXQpOyB9KVswXTtcblxuICAgICAgX3NoYXJlZC5lbmFibGUgPSAhIXRhcmdldDtcblxuICAgICAgaWYgKHRhcmdldCAmJiBfc2hhcmVkLnN0YXRlID09PSAncGVuZGluZycpIHtcbiAgICAgICAgX2VsID0gX3B0ci5zZXR1cERPTSh0YXJnZXQpO1xuXG4gICAgICAgIGlmICh0YXJnZXQuc2hvdWxkUHVsbFRvUmVmcmVzaCgpKSB7XG4gICAgICAgICAgX3NoYXJlZC5wdWxsU3RhcnRZID0gc2NyZWVuWShlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyVGltZW91dChfc2hhcmVkLnRpbWVvdXQpO1xuXG4gICAgICAgIF9wdHIudXBkYXRlKHRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX29uVG91Y2hNb3ZlKGUpIHtcbiAgICAgIGlmICghKF9lbCAmJiBfZWwucHRyRWxlbWVudCAmJiBfc2hhcmVkLmVuYWJsZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIV9zaGFyZWQucHVsbFN0YXJ0WSkge1xuICAgICAgICBpZiAoX2VsLnNob3VsZFB1bGxUb1JlZnJlc2goKSkge1xuICAgICAgICAgIF9zaGFyZWQucHVsbFN0YXJ0WSA9IHNjcmVlblkoZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zaGFyZWQucHVsbE1vdmVZID0gc2NyZWVuWShlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9zaGFyZWQuc3RhdGUgPT09ICdyZWZyZXNoaW5nJykge1xuICAgICAgICBpZiAoZS5jYW5jZWxhYmxlICYmIF9lbC5zaG91bGRQdWxsVG9SZWZyZXNoKCkgJiYgX3NoYXJlZC5wdWxsU3RhcnRZIDwgX3NoYXJlZC5wdWxsTW92ZVkpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChfc2hhcmVkLnN0YXRlID09PSAncGVuZGluZycpIHtcbiAgICAgICAgX2VsLnB0ckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgoKF9lbC5jbGFzc1ByZWZpeCkgKyBcInB1bGxcIikpO1xuXG4gICAgICAgIF9zaGFyZWQuc3RhdGUgPSAncHVsbGluZyc7XG5cbiAgICAgICAgX3B0ci51cGRhdGUoX2VsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9zaGFyZWQucHVsbFN0YXJ0WSAmJiBfc2hhcmVkLnB1bGxNb3ZlWSkge1xuICAgICAgICBfc2hhcmVkLmRpc3QgPSBfc2hhcmVkLnB1bGxNb3ZlWSAtIF9zaGFyZWQucHVsbFN0YXJ0WTtcbiAgICAgIH1cblxuICAgICAgX3NoYXJlZC5kaXN0RXh0cmEgPSBfc2hhcmVkLmRpc3QgLSBfZWwuZGlzdElnbm9yZTtcblxuICAgICAgaWYgKF9zaGFyZWQuZGlzdEV4dHJhID4gMCkge1xuICAgICAgICBpZiAoZS5jYW5jZWxhYmxlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgX2VsLnB0ckVsZW1lbnQuc3R5bGVbX2VsLmNzc1Byb3BdID0gKF9zaGFyZWQuZGlzdFJlc2lzdGVkKSArIFwicHhcIjtcbiAgICAgICAgX3NoYXJlZC5kaXN0UmVzaXN0ZWQgPSBfZWwucmVzaXN0YW5jZUZ1bmN0aW9uKF9zaGFyZWQuZGlzdEV4dHJhIC8gX2VsLmRpc3RUaHJlc2hvbGQpICogTWF0aC5taW4oX2VsLmRpc3RNYXgsIF9zaGFyZWQuZGlzdEV4dHJhKTtcblxuICAgICAgICBpZiAoX3NoYXJlZC5zdGF0ZSA9PT0gJ3B1bGxpbmcnICYmIF9zaGFyZWQuZGlzdFJlc2lzdGVkID4gX2VsLmRpc3RUaHJlc2hvbGQpIHtcbiAgICAgICAgICBfZWwucHRyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCgoX2VsLmNsYXNzUHJlZml4KSArIFwicmVsZWFzZVwiKSk7XG5cbiAgICAgICAgICBfc2hhcmVkLnN0YXRlID0gJ3JlbGVhc2luZyc7XG5cbiAgICAgICAgICBfcHRyLnVwZGF0ZShfZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9zaGFyZWQuc3RhdGUgPT09ICdyZWxlYXNpbmcnICYmIF9zaGFyZWQuZGlzdFJlc2lzdGVkIDwgX2VsLmRpc3RUaHJlc2hvbGQpIHtcbiAgICAgICAgICBfZWwucHRyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCgoX2VsLmNsYXNzUHJlZml4KSArIFwicmVsZWFzZVwiKSk7XG5cbiAgICAgICAgICBfc2hhcmVkLnN0YXRlID0gJ3B1bGxpbmcnO1xuXG4gICAgICAgICAgX3B0ci51cGRhdGUoX2VsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9vblRvdWNoRW5kKCkge1xuICAgICAgaWYgKCEoX2VsICYmIF9lbC5wdHJFbGVtZW50ICYmIF9zaGFyZWQuZW5hYmxlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIHdhaXQgMS8yIHNlYyBiZWZvcmUgdW5tb3VudGluZy4uLlxuXG5cbiAgICAgIGNsZWFyVGltZW91dChfdGltZW91dCk7XG4gICAgICBfdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX2VsICYmIF9lbC5wdHJFbGVtZW50ICYmIF9zaGFyZWQuc3RhdGUgPT09ICdwZW5kaW5nJykge1xuICAgICAgICAgIF9wdHIub25SZXNldChfZWwpO1xuICAgICAgICB9XG4gICAgICB9LCA1MDApO1xuXG4gICAgICBpZiAoX3NoYXJlZC5zdGF0ZSA9PT0gJ3JlbGVhc2luZycgJiYgX3NoYXJlZC5kaXN0UmVzaXN0ZWQgPiBfZWwuZGlzdFRocmVzaG9sZCkge1xuICAgICAgICBfc2hhcmVkLnN0YXRlID0gJ3JlZnJlc2hpbmcnO1xuICAgICAgICBfZWwucHRyRWxlbWVudC5zdHlsZVtfZWwuY3NzUHJvcF0gPSAoX2VsLmRpc3RSZWxvYWQpICsgXCJweFwiO1xuXG4gICAgICAgIF9lbC5wdHJFbGVtZW50LmNsYXNzTGlzdC5hZGQoKChfZWwuY2xhc3NQcmVmaXgpICsgXCJyZWZyZXNoXCIpKTtcblxuICAgICAgICBfc2hhcmVkLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcmV0dmFsID0gX2VsLm9uUmVmcmVzaChmdW5jdGlvbiAoKSB7IHJldHVybiBfcHRyLm9uUmVzZXQoX2VsKTsgfSk7XG5cbiAgICAgICAgICBpZiAocmV0dmFsICYmIHR5cGVvZiByZXR2YWwudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dmFsLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3B0ci5vblJlc2V0KF9lbCk7IH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghcmV0dmFsICYmICFfZWwub25SZWZyZXNoLmxlbmd0aCkge1xuICAgICAgICAgICAgX3B0ci5vblJlc2V0KF9lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfZWwucmVmcmVzaFRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKF9zaGFyZWQuc3RhdGUgPT09ICdyZWZyZXNoaW5nJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF9lbC5wdHJFbGVtZW50LnN0eWxlW19lbC5jc3NQcm9wXSA9ICcwcHgnO1xuICAgICAgICBfc2hhcmVkLnN0YXRlID0gJ3BlbmRpbmcnO1xuICAgICAgfVxuXG4gICAgICBfcHRyLnVwZGF0ZShfZWwpO1xuXG4gICAgICBfZWwucHRyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCgoX2VsLmNsYXNzUHJlZml4KSArIFwicmVsZWFzZVwiKSk7XG5cbiAgICAgIF9lbC5wdHJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoKChfZWwuY2xhc3NQcmVmaXgpICsgXCJwdWxsXCIpKTtcblxuICAgICAgX3NoYXJlZC5wdWxsU3RhcnRZID0gX3NoYXJlZC5wdWxsTW92ZVkgPSBudWxsO1xuICAgICAgX3NoYXJlZC5kaXN0ID0gX3NoYXJlZC5kaXN0UmVzaXN0ZWQgPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9vblNjcm9sbCgpIHtcbiAgICAgIGlmIChfZWwpIHtcbiAgICAgICAgX2VsLm1haW5FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoKChfZWwuY2xhc3NQcmVmaXgpICsgXCJ0b3BcIiksIF9lbC5zaG91bGRQdWxsVG9SZWZyZXNoKCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBfcGFzc2l2ZVNldHRpbmdzID0gX3NoYXJlZC5zdXBwb3J0c1Bhc3NpdmUgPyB7XG4gICAgICBwYXNzaXZlOiBfc2hhcmVkLnBhc3NpdmUgfHwgZmFsc2VcbiAgICB9IDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKF9zaGFyZWQucG9pbnRlckV2ZW50c0VuYWJsZWQgJiYgX3NoYXJlZC5zdXBwb3J0c1BvaW50ZXJFdmVudHMpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBfb25Ub3VjaEVuZCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBfb25Ub3VjaFN0YXJ0KTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIF9vblRvdWNoTW92ZSwgX3Bhc3NpdmVTZXR0aW5ncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIF9vblRvdWNoRW5kKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgX29uVG91Y2hTdGFydCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgX29uVG91Y2hNb3ZlLCBfcGFzc2l2ZVNldHRpbmdzKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX29uU2Nyb2xsKTtcbiAgICByZXR1cm4ge1xuICAgICAgb25Ub3VjaEVuZDogX29uVG91Y2hFbmQsXG4gICAgICBvblRvdWNoU3RhcnQ6IF9vblRvdWNoU3RhcnQsXG4gICAgICBvblRvdWNoTW92ZTogX29uVG91Y2hNb3ZlLFxuICAgICAgb25TY3JvbGw6IF9vblNjcm9sbCxcblxuICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKF9zaGFyZWQucG9pbnRlckV2ZW50c0VuYWJsZWQgJiYgX3NoYXJlZC5zdXBwb3J0c1BvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBfb25Ub3VjaFN0YXJ0KTtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgX29uVG91Y2hFbmQpO1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIF9vblRvdWNoTW92ZSwgX3Bhc3NpdmVTZXR0aW5ncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBfb25Ub3VjaFN0YXJ0KTtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBfb25Ub3VjaEVuZCk7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIF9vblRvdWNoTW92ZSwgX3Bhc3NpdmVTZXR0aW5ncyk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX29uU2Nyb2xsKTtcbiAgICAgIH1cblxuICAgIH07XG4gIH0pO1xuXG4gIHZhciBfcHRyTWFya3VwID0gXCJcXG48ZGl2IGNsYXNzPVxcXCJfX1BSRUZJWF9fYm94XFxcIj5cXG4gIDxkaXYgY2xhc3M9XFxcIl9fUFJFRklYX19jb250ZW50XFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiX19QUkVGSVhfX2ljb25cXFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJfX1BSRUZJWF9fdGV4dFxcXCI+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcblxuICB2YXIgX3B0clN0eWxlcyA9IFwiXFxuLl9fUFJFRklYX19wdHIge1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMCAtM3B4IDVweCByZ2JhKDAsIDAsIDAsIDAuMTIpO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICBmb250LXNpemU6IDAuODVlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgdG9wOiAwO1xcbiAgaGVpZ2h0OiAwO1xcbiAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuM3MsIG1pbi1oZWlnaHQgMC4zcztcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XFxuICBhbGlnbi1jb250ZW50OiBzdHJldGNoO1xcbn1cXG5cXG4uX19QUkVGSVhfX2JveCB7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgZmxleC1iYXNpczogMTAwJTtcXG59XFxuXFxuLl9fUFJFRklYX19wdWxsIHtcXG4gIHRyYW5zaXRpb246IG5vbmU7XFxufVxcblxcbi5fX1BSRUZJWF9fdGV4dCB7XFxuICBtYXJnaW4tdG9wOiAuMzNlbTtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XFxufVxcblxcbi5fX1BSRUZJWF9faWNvbiB7XFxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjMpO1xcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4zcztcXG59XFxuXFxuLypcXG5XaGVuIGF0IHRoZSB0b3Agb2YgdGhlIHBhZ2UsIGRpc2FibGUgdmVydGljYWwgb3ZlcnNjcm9sbCBzbyBwYXNzaXZlIHRvdWNoXFxubGlzdGVuZXJzIGNhbiB0YWtlIG92ZXIuXFxuKi9cXG4uX19QUkVGSVhfX3RvcCB7XFxuICB0b3VjaC1hY3Rpb246IHBhbi14IHBhbi1kb3duIHBpbmNoLXpvb207XFxufVxcblxcbi5fX1BSRUZJWF9fcmVsZWFzZSAuX19QUkVGSVhfX2ljb24ge1xcbiAgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTtcXG59XFxuXCI7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkaXN0VGhyZXNob2xkOiA2MCxcbiAgICBkaXN0TWF4OiA4MCxcbiAgICBkaXN0UmVsb2FkOiA1MCxcbiAgICBkaXN0SWdub3JlOiAwLFxuICAgIG1haW5FbGVtZW50OiAnYm9keScsXG4gICAgdHJpZ2dlckVsZW1lbnQ6ICdib2R5JyxcbiAgICBwdHJFbGVtZW50OiAnLnB0cicsXG4gICAgY2xhc3NQcmVmaXg6ICdwdHItLScsXG4gICAgY3NzUHJvcDogJ21pbi1oZWlnaHQnLFxuICAgIGljb25BcnJvdzogJyYjODY3NTsnLFxuICAgIGljb25SZWZyZXNoaW5nOiAnJmhlbGxpcDsnLFxuICAgIGluc3RydWN0aW9uc1B1bGxUb1JlZnJlc2g6ICdQdWxsIGRvd24gdG8gcmVmcmVzaCcsXG4gICAgaW5zdHJ1Y3Rpb25zUmVsZWFzZVRvUmVmcmVzaDogJ1JlbGVhc2UgdG8gcmVmcmVzaCcsXG4gICAgaW5zdHJ1Y3Rpb25zUmVmcmVzaGluZzogJ1JlZnJlc2hpbmcnLFxuICAgIHJlZnJlc2hUaW1lb3V0OiA1MDAsXG4gICAgZ2V0TWFya3VwOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfcHRyTWFya3VwOyB9LFxuICAgIGdldFN0eWxlczogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3B0clN0eWxlczsgfSxcbiAgICBvbkluaXQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIG9uUmVmcmVzaDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbG9jYXRpb24ucmVsb2FkKCk7IH0sXG4gICAgcmVzaXN0YW5jZUZ1bmN0aW9uOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gTWF0aC5taW4oMSwgdCAvIDIuNSk7IH0sXG4gICAgc2hvdWxkUHVsbFRvUmVmcmVzaDogZnVuY3Rpb24gKCkgeyByZXR1cm4gIXdpbmRvdy5zY3JvbGxZOyB9XG4gIH07XG5cbiAgdmFyIF9tZXRob2RzID0gWydtYWluRWxlbWVudCcsICdwdHJFbGVtZW50JywgJ3RyaWdnZXJFbGVtZW50J107XG4gIHZhciBfc2V0dXBIYW5kbGVyID0gKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIF9oYW5kbGVyID0ge307IC8vIG1lcmdlIG9wdGlvbnMgd2l0aCBkZWZhdWx0c1xuXG4gICAgT2JqZWN0LmtleXMoX2RlZmF1bHRzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF9oYW5kbGVyW2tleV0gPSBvcHRpb25zW2tleV0gfHwgX2RlZmF1bHRzW2tleV07XG4gICAgfSk7IC8vIG5vcm1hbGl6ZSB0aW1lb3V0IHZhbHVlLCBldmVuIGlmIGl0IGlzIHplcm9cblxuICAgIF9oYW5kbGVyLnJlZnJlc2hUaW1lb3V0ID0gdHlwZW9mIG9wdGlvbnMucmVmcmVzaFRpbWVvdXQgPT09ICdudW1iZXInID8gb3B0aW9ucy5yZWZyZXNoVGltZW91dCA6IF9kZWZhdWx0cy5yZWZyZXNoVGltZW91dDsgLy8gbm9ybWFsaXplIGVsZW1lbnRzXG5cbiAgICBfbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgIGlmICh0eXBlb2YgX2hhbmRsZXJbbWV0aG9kXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgX2hhbmRsZXJbbWV0aG9kXSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX2hhbmRsZXJbbWV0aG9kXSk7XG4gICAgICB9XG4gICAgfSk7IC8vIGF0dGFjaCBldmVudHMgbGF6aWx5XG5cblxuICAgIGlmICghX3NoYXJlZC5ldmVudHMpIHtcbiAgICAgIF9zaGFyZWQuZXZlbnRzID0gX3NldHVwRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgX2hhbmRsZXIuY29udGFpbnMgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICByZXR1cm4gX2hhbmRsZXIudHJpZ2dlckVsZW1lbnQuY29udGFpbnModGFyZ2V0KTtcbiAgICB9O1xuXG4gICAgX2hhbmRsZXIuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHN0b3AgcGVuZGluZyBhbnkgcGVuZGluZyBjYWxsYmFja3NcbiAgICAgIGNsZWFyVGltZW91dChfc2hhcmVkLnRpbWVvdXQpOyAvLyByZW1vdmUgaGFuZGxlciBmcm9tIHNoYXJlZCBzdGF0ZVxuXG4gICAgICB2YXIgb2Zmc2V0ID0gX3NoYXJlZC5oYW5kbGVycy5pbmRleE9mKF9oYW5kbGVyKTtcblxuICAgICAgX3NoYXJlZC5oYW5kbGVycy5zcGxpY2Uob2Zmc2V0LCAxKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIF9oYW5kbGVyO1xuICB9KTtcblxuICB2YXIgaW5kZXggPSB7XG4gICAgc2V0UGFzc2l2ZU1vZGU6IGZ1bmN0aW9uIHNldFBhc3NpdmVNb2RlKGlzUGFzc2l2ZSkge1xuICAgICAgX3NoYXJlZC5wYXNzaXZlID0gaXNQYXNzaXZlO1xuICAgIH0sXG5cbiAgICBzZXRQb2ludGVyRXZlbnRzTW9kZTogZnVuY3Rpb24gc2V0UG9pbnRlckV2ZW50c01vZGUoaXNFbmFibGVkKSB7XG4gICAgICBfc2hhcmVkLnBvaW50ZXJFdmVudHNFbmFibGVkID0gaXNFbmFibGVkO1xuICAgIH0sXG5cbiAgICBkZXN0cm95QWxsOiBmdW5jdGlvbiBkZXN0cm95QWxsKCkge1xuICAgICAgaWYgKF9zaGFyZWQuZXZlbnRzKSB7XG4gICAgICAgIF9zaGFyZWQuZXZlbnRzLmRlc3Ryb3koKTtcblxuICAgICAgICBfc2hhcmVkLmV2ZW50cyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIF9zaGFyZWQuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaCkge1xuICAgICAgICBoLmRlc3Ryb3koKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHtcbiAgICAgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXG4gICAgICB2YXIgaGFuZGxlciA9IF9zZXR1cEhhbmRsZXIob3B0aW9ucyk7XG5cbiAgICAgIF9zaGFyZWQuaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcblxuICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfSxcblxuICAgIC8vIGV4cG9ydCB1dGlscyBmb3IgdGVzdGluZ1xuICAgIF86IHtcbiAgICAgIHNldHVwSGFuZGxlcjogX3NldHVwSGFuZGxlcixcbiAgICAgIHNldHVwRXZlbnRzOiBfc2V0dXBFdmVudHMsXG4gICAgICBzZXR1cERPTTogX3B0ci5zZXR1cERPTSxcbiAgICAgIG9uUmVzZXQ6IF9wdHIub25SZXNldCxcbiAgICAgIHVwZGF0ZTogX3B0ci51cGRhdGVcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGluZGV4O1xuXG59KSk7XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChmYWN0b3J5KChnbG9iYWwuV0hBVFdHRmV0Y2ggPSB7fSkpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90b3R5cGUtYnVpbHRpbnMgKi9cbiAgdmFyIGcgPVxuICAgICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcykgfHxcbiAgICAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYpIHx8XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbCkgfHxcbiAgICB7fTtcblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIGcsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIGcgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjpcbiAgICAgICdGaWxlUmVhZGVyJyBpbiBnICYmXG4gICAgICAnQmxvYicgaW4gZyAmJlxuICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG5ldyBCbG9iKCk7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIGcsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gZ1xuICB9O1xuXG4gIGZ1bmN0aW9uIGlzRGF0YVZpZXcob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG4gIH1cblxuICBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlcikge1xuICAgIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAgICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICAgIF07XG5cbiAgICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPVxuICAgICAgQXJyYXlCdWZmZXIuaXNWaWV3IHx8XG4gICAgICBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKTtcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXl9gfH4hXS9pLnRlc3QobmFtZSkgfHwgbmFtZSA9PT0gJycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG4gIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZXJhdG9yXG4gIH1cblxuICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLm1hcCA9IHt9O1xuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIGlmIChoZWFkZXIubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIZWFkZXJzIGNvbnN0cnVjdG9yOiBleHBlY3RlZCBuYW1lL3ZhbHVlIHBhaXIgdG8gYmUgbGVuZ3RoIDIsIGZvdW5kJyArIGhlYWRlci5sZW5ndGgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdO1xuICAgIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSArICcsICcgKyB2YWx1ZSA6IHZhbHVlO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV07XG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgIHJldHVybiB0aGlzLmhhcyhuYW1lKSA/IHRoaXMubWFwW25hbWVdIDogbnVsbFxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgaXRlbXMucHVzaChuYW1lKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW107XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpdGVtcy5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5fbm9Cb2R5KSByZXR1cm5cbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcik7XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKTtcbiAgICB2YXIgbWF0Y2ggPSAvY2hhcnNldD0oW0EtWmEtejAtOV8tXSspLy5leGVjKGJsb2IudHlwZSk7XG4gICAgdmFyIGVuY29kaW5nID0gbWF0Y2ggPyBtYXRjaFsxXSA6ICd1dGYtOCc7XG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYiwgZW5jb2RpbmcpO1xuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQXJyYXlCdWZmZXJBc1RleHQoYnVmKSB7XG4gICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpO1xuICAgIHZhciBjaGFycyA9IG5ldyBBcnJheSh2aWV3Lmxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oJycpXG4gIH1cblxuICBmdW5jdGlvbiBidWZmZXJDbG9uZShidWYpIHtcbiAgICBpZiAoYnVmLnNsaWNlKSB7XG4gICAgICByZXR1cm4gYnVmLnNsaWNlKDApXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmLmJ5dGVMZW5ndGgpO1xuICAgICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSk7XG4gICAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBCb2R5KCkge1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgLypcbiAgICAgICAgZmV0Y2gtbW9jayB3cmFwcyB0aGUgUmVzcG9uc2Ugb2JqZWN0IGluIGFuIEVTNiBQcm94eSB0b1xuICAgICAgICBwcm92aWRlIHVzZWZ1bCB0ZXN0IGhhcm5lc3MgZmVhdHVyZXMgc3VjaCBhcyBmbHVzaC4gSG93ZXZlciwgb25cbiAgICAgICAgRVM1IGJyb3dzZXJzIHdpdGhvdXQgZmV0Y2ggb3IgUHJveHkgc3VwcG9ydCBwb2xseWZpbGxzIG11c3QgYmUgdXNlZDtcbiAgICAgICAgdGhlIHByb3h5LXBvbGx5ZmlsbCBpcyB1bmFibGUgdG8gcHJveHkgYW4gYXR0cmlidXRlIHVubGVzcyBpdCBleGlzdHNcbiAgICAgICAgb24gdGhlIG9iamVjdCBiZWZvcmUgdGhlIFByb3h5IGlzIGNyZWF0ZWQuIFRoaXMgY2hhbmdlIGVuc3VyZXNcbiAgICAgICAgUmVzcG9uc2UuYm9keVVzZWQgZXhpc3RzIG9uIHRoZSBpbnN0YW5jZSwgd2hpbGUgbWFpbnRhaW5pbmcgdGhlXG4gICAgICAgIHNlbWFudGljIG9mIHNldHRpbmcgUmVxdWVzdC5ib2R5VXNlZCBpbiB0aGUgY29uc3RydWN0b3IgYmVmb3JlXG4gICAgICAgIF9pbml0Qm9keSBpcyBjYWxsZWQuXG4gICAgICAqL1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtYXNzaWduXG4gICAgICB0aGlzLmJvZHlVc2VkID0gdGhpcy5ib2R5VXNlZDtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keTtcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ub0JvZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5O1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIHN1cHBvcnQuYmxvYiAmJiBpc0RhdGFWaWV3KGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkuYnVmZmVyKTtcbiAgICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChib2R5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgIHZhciBpc0NvbnN1bWVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICAgIGlmIChpc0NvbnN1bWVkKSB7XG4gICAgICAgICAgcmV0dXJuIGlzQ29uc3VtZWRcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodGhpcy5fYm9keUFycmF5QnVmZmVyKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnVmZmVyLnNsaWNlKFxuICAgICAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnl0ZU9mZnNldCxcbiAgICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ5dGVPZmZzZXQgKyB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnl0ZUxlbmd0aFxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBhcyBBcnJheUJ1ZmZlcicpXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0NPTk5FQ1QnLCAnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUEFUQ0gnLCAnUE9TVCcsICdQVVQnLCAnVFJBQ0UnXTtcblxuICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKTtcbiAgICByZXR1cm4gbWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEgPyB1cGNhc2VkIDogbWV0aG9kXG4gIH1cblxuICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlcXVlc3QpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQbGVhc2UgdXNlIHRoZSBcIm5ld1wiIG9wZXJhdG9yLCB0aGlzIERPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLicpXG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHk7XG5cbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsO1xuICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzO1xuICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycyk7XG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZDtcbiAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGU7XG4gICAgICB0aGlzLnNpZ25hbCA9IGlucHV0LnNpZ25hbDtcbiAgICAgIGlmICghYm9keSAmJiBpbnB1dC5fYm9keUluaXQgIT0gbnVsbCkge1xuICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0O1xuICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gU3RyaW5nKGlucHV0KTtcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdzYW1lLW9yaWdpbic7XG4gICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpO1xuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJyk7XG4gICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsO1xuICAgIHRoaXMuc2lnbmFsID0gb3B0aW9ucy5zaWduYWwgfHwgdGhpcy5zaWduYWwgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgnQWJvcnRDb250cm9sbGVyJyBpbiBnKSB7XG4gICAgICAgIHZhciBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICByZXR1cm4gY3RybC5zaWduYWw7XG4gICAgICB9XG4gICAgfSgpKTtcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbDtcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSk7XG5cbiAgICBpZiAodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpIHtcbiAgICAgIGlmIChvcHRpb25zLmNhY2hlID09PSAnbm8tc3RvcmUnIHx8IG9wdGlvbnMuY2FjaGUgPT09ICduby1jYWNoZScpIHtcbiAgICAgICAgLy8gU2VhcmNoIGZvciBhICdfJyBwYXJhbWV0ZXIgaW4gdGhlIHF1ZXJ5IHN0cmluZ1xuICAgICAgICB2YXIgcmVQYXJhbVNlYXJjaCA9IC8oWz8mXSlfPVteJl0qLztcbiAgICAgICAgaWYgKHJlUGFyYW1TZWFyY2gudGVzdCh0aGlzLnVybCkpIHtcbiAgICAgICAgICAvLyBJZiBpdCBhbHJlYWR5IGV4aXN0cyB0aGVuIHNldCB0aGUgdmFsdWUgd2l0aCB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgICAgdGhpcy51cmwgPSB0aGlzLnVybC5yZXBsYWNlKHJlUGFyYW1TZWFyY2gsICckMV89JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGEgbmV3ICdfJyBwYXJhbWV0ZXIgdG8gdGhlIGVuZCB3aXRoIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgICAgICB2YXIgcmVRdWVyeVN0cmluZyA9IC9cXD8vO1xuICAgICAgICAgIHRoaXMudXJsICs9IChyZVF1ZXJ5U3RyaW5nLnRlc3QodGhpcy51cmwpID8gJyYnIDogJz8nKSArICdfPScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHtib2R5OiB0aGlzLl9ib2R5SW5pdH0pXG4gIH07XG5cbiAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGJvZHlcbiAgICAgIC50cmltKClcbiAgICAgIC5zcGxpdCgnJicpXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpO1xuICAgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgcmV0dXJuIGZvcm1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIC8vIFJlcGxhY2UgaW5zdGFuY2VzIG9mIFxcclxcbiBhbmQgXFxuIGZvbGxvd2VkIGJ5IGF0IGxlYXN0IG9uZSBzcGFjZSBvciBob3Jpem9udGFsIHRhYiB3aXRoIGEgc3BhY2VcbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMCNzZWN0aW9uLTMuMlxuICAgIHZhciBwcmVQcm9jZXNzZWRIZWFkZXJzID0gcmF3SGVhZGVycy5yZXBsYWNlKC9cXHI/XFxuW1xcdCBdKy9nLCAnICcpO1xuICAgIC8vIEF2b2lkaW5nIHNwbGl0IHZpYSByZWdleCB0byB3b3JrIGFyb3VuZCBhIGNvbW1vbiBJRTExIGJ1ZyB3aXRoIHRoZSBjb3JlLWpzIDMuNi4wIHJlZ2V4IHBvbHlmaWxsXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dpdGh1Yi9mZXRjaC9pc3N1ZXMvNzQ4XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzc1MVxuICAgIHByZVByb2Nlc3NlZEhlYWRlcnNcbiAgICAgIC5zcGxpdCgnXFxyJylcbiAgICAgIC5tYXAoZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHJldHVybiBoZWFkZXIuaW5kZXhPZignXFxuJykgPT09IDAgPyBoZWFkZXIuc3Vic3RyKDEsIGhlYWRlci5sZW5ndGgpIDogaGVhZGVyXG4gICAgICB9KVxuICAgICAgLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6Jyk7XG4gICAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKCk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1Jlc3BvbnNlICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIHJldHVybiBoZWFkZXJzXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlc3BvbnNlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIHVzZSB0aGUgXCJuZXdcIiBvcGVyYXRvciwgdGhpcyBET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4nKVxuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCc7XG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1cyA9PT0gdW5kZWZpbmVkID8gMjAwIDogb3B0aW9ucy5zdGF0dXM7XG4gICAgaWYgKHRoaXMuc3RhdHVzIDwgMjAwIHx8IHRoaXMuc3RhdHVzID4gNTk5KSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Jlc3BvbnNlJzogVGhlIHN0YXR1cyBwcm92aWRlZCAoMCkgaXMgb3V0c2lkZSB0aGUgcmFuZ2UgWzIwMCwgNTk5XS5cIilcbiAgICB9XG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMDtcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHQgPT09IHVuZGVmaW5lZCA/ICcnIDogJycgKyBvcHRpb25zLnN0YXR1c1RleHQ7XG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKTtcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnO1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KTtcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpO1xuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH07XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMjAwLCBzdGF0dXNUZXh0OiAnJ30pO1xuICAgIHJlc3BvbnNlLnN0YXR1cyA9IDA7XG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcic7XG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH07XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdO1xuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH07XG5cbiAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBnLkRPTUV4Y2VwdGlvbjtcbiAgdHJ5IHtcbiAgICBuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgIHZhciBlcnJvciA9IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIH07XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICAgIGV4cG9ydHMuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGV4cG9ydHMuRE9NRXhjZXB0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2goaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KTtcblxuICAgICAgaWYgKHJlcXVlc3Quc2lnbmFsICYmIHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIGZ1bmN0aW9uIGFib3J0WGhyKCkge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgICB9O1xuICAgICAgICAvLyBUaGlzIGNoZWNrIGlmIHNwZWNpZmljYWxseSBmb3Igd2hlbiBhIHVzZXIgZmV0Y2hlcyBhIGZpbGUgbG9jYWxseSBmcm9tIHRoZSBmaWxlIHN5c3RlbVxuICAgICAgICAvLyBPbmx5IGlmIHRoZSBzdGF0dXMgaXMgb3V0IG9mIGEgbm9ybWFsIHJhbmdlXG4gICAgICAgIGlmIChyZXF1ZXN0LnVybC5zdGFydHNXaXRoKCdmaWxlOi8vJykgJiYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+IDU5OSkpIHtcbiAgICAgICAgICBvcHRpb25zLnN0YXR1cyA9IDIwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zLnN0YXR1cyA9IHhoci5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy51cmwgPSAncmVzcG9uc2VVUkwnIGluIHhociA/IHhoci5yZXNwb25zZVVSTCA6IG9wdGlvbnMuaGVhZGVycy5nZXQoJ1gtUmVxdWVzdC1VUkwnKTtcbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgdGltZWQgb3V0JykpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGZpeFVybCh1cmwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdXJsID09PSAnJyAmJiBnLmxvY2F0aW9uLmhyZWYgPyBnLmxvY2F0aW9uLmhyZWYgOiB1cmxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiB1cmxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgZml4VXJsKHJlcXVlc3QudXJsKSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIpIHtcbiAgICAgICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc3VwcG9ydC5hcnJheUJ1ZmZlclxuICAgICAgICApIHtcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5pdCAmJiB0eXBlb2YgaW5pdC5oZWFkZXJzID09PSAnb2JqZWN0JyAmJiAhKGluaXQuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgfHwgKGcuSGVhZGVycyAmJiBpbml0LmhlYWRlcnMgaW5zdGFuY2VvZiBnLkhlYWRlcnMpKSkge1xuICAgICAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaW5pdC5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICBuYW1lcy5wdXNoKG5vcm1hbGl6ZU5hbWUobmFtZSkpO1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIG5vcm1hbGl6ZVZhbHVlKGluaXQuaGVhZGVyc1tuYW1lXSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgICBpZiAobmFtZXMuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVxdWVzdC5zaWduYWwpIHtcbiAgICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocik7XG5cbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIERPTkUgKHN1Y2Nlc3Mgb3IgZmFpbHVyZSlcbiAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdCk7XG4gICAgfSlcbiAgfVxuXG4gIGZldGNoLnBvbHlmaWxsID0gdHJ1ZTtcblxuICBpZiAoIWcuZmV0Y2gpIHtcbiAgICBnLmZldGNoID0gZmV0Y2g7XG4gICAgZy5IZWFkZXJzID0gSGVhZGVycztcbiAgICBnLlJlcXVlc3QgPSBSZXF1ZXN0O1xuICAgIGcuUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgfVxuXG4gIGV4cG9ydHMuSGVhZGVycyA9IEhlYWRlcnM7XG4gIGV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7XG4gIGV4cG9ydHMuUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgZXhwb3J0cy5mZXRjaCA9IGZldGNoO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4iXX0=
